[
    {
        "commit_message": "enable k8s huge page feature\n\n- record k8s labels for nodes in puppet\n- enable k8s huge page feature for worker w/o openstack compute label.\n  and disable otherwise.\n- automatically defaults hugepages for worker nodes with openstack\n  compute labels, changes will be applied on the unlock\n- do not allocate any huge pages by defaults for worker nodes without\n  the openstack compute labels and vswitch_type is none.\n  is assigned\n- when changing vswitch type,trigger update grub mem config\n\nStory: 2004763\nTask: 28880\n\nChange-Id: I7636eeb4773fa3fe32671a6bb2870c2e1074a5fa\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add missed kernel params for lowlatency kernel\n\nAdd missed kernel options that depend on realtime kernel:\n* skew_tick\n* nmi_watchdog\n* softlockup\n\nTaken from kickstart.cfg and moving to runtime puppet manifest\n\nNote:\n* nohz_full is already handled under cpu_options\n\nTask: 48372\nStory: 2010731\n\nTest plan:\nPEND - AIO-SX: iso install\nPEND - AIO-SX: system host-lock controller-0\n               system host-kernel-modify controller-0 lowlatency\n               system host-kernel-show\n               system host-unlock controller-0\n\nConfirm kernel parameterss in /boot/1/kernel.env\n\nChange-Id: I39db135edd3967c58662fc4a039e5321c633ba35\nSigned-off-by: Kyale, Eliud <Eliud.Kyale@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Set ice-gnss thread prio in puppet\n\nProblem: The ice-gnss thread is not spawned until ptp services are\nconfigured, so on first time setup, the affine-process.sh script is not\nable to set the priority of the thread because it runs before puppet.\n\nThis change adds a task to the puppet manifest to also set the niceness\nof the ice-gnss threads in order to handle the case of first time setup.\nSubsequent lock/unlocks will handled earlier in the startup process by\naffine-process.sh.\n\nSee https://review.opendev.org/c/starlingx/utilities/+/839795 for the\nearlier change to affine-process.sh.\n\nTesting:\n\nPass: Thread niceness set correctly on first time setup on AIO-SX.\nNiceness is also correctly set on subsequent lock/unlocks. Switching\nnode from ptp to ntp and back also results in correct priority.\n\nCloses-Bug: 1970776\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I1c9c0ffb6cd0dad7b77232522832b1645256dcfd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet configuration for audit service parameter\n\nAdd puppet configuration for the auditd grub parameter, \"audit\".\nPuppet configuration will be used to update the kernel parameter\nwhen is being set using the service parameter mechanism.\n\nStory: 2008849\nTask: 43365\n\nChange-Id: I813ab5be84f052572dab133e0d066a0c118e652e\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Clean up change_apiserver_parameters in kubernetes puppet\n\nMove excess puppet execs into the template already used in the class\n\nStory: 2006711\nTask: 38944\n\nChange-Id: Iad54064fa4056f9f30406646c95623a1e7c25bec\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Exempt keystone sysinv user from failed auth lockout\n\nKeystone sysinv user is heavily used by multiple services especially\nin DC system. Particularly it is used by DC subcloud as the user to\npull docker images from Central Cloud. This could cause the sysinv user\nto be locked out due to multiple failed authentication during certain\noperations such as subcloud rehoming, where the rehomed subcloud is\nusing the password from the original DC to access the destination DC's\ncentral registry before changing to use the password of the destination\nDC.\n\nThis update exempts keytone sysinv user from failed auth lockout by\nsetting sysinv's 'ignore_lockout_failure_attempts' option to true\nduring controller unlock.\n\nTest Plan:\nPASS: Deploy a DX system. After first controller is unlocked, verified\n      'ignore_lockout_failure_attempts' option is set to true for sysinv\n      user in keystone Database.\n\nCloses-Bug: 1949117\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ia0ed6b491123d8a2fb38e32ac56db74dfdb17473\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure sriovdp is deleted after dev bindings\n\nThis change replaces the daemonset rollout restart command with a more\nspcific pod delete command that only runs if there is an\nsriov-device-plugin pod present on the node. Using the pod delete\ncommand ensures that an existing device-plugin pod is terminated before\nthe worker manifest completes. The rollout restart command did not\nensure that the pod was terminated before the manifest completed and\ncould allow user pods to be assigned incorrect VFs if they started up\nbefore the device-plugin pod terminated.\n\nThis addresses an issue where pods restarted by k8s-pod-recovery could\nbe assigned to incorrect VFs if they were started while the\nsriov-device-plugin was shutting down. Waiting for the device-plugin\nto completely terminate before proceeding with pod-recovery ensures that\nthe device-plugin will have an accurate view of all device bindings and\ncan allocate VFs correctly.\n\nCloses-Bug: 1900736\n\nChange-Id: I30fd602208d14ac887d5417fd87f27f23050f670\nCo-Authored-By: Steven Webster <steven.webster@windriver.com>\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add active_alarm audit interval value\n\nAdding the default interval value (1hr) for the active_alarm audit\nthread.\n\nStory: 2008946\nTask: 42851\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: I75ee33aee847a690353a30bc1f8348d61d529c0f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace containerd Sysinv credentials with mtce credentials\n\nSysinv credentials in the containerd config allowed kubernetes to\ndeploy images without pull secrets. We replace the credentials with\n\"mtce\" user's credentials. The \"mtce\" user is treated as a public\nuser and is not allowed to deploy non-public images.\n\nCloses-Bug: 1894930\nDepends-On: https://review.opendev.org/756557\n\nChange-Id: I4a33c6aba50d98d42ef91c75bfc9c148d4ebd9fd\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"AIO System Controller CPU manager changes for kubelet\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create Calico host endpoint and policies\n\n* Create Calico host endpoints and policies for host protection.\n  Only expose some ports on OAM for platform services, and block\n  other incoming traffic.\n\nPassed tests:\n* Fresh build\n* Deployment(simplex, duplex, multi-node)\n* System-level tests\n  * manually check iptable rules\n  * use the utility of uc to test exposed tcp ports and a few\n    non-exposed tcp ports.\n  * create vms\n\nStory: 2005066\nTask: 29634\n\nChange-Id: Ibe012583225a15e7d3881cc2d520eadfc170a75c\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update containerd registry.local configuration\n\nAs part of bootstrap, k8s.gcr.io/pause:3.2 is pulled via crictl from\nregistry.local with explicitly provided credentials. If this image is\nmanually removed or removed due to garbage collection, containerd is\nunable to pull it from registry.local.\n\nProvide a complete registry.local configuration by:\n - Completing the configuration values for the TLS configuration.\n - Adding the auth setting for the auth configuration.\n\nChange-Id: I52529bb42cda64612a1c202b250db9135241ccc0\nPartial-Bug: #1881353\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rework advertise address in apiserver-change-param\n\nThe current implementation assumes that /etc/kubernetes/kubeadm.yaml is\nalways present on the system, which isn't true when the active host\nisn't controller-0.\n\nThe new implementation will store the original advertise-address value\nand replace it on kube-apiserver config as soon as it gets reset during\nkubeadm init phase control-plane.\n\nThe downside of this approach is that kube-apiserver is initially\nstarted with the default advertise address value (default network\ninterface) to then get updated with the previous correct value,\nrestarting kube-apiserver once more.\n\nTest Plan: Verify advertise-address is not affected during apiserver\nchange params\n\nNote: advertise-address is found in\n`/etc/kubernetes/manifests/kube-apiserver.yaml`\n\nPASS: Verify that modifying and applying kube-apiserver oidc parameters\ndoesn't affect advertise-address\nPASS: Verify upgrade command `system upgrade-activate` doesn't affect\nadvertise-address\nPASS: Verify `/etc/kubernetes/manifests/kube-apiserver.yaml` changes after\napiserver-change-params are consistent\nPASS: Verify ConfigMap kube-system kubeadm-config changes are consistent\nafter apiserver-change-params are consistent after\napiserver-change-params\nPASS: IPv6 - Verify that modifying kube-apiserver params doesn't affect\nadvertise-address\n\nRegression:\n\nPASS: Verify system install\nPASS: Verify upgrade completes successfully\nPASS: Verify backup and restore completes successfully\n\nNotes: When possible, the above tests were executed in both AIO-SX and\nStandard systems, both controllers.\n\nCloses-Bug: 1900153\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\nChange-Id: I95c5cc277fc343c383f9e4b3942e13f2009e1ab6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Changing permissions for conversion folder\n\nAdding writing permissions to '/opt/conversion' mountpoint\nso openstack image conversion can happen there.\n\nChange-Id: Id1a91db6570dcbed3b8068e79e72f5bb800f24ad\nPartial-bug: 1819688\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add SM support for the DC admin network\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create the OAM firewall with the new implementation.\n\nThis change moves the OAM firewall to be configured with the same\nsolution used for the other platform networks. The necessary yaml\nconfig data is generated by sysinv.puppet.platform_firewall.\n\nDuring tests, it was observed that the bring-up manifest did not\nupdate the firewall config as it requires kubectl API to be available\nat the moment of execution. When this happens the file\n.platform_firewall_config_required is created in /etc/platform/\nto trigger sysinv to apply the configuration using\nplatform::firewall::runtime.\n\nTest Plan:\n[PASS] Modify configured firewalls with kubectl edit and execute\n        lock/unlock, after bring-up, check they were reset to the\n        original config\n[PASS] Erase a HostEndpoint and execute lock/unlock, bring-up check\n        the HostEndpoint was reset to the original config.\n[PASS] Erase a GlobalNetworkPolicy and execute lock/unlock, bring-up\n        check the GlobalNetworkPolicy was reset to the original config.\n\nStory: 2010591\nTask: 48278\n\nChange-Id: I6ff22310fe1c49c9a3e53d616b98879ee5469b6e\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Update docker-distribution script to docker-registry\n\nOn Debian the correct name is docker-registry.\nAdding a condition so it calls the docker-registry service\nwhen on Debian. Defaults to docker-distribution for CentOS.\n\nTest Plan:\nCentOS/Debian:\nPASS: Run ansible\nPASS: Controller unlocked/enabled/available\n\nStory: 2009101\nTask: 44873\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I42b646bc582944c5b6143d083b1e6fba9bb7811c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Changing tiller pod networking settings to improve swact time\"\n\nThis reverts commit 4802f1d96a1217124e39a057fd7a05e22177b81c.\nThe change made is no longer necessary due to commit 9a4b6b6a.\nThe playbookconfig code was moved to the ansible-playbooks repo\nand will be removed there.\n\nConflicts:\n\tplaybookconfig/centos/build_srpm.data\n\tplaybookconfig/playbookconfig/playbooks/bootstrap/roles/bringup-essential-services/tasks/bringup_helm.yml\n\tpuppet-manifests/centos/build_srpm.data\n\tpuppet-manifests/src/modules/platform/manifests/helm.pp\n\nChange-Id: I20a38c1ad882bebb6e1208f43d6582bc399e9e87\nRelated-Bug: 1817941\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"check value of kubernetes host labels\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Restart containerd after CA certificate is installed\"\n\nThis reverts commit b88aa4ed31267d046673d39e487e83552a7806f1.\n\nThe commit is being reverted because it causes containerd and\ndocker to continuously restart when the load is installed.\n\nChange-Id: Id5cc89405f56c9b4886afa584074cb579828a076\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix domain setting for Barbican during bootstrap\n\nBarbican returns \"503 Service Unavailable\" during bootstrap\nphase of StarlingX. This happens because Keystone auth token\nlacks domain details for Barbican. Need to explicitly specify\nproject_domain_name and user_domain_name in Barbican config.\n\nChange-Id: I4bf6b275c1eb271b62a2e7a1bc72c049f193afc4\nCloses-bug: 1834670\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Standardize makefiles for puppet-modules-wrs\n\nThe puppet-modules-wrs is formed by several subcomponents, in all\nof them the same changes were applied:\n\n  - Create a makefile with a install target.\n  - Remove license file from build_srpm.data as is not needed.\n  - Update target in specfile\n  - Change autosetup to setup in specfile, this was bug in the spec\n    files.\n\nTesting:\n  - Verification on correct install paths.\n  - config_controller complete on simplex configuration.\n\nChange-Id: I1512eb0c3034ffa2d57d098dab9800bdaba5b48d\nStory: 2004043\nTask: 27552\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet CPU manager options via host labels\n\nUse two host labels to configure kubelet CPU and topology manager\noptions.\n\nUpdate the kubelet options based on the values provided via sysinv. Add\nthe TopologyManager feature gate to enable the TopologyManager feature.\n\nStory: 2006565\nTask: 37222\nDepends-On: https://review.opendev.org/689609\nChange-Id: Ia1de3558209d1b0f0e50931dffcd8712a1aa1fa9\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support shared LDAP share in region config\n\nThis patch enhanced region configuration to support LDAP as shared\nservice optionally for both IPv4 and IPV6 management network.\nBy sharing LDAP service, management of system users can be\ncentralized at primary region.\n\nA LDAP_SERVICE_URL=<[ldap://]ip_address[:port]> can be specified in the\n[SHARED_SERVICES] section of region configuration file, the secondary\nregions will then be setup and share the LDAP service running at the\nspecified URL of the primary region. If no LDAP_SERVICE_URL is\nspecified in the [SHARED_SERVICES] section, the secondary regions will\nsetup and use local LDAP service running at the region's controllers.\n\nDecouple NSLCD from the open-ldap SM service and manage it by PMOND\ninstead. This is needed because in the Shared LDAP case, we deprovision\nthe open-ldap service on the Secondary Region which renders NSLCD\nunmanaged.\n\nAdditionally, we allow the Secondary Region or Sub Clouds to bind\nanonymously, but still need to support LDAP read operations in these\nregions such as ldapfinger or lsldap. For this purpose, the ldapscripts\nruntime library has been modified to allow anonymous binds during LDAP\nsearch operations.\n\nChange-Id: Ic9f4d157c0eab02a8dabbdae28d508d4aef05fa2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sssd puppet implementation for sssd.conf\n\nThis commit updates the sssd puppet infrastructure implementation\nfor creating an sssd configuration. Support has been added for nss\nand pam service configuration. Service configuration parameters for\nnss, pam and the local domain have also been updated.\n\nTest Plan for Debian:\nPASS: AIO-SX system bootstrap, unlock are successful.\nPASS: sssd service starts successfully.\nPASS: Add new user successfully.\nPASS: The new user gets cached in /etc/passwd.\nPASS: New user can ssh successfully from remote server using sssd.\n\nTest Plan for CentOS:\nPASS: AIO-SX system installs successfully.\nPASS: Add ldap user and user search are successful.\n\nStory: 2009834\nTask: 46013\nDepends-On: https://review.opendev.org/c/starlingx/config/+/853194\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ia047849be99f6d66f18db6766ee2b64b136288fd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "switch to use new control-plane label\n\nThe node-role.kubernetes.io/master= label is being deprecated and is\nbeing replaced by node-role.kubernetes.io/control-plane=\n\nSimilarly the node-role.kubernetes.io/master:NoSchedule taint is being\nreplaced by node-role.kubernetes.io/control-plane:NoSchedule\n\nWe need to update the code appropriately.\n\nFor the case where we're removing the taint that was added by kubeadm\nI left the code that removed the original \"master\" taint and added\ncode to remove the new \"control-plane\" taint.  That way it'll work\nno matter which one was originally added.\n\nTest Plan:\nPASS: Install with K8s 1.23 on AIO-SX, ensure \"master\" taint has been removed.\nPASS: Install with K8s 1.24 on AIO-SX, ensure \"control-plane\" taint has\nbeen removed.\n\nStory: 2010301\nTask: 46554\n\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: Ied6345358e70c422faa51eec035ea8411062436d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upgrade k8s certificates during SX-DX migration\n\nIt was seen that during a SX-DX migration, k8s certificate is missing\ncontroller-0's cluster host IP in SANs. This is making problems on\ncontroller-0 after it unlocks as duplex.\n\nThis change updates platform::kubernetes::certsans::runtime to add\ncontroller-0 and controller-1 cluster host IP in the config file\nused when regenerating apiserver cert files.\n\nTest Plan:\nPASS: run a migration on AIO-SX standalone and AIO-SX subcloud.\nPASS: Swact to make controller-1 as active, modify OAM IP,\ncheck apiserver.crt on both controllers, and verify cluster host IP for\nboth controllers are added in SANs.\n\nCloses-bug: 1970443\n\nSigned-off-by: Enzo Candotti <enzo.candotti@windriver.com>\nChange-Id: I2e225df2c402f4439da737ade8a5a0e57b96f673\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Upgrade k8s certificates during SX-DX migration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Make Heartbeat Failure Action Configurable\n\nThe current maintenance heartbeat failure action handling is to Fail\nand Gracefully Recover the host. This means that maintenance will\nensure that a heartbeat failed host is rebooted/reset before it is\nrecovered but will avoid rebooting it a second time if its recovered\nuptime indicates that it has already rebooted.\n\nThis update expands that single action handling behavior to support\nthree new actions. In doing so it adds a new configuration service\nparameter called heartbeat_failure_action. The customer can configure\nthis new parameter with any one of the following 4 actions in order of\ndecreasing impact.\n\n   fail - Host is failed and gracefuly recovered.\n        - Current Network specific alarms continue to be raised/cleared.\n          Note: Prior to this update this was standard system behavior.\ndegrade - Host is only degraded while it is failing heartbeat.\n        - Current Network specific alarms continue to be raised/cleared.\n        - heartbeat degrade reason is cleared as are the alarms when\n          heartbeat responses resume.\n  alarm - The only indication of a heartbeat failure is by alarm.\n        - Same set of alarms as in above action cases\n        - Only in this case no degrade, no failure, no reboot/reset\n   none - Heartbeat is disabled ; no multicase heartbeat message is sent.\n        - All existing heartbeat alarms are cleared.\n        - The heartbeat soak as part of the enable sequence is bypassed.\n\nThe selected action is a system wide setting.\nThe selected setting also applies to Multi-Node Failure Avoidance.\nThe default action is the legacy action Fail.\n\nThis update also\n\n 1. Removes redundant inservice failure alarm for MNFA case in support\n    of degrade only action. Keeping it would make that alarm handling\n    case unnecessarily complicated.\n 2. No longer used 'hbs calibration' code is removed (cleanup).\n 3. Small amount of heartbeat logging cleanup.\n\nTest Plan:\nPASS:    fail: Verify MNFA and recovery\nPASS:    fail: Verify Single Host heartbeat failure and recovery\nPASS:    fail: Verify Single Host heartbeat failure and recovery (from none)\nPASS: degrade: Verify MNFA and recovery\nPASS: degrade: Verify Single Host heartbeat failure and recovery\nPASS: degrade: Verify Single Host heartbeat failure and recovery (from alarm)\nPASS:   alarm: Verify MNFA and recovery\nPASS:   alarm: Verify Single Host heartbeat failure and recovery\nPASS:   alarm: Verify Single Host heartbeat failure and recovery (from degrade)\nPASS:    none: Verify heartbeat disable, fail ignore and no recovery\nPASS:    none: Verify Single Host heartbeat ignore and no recovery\nPASS:    none: Verify Single Host heartbeat ignode and no recovery (from fail)\nPASS: Verify action change behavior from none to alarm with active MNFA\nPASS: Verify action change behavior from alarm to degrade with active MNFA\nPASS: Verify action change behavior from degrade to none with active MNFA\nPASS: Verify action change behavior from none to fail with active MNFA\nPASS: Verify action change behavior from fail to none with active MNFA\nPASS: Verify action change behavior from degrade to fail then MNFA timeout\nPASS: Verify all heartbeat action change customer logs\nPASS: verify heartbeat stats clear over action change\nPASS: Verify LO DOR (several large labs - compute and storage systems)\nPASS: Verify recovery from failure of active controller\nPASS: Verify 3 host failure behavior with MNFA threshold at 3 (action:fail)\nPASS: Verify 2 host failure behavior with MNFA threshold at 3 (action:fail)\n\nChange-Id: I198505fb7a923cc760b12082acff1e5bac929ef2\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set preferred_lft to 0 for mgmt and nfs floating ips\n\nFor ipv6 the only way to prefer the fixed ip for\noutgoing connection is to set preferred_lft to 0 for\nthe floating ips\n\nChange-Id: I13573ac4628db1fc49146f353d7eb2c96eb1aff0\nCloses-bug: 1856064\nSigned-off-by: Paul Vaduva <Paul.Vaduva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Added classes to restart service manager and vim-webserver\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Convert calico to use non typha config\n\nCalico is meant to be configured for a < 50 node system.\nThe configuration for the > 50 node system had been mistakenly\nselected.\n\nStory: 2005198\nTask: 30499\nChange-Id: I5bd058a40b29f0a32f8d51d58054ab07faf3d85f\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configurable Host HTTP/HTTPS Port Binding\n\nIn order to avoid conflicts with containerized services\nbinding to standard HTTP (80) / HTTPS (443) port numbers,\nthe default port numbers are changed to 8080 and 8443.\nFurthermore, CLI commands are provided to allow binding\nto alternate port numbers.\n\nList of changes:\n. Add service parameters for HTTP and HTTPS port\n. Configure the lighttpd ports via puppet and use port\n  8008 for platform horizon\n. Add http port to platform.conf for the config scripts\n. Support helm repo URL update\n. Add helm-toolkit plugin for location override\n. Override Armada manifest location\n. Add installer base URL option to pxeboot-update\n  script\n. Add a patching run time class to restart patch-agent\n  when the port config is changed\n. Add a semantic check to block port config when a\n  patching operation is in progress or a host is not\n  in unlocked/enabled state\n\nCLI commands for viewing and updating port numbers are:\nsystem service-parameter-list --service http\nsystem service-parameter-modify lighttpd port http=8090\nsystem service-parameter-apply  lighttpd\n\nTests Performed:\nNon-containerized deployment installation and sanity\nAIO-DX: Sanity and Nightly automated test suite\n2+2 System: Sanity and Nightly automated test suite\n2+4+6 System: Sanity and Nightly automated test suite\n\nKubernetes deployment on VBox:\nAIO-SX: application apply and launch instance\nAIO-DX: application apply and launch instance\n2+2 System: application apply and launch instance\n\nHTTP/HTTPS port configuration\nEnable/Disable https\n\nStory: 2004642\nTask: 28592\n\nChange-Id: I65029e0c15aaf626acb56ab71e7bbde64c7e76a8\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "LLDP OVS enablement: puppet configuration\n\nThis commit introduces puppet configuration enabling LLDP to operate over\nOVS.  Specifically, separate ports flows are configured to handle LLDP\ntraffic.\n\nIn addition, we restrict the lldpd daemon from\noperating over bridge, tap, and ovs-netdev devices.\n\nStory: 2002946\nTask: 22940\n\nChange-Id: Ibadc9c082425412b5b68b02a55e8c02692de0e17\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for kube-upgrade-abort\n\nThis change is to restore the etcd snapshot during k8s\nupgrade abort.\n\nDuring k8s upgrade abort we need to drain the node, remove the\nstatic pod manifests files stop the kubelet, containerd, docker\nand etcd services, restore the etcd snapshot, restore the static pod\nmanifests, start the etcd, docker and containerd services, update the\nbindmount and start kubelet service.\n\nThe helper script 'kube-wait-control-plane-terminated.sh' is used to\nwait with a timeout for the control plane pods processes to exit after\nremoving static pod manifests files and forcibly kill the process if the\ntimeout expires.\n\nTest Plan:\nAIO-SX: Perform k8s upgrade v1.24.4 -> v1.25.3\nPASS: Create a test pod, before the etcd backup and delete the pod\nafter taking snapshot run the command \"system kube-upgrade-abort\",\nverify test pod is running after etcd is restored successfully.\nPASS: Verify kubeadm and kubelet version restored successfully to the\nfrom version after k8s upgrade abort.\nPASS: Verify static manifest are restored successfully after k8s\nupgrade abort.\nPASS: Verify all the pods are restored and running successfully.\nPASS: Verify pod networking are still working.\n\nStory: 2010565\nTask: 48070\n\nChange-Id: I2efda2c9f84346933a9b1277e95d95cd8d21c50f\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing pmon not monitoring ntp in Debian\n\nNPT service file has changed from ntpd.service in Centos to ntp.service\nin Debian.\nAlso, the pidfile changed from ntp.pid to ntpd.pid, as in Debian this is\nspecified by ntp-systemd-wrapper.\nTo not influence Centos side, a new pmon conf file was created to handle\nit on the Debian side.\n\nTest Plan:\n\nPASS: SX and DX fresh install with no alarms;\nPASS: Alarm correctly raised by pmon after kill ntp process;\nPASS: Alarm cleared after restart ntp process;\nPASS: Added servers to NTP using 'system ntp-modify' in SX and DX\n\nCloses-Bug: 1996247\nSigned-off-by: Luis Marquitti <luis.eduardoangelinimarquitti@windriver.com>\nChange-Id: Iebbff350b63f611030f2b78309ceee1d02cf18c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify the audit interval of upgrade status to 180 seconds\n\nThe audit_upgrade_status method verifies if there is a system upgrade\nrunning. If so, it takes actions based on its state. Note that the\nsystem stays in each state for a long time but the periodicity of this\naudit is 60 seconds, causing unecessary executions during each state.\n\nAfter a research, we noticed that the appropriate time interval\nfor this audit is to be executed between 180 seconds interval. This\ninterval was choosen because upgrades are not frequenty done on the\nsystem and they already take time to be executed.\n\nThis commit is a continuation of the study started at task 45616.\n\nTEST PLAN:\nPASS: rebuild the whole system into a fresh new ISO. Install,\nbootstrap, and unlock it into a system with no crashes.\nPASS: AIO-SX: verify that this audit and also all other audits are\nbeing called during their periods. This process was done analyzing the\nsysinv debug logs inside the system. From it, its possible to verify\nall the audits being called.\nPASS: follow the sysinv logs seeking for errors. No error was found.\nPASS: AIO-SX: perform a system upgrade with this new interval.\nPASS: AIO-DX: failed to perform a system upgrade with this new interval\n(was expected to fail).\n\nStory: 2010087\nTask: 46000\n\nSigned-off-by: Bruno Costa <bruno.costa@windriver.com>\nChange-Id: Ia9b1b83face84e60c879fffb420e51a666a7c40c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure ceph mon info on 2nd region compute host\n\ncompute hosts go to reboot loop after configuring nova_local\nwith remote backing. The reboot was due to nova go enabled test\nfailed. Because the ceph monitor info was not configured in\nceph.conf on the compute node, nova-compute process failed to\nstart due to error connecting to the cluster.\n\nThis update configured the ceph mon info on the compute hosts in a\nsecondary region when the cinder is configured as a shared service\nand the region has ceph backend configured. The ceph mon info is\nretrieved from the primary.\n\nChange-Id: Ie37fa1126f30bae5318377c8e1d75acc8fa04be1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Resolving \"unknown variable ensure\".\n\nWhen Hypertreading is disabled, system host-cpu-modify fails since\nensure definition is not set. At reboot phase, on Grub Audit, due\nthe lack of ensure definition, it will get a Mismatched CPUs error.\n\nAdding ensure definition made the Grub Audit phase pass with no\nerrors and the host-cpu-modify work properly.\n\nTEST PLAN:\nPASS: Change the number of Platform Cores to 4.\nPASS: Change the number of Platform Cores to 1.\n\t(get succssesfully two core minimum message).\nPASS: Check puppet logs: No error on Grub Audit.\nPASS: Check puppet logs: No error about ensure.\nPASS: Extra reboot: Not happening.\nPASS: Disable nohz successfully.\n\nBug: 2004593\n\nSigned-off-by: Rom\u00e3o Martines <romaomatheus.martinesdejesus@windriver.com>\nChange-Id: I62d55d796621e3ec4f382bcfd44d308184aa2e5a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "FEC devices enabled by default in puppet manifest\n\nIn the context of making pf-bb-config tool being launched to configure\nalso N3000 devices (https://storyboard.openstack.org/#!/story/2009036)\nthe puppet manifest relies on the 'enabled' parameter which is set via\na sysinv script based on PCI devices inventory. It was observed that if\nthis feature is available not by a fresh install but instead through a\npatch applied on the corresponding modules, it required an extra reboot\nto have the hieradata populated with that new parameter, which is unde-\nsired in installed systems.\n\nThis change makes the puppet manifest to consider the FEC devices are\nenabled by default. By doing that, the first run of the manifest after\napplying the patch won't rely on the (absent) hieradata parameter, but\nwill still trigger the launch of pf-bb-config tool to configure the FEC\ndevice. Later on, it is expected that 'enabled' parameter is added to\nhieradata and manifest can rely on that for any further configuration.\n\nNOTE: actually, this change makes puppet manifest to match the same\nbehaviour of the corresponding at database. There, 'enabled' field for\ndevices is 'True' by default.\n\nTask: 43030\nStory: 2009036\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I65d1c6cc34029b20a4777dbdafa0cddf04082206\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for subcloud admin network addition after initial install\n\nThis commit addresses a bug fix for the following scenario:\n\n1. A user installs a subcloud with the communication between\n   subcloud and system controller assigned to the\n   management network.\n\n2. The user decides they want to transition to the admin network,\n   which allows changes to the subnet information after install.\n\n3. The user locks a host, creates a platform interface for the\n   admin network, then unlocks.\n\n4. The user (after unlock) creates an address pool, admin\n   network, and assignes the network to the previously created\n   interface.\n\nBecause there is a requirement in StarlingX for the admin network\nto be able to apply subnet changes (address pool, network) at\nruntime, this scenerio causes an issue because the admin-services\nSM service-domain-member and service group are only actually\npresent in the SM database after an unlock.  In the above\nscenerio, we logically create an admin interface but only assign\nit to and 'admin' network after unlock.\n\nThis commit handles the above by ensuring the admin-services\nservice-domain-member and service-group are enabled in the case\nthat the system is a subcloud.\n\nTest Plan:\n\n1. Install a subcloud using the management network for communication\n   with a system controller. Ensure no alarms and that the\n   admin-services service group is active, with no admin-ip service\n   created.\n   Lock, create an 'admin' interface and\n   unlock.  After unlock create and apply the admin address pool\n   and network. Ensure the subcloud can be updated to use the admin\n   network via dcmanager subcloud update. Ensure that the admin-ip\n   service is enabled-active.\n\n2. Install a subcloud using the management network for communication\n   with a system controller.  Lock, create an 'admin' interface,\n   create an 'admin' address pool and network, then unlock. Ensure\n   the subcloud can be updated to use the admin network via dcmanager\n   subcloud update.\n\n3. Install a subcloud using the admin network for communication with\n   a system controller.  Ensure the subcloud can become managed,\n   online, and in-sync.\n\n4. Perform the steps 1-3 for both AIO-SX and AIO-DX.\n\nStory: 2010319\nTask: 46911\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: I692dcf4f7e8c280236d63984ffd02afbed0a3e1d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce registry logs\n\nThe logs level of the registry were increased from info level to warn\nand the access logs dropped in order to decrease the number of logs\ngenerated per minute on `/var/log/daemon.log`.\n\nPrevious registry logs would include:\n- access\n- info\n- warn\n- error\n\nThese were limited to warning and error.\n\nTest Plan: Verify amount of registry logs are reduced in a fresh install\nand after an upgrade\n\nPASS: Verify registry logs are reduced on daemon logs in a fresh\ninstall of AIO-SX\nPASS: Verify registry logs are reduced on daemon logs after upgrading an\nAIO-SX from 21.05 to 21.12\n\nStory: 2009272\nTask: 43704\nChange-Id: I06285b72d406428d82081c3ca3a895b9c0a73c40\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add use_usm parameters to dcmanager.conf\n\nAdd use_usm parameter to /etc/dcmanager/dcmanager.conf to be used\nin a switch to choose between the usm and patching/sysinv api. Once the usm is fully integrated, this parameter will be removed.\n\nTest Case:\nApply the change and restart the system controller and\nensure use_usm parameter is in /etc/dcmanager/dcmanager.conf\n\nStory: 2010676\nTask: 48530\n\nChange-Id: I3cda0617c5b38edc82668d7f508e9f4876640bc7\nSigned-off-by: Christopher Souza <Christopher.DeOliveiraSouza@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove deprecated instance_backing from sysinv code\n\ninstance_backing is no longer being used during configuration\nand so the dead code is being removed.\n\nThis has a cascade effect. Other methods and validators no longer\nare required.\n\nThis update methods have been retained, even though there is nothing\nfor them to update.\n\nChange-Id: I76b0181a2a3dd7d7d6c8d8b686dd724ab269844d\nStory: 2004764\nTask: 30119\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure etcd service critical process nice and ionice\n\nThe etcd server is a critical \"interactive\" process that requires\nlow-latency. This process has many etcd threads, each worker does\nminimal work and wakes up frequently. The threads do small amount of\nwrites to commit.\n\nThe etcd server will start exceeding heartbeat interval of 100ms and\nthe election timeout of 1000ms under load and independent disk stress,\nif not properly tuned as a critical process. This cascades into many\nfailures.\n\nThis requires io-scheduler 'cfq' to take advantage of io-nice policy\nand priority. This bumps up to best-effort/0 from best-effort/4.\n\nThis sets nice -19 from nice 0. This helps tremendously with\ninteractive processes for linux CFS (completely-fair-scheduler).\n\nWith tuned settings, under application load and additional disk stress,\nwe see a dramatic reduction of 'blocked_max' and no more kern.log\netcdserver related errors for exceeding the timeouts.\nWe see dramatic improvement to system responsiveness for kubectl,\nkube-apiserver. This prevents pods from failing when clients they\ncannot renew lease.\n\nNote that 'blocked_max' scheduler stats for this process represents\ninvoluntary wait for disk related delay, scheduling delay, etc.\n\nTesting coverage:\n- various root disk HW: RAID, NVMe, SSD, VBox\n- sanity on multiple labs: R730_1 with RAID, WFP13_14\n\nConfiguration change used in testing:\n- baseline: deadline, best-effort/4,\n- system under test: cfq, best-effort/0, nice -19\n- dd stress was single writer to root disk:\n  while true; do\n    dd if=/dev/zero of=./test.dd bs=200K count=20000 conv=fsync\n  done\n\nCompared results and observe system behaviour:\n- watch kern.log for etcserver 'took too long', and 'wal: sync'\n- watch fm alarms\n- watch kubectl pod status\n- observe performance with: iotop, schedtop, iostat\n\nTests performed:\n- DRBD resync with and without dd writer stress\n- swact with and without dd stress\n- large application apply + dd writer stress\n- launch large number of pods (eg, scale nginx with 80 pods),\n  watch systemctl status commands using strace to check for hang\n- copy very large files, create big tarballs, write mkisofs iso\n- host install\n\nCloses-Bug: 1927515\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/790098\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Ieeeba5c1375d8d99401f839c7409a9de356fda87\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update the kubernetes bind mounts based on the desired versions\n\nThis reverts commit e92359c3709a1eb9d01e8528cf3719fb45c9b042, which\nis a revert of 8218da9391fc7b02b75d554f192e62d9a2018c35.\n\nOriginally the puppet code changes were approved but we had missed a\ndependency on having Kubernetes packaged up in a versioned subdirectory.\nThat code has now merged, so it's time to bring back this commit.\n\nStory: 2008972\nTask: 42880\nChange-Id: I3f44473caf35de81e0e598f059c6fe2d5daad9b3\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ipv6 support in generation of lighttpd.conf file\n\nThe generated lighttpd.conf file only included ipv6 support\nwhen https is enabled.\nThis modification fixes the template to support ipv6 in all cases\n\nStory: 2002986\nTask: 23000\n\nChange-Id: I3551e5cfeb4d31a8fefcbd3f6f1350bb17984053\nSigned-off-by: Paul-Emile Element <Paul-Emile.Element@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added \"fm-api.log\" to remote logging file\n\nHere the file \"fm-api.log\", that contains all logs of the service\n\"fm-api\", is added to syslog-ng configuration of remote logging.\n\nPASS: Successfully deploy an AIO-SX using a image that contains this\nchange, enable remote logging, verify that the contents of the files\n\"/etc/syslog-ng/remotelogging.conf\" and \"/etc/syslog-ng/syslog-ng.conf\"\nchanged accordingly and that syslog-ng reload its configuration files\nwith no errors.\n\nStory: 2009824\nTask: 44478\n\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/828200\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I24b2604555fe523d88fc409f45e62cdc720d25ef\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Resource Monitor ; aka rmon, from the load\n\nAll rmon resource monitoring has been moved to collectd.\n\nThis update removes rmon from mtce and the load.\n\nStory: 2002823\nTask: 30045\n\nTest Plan:\nPASS: Build and install a standard system.\nPASS: Inspect mtce rpm list\nPASS: Inspect logs\nPASS: Check pmon.d\n\nDepends-On: https://review.openstack.org/#/c/643739\nChange-Id: I7572a1d0a9cf746abfba3d67352534d96f60c5a7\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Safe restart of the etcd SM service in etcd upgrade runtime class\n\nWhile upgrading the central cloud of a DC system, activation failed\nbecause there was an unexpected SWACT to controller-1. This was due\nto the etcd upgrade script. Part of this script runs the etcd\nmanifest. This triggers a reload/restart of the etcd service. As this\nis done outside of the sm, sm saw the process failure and triggered\nthe SWACT.\n\nThis commit modifies platform::etcd::upgrade::runtime puppet class\nto do a safe restart of the etcd SM service and thus, solve the\nissue.\n\nChange-Id: I3381b6976114c77ee96028d7d96a00302ad865ec\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\nCloses-Bug: 1928135\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace puppet template with shell script\n\nBased on the goal of the story 2010802, this review replaces\nthe puppet template that calls the manage-partitions script\nwith a shell script, saving time by not rendering the puppet\ntemplate, just executing the shell script.\nTests showed a time reduction of around 10%.\n\nTest plan\nPASS: AIO-SX fresh install, bootstrap and initial unlock.\nPASS: AIO-DX fresh install, bootstrap and initial unlock\n      for all nodes.\nPASS: Standard (2+2) fresh install, bootstrap and initial\n      unlock for all nodes.\nPASS: AIO-SX lock and unlock after install.\nPASS: AIO-DX lock and unlock after install.\nPASS: Standard (2+2) lock and unlock after install.\nPASS: Standard (2+2):Test manage-partitions script with\n      modify, delete and create operations on all hosts.\nPASS: SX:Test manage-partitions script with modify,\n      delete and create operations.\n\nStory: 2010802\nTask: 48595\n\nSigned-off-by: Heron Vieira <heron.vieira@windriver.com>\nChange-Id: I95847762b08d49d0fe8cf144691321489ea5b2c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller to align with helm 2.11.0\n\nAs part of helm upversion from 2.9.0 to 2.11.0\nthe tiller docker image for 2.11.0 should also\nbe updated to align with it.\n\nStory: 2002843\nTask: 26751\nDepends-On: I5afb5847204c62214689f9e246a4c9c0ddaf02b7\nChange-Id: Iba89f89c9689579703354a77cafea33705c3b35d\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set neutron dhcp host agent scheduler to host-based\n\nThe neutron network scheduler driver was set to the default dhcp\nagent weight scheduler. This update is to set it to the host-based\nscheduler.\n\nChange-Id: I9d7d62935e0c2c26f22879dd1e249ef8eeeadd5a\nCloses-bug: 1798096\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize of /var/log\n\nAdd support to modifying /var/log partition\nthrough system host-fs-modify command.\n\nTest plan:\n  PASSED: Installed ISO and resized /var/log\n    https://paste.opendev.org/show/b1gJyqtBPX6VGVTMkZx8/\n\nStory: 2010026\nTask: 45270\n\nSigned-off-by: Heron Vieira <heron.vieira@windriver.com>\nChange-Id: Id5612edf4b33002a71419876f8889161d22a2bd2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix paths in ldap puppet manifest for Debian\n\nThis change updated various paths in ldap puppet manifests\nthat are different from CentOS. It also updated the static\ncontroller yaml file so that ldap syncrepl bind successfully\nduring bootstrap.\n\nTest Plan for Debian:\nPASS: build package, build image\nPASS: system installation, bootstrap\nPASS: slapd is running after bootstrap\n\nTest Plan for CentOS:\nPASS: DX system installation, bootstrap, slapd is running\nPASS: Both hosts unlocked, slapd is running\nPASS: Host swact, slapd is running\n\nStory: 2009101\nTask: 44591\n\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/830843\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I9726b3c8420627e6616663fc76d541ed1d741f2d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Kata Container support in StarlingX\n\n1. add config for containerd\n2. switch kubernetes to use containerd as CRI.\n\nStory: 2006145\nTask: 36835\nDepends-On: https://review.opendev.org/685211\nChange-Id: I4beab0725bd069ca5394049ad898a0899ce00d1b\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Exclude bnxt_en and bnxt_re from kdump initramfs\n\nThis commit ensures that the bnxt_en and bnxt_re drivers are excluded\nfrom the kdump initramfs, because the kdump kernel's memory is limited,\nand there is a chance that including bnxt_en/bnxt_re drivers could\nre-trigger an issue similar to StarlingX bug 1957938 on Launchpad, where\nvmcore dumps did not work due to the kdump kernel running out of memory.\n\nBased on a review of dracut's code, the \"hostonly\" mode is enabled by\ndefault, and in hostonly mode all wired Ethernet adapter drivers loaded\nat the time of dracut's execution are considered for inclusion in the\ninitramfs.\n\nTo be safe, exclude these drivers from the kdump environment.\n\nTesting:\n- An ISO image is built using a monolithic incremental build procedure.\n- The ISO image is installed into a VM in low-latency All-in-One Simplex\n  mode, and the installation is bootstrapped.\n- After bootstrap, /etc/kdump.conf includes the directive to omit the\n  bnxt_en and bnxt_re drivers as well as the drivers that used to be\n  omitted.\n\nStory: 2009915\nTask: 44836\n\nDepends-On: https://review.opendev.org/c/starlingx/kernel/+/833464\n\nChange-Id: Ic600614d08614a5768195665ea19ffc8a6be02a9\nSigned-off-by: M. Vefa Bicakci <vefa.bicakci@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ssl_ca certificate install for Debian\n\nDebian CA certificate update mechanism is different from CentOS.\nThis change updated ssl_ca config puppet manifests so sysinv\nssl_ca certificate install works on Debian.\n\nTest Plan for Debian:\nPASS: package build, image build and system install\nPASS: system boostrap and ssl_ca certificate install/uninstall\n\nTest Plan for CentOS:\nPASS: system ssl_ca certificate install/uninstall\n\nStory: 2009101\nTask: 44484\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ia3187503358657084a3596e6ea7b1ac0c176a0f1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use L4 ports used in OAM firewall from system.yaml\n\nIn order to unify implementation with the other platform firewalls,\nthe hard-coded values are set to 'undef' and will be provided by\nsysinv in system.yaml\n\nThe test below validates the correct values are present in the OAM\nfirewall\n\nTest Plan:\n[PASS] Install, Lock, Unlock AIO-SX\n[PASS] Install, Lock, Unlock AIO-DX (as SystemController)\n\nStory: 2010591\nTask: 48255\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/885585\nChange-Id: Idc1f71f7ba762dc76529022acf4145db00686ec2\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: puppet-manifests: do not call grubby to edit grub.cfg\n\nThe grub.cfg file is including in OSTree images and may be signed\nas part of secure boot, as such it is not to be edited on the\ntarget. Modifications to grub.cfg can be affected by changing the\ntemplate used by LAT during image building. Runtime changes, such\nas those applied previously by tools like 'grubby' must now be\nmanaged via variable substitution in grub.cfg and using\n/boot/efi/EFI/BOOT/boot.env and /boot/{1,2}/kernel.env.\nUpdate instances of using grubby that edited grub.cfg to using\nthis alternative approach.\n\nAlternatively, use script /usr/local/bin/puppet-update-grub-env.py\nto wrapper grub-editenv to edit grub variable kernel_params in\n/boot/efi/EFI/BOOT/boot.env and kernel in /boot/{1,2}/kernel.env\n\n...\n$ puppet-update-grub-env.py --help\n\nEdit kernel params and set which kernel to boot\n\noptional arguments:\n  -h, --help            show this help message and exit\n  --add-kernelparams ADD_KERNEL_PARAMS\n                        Add values to kernel_params\n  --remove-kernelparams DEL_KERNEL_PARAMS\n                        Remove values to kernel_params\n  --list-kernelparams   List kernel params\n  --set-kernel SET_KERNEL\n                        Set which kernel to boot\n  --list-kernels        List available kernels\n\nUse puppet-update-grub-env.py --help to get help\n$ puppet-update-grub-env.py --set-kernel vmlinuz-5.10.0-6-amd64\n\n$ puppet-update-grub-env.py --list-kernels\nAvailable Kernels in /boot/1\n  vmlinuz-5.10.0-6-amd64\n\nIn /boot/1/kernel.env:\nkernel=vmlinuz-5.10.0-6-amd64\nkernel_rollback=vmlinuz-5.10.0-6-amd64\n\n$ puppet-update-grub-env.py --add-kernelparams \"a=b aa c\"\n\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=a=b aa c\n\n$ puppet-update-grub-env.py --remove-kernelparams \"a c\"\n\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=aa\n...\n\nTest Plan for Debian:\nPASS: system installation, bootstrap and unlock\n\nStory: 2009965\nTask: 45365\n\nSigned-off-by: Hongxu Jia <hongxu.jia@windriver.com>\nChange-Id: I84eca3b14e747943c82cc3fd85eb19abfa48afc6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure SQL as helm storage backend\n\nConfigmap is the default helmv2 storage backend to store\nrelease information but its 1MB resource limit prevents\nscaling up stx openstack worker nodes, so we want to use\nSQL as helm storage backend.\n\nAdd class in helm puppet manifest to setup helm database\nduring ansible bootstrap.\n\nThis commit also fixes the IP address in postgres pg_hba.conf.\n\nCurrently, we have the following rules for both IPv4 and\nIPv6 systems:\nRule Name: allow access to all users with encrypted password\nfrom all IPv4 addresses.\nhost  all  all         0.0.0.0/0   md5\nRule Name: deny access to postgresql user.\nhost  all  postgres    0.0.0.0/32 reject\n\nFor the IPv6 system, the address of pods is IPv6. The CIDR\naddress in the rule should be changed to corresponding\nIPv6 address (::0/0) to allow tiller running in container\nto access helm database.\n\nDepends-On: https://review.opendev.org/#/c/761645/\nChange-Id: Ifd072000e0680a59d5be0f2f1ef2ce1cbabc1e4f\nPartial-Bug: 1887677\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Add Kata Container support in StarlingX\"\n\nThis reverts commit 0dd7219a17f27bb35678bc2e3cf5961bedf59f07.\n\nReverting due to https://bugs.launchpad.net/starlingx/+bug/1859686\n\nChange-Id: I6b7d3bcb392275a53bfe93c306e3b462b393f3a1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make '/etc/pki' and children directories 755\n\nIt was suggested in a code review that directories should be 755.\nTo keep consistency with previous stx versions as well, it makes sense\nto have change it to 755 in order to avoid unintended side effects.\n\nThis change affects the whole dir hierarchy:\n\n/etc/pki\n/etc/pki/ca-trust\n/etc/pki/ca-trust/source\n/etc/pki/ca-trust/source/anchors\n\nTest plan:\n\nPASS: Add a ssl_ca certificate with system certificate-install and\n      verify that certificates where added to\n      etc/pki/ca-trust/source/anchors/ca-cert.crt in a compute node.\nPASS: Run a full deploy of a standard lab and verify that compute nodes\n      become unlocked and available.\n\nCloses-Bug: 1999664\n\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nChange-Id: I2a8bdbe1ca4b13275f85ef54bf261213cc6728bf\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet debian package ver based on git\n\nUpdate debian package versions to use git commits for:\n - puppet-dcdbsync  (1.0.0-1.stx.1 -> 1.0.0-1.stx.2)\n - puppet-dcmanager (1.0.0-1.stx.1 -> 1.0.0-1.stx.4)\n - puppet-dcorch    (1.0.0-1.stx.1 -> 1.0.0-1.stx.5)\n - puppet-fm        (1.0.0-1.stx.1 -> 1.0.0-1.stx.5)\n - puppet-manifests (1.0.0-1.stx.5 -> 1.0.0-1.stx.477)\n - puppet-mtce      (1.0.0-1.stx.1 -> 1.0.0-1.stx.2)\n - puppet-nfv       (1.0.0-1.stx.1 -> 1.0.0-1.stx.2)\n - puppet-patching  (1.0.0-1.stx.0 -> 1.0.0-1.stx.2)\n - puppet-smapi     (1.0.0-1.stx.1 -> 1.0.0-1.stx.2)\n - puppet-sshd      (1.0.0-1.stx.1 -> 1.0.0-1.stx.2)\n - puppet-sysinv    (1.0.0-1.stx.1 -> 1.0.0-1.stx.17)\n\nThe Debian packaging has been changed to reflect all the\ngit commits under the directory, and not just the commits\nto the metadata folder.\n\nThis ensures that any new code submissions under those\ndirectories will increment the versions.\n\nTest Plan:\n  PASS: build-pkgs -p puppet-dcdbsync\n  PASS: build-pkgs -p puppet-dcmanager\n  PASS: build-pkgs -p puppet-dcorch\n  PASS: build-pkgs -p puppet-fm\n  PASS: build-pkgs -p puppet-manifests\n  PASS: build-pkgs -p puppet-mtce\n  PASS: build-pkgs -p puppet-nfv\n  PASS: build-pkgs -p puppet-patching\n  PASS: build-pkgs -p puppet-smapi\n  PASS: build-pkgs -p puppet-sshd\n  PASS: build-pkgs -p puppet-sysinv\n\nStory: 2010550\nTask: 47411\nTask: 47412\nTask: 47413\nTask: 47414\nTask: 47415\nTask: 47416\nTask: 47417\nTask: 47418\nTask: 47419\n\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: Ie1606578e127cb39cc06506e11c5ba2d6a4c452c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca pods update\n\nAdded puppet runtime class to rolling restart pods on phases\ntrust-both-cas and trust-new-ca.\nAdded rollout status checking in the pods update exec command.\nThis makes the runtime manifest apply blocking until all rollout\ncompletes, as the restart is happening in parallel, is expected\nsomething around 4min-5min to complete this step. Then the\nprocedure state will be updated by the system.\n\nStory: 2008675\nTask: 42707\nChange-Id: I8d3b244e045fd781eda3ad0d87b8ba303fdfbfba\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix permission of puppet dated directory logs\n\nChanged the permission of puppet dated directory logs,\n\"/var/log/puppet/<datetime>_<personality>\", from 777\nto 700, in order to fix openscap security violation.\nVerified that installation is successful for AIO-SX\nand Standard 2+2 system configurations.\n\nStory: 2008037\nTask: 40694\n\nChange-Id: I260c745dd24c33e3d7bd7be403246f0f63bf0894\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix k8s firewall blocks docker proxy port\n\nAllow docker proxy port(s) in k8s firewall. It unblocks worker\nnode to access proxy via controller. As a result, worker node can\nsuccessfully pull k8s/calico images through proxy.\n\nDuplex: docker proxy port correctly added in iptables SNAT rule\n2+2: docker proxy port correctly added in iptables SNAT rule\n2+2 without proxy: pass, no regression issue\n\nCloses-Bug: #1817723\nChange-Id: I7a8093a1fdce0089e5d0a9483a5c58184d1e213e\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added more required includes for optimized restore\n\nOptimized restore required files that were not present\nbecause the respective puppet classes that were responsible\nfor their creation were missing.\n\nAdditional classes have been added and\noptimized restore can move farther.\n\nISSUES:\nOptimized restore is still incomplete at this point\n\nStory: 2010117\nTask: 46505\nChange-Id: I32125dbdf40080e71e318a9f9a94ecc5c292cb99\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restrict access privilege of mtc.ini file\n\nThis update modifies the maintenance ini file\nto restrict access privilege to root privilege\n\nStorage system was installed successfully.\nPermission of affected file was verified.\n\nChange-Id: Ia516cf1eebf0dd911c5b9cd485c527bd497b50fd\nCloses-Bug: 1887403\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Gracefully handle serial port detachment in tty manifest\n\nGracefully handles rc=1 from enable/disable active device console when\nserial port was detached and also log the output from the command.\n\nCloses-Bug: 1980984\n\nTest plan:\nPASS: Reboot system with serial port detached and verify that command\n      error was handled gracefully.\nPASS: Successfully change ttys_dcd flag with serial port detached.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I4678714e77dbbf62bab107215e1605995c84e0fc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix openldap syncrepl on insecure port with peer\n\nFor a Debian based DX system, the openldap instance on controller-0\ncurrently sync replicates with peer on controller-1 on insecure\nport, while instance on controller-1 sync replicates with peer on\ncontroller-0 on secure port.\n\nThis is because openldap syncrepl on controller-0 is configured\nduring bootstrap where it takes the default provider_uri value\n(which has the insecure port) from controller hieradata. This change\nmoved the default value from controller hieradata to ldap puppet\nparams class, with different protocols for CentOS and Debian.\n\nTest Plan:\nPASS: DX system deployment\nPASS: Check syncrepl section in slapd.conf.backup, on each controller,\n      it should contain:\n      provider=ldaps://<controller>\n      tls_cert=\"/etc/ldap/certs/openldap-cert.crt\"\n      tls_key=\"/etc/ldap/certs/openldap-cert.key\"\n      tls_cacert=\"/etc/ssl/certs/ca-certificates.crt\"\n      tls_reqsan=demand\nPASS: On one controller, add a new openldap user, and check the\n      newly added user exists on the other controller by:\n      ldapsearch -xH ldaps://<the other controller>\n      -b 'ou=people,dc=cgcs,dc=local' '(objectclass=*)' |\n      grep <the newly added user>\nPASS: After active controller swact, repeat TC #3 again.\n\nCloses-Bug: 1989725\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Iedb5ff0af78814b21be2ebc6fac2b809335d2a3c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Select correct config order for ifup if bonding is present\n\nIt was detected that if the bond interface name starts with a letter\nafter 'e' (the usual letter for ethernet interfaces) it will be placed\nin a position in the /etc/network/interfaces.d/auto file that will\nprevent the correct bonding configuration.\n\nThis change creates a order in the auto file as\n\"lo [bond interfaces] [ethernet interfaces] [vlan interfaces]\"\nas the ifenslave package also configures the slave interfaces when\nthe bonding is configured.\n\nTest Plan\n[PASS] configure a bond named \"ae0\" and observe correct configuration\n       after lock/unlock\n[PASS] configure a bond named \"pxeboot0\" and observe the correct\n       configuration after lock/unlock\n[PASS] on top of pxeboot0 add vlan interfaces and observe the correct\n       configuration after lock/unlock\n[PASS] remove content in /etc/network/interface.d/ and execute a\n       lock/unlock cycle to test apply_network_config.sh\n[PASS] add/remove static routes in runtime execution and after a\n       lock/unlock cycle\n\nCloses-Bug: 2028877\n\nChange-Id: I55625cb64e815899f6fb33759b8018c26cd52de2\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove admin_token from keystone config\n\nCurrently the admin_token is still set with a value in keystone.conf\nthough it is disabled after bootstrap and no longer in use. This update\nremoves it during controllers unlocking as a security enhancement.\n\nThis update also fixes an ceph issue that would be triggered by the\nabove change and cause ceph.pp not generating ceph.conf properly\ndue to a resource creation disorder.\n\nChange-Id: I4093bca40fad3724e89d902aae36d26f85aebd60\nCloses-Bug: 1900726\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix IPv6 corrupted address after system unlock\n\nCurrently, for an IPv6 system using multi-netting (for example,\nmgmt, cluster-host sharing an interface), multiple aliased\ninterface files are created under\n/etc/network/ifcfg-<ifname>:<label>, with the label being the\nnetwork-id.\n\nCurrently, we remove the label from the interface stanza in\nthese files in order to prevent the primary address (label :1)\nfrom being marked as 'depreciated' by the Linux kernel.\n\nIt was noticed that the current label removal logic is too\nbroad.  It would also 'corrupt' an IPv6 address that had the\nsubstring ':1'.  For example:\n\nfdff:719a:bf60:1021::3 -> fdff:719a:bf60021::3\n\nThe invalid address was of course not accepted by the kernel,\nand caused a communication issue over whichever network the\naddress belonged to.\n\nThis issue was seen after first unlock in a subcloud in a\ndistributed cloud environment.\n\nThe fix makes the 'sed' replacement more surgical.  We already\ntrack the 'name' of the interface with both the label present\n(iface_name) as well as without the label (base_iface_name)\n\nThis affects Debian only.\n\nCloses-Bug: 1995395\n\nTesting:\n- On an affected subcloud, apply the 'sed' fix after bootstrap, but\n  before first unlock.\n- Ensure the IPv6 address in /etc/network/interfaces.d/<file> is\n  correct (match with bootstrap params and DB) after unlock.\n- Ensure the subcloud becomes 'online'.\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Ic3461295af41dd6a335c103c78522ca8371f73ec\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing service catalog insertion from dcorch proxy\n\nrequests going through the dcorch proxy were having the entire service\ncatalog tacked on during the authtoken filter stage, this was resulting\nin the header size growing too large for sysinv to handle the forwarded\nrequests.\n\nThis commit sets keystone_authtoken/include_service_catalog to False in\nthe dcorch settings to prevent this.\n\nTested by installing a subcloud, bringing online and managing, as well\nas doing sysinv queries to SystemController.  I've tested with 200\nsubclouds in dcmanager without issue.\n\nChange-Id: Ic47c062bd8b5376084d27a9378c131650d9ec2da\nCloses-Bug: 1856740\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Decouple Fault Management from stx-config\"",
        "issue_summary": ""
    },
    {
        "commit_message": "K8s upgrade: use kubeadm full path to pre pull images\n\nThis change allow us to call into puppet with temporary hieradata\nand pre-pull images without needing to globally update the\nbind mounts.\n\nTest Plan: Debian\nPASS: Fresh install ISO as AIO-SX. Successfully upgraded\n      from 1.22.5 to 1.23.1 using the manual K8s upgrade.\n      During upgrade downloaded the correct K8s images.\nPASS: Fresh install ISO as AIO-DX. Performed the manual K8s upgrade\n      from 1.22.5 to 1.23.1. The system kube-upgrade-download-images\n      command downloads the list of K8s images. Verified target\n      version images are present in the output of \"crictl images ls\"\n      both in controller-0 and controller-1.\n\nStory: 2010565\nTask: 47705\n\nSigned-off-by: Ramesh Kumar Sivanandam <rameshkumar.sivanandam@windriver.com>\nChange-Id: I695157c4b9b586578945c77aefa2107b8b4ceef7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reset N3000 fpgas only when it exists\n\nRemove calling reset n3000 fpga before detecting h/w exists.\n\nCloses-Bug: 1918139\nChange-Id: I81b7fbc9500fac7e86424537551c1e9aac7492ec\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet manifest apply check hieradata rsync\n\nUpdate the puppet manifest apply to check whether the hieradata\nhas been rsync successfully.  Check return value and, in certain\ncases reattempt, before continuing.  This is needed because\nthe hieradata is actually generated by the controller node,\nand this script may be running on another host.\n\nIt has been observed that there are instances on worker host\nwhereby some of the hieradata is missing (e.g. missing\nsystem.yaml openstack_host in puppet.log).\n\nVerified:\n    install, deployment and sanity on multinode and AIO\n    backup and restore with Ceph\n    platform upgrade\n\nChange-Id: I9e7a0a02dd28c06d914fafe8234f4fee5e05247c\nCloses-Bug: 1917229\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change compute node to worker node personality\n\nThis update replaced the compute personality & subfunction\nto worker, and updated internal and customer visible\nreferences.\n\nIn addition, the compute-huge package has been renamed to\nworker-utils as it contains various scripts/services that\nused to affine running tasks or interface IRQ to specific CPUs.\nThe worker_reserved.conf is now installed to /etc/platform.\n\nThe cpu function 'VM' has also been renamed to 'Application'.\n\nTests Performed:\nNon-containerized deployment\nAIO-SX: Sanity and Nightly automated test suite\nAIO-DX: Sanity and Nightly automated test suite\n2+2 System: Sanity and Nightly automated test suite\n2+2 System: Horizon Patch Orchestration\nKubernetes deployment:\nAIO-SX: Create, delete, reboot and rebuild instances\n2+2+2 System: worker nodes are unlock enable and no alarms\n\nStory: 2004022\nTask: 27013\n\nChange-Id: I0e0be6b3a6f25f7fb8edf64ea4326854513aa396\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support to audit-policy-file at runtime\n\nWhen service-parameter configures audit_policy_file, add this paremeter\nto extraArgs section for apiServer component.\n\nTest Plan: Add parameter audit-policy-file and check that it's added\nto extraArgs section for apiServer component.\n\n- PASS: Setting audit-policy-file in service-parameter and check puppet\n  updates kube-apiserver configuration after running\n  service-parameter-apply kubernetes\n- PASS:B&R for SX, DX with audit-policy-file added in service-parameter\n\nStory: 2009766\nTask: 45074\nDepends-on: https://review.opendev.org/c/starlingx/config/+/837408\n\nSigned-off-by: Giana Francisco <francisco.giana@windriver.com>\nChange-Id: I739afbc0472dde465e4be4d1630aae800a9cdf0e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid using hostname in haproxy conf\n\nhaproxy default build option not happy with hostname when IPv6 is\nconfigured. Avoid using hostname for now.\n\nStory: 2002987\nTask: 23001\n\nChange-Id: Ia3508a8124766a4d8bac97a68a0e38481593f96d\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize to /\n\nAdd support to to modifying / logical volume group\nthrough the system host-fs-modify command\n\nTest Plan\nPASS - Install ISO and resized\n       https://paste.openstack.org/show/bggbEQbToBmurIxxSCTT/\n\nStory: 2009303\nTask: 47231\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I94b0276e12b3ab5036898b92e4d3a14057d90fa5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide env settings to allow zuul and developers to both run tox\n\nZuul checks out the dependant projects by their repo names.\nRepo checks out the project directory structure based on the\nlabels in the manifest.\n\nCurrently these directories have different names and so tox\npasses when run by zuul, but fails when run in a developer env.\n\nThis submission uses an env variable: \"STX_PREFIX\" to make\nboth envs able to run tox.\n\nStory: 2004515\nTask: 30664\nChange-Id: I06cefab7422f53ccc0b8af30ca06945311cec70e\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add notices on Intel authored files.\n\nStory: 2005265\nTask: 30083\n\nChange-Id: Ibcae6539747beb9d641e7d5eef4c4ff7574a8b13\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make /usr readonly\n\n1. Moved /usr/libexec/cni to /opt/cni/bin\n2. Moved /usr/libexec/kubernetes to /opt/libexec/kubernetes\n3. Moved /usr/share/cracklib/cracklib-small to /var/cracklib/cracklib-small\n4. Moved /usr/local/etc/ldapscripts/ldapscripts.conf to\n   /etc/ldapscripts/ldapscripts.conf\n5. Moved /usr/local/etc/ldapscripts/ldapscripts.passwd to\n   /etc/ldapscripts/ldapscripts.passwd\n6. Removed code to change /usr/bin/keyring access right. It is in readonly fs,\n   and it is not very helpful to protect the execution priviledge of the\n   console script.\n\nTCs list at https://review.opendev.org/c/starlingx/integ/+/825346\nDepends-on: https://review.opendev.org/c/starlingx/integ/+/825346\nStory: 2009101\nTask: 44313\n\nChange-Id: I3434ef4e2887705d4a4b8ffb8f67485fe1996ba3\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add grub update to restore\n\nThis ensures that the kernel boot args are correct.\nWhen they are not correct, puppet will trigger a reboot\nafter unlocking to fix them.\n\nTEST PLAN\nPASS: AIO-SX backup and restore\n  * New backup will include /boot files\n  * Non-default kernel boot args will be kept\n  * No double reboot\n  * /proc/cmdline can be used to verify kernel boot args\nPASS: AIO-SX backup and restore\n  * Remove new /boot files from backup\n  * Restore with modified backup\n  * Non-default kernel boot args will be lost\n  * No double reboot\n  * /proc/cmdline can be used to verify kernel boot args\n\nPartial-Bug: 2023678\nChange-Id: I5f0c91c0c8583f4a86148ddf0fadc03b18ff9c1a\nSigned-off-by: Joshua Kraitberg <joshua.kraitberg@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Register configuration for ovsdb-server and ovs-vswitchd with pmon daemon\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename the dnsmasq runtime class\n\nAs the platform::dns:runtime class only referencing the resource of\ndnsmasq, this commit renames it as platform::dns::dnsmasq::runtime in\norder to indicate its function clearly.\n\nStory: 2008774\nTask: 42365\n\nChange-Id: I79dd23bf64abfd63906daa59ec59c4496dedda31\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change group of /etc/ceph/ceph.conf file\n\nThe sysinv-api is currently running as the sysinv user, but with\nthe group set to root. This is not correct - the sysinv-api should\nrun with the normal groups for the sysinv user, which include\nsys_protected.\n\nHowever, the sysinv-api needs access to the /etc/ceph/ceph.conf\nfile (to use the ceph API). To allow this, change the group\nof the ceph.conf file to sys_protected, which will allow the\nsysinv-api to access the file.\n\nChange-Id: I422fada2c5411d84f5542722fceea8c64e3ff6c7\nStory: 2006590\nTask: 36724\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add logging configuration to nova-api-proxy\n\nPuppet manifests now include logging data to push to\nthe conf file. This is needed for a subsequent code\nchange to change the logging backend to oslo_log\n\nChange-Id: I303e199fd3c984af20564c43bdb98c460cbed0f1\nStory: 2004007\nTask: 27608\nSigned-off-by: Lachlan Plant <lachlan.plant@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix task ordering to prevent race condition on ptp config gen\n\nChanged the task ordering for the ptpinstance runtime manifest. The\nprevious ordering could result in a race condition where ts2phc was\nbeing restarted before clock-conf.conf file is updated. This would\nresult PTP instance out-of-tolerance, skewed from the primary\nclock.\n\nChanged the order between 'platform::ptpinstance' and 'platform::\nptpinstance::nic_clock', and moved the directory \"${ptp_conf_dir}/\nptpinstance\" creation to nic_clock. The nic_clock class will first\nuse it to store the clock-conf.conf file.\n\nTest Plan:\nPASS: Using a multiple PTP instances configuration and run the\nmanifest with system ptp-instance-apply. Ensure that ts2phc\nstarts after clock_nic class, the ts2phc is handling all the\ninterfaces configured and the clock is not skewed.\nPASS: Host lock and unlock and check the puppet manifest log\n\nCloses-bug: 2038383\n\nChange-Id: I97e5a6bf536f05720fcaea860a83e53454e83ab6\nSigned-off-by: Andre Mauricio Zelak <andre.zelak@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow configuration of PTP master/slave interfaces\n\nPuppet manifest changes to support user specified PTP interfaces.\n\nChange-Id: I658a3a0b8fe01318b015e85725129cf88fc6e638\nStory: 2006759\nTask: 37690\nDepends-On: https://review.opendev.org/#/c/696910/\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove creation of /etc/kuberetes/kubeadm.yaml\n\nNow that we are not using /etc/kubernetes/kubeadm.yaml anymore,\nwe can remove the creation of the file from puppet. Bootstrap will\nstill create it for bootstrap use.\n\nChange-Id: Id08af049fac3fc68b70a7dae5aec8548865a4784\nCloses-bug: 1866695\nDepends-On: https://review.opendev.org/#/c/713020/\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added the manifest to modify GRUB CMDLINE to enable/disable apparmor on Debian\n\nTest Plan:\nPASSED: Apply manifest at runtime and verify if apparmor flag is\nchanged based on platform::params:apparmor value on AIO-SX\nPASSED: No error during bootstrap and initial host-unlock\nPASSED: Working of \"sed\" command while trying to enable/disable if\nit is already enabled/disabled. Tested with puppet manifest at\nbootstrap and running the command manually, \"sed\" doesn't return\nerror if it doesn't find anything to replace.\n\nStory: 2010310\nTask: 46697\n\nSigned-off-by: jmishra <jagatguruprasad.mishra@windriver.com>\nChange-Id: Icd96ef5ab9f16bfcb90dfe8896a9e5ffbb61ea3e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Enable PTP synchronization on management network for AIO\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Set OS_AUTH_TYPE to password in openrc admin\n\nThis is part of gnocchi integration.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: I6f45a727cc971c6c04c9e3eadabaed60159f88d7\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix psql 'permission denied' editor bug\n\nWhen using \"\\e\" cmd on psql, postgres tries to make\nchanges to /var/lib/postgres, but gets 'permission denied'\n\nThis commit changes ownership of that directory\nfrom root to postgres.\n\nTest Plan:\npass: bootstrap and unlock\npass: no warning message\n\nCloses-Bug: 1982970\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I109e650ad8614295d8f6021037a30c76d58fee24\n",
        "issue_summary": ""
    },
    {
        "commit_message": "update nfv-vim puppet runtime manifests and config files\n\nnfvi would raise openstack alarms/logs to the fm in pods,\nwhen it is availiable. following configure changes are\nrequired:\n1. add \"fault_mgmt_plugin_disabled\" para in vim config\nfile. Set it \"True\" when openstack application is not\nimplement, and \"False\" when it is.\n\n2. add \"fault_mgmt_endpoint_disabled\" para in alarm\nand event_log config file. rules are the same with\n\"fault_mgmt_plugin_disabled\"\n\n3. add \"openstack\" and \"fm\" info to alarms and event_logs\nconfig file\n\nStory: 2004008\nTask: 30954\nDepends-On: https://review.opendev.org/#/c/661548/\nChange-Id: Iee2a4515336f4ce9b6373d56d4f7a5779664233d\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Re-enable adding bare-metal Ceph storage backend at runtime\n\nAdding the bare-metal Ceph storage backend at runtime fails as\n$::platform::rook::params::service_enabled can not be resolved.\n\nThis update explicitly includes the class to allow resolution and enable\nthe Ceph storage backend to be added.\n\nChange-Id: I1bd12910784387c2a2d37a29d2f299e3cebb8cd2\nCloses-Bug: #1919274\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure keystone http timeouts for dcmanager\n\nThe dcmanager currently has no http_connect_timeout set for\nkeystone connections. That can result in an attempt to contact\nkeystone (e.g. to get a token) taking several minutes to\ntimeout if the keystone api is not reachable (e.g. if a subcloud\nis powered down).\n\nChanging the http_connect_timeout to 10s and configuring\nhttp_request_max_retries as 3 (that is also the default but\nadding this to the puppet module allows for easy changes in the\nfuture).\n\nChange-Id: I6a62846e7f4e75e9b2f0705f59818243ea909e41\nPartial-Bug: 1854894\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable intel_idle c-states configuration override\n\nIntel_idle driver is currently overriding BIOS c-states settings. To\nset a low latency profile or enable BIOS to drive c-states settings we\nneed to disable an OS level configuration override by setting the\nkernel parameter intel_idle.max_cstate to 0 in worker hosts.\n\nTest Plan:\nPASS: Bootstrap and check if worker c-states are driven by BIOS.\nPASS: Host lock and unlock.\nPASS: System upgrade.\n\nTask: 45368\nStory: 2009886\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I2bfff76086191851a197d0a128bd4fd969d2a7f4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add vgchange before wipe new PV\n\nWhen we have a nova-local on a separate disk, after a fresh\ninstall (without wiping the disk), it's not possible to wipe\nthe disk because that disk is \"busy\". So the vgchange command\nwas added before the wipefs to make sure that the volume group\nis not busy.\n\nTest Plan:\nPASS: Fresh install AIO-SX with a separate disk for nova-local and\nrepeat fresh install without wiping the disk.\n\nCloses-Bug: 1995506\n\nSigned-off-by: Erickson Silva de Oliveira <Erickson.SilvadeOliveira@windriver.com>\nChange-Id: If3da66734dc1121d3d2a27de804c0194a6d5e0fe\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add kubelet support for volume plugins\n\nWhen upversioning Calico from 3.6 to 3.12 the --volume-plugin-dir\nargument needs to be provided to kubelet.\n\nSpecifically, the configuration for Calico 3.8 \"Adds a Flex Volume\nDriver that creates a per-pod Unix Domain Socket to allow Dikastes to\ncommunicate with Felix over the Policy Sync API.\"\n\nChange-Id: Ic76baa00de4402cbb65c37fe89835b114d424634\nStory: 2006999\nTask: 39111\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a puppet class to support k8s feature-gate update\n\nThis change adds a class to the kubernetes puppet manifest.\nIt executes a script that updates kubernetes kubeadm-config\nconfigmap and static manifests and restarts the\nkube-api-server and kube-controller-manager with new\nfeature gates. The class ensures that the api-server and\nthe controller-manager pods are back up and healthy.\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/845654\n\nTest Plan: (CentOS)\nOn AIO-SX and AIO-DX:\nPASS: Full platform upgrade successful\nPASS: Verify platform logs and puppet logs for\n      successful execution.\n\nStory: 2009789\nTask: 45626\n\nSigned-off-by: Kaustubh Dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Ia789a84bf012b3e574e9319eb68293857628db28\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: accept netmask or prefix-length on routes file\n\nThis change add support to accept netmask or prefix-length on the\nroutes file. Puppet will still generate in netmask format\n\nTest Plan:\nPASS  add IPv6 static routes with system host-route-add\nPASS  add IPv4 static routes with system host-route-add\nPASS  remove IPv6 static routes with system host-route-delete\nPASS  remove IPv4 static routes with system host-route-delete\n\nCloses-Bug: 1974229\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Ibfb71c98c431370b338a51097dd93899d829f13e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove references to pacemaker from sysinv\n\nSysinv use of pacemaker was replaced by SM a long time ago\nand the code that referenced it is being removed.\n\nChange-Id: Ic2a55698f64757bffeb9b53f4a105ea6ccb3dd2f\nStory: 2004764\nTask: 30665\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix error add parameter with invalid arg in K8s config\n\nThese changes fix the use case \"add a valid\nparameter with invalid argument\" for kubernetes\ncustom configuration support. Currently, after\napply the changes, the Kubernetes cluster\ncrashes and won't recover.\n\nIt is necessary to restart kubelet because when an wrong\nconfiguration is set in any of the k8s control plane\ncomponents, kubelet makes a maximum of 5 attempts to\nrestart the erroneous component. If we reach the limit,\nno matter if we correct the configuration during the\nautomatic recovery, the container does not starts again.\n\nThe puppet timeout is increased to contemplate the\ntime to update the different k8s control-plane components\nand the automatic recovery process, if necessary.\n\nTest Plan:\n* CENTOS and DEBIAN distro:\n  - Fresh Install with AIO-SX and DX/STD.\n  - Add new valid parameter with invalid arguments.\n  - Apply changes on kubernetes service.\n  - Verify cluster health and configuration.\n\nCloses-Bug: 1992207\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Ieb17f9ff7359813f60b8baffb3d8f53fe1e2d7f8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move dcmanager orchestration to a separate process\n\nThe DC manager orchestration is being removed from the\ndcmanager-manager process and it is running in\ndcmanager-orchestrator process.\n\nThis update adds associated puppet config.\n\nChange-Id: Ib74491c1d136df02fbe04abb3241e506731dbae1\nStory: 2007267\nTask: 40716\nDepends-On: https://review.opendev.org/#/c/748452/\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker integration on storage nodes\n\nAllocate 10G LV for docker in the cgts_vg volume group if the\n--kubernetes option is used with config_controller.\n\nStory: 2002839\nTask: 22778\n\nChange-Id: Iabd08fc6da3a0fafd3005c2a49625ba477228ec5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-DX Ceph Monitoring\n\nThis change is part of the solution to resolve the scenario where\nCeph MON starts without having data in sync when there is no\ncommunication with the peer, leading to PG issues.\n\nCeph MDS was not being managed, only started by ceph.sh script\ncalled from mtcClient. Now it will be managed by pmon.\n\nTest Plan:\n    PASS: After applying the puppet manifest, the symlink\n          /etc/pmon.d/ceph-mds.conf -> /etc/ceph/ceph-mds.conf.pmon\n          exists.\n    PASS: system host-swact.\n    PASS: Ceph recovery after mgmt network outage for few minutes\n          even when rebooting controllers.\n    PASS: Ceph recovery after rebooting active controller.\n    PASS: Ceph recovery after case of dead office recovery (DOR).\n\nPartial-Bug: 2004183\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/872202\n\nSigned-off-by: Hediberto Cavalcante da Silva <hediberto.cavalcantedasilva@windriver.com>\nChange-Id: Id5b9f456a60235fe6446f58de9d513f0a9179c9b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Set preferred_lft to 0 for mgmt and nfs floating ips\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Integrate host configuration into configuration framework\n\nIntegrates the following host configuration into the configuration\nframework:\n- Host boot parameters\n- CPU reservation\n- Process affinity\n- Memory huge page allocations\n\nChange-Id: I2259e0e93eefd5ce5000271fa32ecaa8d13fa411\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"DRBD replication, rebuilding monitor and PVCs during migration to AIO-DX\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle hugepages params in grub audit\n\nThe grub cmdline can have multiple hugepages config arguments, in\npairs of hugepagesz and hugepages parameters. This commit extends the\npuppet-update-default-grub.sh audit to handle these parameters in\npairs, allowing for multiple pairs.\n\nChange-Id: Ia3c431f25ae488987245929de7a451aa4a822f06\nCloses-Bug: 1901559\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Quote password in ldap command\n\nQuote the password to the \"-w\" option of the ldap commands in puppet\nfor special characters in the password.\n\nChange-Id: I43275bb2323b8525c5c77fe9a69d386190292223\nCloses-Bug: 1901228\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Reduce number of workers in systemcontroller\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update dnsmasq conf file for host-record support\"\n\nThis reverts commit 6c418b0441460ed018e76cfda0b13c97e240e000.\n\nReason for revert: Partial-Bug\n\nLP: https://bugs.launchpad.net/starlingx/+bug/2037734\n\n\nCloses-Bug: 2037734\nStory: 2010835\nTask: 48724\n\nChange-Id: Ic9779078349fdbfa6e48a9e90bad8f0794b6ddd9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Redirect lighttpd access log to syslog\n\nLighttpd log filtering isn't able to filter by HTTP status code without\nthe use of a piped logger. This commit redirects lighttpd access logs\nto syslog, this allows the use of syslog-ng's filtering features,\nmaking it possible to filter out ostree pull request messages by status\ncode.\n\nTest Plan:\n1. PASS - Install a subcloud and verify that the ostree pull request\nmessages are filtered out from /var/www/var/log/lighttpd-access.log;\n2. PASS - Use curl to request invalid files and verify that requests\nwith status code other than 200 are still being logged.\n3. PASS - Do a system bring-up test by creating an image with the\napplied changes and verify that the system installation succeeds\nand that the syslog-ng and lighttpd services are working.\n4. PASS - Verify that Horizon is still able to do HTTP requests.\n\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/866999\nCloses-Bug: #1998837\n\nSigned-off-by: Gustavo Herzmann <gustavo.herzmann@windriver.com>\nChange-Id: I01053b55653c6e4427c7847fa642ff430d4fd5d8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enforce helm runtime to run after lighttpd restart\n\nWhen service parameter http_port is changed and applied,\nopenstack::lighttpd::runtime and platform::helm::runtime will run. The\nfirst runtime class will restart lighttpd for the new http_port to take\neffect, and the second runtime class will access helm repo by the new\nhttp_port. However, most of the time lighttpd restarts after helm\nruntime class start to access repo by the new port, causing helm\nruntime class failed and service parameter change partially applied.\nThe result is that some nodes have \"Configuration out-of-date\" alarm\nforever and nodes in failed state after lock/unlock.\n\nThis update added a dependency relationship to enforce helm runtime to\nrun after lighttpd restart.\n\nChange-Id: Ia627f3b5221a1757d0615ba9ea371551f8dca0cb\nCloses-Bug: 1873599\nCloses-Bug: 1873600\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Commands For Docker Registry Image Cleanup\n\nAdd commands for\nregistry-image-list, to list the existing images in the repo\nregistry-image-tags, to list the tags of a specified image\nregistry-image-delete, to delete a tag of a specified image\nregistry-garbage-collect, to delete space on the filesystem from\nimages that do not have any tags referencing them\n\nIt is currently impossible to delete images from the local Docker\nregistry on the controllers. This can be an issue if images are\ncontinuously pushed. The only solution was to grow the file system.\nThis commit provides commands for a user to find unwanted images and\nto delete them from the controller local Docker registry in order to\nfree up space on the file system.\n\nThere is a possibility of the registry getting stuck in read-only mode\ndue to garbage collect if puppet dies or there is a swact while\ngarbage collect is running. In this situation, the user should run\ngarbage collect again. Getting stuck in read-only mode does not\nprevent image pulls or kubernetes deployments from existing images\nfrom starting or completing.\n\nStory: 2002840\nTask: 28621\n\nChange-Id: I4bb9301a1165db8b860418c413aa3238169bab03\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use realpath to check the existing mounts\n\nThis work is part of the Debian integration effort.\nThis will remove a bootstrap issue on Debian.\n\nOn Debian /mnt and /opt are symlinks. On CentOS realpaths.\nMount will create the mountpoint at the realpath (both OSs).\nOn Debian this is an issue because the mountpoints are now on a\nsymlinked path, creating a false negative. Due to the false\nnegative puppet will run code that is not supposed to run, messing\nthe logic downstream.\n\nCentOS tests:\nPASS: AIO-SX bootstrap\nPASS: AIO-SX unlock\nAlso checked that mount entrypoints are already realpath on an\nexisting AIO-DX after unlock, and on an existing AIO-SX before\nbootstrap, after bootstrap and after unlock.\n\nDebian tests:\nPASS: AIO-SX bootstrap\nPASS: AIO-SX unlock\n\nStory: 2009101\nTask: 44913\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Ib9597fd3231f380adc3373fad18d0d17ba088deb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce the number of threads in nslcd\n\nSlapd process has more than 2500 open files in DC10 with 500\nsubclouds. Given that the process limit set at 4096, as such,\nit will hit limit before reaches 1000 subcloud target.\n\nBy default, nslcd starts 5 threads that can handle requests\nand perform LDAP queries. Each thread opens a separate\nconnection to the LDAP server. nslcd runs on every host\nincluding the System Controller. The number of open\nfiles from 500 subclouds would be 2500.\n\nThis update reduces the number of threads to 2 that\nshould be sufficient for user/group authentication.\nThis will support 1000 DX subclouds.\n\nIt also adds 10 minutes inactivity timeout to close\nidle connections.\n\nStory: 2008960\nTask: 42612\n\nChange-Id: I4d43e39a3212e6763ab3f5184dd5ef1e8b2a8af8\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove deprecated parameter on puppet dc modules\n\nDuring bootstrap of a DC system, the following warning was given:\n\"The password_hash parameter was deprecated and will be removed\"\nTo solve this, 'password_hash' parameter was changed to 'password'\naccording to instructions on the deprecation notes:\nhttps://docs.openstack.org/releasenotes/puppet-openstacklib/\nvictoria.html#deprecation-notes\n\nTest Plan:\nPASS: Build & Install\nPASS: DC Successful Bootstrap\nPASS: DC Successful Unlock\nPASS: Verified that \"The password_hash parameter was deprecated and will\nbe removed\" warning was no longer present on puppet.log\n\nStory: 2010757\nTask: 48331\nChange-Id: I4333ec880b69fa4aa82df0b1dbc3c19bcc860218\nSigned-off-by: Luis Marquitti <luis.eduardoangelinimarquitti@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable duplex platform upgrades: migrate etcd\n\nEnable the mechanism to upgrade the platform components on\na running StarlingX system with duplex controllers.\n\nThis includes upgrade updates for:\n  o migrate etcd on host-swact\n\nDepends-On: https://review.opendev.org/#/c/717038/\nChange-Id: Ife45253b46a9d58216d6cc943d7f4d40dd48b970\nStory: 2007403\nTask: 39246\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support Single huge page size for openstack worker node\n\nKubernetes only supports a single huge page size per worker\nnode. Prior to kubernetes 1.15, the huge page feature could\nbe disabled via a feature gate. In kubernetes 1.15, the\nfeature gate has been removed so huge page support is always\non in k8s.\n\nThis update removes the conditional disabling of the hugepage\nfeature and enforces the provisioning of a single page size\nper worker.\n\nWhen vswitch type is set to ovs-dpdk or avs, the application\nhuge pages size goes with the vswitch huge pages size.\n\nThis update also changes the auto-provisioning of VM huge\npages to 1G as there is no auto-provisioning in virtual\nenvironment.\n\nStory: 2006295\nTask: 36006\n\nChange-Id: I84d4959b420584fdcdf8a8664a6f4855c08ec989\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove embedded keystone policy config change\n\nCurrently keystone policy file (policy.json) is from a custom file\npatched into keystone source tree. This update removed the patched\nfile from keystone and instead use a puppet template to generate one\nat system configuration time (puppet manifest apply).\n\nStory: 2003110\nTask: 23229\n\nChange-Id: Ia604f50351f932a284ab73e1453c6b6e2cf1616b\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable platform helm repo for RPM installed charts\n\nAdd a new helm repository, 'stx-platform', designed to hold charts that\nneed to be delivered as part of the basic platform. These charts will be\ninstalled via RPMs as part of install and patching.\n\nUpdate the existing stx-openstack armada application manifests to\nreference the new location of the existing 'starlingx' repo. The\n'starlingx' repo will be renamed with a future commit to 'stx-apps'.\n\nEnable multiple repository support when generating helm overrides for\nthe chart location.\n\nThis updates both the puppet manifests and ansible playbook for initial\nand subsequent configuration scenarios.\n\nChange-Id: I0caaa878a6c6781d038b48b8caa2aa507ee9568a\nDepends-On: I4b1a3615a6bd5d0bdd834a1cdf27c05d5a1057a0\nDepends-On: I096d5ac126efc97f9a0a0f54f1e02323d936281c\nStory: 2005424\nTask: 30644\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide Barbican with IPv6 address during bootstrap\n\npuppet-barbican has IPv4 address (0.0.0.0) as a default value\nfor Barbican API port binding. It is possible during bootstrap\nthat no proper IP address is yet assinged to mgmt network.\nFalling back to IPv4 address causes an issue on IPv6 systems.\nNeed to set IPv6 address ([::]) as a default during bootstrap.\n\nChange-Id: I4cf432ce9f54214a0005e1784a2ed45969070f97\nCloses-Bug: 1844572\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update kubelet system overrides on unlock\"\n\nThis reverts commit 7d870177c6c01f5b47a33ef1cd7ce92c3c58694f.\n\nReason for revert: blocking testing due to lock/unlock failures\n\nChange-Id: Idc746dfc1076ef2f45a9790c7fecf4bb848162e2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix bootstrap failure for subclouds w/ complex passwords\n\nThis commit adds single quotes around user password parameter value to\nensure that complex passwords are valid when user option setup script\nis executed by puppet bootstrap.\n\nTest Plan:\nPASS: Full build, system install, bootstrap and unlock DC system, with\n      one subcloud bootstrapped and unlocked with active enabled\n      available status.\nPASS: Add, bootstrap, manage and unlock a subcloud with a complex\n      password containing special characters, numbers, capital letters\n      and an open parenthesis at the end of the sentence.\n\nCloses-Bug: 2025292\n\nChange-Id: Ia5430084bf6b16c78594a2483f2b88ec9b18f36a\nSigned-off-by: Manoel Benedito Neto <Manoel.BeneditoNeto@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set service_credentials/interface for aodh\n\nConfigure aodh to support new gnocchiclient interface.\n\nStory: 2002825\nTask: 22871\nDepends-On: https://review.openstack.org/587418\n\nChange-Id: I5e2c29c3d1b8e66d373a484ced6face094a2694f\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add DNS host records to /etc/hosts\n\nThe controller needs to add user configured DNS host records to\n/etc/hosts file, before initial unlock when\ndnsmasq service is not running. Other personalities like\nworker hosts and storage hosts does not require this change.\n\nTest Plan:\nPASS: Successful build\nPASS: Successful bootstrap, initial unlock of controller-0\nPASS: Verify after controller-0 unlock, lock and unlock controller-1\nPASS: Verify duplex controller host-swact with dns host records\nPASS: Verify host records in /etc/hosts when dnsmasq is down\nPASS: Verify host records absent in /etc/hosts when dnsmasq is up\n\nStory: 2010835\nTask: 48725\n\nChange-Id: I3f11084c7458f89288ba4bef18c78e60ff55b74e\nSigned-off-by: Joseph Vazhappilly <joseph.vazhappillypaily@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Retain more puppet log files\"",
        "issue_summary": ""
    },
    {
        "commit_message": "cni: use /var/opt/cni\n\nThis will allow bootstrap on Debian to work without unlocking ostree.\n\nCurrently /opt/cni is a symlink to a /usr subdir.\n/usr is mounted read-only. This lead to issues when containers try to\nwrite inside /opt/cni.\nUpdate software to use /var/opt/cni instead.\n\nThe problematic symlink is created by the meta-lat component.\nThis commit can be reverted later if the meta-lat design is changed.\n\nPrevent possible future issues and keep consistency for logic around\nkubernetes by redirecting /opt/libexec to /var/opt/libexec also.\n\nThis is an enhancement to the following series:\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/825354\nhttps://review.opendev.org/c/starlingx/integ/+/825346\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/825355\nhttps://review.opendev.org/c/starlingx/integ/+/843965\n\nTest on AIO-SX:\nCentOS:\nPASS: unlocked enabled available\nDebian:\nPASS: bootstrap without ostree unlock.\nPASS: unlocked enabled available\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/844865\nStory: 2009101\nTask: 44313\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I88b7737577b696fae08c58f31dd57d7298527737\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Suppress lldp frames on virtual interfaces\n\nvirtual interfaces like cali*, docker* is used by container/kubernetes.\nWe need to suppress lldp frames on these interfaces.\n\nChange-Id: I38e29c4d691cd4be30954136d7e1a43b0f61c925\nCloses-bug: #1815804\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable postgres huge page usage\n\nIn order to use the total available 1G hugepages space when\nvswitch_type parameter is set to 'none', the value huge_pages=off\nneeds to be included on /etc/postgresql/postgresql.conf since, by\ndefault, postgres uses hugepages if available.\n\nThe postgresql.pp is a manifest called on unlock\n\nTest Plan\nPASS: AIO-SX: Successfully bootstrapped and unlocked\nPASS: Verified that app_hp_avail_1G == app_hp_total_1G after\n      increasing huge page memory to the amount indicated by\n      app_hp_total_1G (total and available values match when\n      no applications are using huge pages).\nPASS: Output of 'cat /proc/meminfo' matches output of\n      'system host-memory-list controller-0'\n      (HugePages_Free == app_hp_avail_1G).\n\nCloses-bug: 2018324\n\nChange-Id: Iab7b7518fdcfccd2761778ed6a875a42cd35c34c\nSigned-off-by: Matheus Guilhermino <matheus.machadoguilhermino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable upload of load files\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Helm repository replication\n\nCurrently, starlingx helm local repository is only configured on\ncontroller-0, that causes stx-openstack application apply failure\nwhen controller-1 is active. This commit is to replicate helm\nrepository on both controllers.\n\nTo ensure charts synchronized on controllers, charts are placed\nin drbd fs(/opt/cgcs/helm_charts). However, lighttpd is configured\nin chroot environment(/www). So the directory /www/pages/helm_charts\nis served by lighttpd as helm repository which means the request\nlooks for charts under /www/pages/helm_charts. In order to access\ncharts outside of the chroot /www, a bind mount is created to mount\n/opt/cgcs/helm_charts on /www/pages/helm_charts. This mount resource\nis managed by SM.\n\nValidated:\n on AIO-DX, Standard\n - system application-upload on controller-0\n   system host-swact controller-0\n   system application-apply on controller-1\n - system application-upload on controller-0\n   system host-swact controller-0\n   reboot controller-0\n   system application-delete on controller-1\n   system application-upload with new tarball on controller-1\n   system application-apply on active controller\n - system application-upload on controller-0\n   reboot controller-0\n   reboot controller-1\n   system application-apply on active controller\n on AIO-SX,\n - system application-upload on controller-0\n - system application-apply\n\nStory: 2004520\nTask: 28343\nDepends-On: https://review.openstack.org/#/c/630764/\nChange-Id: I6c70e0f1866589888a826d8a890a21888c55633e\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable N3000 FPGA reset if device is present\n\nAs part of the switch to the singular aio manifest, the reset of the\nN3000 FPGA is no longer being performed at boot by the fpga agent.\nRather, it is now initiated on demand by the puppet manifest if an\nN3000 device is configured for SR-IOV.  This can cause a problem on\nthe first configuration of the device as the PCI address of the FEC\ndevice changes after reset.  That is, on first configuration, a user\nwill be modifying the device based on a PCI address that will not\nexist after the device is reset.  This will cause the subsequent\nenablement of SR-IOV VFs and binding to respective PF/VF drivers\nby the puppet manifest to fail.\n\nThis commit fixes the issue (with the corresponding stx/config\nchange) by performing the reset of the device regardless of whether\nit has been configured or not.\n\nSince there is an existing semantic check to ensure that the device\ncan not be modified before the first unlock, the new check for\nwhether the device's PCI address actually exists on the system will\nensure that the device will be reset but not enabled for SR-IOV on\nfirst unlock.  All subsequent modifications on the device will then\nbe done against the PCI address that exists after reset.\n\nThis commit also removes the check on the number of VFs being\ngreater than 0.  This allows the device to essentially be\n'unconfigured' (number of VFs set to 0).  Rather, a check is done\nto ensure that the configuration of the number of VFs is only\ndone if the current value for this parameter is different than\nwhat is requested by the user.\n\nDepends-on: https://review.opendev.org/c/starlingx/config/+/795123\nPartial-Bug: #1931128\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Iccb26afab30826935362a8c12b1d341b7b1015d0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Maintain sm-api in haproxy runtime on all controllers\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create a new unreplicated filesystem for gnocchi\n\nPuppet changes to configure the default 5G filesystem for gnocchi.\nGnocchi storage moves from /opt/cgcs/ceilometer/data to /opt/gnocchi.\n\nStory: 2002825\nTask: 24240\nDepends-On: https://review.openstack.org/#/c/590449/\n\nChange-Id: If943278d9aaaafe2bfa1f24017499fff6b3e0ecc\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Apply synce command to configured port\n\nThis commit fixes an issue where synce recovered clock commands were\nbeing applied to the base port of the NIC rather than the specified\nport. On Westport Channel NICs, many of the configuration commands must\nbe directed at the base port. The rclka and rclkb commands are the\nexception and should instead be applied directly to the specified port.\n\nThis change also includes an update to the format of the clock-conf.conf\nfile which now indicates both the configured port and the base port for\neach set of supplied parameters. This allows collectd to correctly parse\nwhich ports should be checked.\n\nThe node manifests have been updated to include the nic_clock task.\n\nAdded a notify parameter to the task that generates the environment\nvariables file in order to trigger a service restart when cmdline_opts\nis added or modified.\n\nThe final change was to relocate the task to create clock-conf.conf to\noutside of the create_resources statement as there is no need for it to\nbe run multiple times.\n\nTesting:\n\nFull build and install, validated NIC configuration could be applied,\nptp behaviour unaffected.\n\nStory: 2009130\nTask: 44475\nTask: 44508\nTask: 44509\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I1e8f3ed656c6ea2d5100988d096a7f645591d647\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new runtime manifest to pre-pull control plane images\n\nAdding a new runtime manifest to pre-pull the control plane\nimages. This was being done in the runtime manifest that\nupgraded each control plane, but the pre-pull needs to be\ndone earlier - before the first control plane is upgraded.\n\nChange-Id: I823abf26af0b6ee0aa7897ce8cd6e1a1e2aa864d\nStory: 2006781\nTask: 37579\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet-config ConfigMap based on k8s version\n\nFor K8s 1.24 and later, the kubelet-config ConfigMap does not\nhave a version in the name, while for K8s 1.23 and earlier the\nConfigMap is named kubelet-config-<version>. We need to handle\nboth naming conventions.\n\nThis updates the kubelet-config ConfigMap using the name depending\non k8s version.\n\nTestplan:\nPass: Perform platform upgrade, verify ConfigMaps has new kubelet-config\nConfigMap based on k8s version.\nPass: Verify 'kubectl get cm -n kube-system | grep kubelet-config' shows\nthe updated kubelet-config ConfigMap based on k8s version.\n\nCloses-Bug: 2029358\n\nChange-Id: I263426cc52debb9e273875686a4998668ad1f7c9\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Fix certificates when using ostree\n\nThis work affects only Debian. This fixes a bootstrap issue.\nEnhance https://review.opendev.org/c/starlingx/stx-puppet/+/829125\n\nContents of a CA certificate is generated at runtime.\nOstree doesn't allow changes in /usr, instead use /etc/ssl/certs.\n\nTests on AIO-SX:\nPASS: build-pkgs, build-image, install\nPASS: bootstrap without ostree unlock goes past the issue\nPASS: could download images from private secured docker registry\nPASS: system certificate-install/uninstall\n\nStory: 2009101\nTask: 44484\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Ic7c87ae85b9ec2a1371ea52fddf32c87b4b1483b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Migrate etcd after both controllers are upgraded\n\nThe flag to trigger the data migration is now set by the conductor on\ncontroller-1 and the migration will be performed on controller-0. The\nflag is now set in a drbd synced filesystem so it is accessible to both\ncontrollers.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/771668\nStory: 2008055\nTask: 41631\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nChange-Id: I761740f4de24f33f2d314ec1bc8fbc5941607900\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Generate admin ep cert on subcloud controllers in puppet\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove LVs using original sizes during optimized restore\n\nRemove docker puppet bootstrap from optimized restore.pp\n\nRemoval of bootstrap puppet method as a measure to create\nrobustness in optimized restore process. Docker puppet\nbootstrap is removed from optimized restore.pp and also\nrestore the LVs with default values.\nclass platform::filesystem::docker::params::bootstrap\nis removed from filesystem.pp. Verified lv sizes during\nrestore were correct before and after unlock.\n\nRemove bootstrap methods from puppet.\n\nTest Plan:\nPASS: Bootstrap passed successfully (AIO-SX)\nPASS: Legacy restore is successful (AIO-SX)\nPASS: Optimized restore is successful (AIO-SX)\nPASS: The filesystem was resized (prior to the backup) via:\n      system host-fs-modify controller-0\n      The restore preserved the new larger size.\n\nStory: 2010117\nTask: 47335\n\nSigned-off-by: ksingh <kirti.singh@windriver.com>\nChange-Id: I67b378d0653a8fa6f1b573e032e26e906c53dbc4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "tox/zuul: Set puppetlabs_spec_helper version to 6.0.3\n\nTemporary fix for zuul failing puppet lint gem install\n\nTestPlan:\nPASS Zuul\n\nCloses-Bug: 2039880\n\nChange-Id: Id5557933551c226516148ec74559305320e4597f\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-manifests\n\nAdd debian packaging infrastructure for puppet-manifests\nto build a debian package.\n\nStory: 2009101\nTask: 43317\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I0252ceb4a4179834c0b0833a599bb8a881523e59\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix puppet ignoring insecure registries\n\nPuppet upversioning changed the behavior of our puppet code to\nconfigure insecure registries. The new puppet always comes up with\nan empty list. This commit fixes this issue so insecure registries\ncan be configured again.\n\nTesting\n\nPASS: Bootstrap a system with insecure registries. ensure that\n      /etc/docker/demon.json is updated correctly with the insecure\n      registries. Ensure /etc/containerd/config.toml is also updated.\n\nPASS: Test functionality by manually converting registry.local:9001\n      to an insecure registry. Ensure pulls fails.\n      Add insecure registry entries to the containerd and docker\n      config files above and restart services. Ensure pulls\n      are successful through both docker and containerd.\n\nChange-Id: Iac2c47a75c473a85faf8f2b9e10435e6e106a407\nCloses-bug: 2016187\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix puppet warnings unacceptable location network.pp\n\nFix the following warnings:\n- Unacceptable location regarding classes and defined types\n\nPuppet is raising these warnings on Debian, which makes ansible\nbootstrap to fail.\n\nThis commit fixes the warnings related to file\n...platform/manifests/network.pp.\n\nTest Plan:\n\nCentOS:\nPass: Execute ansible bootstrap\nPass: Controller unlocked/enabled/available\n\nDebian:\nPass: Execute ansible bootstrap\n\nStory: 2009101\nTask: 44681\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I9bff423ff5ddc040c2d31fdcff1278a82866bee6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace image registry with registry.k8s.io\n\nK8s 1.25 and newer want to use the registry.k8s.io image registry, so we\nneed to remove the hardcoded k8s.gcr.io image registry.\nThe kubeadm config images --image-repository=X only prepends the string\nX to the image name result. We safely drop that option and directly\nprepend \"X/\" to the result instead. The k8s version specific registry\nvalue is embedded within kubeadm.\n\nTest Plan:\nPASS: Install ISO with k8s 1.25 on AIO-DX\nPASS: Install ISO with k8s 1.25 on Standard\nPASS: Install ISO with k8s 1.25 on DC\nPASS: Install ISO with k8s 1.24 on AIO-DX\nPASS: Install ISO with k8s 1.24 on Standard\nPASS: Install ISO with k8s 1.24 on DC\n\nStory: 2010368\nTask: 47263\n\nSigned-off-by: Sachin Gopala Krishna <saching.krishna@windriver.com>\nChange-Id: If6bd05e14d89a39603f333392e40eeed61210690\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ignore platform_nfs cmds if plat_nfs_ip is empty\n\nDuring an upgrade from Rel. 7 to Rel. 8 the upgrade-activate failed\nand after some time it was executed again. In the second\nupgrade-activate execution, the update_platform_nfs_ip_references\nwas called again, but it failed because plat_nfs_ip was empty.\nIt happened because this function was already executed once and at\nthe end of it the plat_nfs_ip is removed from system.yaml\nSo if this variable is empty, it means that upgrade-activate was\ncalled again and there is nothing to do.\n\nTest plan\nPASS AIO-DX upgrade from Rel 7 to 8\nPASS manual change in this function changing the plat_nfs_ip\n     value to:\n     $plat_nfs_ip = undef\n     $plat_nfs_ip = ''\n     And executing the upgrade-activate and confirm that\n     commands were not executed\n\nPartial-Bug: #2015392\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I1e9a9e31ab33b1d88125daf1195e8ac14b104e17\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove puppet-manifests code made obsolete by ansible\n\nAs a result of switch to Ansible, remove the obsolete erb\ntemplates and remove the dependency of is_initial_config_primary\nfacter.\n\nChange-Id: I4ca6525f01a37da971dc66a11ee99ea4e115e3ad\nPartial-Bug: 1834218\nDepends-On: https://review.opendev.org/#/c/703517/\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure gnocchi measures storage on both controllers\n\nMeasures cannot be stored and processed when controller-1 is the\nactive controller because gnocchi measures storage is not fully\nconfigured on controller-1. This commit is to run gnocchi-upgrade\nto configure measures storage on both controllers if the storage has\nnot been configured.\n\nCloses-Bug: 1789287\n\nChange-Id: Iffe7d9f40be049be99755768f7b133d74310635c\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "update-k8s-feature-gates script presence check\n\nThe change https://opendev.org/starlingx/integ/commit/a6a5349d025487672fe818aae36a2020a9f9f08c\nadds a script that removes deprecated kube-apiserver feature\ngates. The script is run during platform upgrade (upgrade activate phase).\nThis puppet class https://opendev.org/starlingx/stx-puppet/commit/1cdfd7828622b88318058ae4b13b629fc1d94be9\ninvokes it .\n\nThe script is packaged in kubernetes-1.22.5 package.\nThe package is currently only supported on CentOS and not on\nDebian. As a result, the script is missing on Debian and\nplatform upgrades on Debian are failing.\n\nThis change provides a quick temporary fix to upgrade failures\nbefore the script is made available for Debian.\nThe change adds a check if the script is present before it is\nexecuted, thus avoiding upgrade failures on Debian and unblocks\nupgrade testing.\n\nTesting:\nThis is tested on CentOS as Debian upgrades are still WIP.\nOn AIO-SX:\nPASS: Test upgrade-activate by manually deleting the script.\n      upgrade-activate completes successfully.\n\nPartial-Bug: 1990880\n\nSigned-off-by: Kaustubh Dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Ie35e54e207b2e17b4e906cd6f1cccaa4818a0a2b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for shared NIC with the N3000 FPGA\n\nAn issue can occur when using an N3000 FPGA NIC with upper\nvlan interfaces (oam, mgmt, etc).  Because the N3000 is reset\nafter the networking initialization is complete, any IPv6\naddresses, or (IPv4 / IPv6) default routes configured on the\nvlan interfaces will be removed.\n\nThis commit fixes the issue by operating on a generated\nFPGA resource containing the N3000 interface name and any\nof the 'used by' (upper) interfaces belonging to the device.\n\nIf these resources are present, puppet will restart the\nupper interfaces after the N3000 FPGA is reset, allowing\nany configured IP addresses and routes to be restored.\n\nCloses-Bug: #1931461\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: I2518255f7c33f1914fa5682ca8e00afb2582d8d7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add aggregate to DX service group reprovisioning\n\nThe following prior update added service group reprovisioning on DX\nnodes, but was missing the aggregate option necessary to ensure\ncertain groups were active on the same controller:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/773277\n\nAs a result, failures during swact could lead to these groups being\nassigned to different nodes, causing other failures in the system.\n\nThis update adds the missing aggregate option.\n\nPartial-Bug: 1893669\nSigned-off-by: Don Penney <don.penney@windriver.com>\nChange-Id: I063d1549aa456bd4bb68c4c69c50dbc078ae7be0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix bootstrap failure for subclouds w/ complex passwords\"",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO Reduce number of workers\n\nApply new rule for AIO eng_workers globally. Set eng_workers for all AIO\nvariants based on the number of platform cores, not exceeding 2 for AIO\nsimplex, Xeon-D and virtual box and not exceeding 3 for AIO duplex.\nAll eng_workers derivatives are set to 1 for AIO. A service can add an\nadditional worker if it is deemed necessary in its own puppet\nfile going forward.\n\nTests conducted:\n- Bulk VM launch/delete via heat stack create/delete - duplex (20 VMs) &\n  simplex (10 VMs)\n- Swact, failover, parallel live migration - duplex\n- Lock/unlock with max VMs, DOR - both duplex & simplex\n- Sanity, nightly sanity - both duplex & simplex\n- Full nova regression - duplex\n- Bulk VM launch/delete stress test - duplex (60 VMs)\n- Platform CPU adjustments via system host-cpu-modify\n- Ceilometer message queues verification\n- Standard system installation\n\nChange-Id: Ibd0cd1ae78591a0d979240e66a678f64c6cac2f5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable default CNI plugins\n\nCurrently, only a subset of the default CNI plugins are enabled in\nStarlingX.  These plugins are provided by Calico and placed in the\n/opt/cni/bin directory.\n\nOn CentOS, the full set of CNI plugins that are distributed by the\ncontainernetworking-plugins package are installed under the\ndefault directory for system daemons and utilities at\n/usr/libexec/cni\n\nThis means that some of the default plugins such as static ipam and\ndhcp are not available to be used, as kublet looks at the\n/opt/cni/bin directory by default.\n\nThis commit changes the cni-bin volume of the Calico, Multus, and\nSRIOV CNI daemonsets to refer to the plugin executable path used by\nthe containernetworking-plugins package.  As such, it is also\nrequired that the --cni-bin-dir option now be passed to kubelet.\n\nIn addition, since the config_controller --force option has been\nremoved, we can safely remove the calico, multus, and SRIOV puppet\ntemplates.  They have already been replaced by the equivalent\nansible bootstrap templates.\n\nDepends-on: https://review.opendev.org/680409\nChange-Id: I5a21ccc7cb06ab8f50df19b513335cd4a16211f5\nPartial-Bug: #1840391\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Non applicable nautilus upgrade code removed\n\nSince Ceph nautilus no longer need upgrades, the code is being removed\nto not interfere with installation and future upgrades.\n\nTest Plan:\nPASS Upgrade of 2+2+2\nPASS Upgrade of AIO-DX\nPASS Upgrade of AIO-SX\nPASS Fresh install of AIO-SX\nPASS Fresh install of AIO-DX\nPASS Fresh install of 2+2+2\n\nStory: 2010222\nTask: 45973\n\nSigned-off-by: Luiz Felipe Kina <LuizFelipe.EiskeKina@windriver.com>\nChange-Id: I3ccc0cc444bc751f70a5a2c3345333239cc7fbfa\n",
        "issue_summary": ""
    },
    {
        "commit_message": "iscsi multipath support\n\nAdd service parameter to enable multiple iSCSI multipath:\n\n   system service-parameter-add cinder DEFAULT multipath=true\n   system service-parameter-apply cinder\n\nAdd Puppet manifests for multipathd service.\n\nWhen multipath service parameter is enabled then controller\nand compute nodes go into config out-of-date status. They\nneed to be locked/unlocked to apply the new configuration:\n\n1. cinder.conf (only for controllers)\n\n       [DEFAULT]\n       use_multipath_for_image_xfer=true\n\n       [backend_defaults]\n       use_multipath_for_image_xfer=true\n\n   Note:\n     a. enforce_multipath_for_image_xfer option is not set\n        to allow fallback to single path in case multipathd\n        service is not available\n\n2.  load dm_multipath kernel module\n\n3.  multipath.conf\n      defaults {\n          user_friendly_names yes\n          find_multipaths yes\n      }\n\n      blacklist {\n          device {\n              vendor \"*\"\n          }\n      }\n\n      blacklist_exceptions {\n          property \"(SCSI_IDENT_|ID_WWN)\"\n          device {\n              vendor \"3PARdata\"\n          }\n      }\n\n    Notes:\n      a. multipath support is enabled only for hpe3par\n         iSCSI devices by:\n         - blacklisting devices from all vendors\n         - blacklisting all devices that do not\n           have ID_WWN or SCSI_IDENT_ udev entries\n           (see multipath.conf manual page)\n         - making an exception for 3PARdata vendor\n\n      b. multipath service is managed by systemd\n\nStory: 2002996\nTask: 27040\nChange-Id: Ib34d4542f93e78a507073f43808658be2b9fc87d\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Workaround for console session timeout terminating user processes\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure network config has been applied before containerd\n\nIf containerd is started prior to networking providing a default route,\nthe containerd cri plugin will fail to load with the following message:\n\nmsg=\"failed to load plugin io.containerd.grpc.v1.cri\" error=\"failed to\ncreate CRI service: failed to create stream server: failed to get stream\nserver address: no default routes found in \\\"/proc/net/route\\\" or\n\\\"/proc/net/ipv6_route\\\"\"\n\nand the status of the plugin will be in 'error'\n\nTYPE                  ID  PLATFORMS   STATUS\nio.containerd.grpc.v1 cri linux/amd64 error\n\nThis will prevent any crictl image pulls from working.\n\nThis change will ensure the network config is applied prior to\nconfiguring and restarting containerd.\n\nDocker and containerd also have a dependency, so also ensure the\nnetwork config is applied prior to configuring and restarting\ndocker.\n\nChange-Id: I94a3349b438816d21b147cbd62054862d07d8bee\nPartial-Bug: #1868728\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet evictionHard configuration\n\nAdd the following default settings to evictionHard configuration:\nmemory.available: '100Mi'\nnodefs.available: '10%'\nnodefs.inodesFree: '5%'\n\nIt is related to the change -\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/865524\n\nTest-Plan: Debian\nPASS \u2013 Executed the \u201csystem kube-config-kubelet\" in AIO-SX with the\n       change. Results the output - \u201cSuccess: kube-config-kubelet\n       applied.\u201d\n\n       Verified in the kubelet config which has the added evictionHard\n       default values.\n\n       Verified in /var/log/sysinv.log & /var/log/puppet/latest/puppet.log\n       which contains the runtime puppet manifest applied messages.\n\nCloses-Bug: 1997672\n\nSigned-off-by: Ramesh Kumar Sivanandam <rameshkumar.sivanandam@windriver.com>\nChange-Id: Icd7c4c7148bf5185513c927efbacb39e65b033d2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Trigger application reapply on host unlock/delete\n\n- Triggers an application reapply (including override\n  regeneration) on node unlock to pick up a new node being added\n  or configuration changes being made.\n- The reapply also triggers on node delete if the host\n  had a compute node label to remove any per-host overrides.\n- Turned on the restriction that nodes must be locked to modify\n  labels.  Added an audit task to sync any labels made before\n  a node is unlocked and missing from k8s.\n- Modified k8s puppet manifest to only launch kubelet on the\n  initial configuration, after that the service file is\n  modified to have a dependancy on the config gate.\n  This is to avoid PLEG errors in kubernetes due to the node\n  being overwhelmed during boot.\n\nChange-Id: I1d9ca92f451aa322765da43ffcbb1d95f97f92f2\nStory: 2004520\nTask: 28826\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "modify k8s behaviour when upgrading first master\n\nmodify upgrade first master control plane operation to\n- configure kubelet cgroupDriver=cgroupfs\n- configure kube-apiserver feature-gates RemoveSelfLink=false\n\nTesting:\nPASS: successful k8s version upgrades (manual)\n      from 1.18 -> 1.19 -> 1.20 -> 1.21 on AIO-DX system.\n      Verified that PVCs are bound to PVs after each upgrade.\n      Verified that pods are up and running after each upgrade.\n      Verified that kube-apiserver manifest and kubelet config\n      file is configured as expected after each upgrade\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/818651\nStory: 2008972\nTask: 44041\n\nSigned-off-by: kdhokte <kaustubh.dhokte@windriver.com>\nChange-Id: I5f2d913f10ade2e7938a59170df76616de248ec3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Applying SRIOV VF configuration at runtime\n\nDuring runtime, if a user converts a non pci-sriov classed interface\nto a pci-sriov classed interface with type 'ethernet', or creates an\nSR-IOV interface of type 'VF', logic is implemented to enable and\nconfigure the interface'\n\nStory: 2008531\nTask: 42203\nChange-Id: I0edb4abf2cea6dc29b9485fa09d1fecab4b76c65\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Automate default enablement of auditd\n\nAuditd service is disabled by default.\nIt needs to be enabled to support auditd containerized solution.\nThis change automates the manual steps to set \u2018audit=1\u2019 as a kernel\nboot parameter in the standard security profile and update GRUB2\nconfiguration file, \"grub.cfg\".\nNew parameter \"audit_backlog_limit=8192\" has been set to avoid\n\"audit: kauditd hold queue overflow\" messages, see issue at\nhttp://security-plus-data-science.blogspot.com/2017/05/\na-suggested-change-for-rhel-7-disa-stig.html.\n\nStory: 2008849\nTask: 42844\n\nChange-Id: I21e42d1d5b7d205856032813d1a0559d676b35ec\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-manifests: validate cpu list before setting latencies\n\nDo not attempt to set wakeup latency unless the list of CPU instances is\nnon-empty.  If either the low or high wakeup list is empty then there is\nno need to attempt to run the script.  Running the script with an empty\nlist results in a manifest apply errors and fails the node\ninitialization.\n\nStory: 2004357\nTask: 27957\n\nChange-Id: I89f19388d131b6c377020c55f5b13960738e350d\nSigned-off-by: Allain Legacy <allain.legacy@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enclose Barbican API host into square brackets in case of IPv6\n\nBarbican fails to start in case of IPv6 configuration:\n\"Error: ':2:9311' is not a valid port number.\"\nWrong parsing of IPv6 host address can be fixed by adding [].\nAlso dropping '' for API workers number for the sake of consistency.\n\nChange-Id: Ie40a0338d202dfa1cc17810db56d902b14e5accf\nCloses-Bug: 1810558\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Provision cert-alarm service and setup cert-alarm.conf\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Uprev calico from 3.1.3 to 3.2.3\n\nFiles are being updated based on\n https://docs.projectcalico.org/v3.2/getting-started/kubernetes\n\nrbac-kdd.yaml.erb originates from:\n installation/hosted/rbac-kdd.yaml\n\ncalico.yaml.erb originates from:\n installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml\n\nStory: 2002843\nTask: 26751\nChange-Id: I1d88a8f777bcecfc90b2fdc82edeb39f823b6150\nDepends-On: I1e25e17ce865960950e98e5033ccf1e43b3a8611\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix restore failure during puppet-manifest-apply\n\nWhen K8s custom config puppet script is executed during restore\nplaybook, K8s updates fail when trying to validate cluster network\ndata. This happens whenever the OAM IP address is reconfigured (after\nreinstall) with a different protocol version than the one used for the\nK8 cluster host subnet.\n\nThe issue is related to \"advertise-address\" parameter. It is not\npredefined in the api-server extra-args during bootstrap, so k8s gets\nthe host's default interface as default value. In this case, the host\u2019s\ndefault value is an IPv4 (IPv6) address while all the other K8s cluster\nsubnets are configured with IPv6 (IPv4) addresses.\n\nK8s validation fails because STX defaults to a SingleStack mode. Only\ndual-stack networks allow the assignment of IPv4 and IPv6 addresses to\npods and services.\n\nTest Plan:\n  PASS: Fresh Install AIO-SX.\n  PASS: Create a backup and reinstall server.\n  PASS: Reconfigure network OAM IF with a different IP family.\n  PASS: Restore system.\n  PASS: Verify advertise-address parameter.\n  PASS: Modify and Apply K8s service-parameter.\n  PASS: Fresh Install STD/DX\n  PASS: Modify and Apply K8s service-parameter.\n  PASS: Verify advertise-address parameter in both controllers.\n\nCloses-bug: 2001715\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I6f75f171d0a45abe2d5e047a31308dc97ce19eed\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Expose dcmanager engineering parameters in dcmanager.conf\n\nAdding various engineering parameters into the\n/etc/dcmanager/dcmanager.conf file for easier\ntuning if necessary in the lab/field.\n\nThis commit adds the following parameters:\n\n  workers=1\n  orch_workers=1\n  state_workers=4\n  audit_workers=1\n  audit_worker_workers=4\n  playbook_timeout=3600\n\nNote: These values override the settings in\nthe config values in code from\ndistributedcloud/dcmanager/common/config.py.\n\nTest Plan:\n\nPASS:\n- install new load, ensure configuration values are in\n  /etc/dcmanager/dcmanager.conf\n- verify that changing value in /etc/dcmanager/dcmanager.conf file\n  overrides the configuration in code\n\nStory: 2009725\nTask: 45240\nChange-Id: I33c137c603e48233158570e6b241859b5f7358bc\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix system garbage-collect\n\nOn Debian docker registry has moved to /usr/bin/docker-registry.\nPuppet calls a command with the CentOS path, resulting in error.\n\nUpdated a command in the platform::dockerdistribution::garbagecollect\nclass to point to correct registry path.\n\nTest Plan:\nDeployed the ISO with the change as AIO-SX and verified the\n/var/log/puppet/latest/puppet.log file.\n\nCloses-Bug: 1998183\n\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\nChange-Id: If001e4294a8de0ff2eed0f4455fb0fe7acff1b6d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet change to configure insecure registries\n\nIn commit https://review.opendev.org/#/c/692435/,\nit refactors the parameter is_secure_registry to provide the\nability to configure insecure registry for each override-able\npublic registry.\n\nThis commit updates the puppet to support multiple insecure\nregistries.\n\nChange-Id: I81d2ad271fe9ef2ae3ca4ccf2598f5b04e90c4f6\nDepends-On: https://review.opendev.org/#/c/692434/\nCloses-Bug: 1850178\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set bridge-nf-call-arptables\n\nThis commit sets net.bridge.bridge-nf-call-arptables=1, which was\nfound to be required for a containerized neutron deployment.\n\nStory: 2004520\nTask: 28789\nChange-Id: I0163535ed6bac7e775a63dfa3d54727c60f4208d\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove hardcoded /scratch size from manifest\n\nThis update removes the hardcoded sizing of /scratch on controllers\nfrom the filesystem manifest, and instead using the configured lv_size\nfrom sysinv. Currently, on a reinstall of the controller, the\nconfigured size would be ignored, and /scratch would be resized to the\nhardcoded 16G value. Instead, the initial sizing is updated to 16G in\nthe controller kickstarts, sizing /scratch to the desired default size\non installation. If the filesystem has been resized in sysinv\nconfiguration to a higher value, then the filesystem manifest will now\nresize accordingly on a reinstall.\n\nDepends-On: https://review.opendev.org/738084\nChange-Id: Id0f7072d555018f8b19b91fd291ac3b008c10173\nCloses-Bug: 1885168\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-dcorch\n\nAdd debian packaging infrastructure for puppet-dcorch.\n\nStory: 2009101\nTask: 43312\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I845982df65f71da702bd2a561bceea0f473ea581\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ipv6 cluster networking support\n\nAddresses several issues with deploying IPv6 based network deployments:\n  - kubelet node IP assignment for IP version detection\n  - calico upversion to fix router ID generation from hash\n  - calico configuration specific to IPv6\n  - multus configuration specific to IPv6\n  - ansible bootstrap playbook updates to wrap IPv6 addresses\n  - ansible bootstrap updated to use Jinja2 templates\n  - puppet configuration for platform services with IPv6 addresses\n  - IPv4 and IPv6 IP forwarding sysctl setup\n  - docker registry does not support URL encoded IPv6\n  - armada does not support IPv6 address binding\n\nNOTE:\nThe Puppet ERB templates were updated to maintain config_controller\nfunctionality, but the files moved to Jinja2 templates should be removed\nonce config_controller is completely removed.\n\nChange-Id: I815035c679e61250099c74b1239f19bcc72733a0\nDepends-On: https://review.opendev.org/662292\nCloses-Bug: #1830779\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Test real postgres service\n\nThis work fixes an unlock issue.\nAt aio manifest apply, sysinv-dbsync task is started even though\npostgresql is not running. There is a wrong check which verifies\nthe proxy postgresql service.\n\nUpdate to check the real service.\n\nTest on AIO-SX:\nCentOS: skip, just a condition + 2 whitespaces added to a code block\nDebian: unlocked-enabled-active with other work related to postgresql\n\nDoes not depend on any commit.\n\nStory: 2009965\nTask: 45362\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I7f9355debb76035d3db6cc5d768d745435ddda5b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add retry to tolerate 'ip link set' failure\n\nIf 'ip link set' is executed too fast for X710, it is possible\nthat some of them fails with 'Resource temporarily unavailable'.\nAdd retry in puppet Exec resource to tolerate this failure case.\n\nStory: 2008470\nTask: 41936\n\nSigned-off-by: Litao Gao <litao.gao@windriver.com>\nChange-Id: Ib80ea77d36a0b0f63d3db2015dadb3911c56d1e9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing ceph setup to get a HEALTHY cluster after installation\n\nRemoved all mon_addr to use only mon_host on the global section\nwithout the port number so the monitors will listen on both default\nports for Messenger v1 (6789) and v2 (3300)[1]. Also mon_addr is\ndeprecated since 14.2.0 [2]\n\nSetting mon/mon_warn_on_pool_no_redundancy to false by default on\nAIO-SX\n\n[1] - https://docs.ceph.com/en/nautilus/rados/configuration/msgr2/\n[2] - https://ceph.io/en/news/blog/2019/v14-2-0-nautilus-released/\n\nTest plan:\n\nPASS: Install on AIO-SX, AIO-DX, Standard and Storage configs\nsuccessfully and without alarms (fm alarm-list) or ceph warnings\n(ceph -s).\nPASS: platform-integ-apps is applied successfully\n\nStory: 2009074\nTask: 43463\nDepends-On: https://review.opendev.org/c/starlingx/config/+/814595\n\nSigned-off-by: Delfino Curado <delfinogomes.curadofilho@windriver.com>\nChange-Id: I12cd4ec3d5d29c9d51c717b39a85dd40304427f0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Bind /var/lib/systemd/coredump/ to /var/log/coredump/\n\nCheck if directories exists and bind\n/var/lib/systemd/coredump/ to /var/log/coredump/\n\nTest Plan:\n  PASSED: Create file on /var/log/coredump and verified if\n    it was also on /var/lib/systemd/coredump/\n    https://paste.opendev.org/show/b1UvTTkYT32qUZVJtAmb/\n\nStory: 2010026\nTask: 45271\n\nSigned-off-by: Heron Vieira <heron.vieira@windriver.com>\nChange-Id: I362bb55f8faf9610b65057eb3b43615ed3839cc1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ghcr docker registry\n\nIn an effort to uprev the SR-IOV and multus images, add the\nghcr registries, which is where the upstream release images are\nnow tracked and stored.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/803364\nStory: 2008972\nTask: 42929\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: I7755f910c1e71d08c1b8b3e054c2bf5d7e16662e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-cinder: Fix cinder calling nova over public ip\n\nUsing public ip leads to SSL certificate failures on HTTPS enabled\ndeployments.\n\nCinder stopped using two cinder.conf options, nova_catalog_info and\nnova_catalog_admin_info.\nThe two options are replaced by [nova]/interface. Upstream puppet is\nstill using the two options although cinder seems to have stopped.\n\nChange-Id: I1c5b11d26d90bfe36045dacc4335997a1c5141b6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph for standard: Puppet functional changes\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1, 2 node and Standard configurations.\n\nThis commit enables CEPH on a standard configuration without dedicated\nstorage by allowing users to add the 3rd Ceph monitor to a worker node.\nIt implements the puppet functional part that enables ceph to work on\na standard deployment.\n\nDetails:\n* Update ceph.conf with the new monitor by removing unused ones\n* Reserve space on any worker for ceph-mon-lv, this will make sure\n  that user is able to configure a ceph-mon at any time without the\n  need to extend platform-vg.\n* In System Inventory make sure the correct IP addresses are\n  passed to the puppet yaml's.\n\nChange-Id: I7b8a01a7f2cf18f20e3509c2416f038580b4a071\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 28723\nDepends-On: https://review.openstack.org/629166/\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Include keystone cache dependency\n\nThis change includes the required dependency that puppet needs to\ncorrectly process the parameters changed in sysinv on ticket\nhttps://review.opendev.org/c/starlingx/config/+/870119\n\nTEST PLAN:\nPASS: AIO-SX: create and deploy Debian installation ISO.\nPASS: AIO-SX: check if cache configuration was correctly applied.\nPASS: AIO-SX: check if memcached has data from keystone.\n\nStory: 2010574\nTask: 47321\n\nSigned-off-by: Reynaldo P Gomes <reynaldo.patronegomes@windriver.com>\nChange-Id: I1401e93d8a0329d7280527b29b8bee86b2afb77f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove AODH and Gnocchi service parameters\n\nRemoves the aodh service parameter alarm_history_time_to_live\nRemoves references to aodh and gnocchi from puppet and upgrade code.\nRemoves old gnocchi references from remote logging.\n\nStory: 2004764\nTask: 30537\nChange-Id: I3a03dd4a2afd47f1cc3f677f02d348eabf11a653\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix puppet warnings unacceptable location\n\nFix the following warnings:\n- Unacceptable location regarding classes and defined types\n\nPuppet is raising this warnings on Debian, which makes ansible\nbootstrap to fail.\n\nThis commit fixes the warnings related to file\n...openstack/manifests/keystone.pp\n\nTest Plan:\n\nCentOS:\nPass: Execute ansible bootstrap\nPass: Controller unlocked/enabled/available\n\nDebian:\nPass: Execute ansible bootstrap\n\nStory: 2009101\nTask: 44680\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: Ib2dcdcc6e851c5ba5e12b0aedb503e190ac6b004\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv ZeroMQ RPC backend configuration\n\nAdd configuration variables for sysinv ZeroMQ-based RPC backend:\nhttps://review.opendev.org/c/starlingx/config/+/859571\n\nTEST PLAN:\nPASS: Bootstrap and host-unlock on AIO-SX, AIO-DX, and Standard\nPASS: Bootstrap and host-unlock on DC system-controller and subcloud\nPASS: Backup & Restore on AIO-SX\n\nStory: 2010087\nTask: 46445\n\nSigned-off-by: Alyson Deives Pereira <alyson.deivespereira@windriver.com>\nChange-Id: Ibe1816df571aafe9813b99deea833cca99370cd2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update ldap puppet to support sssd\n\nThis is part of the change to replace nslcd with sssd to\nsupport multiple secure ldap backends.\n\nThis change updated ldap puppet to support sssd on Debian.\n\nadmin user is no longer created in \"root\" group, because a feature\nof sssd is filtering out user with either uid or gid equal to 0.\nadmin user is now created in \"users\" group with sudo privilege.\n\nAlso with this change, openldap certificate is generated, and ldap\nis configured to use the certificate during unlock, instead of being\ntriggered by cert-mon at runtime after controller-0 is unlocked.\nThis is because cert-mon could trigger certificate generation and\nconfiguration before controller-1 is installed, causing openldap\ncertificate never generated on controller-1.\n\nThis change also enabled sssd puppet configuration on AIO-DX system.\n\nTest Plan on Debian (SX and DX):\nPASS: Package build, image build.\nPASS: System deployment.\nPASS: Openldap certificate and key files are generated, and openldap\n      is configured to be secure, using the TLS certificate and key\n      after controller is unlocked.\nPASS: sssd is connected to slapd on the secure port after unlock.\nPASS: ldap functions work properly (ldap user creation, user login\n      on console and by ssh etc).\nPASS: For DX system, ldap functions still work properly after swact.\n\nTest Plan on CentOS:\nPASS: ldap functions work properly (ldap user creation, user login\n      on console and by ssh etc)\n\nStory: 2009834\nTask: 46067\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/854203\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ia3f1a284109e3f032464f239efcfec273eb2efe1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid \"systemctl is-active\" calls to prevent process restarts\n\nReplaces \"systemctl is-active\" calls by \"pid file check\" approach for\ndocker-distribution (docker-registry) and registry-token-server\nservices. These calls were causing unnecessary process restarts in\ncases where systemd was halted due to contention on kernfs_mutex.\n\nTest Plan:\nPASS: Verify docker-distribution status\nPASS: Verify registry-token-server status\n\nPartial-bug: 2016028\nChange-Id: I2398d7f397ad14d2ff1ff6d40141ffad4f54f2e3\nSigned-off-by: Davi Frossard <dbarrosf@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubernetes config for 1.15 features.\n\nUpgrading from kubernetes 1.13.5 to 1.15.0 meant the config\nneeded to be updated to handle whatever was deprecated or dropped\nin 1.14 and 1.15.\n\n1) Removed \"ConfigMapAndSecretChangeDetectionStrategy = Watch\"\nreported by https://github.com/kubernetes/kubernetes/issues/74412\nbecause this was a golang deficiency, and is fixed by the newer\nversion of golang.\n\n2) Enforced the kubernetes 1.15.3 version\n\n3) Updated v1alpha3 to v1beta2, since alpha3 was dropped in 1.14\nchanged fields for beta1 and beta2 are mentioned in these docs:\nhttps://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta1\nhttps://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2\n\n4) cgroup validation checking now includes the pids subfolder.\n\n5) Update ceph-config-helper to v1.15 kubernetes compatable\nThis means that the stx-openstack version check needed to be increased\n\nChange-Id: Ibe3d5960c5dee1d217d01fbb56c785581dd1b42c\nStory: 2005860\nTask: 35841\nDepends-On: https://review.opendev.org/#/c/671150\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove nohz_full parameter from grub cmd if plugin is disabling it\n\nIn order to remove the nohz_full from grub cmdline parameters we\nneed to remove it from the grub_updates in the grub update procedure.\n\nPartial-Bug: https://bugs.launchpad.net/starlingx/+bug/1981762\n\nNote: EFI support is not needed.\n\nTest plan:\nPASS: Label assign and check /etc/default/grub\nPASS: Label assign and check /sys/devices/system/cpu/nohz_full\nPASS: Label remove and check /etc/default/grub\nPASS: Label assign and check /sys/devices/system/cpu/nohz_full\nPASS: Verify system alarms after host unlock/host reboot\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ib8cf19807e65893382bbcfd8067ffcb58506661d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure calico-ipam for multus k8s pod network\n\nThis commit configures calico-ipam rather than host-local for the\nIPAM configuration on the k8s pod network delegate.\n\nUsing host-local IPAM, there is a possibility for duplicate IP\naddress allocation as the IP addresses are managed locally on\nthe node's file system.\n\nUsing calico-ipam, the IP addresses are managed across the\ncluster as a whole.\n\nCloses-Bug: #1830282\n\nChange-Id: I9a68fc164ad88f295827442ec83236c454af7907\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add a cron job to purge dcorch database\"",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca host update trustBothCAs\n\nThis update:\n- added runtime puppet manifests for host root CA\nupdate phase=trustBothCAs.\n- Updated master and worker runtime manifests so that\nmaster class runs on controller node, worker class runs\non worker node.\n\nStory: 2008675\nTask: 42413\nChange-Id: I4a614245721f30d20932f2eaf4153347506137d9\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix word and statement errors in comments\n\nfix some typos in comments, such as the duplicated word 'the the'.\n\nChange-Id: I28ffde825fd95186bc3a0bd077dea7c20287fc1f\nStory: 2004164\nTask: 27641\nSigned-off-by: zhangkunpeng <zhang.kunpeng@99cloud.net>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set default value for private_dc_ip_address\n\nIt was found that when applying a patch containing the code for\nenabling the admin network on distributed cloud systems, a\nproblem could occur after unlock because of an undefined value\nfor 'private_dc_ip_address'.\n\nThis is because the value of this puppet parameter is only set\nin the system.yaml hieradata, which is not written on normal\nhost lock/unlock.\n\nThe value is generated however, when a user assigns an interface\nto the admin network, or performs another action that leads to\nthe system hieradata being generated.\n\nIf the user has not assigned an interface to the admin network,\nor if the user has no interest in using the admin network, this\ncommit ensures that the value of the private_dc_ip_address is\nthat of the private_ip_address (ie. mgmt).\n\nSetting the private_dc_ip_address to the private_ip_address\nas default ensures that every component using the haproxy::params\nbehaves as it did pre-patch.\n\nTesting:\n\nSuccess path:\n\n- Install, lock / unlock AIO-SX system (stx 8.0 + patch)\n- Install, lock / unlock an AIO-DX DC subcloud (stx 8.0 + patch)\n- Update a DC subcloud to use the admin network after the system\n  has been patched.\n\nRegression:\n\n- Install, lock / unlock AIO-SX system (dev build)\n- Install, lock / unlock an AIO-DX DC subcloud (dev build)\n- Install a DC subcloud using the mgmt. network (dev build)\n- Install a DC subcloud using the admin network (dev build)\n\nStory: 2010319\nTask: 46911\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Ice16a4a3a2d9faa461c1c0f98d1ea0b0c7ce751a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Keystone for Distributed Cloud\n\nThis feature adds the ability to run Keystone in each Subcloud and\nimplements a Distributed Service Catalog such that the Central Region\nKeystone ONLY contains the Identity endpoint for each subcloud.\n\nThe DC Manager and DC Orchestration framework then does a 2 stage lookup\nto first procure a token from the subcloud and then use that for further\ncommunication with that subcloud.\n\nThis delivery adds the following:\n- New DC Orch Identity Proxy SM service\n- Keystone manifest changes to run init_keystone in Subcloud to spawn a\n  local Keystone instance\n- Modify System Controller Identity endpoints 5000 to 25000, i.e binding\n  to DC-Orch-API-Proxy\n- DC Manager and DC Orch Changes to do a 2-stage lookup on subclouds\n  (Distributed Service Catalog)\n- Cherry pick Endpoint Filter Group patches into Openstack client\n- Add Resource Sync for Keystone Users, Projects and Roles and reporting\n  to DC Manager\n- Add Auditing for Keystone Users, Projects and Roles on Central Region\n  and Subclouds\n- Lab Setup changes to configure Tenant users and projects against the\n  Keystone DC Proxy (port 25000) so that these may be synced to\nsubclouds.\n\nStory: 2002842\nTask: 22785\n\nChange-Id: I2db7610532d1835246b29bedf2cb719669f11935\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Run docker login at worker startup\n\nThe N3000 FPGA tools run in a docker container on the worker nodes including\nthe standby controller in an AIO-DX environment where it's difficult to\nobtain the docker password.\n\nAs such, let's have the root user run \"docker login\" for the local registry\nduring early startup. That will then ensure that the sysinv FPGA agent can\npull docker images from the local registry in order to talk to the N3000\nFPGA.\n\nChange-Id: I6d1f2c1c20b814c4c91cb033fc9f36261d8686d3\nStory: 2006740\nTask: 39931\nDepends-On: Ie9eea8b670f0c82f0108ccbec978500e1bc0eb6a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove vswitch weigher\n\nRemoved vswitch weigher and platform monitor entries from\nnova_config.metrics, as they are no longer needed.\n\nStory: 2004312\nTask: 27879\n\nChange-Id: I1bcb34363d1f2c1d1772741644d564a5b73f2f89\nSigned-off-by: Daniel Chavolla <daniel.chavolla@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubelet scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on kubelet service documentation\n\nTEST PLAN:\nPASS: build a new Debian ISO.\nPASS: AIO: SX|DX|DX+: Install, bootstrap and perform a host-unlock\nverifying that GOMAXPROCS is following the correct scalability set\nparameter.\nPASS: STD: Install, bootstrap and perform a host-unlock verifying\nthat GOMAXPROCS is following the correct scalability set parameter.\nPASS: Single-core for scale-down testing.\nPASS: Increased cores for scale-up testing.\n\nStory: 2010087\nTask: 45704\nChange-Id: Ib4962e2c34542a443059d4d80684f3f88f5492a3\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reserve tiller ports as part of controller bootstrap\n\nEphemeral port reservation was taking place only after the initial\ncontroller unlock. This still allowed for kubernetes based services to\nclaim the tiller ports in the ephemeral range after initial bootstrap.\n\nInclude tiller port reservation as part of the bootstrap manifests and\nadd an explicit dependency with the platform::kubernetes::master class.\n\nChange-Id: I7540cdfdd13ded63d154ee8ea0b1c8c326491d63\nCloses-Bug: #1856209\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable PHC sanity check in case of software PTP mode.\n\nboundary_clock_jbod performs a sanity check to make sure\nthat all of the ports share the same hardware clock device.\nThis option is not needed in case of software PTP mode.\nMoreover it interferes with normal PTP operation in this\ncase and causes PTP clocks instability in a network.\n\nAlso, cleaning up unused pmon scripts for ptp4l and phc2sys\nand adding services dependencies from mainline linuxptp.\n\nChange-Id: If4bbe6af600dbdf38d301deafb7dc050a7754cad\nCloses-bug: 1824218\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix vim endpoint issue after an upgrade\n\nFixed a issue for Distributed Cloud where a new endpoint was being\ncreated for vim instead of updated, mantaining the old http openstack\nkeystone endpoint in SystemController.\n\nTest Plan:\nPASS: On a DC environment, list endpoints for OpenStack. Enable https.\n      Wait for puppet to apply the changes (might take a few minutes).\n      Observe that vim's public endpoint for SystemController\n      successfully changes from http to https, and no other public\n      http endpoint for vim is mantained for SystemController region.\nPASS: After running above test, disable https. Wait for puppet to\n      apply the changes. Observe that vim's public endpoint for\n      SystemController successfully changes from https to http, and\n      no other public https endpoint for vim is\n      mantained for SystemController region.\nPASS: On a DC environment, list endpoints for OpenStack. Obtain\n      keystone token from Identity API. Use it to make requests for vim\n      newly created endpoints (admin and internal). The behavior should\n      be consistent with StarlingX API reference for NFV VIM.\n\nCloses-Bug: 1995951\nChange-Id: I56f0c196c884ed40dbf2128598dd600fc413fed3\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "openSUSE specfiles fix-up\n\nThe last merge was not fully tested when it got merged, this cleans\nup some issues with the openSUSE specfiles.\n\nChange-Id: I9a56890877b2e0bfcc759c4acef5a985977b1995\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Debian: Replace hiera_hash and hiera_include funcs\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Keystone DB sync - update puppet manifest for dcdbsync service\n\nThis commit adds dcorch dbsync sysinv puppet plugin. It also updates\ncontroller manifest to deploy and configure the service, and sm\nmanifest to manage the service. With this commit, dbsync service will\nbe deployed, configured, and started after config_controller.\n\nStory: 2002842\nTask: 22787\n\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n(cherry picked from commit 047eda8ea5c91ac3b71e61737b6cbd239457d117)\n\nConflicts:\n\tpuppet-manifests/centos/build_srpm.data\n\tpuppet-manifests/src/modules/openstack/templates/keystone-policy.json.erb\n\tpuppet-manifests/src/modules/platform/manifests/sm.pp\n\tsysinv/sysinv/sysinv/setup.cfg\n\nDepends-On: https://review.opendev.org/#/c/655903\nDepends-On: https://review.opendev.org/#/c/655757\nChange-Id: I3e361d6751f22ace3600206289dabb8c9d174661\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add SM support for the DC admin network\n\nThis commit adds SM support for the DC admin network.\n\nThe admin network is intended to be used between a subcloud\nand system controller. Because the (existing) management network\nis so embedded in other parts of the StarlingX system, it makes\nit prohibitively hard to re-configure this network after initial\ninstallation.  The admin network is intended to be isolated from\nthe management network, allowing re-configuration of the network\nparameters in the case that the physical network between subcloud\nand system controller has been changed.\n\nIn the case of admin network usage, the management network still\nexists but is a private network in the context of a subcloud.\n\nThis commit provides for SM parameters of the admin network\nto be updated at runtime for an AIO-SX subcloud.\n\nDepends-On: https://review.opendev.org/c/starlingx/ha/+/868361\n\nTesting:\n\n  AIO-SX:\n    - admin-ip service is enabled when the admin network is\n      created.\n    - admin-ip service is not enabled when the admin network is\n      not created.\n    - floating-ip is updated on the admin interface when admin\n      addr-pool information is changed.\n  AIO-DX:\n    - admin-ip service is enabled when the admin network is\n      created.\n    - admin-ip service is not enabled when the admin network\n      is not credated.\n    - floating-ip is updated on the active-controller when the\n      admin addr-pool information is changed.\n    - When a peer admin interface is down, an alarm is raised.\n    - When a peer admin IP is not correct (changed), an alarm\n      is raised.\n    - Swact between controllers.\n\nStory: 2010319\nTask: 47277\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Idd22af3c9c8c95586407bd0a6394d944aeca55a8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make sure OSDs are placed on nodes\n\nWith the recent work that added the possibility to take a backup on\ncontroller-1 and restore on controller-0 the [osd.X] entries are removed\nfrom ceph.conf before controller-0 unlock.\n\nAn [osd.X] entry must be present in ceph.conf so that a ceph-osd process\nis spawned and the directory structure for that osd is created in\n/var/lib/ceph/osd/ceph-X.\n\nMtc runs an initialization script which expects that directory to be\npopulated, otherwise it fails and places the node in a degraded state.\n\nFor AIO systems the [osd] entry was present populated, but for STANDARD\nit was not. This commit ensures the entry is populated for both AIO and\nSTANDARD systems.\n\nTested full install + platform B&R on AIO-SX, AIO-DX, STANDARD with\ncontroller storage, all with ceph.\n\nCloses-Bug: 1901636\nChange-Id: I669ad3b22f59136253d42cdf6ac603fba31000be\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure puppet dns config done after networking config\n\nIn some labs, the puppet manifest application during\nconfig_controller results in the ::platform::network class\nbeing applied after the ::platform::dns class. This causes the\n/etc/resolv.conf file to be wiped (when the\napply_network_config.sh is run by the ::platform::network\nclass).\n\nThe fix is to introduce a dependency to ensure that the\nnetworking config is completed before the dns config is done.\n\nChange-Id: Ie4a8b67e5eb3594f5c21e22f8014d2b8162a0758\nRelated-bug: 1812449\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create a new drbd synch'd filesystem for ETCD\n\nThe new drbd fs for etcd will be managed by SM.\nEtcd data directory will be created on this new etcd-fs for kubernetes\nconfig.\n\nStory: 2002841\nTask: 22784\n\nChange-Id: I5a11a17e8292a074104a73052ea27d979cd68f57\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove RegionOne endpoints only if they exist\n\nIn a DC subcloud, when openstack::keystone::endpoint::runtime is\ninvoked after system is fully configured by ansible, it still tries\nto delete \"RegionOne\" endpoints. The operation will fail since\n\"RegionOne\" endpoints have already been deleted, causing a 250.001\n(configuration out of date) alarm raised. The alarm won't be cleared\nuntil a lock/unlock of the controllers.\n\nThis update enhanced the runtime class to delete \"RegionOne\" endpoints\nonly if they exist.\n\nChange-Id: I0e1b7dd88773017281496595aff648cee1dda9ae\nCloses-Bug: 1847808\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update n3000-config file\n\n- Update n3000-config.erb file to use fpga_5gnr_config_1vf.cfg file.\n\nTest Plan:\n- Configure N3000 device on active controller.\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/880403\n\nStory: 2010698\nTask: 47830\n\nChange-Id: Ia9132d426da4f202a61841533e8c70990734b780\nSigned-off-by: Nidhi Shivashankara Belur <nidhi.shivashankara.belur@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: turn jit off for postgres\n\njit was enabled by default starting with postgres 12\nhowever it has a negative performance impact on many\nexisting queries, and can lead to rpc timeouts and slow\nhost-unlock operations.\n\nThis change may be revisited once the newer puppet-postgres\nis introduced.\n\nTest Plan:\n  Build / Install / Bootstrap / Unlock on Debian\n  Verify that postgres log is not full of performance\nlogs for postgres operations that exceed one second.\n  Verify that system host-lock / host-unlock work fine.\n\nStory: 2009965\nTask: 45255\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: I62f51965fe7140c19b28e7e8fbd60eb9822166ab\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust dcorch database pool size for dcorch scaling\n\nThe dcorch database pool sizes are updated based upon\nthe delivery of feature with multiple dcorch engine workers.\n\nAs the workload is allocated amongst 5 multiple workers,\nthe values for the dcorch database pools can be lowered\nfrom the defaults previously set for the single process case.\n\nThe max theoretical database connections allowable per worker\nis based on 100 audit and 100 sync threads.\n\nFurthermore, the dcorch scaling feature audits based on\naudit timestamp so the peak loads are also likely more balanced.\n\nTestcases:\nIn multiple subclouds environment, monitor each\ndcorch engine each workers database connections usage:\nsubcloud add\nsubcloud initial manage\nsubcloud resource sync\nsubcloud manage and unmanage\n\nChange-Id: Id3386df6289d42080a90b9d97cc0834054160805\nStory: 2007267\nTask: 41650\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize to /var\n\nAdd support to to modifying /var logical volume group\nthrough the system host-fs-modify command\n\nTest Plan\nPASS - Install ISO and resized /var\n       https://paste.openstack.org/raw/818478/\n\nStory: 2009303\nTask: 47231\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I1b3ac2364484ca39a5c2cf6b6662c0205081abff\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph for standard: System Inventory CLI, API, DB\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1, 2 node and Standard configurations.\n\nThis commit enables CEPH on a standard configuration without dedicated\nstorage nodes by allowing users to add the 3rd Ceph monitor to a worker\nnode. It implements the functional part of this feature.\n\nDetails:\n* Improve Ceph Monitor CLI to allow adding and deleting Ceph monitors\n* Refactor Ceph Monitor API handling code;\n* Add status and task DB column for ceph_mon table;\n* Apply puppet manifests when a Ceph monitor is added through CLI or API\n  at runtime on all nodes;\n* Monitor manifest application status and report back puppet apply\n  status on controllers;\n* Delete monitor when worker is deleted;\n* Add monitor for storage nodes;\n* Minimal semantics.\n\nChange-Id: Ie316bb611a006bbbc92ac22c52c3973cc9f15109\nCo-Authored-By: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 28723\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix task ordering to prevent race condition on ptp config gen\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix blacklist on multipath.conf\n\nLeaving the multipath option enabled on Debian was causing\nthe lock-unlock process to fail with an error message pointing\nto the multipath.conf file that stated:\n\"error parsing config file\"\n\nThe parsing error happens because \"*\" is not a valid regular\nexpression and the solution was simply changing \"*\" to \".*\"\n\nTest Plan (CentOS & Debian):\nPASS: Build and Install\nPASS: Unlock Controller-0\nPASS: Multiple lock-unlock\nPASS: multipathd service faced no errors\n\nCloses-bug: 1990183\n\nSigned-off-by: Matheus Guilhermino <matheus.machadoguilhermino@windriver.com>\nChange-Id: I750589d4268fffc9440233014d6c66dbe50ed07a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable HSTS mode on haproxy\n\nEnable HTTP Strict Transport Security (HSTS) mode on haproxy.\nAdd HSTS header to responses whenever ssl is enabled on haproxy ports,\nwith max-age to match lighttpd responses on port 443.\n\nChange-Id: If8603979ab488ed12caf2d81e0f5f70703dd8821\nSigned-off-by: Michel Thebeau <michel.thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix pod rollout script of K8s root CA change\n\nThe fixes and improvements of the pod rollout script used in Kubernetes\nRoot CA update procedure are listed below. This script is used in the\nstages \"trustbothcas\" and \"trustnewca\" of the procedure. It is written\nin the file \"kube-rootca-update-pods.erb\".\n\nIn file \"kube-rootca-update-pods.erb\":\n\nFix: the variable \"statefullsets\" had a typo and was changed to\n\"statefulsets\". Because of this typo, in line 29, this variable was\nbeing used without being properly initialized. When the system had at\nleast one statefulset, the script always got stuck trying to restart a\nstatefulset inside the non-existing namespace \"0\", the internal script\ntimeout was always reached and no existing statefulset was restarted.\n\nImprovement: the internal script timeout was increased from 8 minutes\n(32 retries every 15s) to 30 minutes (40 retries every 45s).\n\nFix: It was noticed that \"kubectl rollout status --watch=false\" output\ndoes not always contain \"successfully\" in it when the rollout is\ncompleted, like the example below:\n\"partitioned roll out complete: 2 new pods have been updated...\".\nIt also always output \"0\" as command result. Because of this, it was\nused \"--timeout=100ms\" instead of \"--watch=false\", to make the command\noutput \"1\" when the rollout was not completed and \"0\" when it was.\n\nImprovement: more logs were added to the script.\n\nFix: The script now returns error when the internal script timeout is\nreached and the rollout was not completed. Before, it simply exited and\nthe procedure would continue not pointing problems.\n\nIn file \"kubernetes.pp\":\n\nImprovement: The hard timeout of Puppet for the pod rollout script was\nchanged from 10 minutes to 60 minutes. This timeout should not be\nreached, as the internal script timeout is around 30 minutes, however it\nis not impossible, as the 30 minutes timeout doesn't count the time\nspend in the execution of \"kubectl rollout status\" commands.\n\nTest Plan:\n\nPASS: In a AIO-SX with at least one statefulset, being these\nstatefulsets with no problems, execute the Kubernetes Root CA update\nprocedure and check that it is completed successfully without reaching\nany timeout in stages \"trustbothcas\" and \"trustnewca\".\n\nPASS: In a AIO-SX with at least one statefulset, being these\nstatefulsets in error state, execute the Kubernetes Root CA update\nprocedure and check that it transitioned to an error state due to the\npod rollout script reaching the internal script timeout (that is around\n30 minutes) and returning error.\n\nCloses-Bug: 2004594\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I0c3fb7943dcecbd206cc09dbc122c2a0332213ba\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Populate DNSMasq with host entries\n\nHost DNS records must use the \".internal\" domain\nto configure FQDN entries with the format of <host>.internal.\n\nGiven the complexities of supporting the multi-host reconfiguration,\nthis task will focus on support for a simplex system only.\n\nThis commit focuses on the addition of cname records\nrelated to the management config\n\nWork Items:\n- addition of cname records to dnsmasq.conf for AIO-SX\n\nTesting:\n- build successful\n- succesfully bring up AIO-SX and AIO-DX\n- ensure changes only apply on AIO-SX\n- ping system host's new aliases (with and without \".internal\")\n  -> also with manual removal of mgmt entries from /etc/hosts\n- ensure all mgmt interfaces are up\n- ping registry.local\n\nStory: 2010722\nTask: 48295\n\nChange-Id: Ie6334f4cf533699a93c406428696921e2e4d85bc\nSigned-off-by: Mohammad Issa <mohammad.issa@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "New service parameter for Intel NIC multi-drivers\n\nThis commit implements changing the Intel NIC driver bundle version\nusing the service parameter mechanism.\nThe new \"intel_nic_driver_version\" parameter gets stored as a\nsystem-wide service parameter and is instrumented for controller,\nworker and storage personalities.\n\nThe current implementation accepts cvl-2.54 and cvl-4.0.1 values and\ncvl-4.0.1 is the default.\n\nThe service parameter command will add a new parameter to kernel boot\nparameters that will make initramfs boot with the correct drivers.\n\nThe new driver bundle will be loaded only after node unlock (reboot)\n\nTesting:\nPASS: Verify standard installation\nPASS: Verify service parameter configuration using valid/invalid values\nPASS: Verify multi-drivers boot parameters on all nodes\nPASS: Verify i40e, ice and iavf drivers' versions on all nodes\n\nStory: 2010326\nTask: 46707\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/863264\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: Ia07636ee9348ef49b189104ccc215abe478ff353\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix journal disk path incorrect initialize with dedicate journal disk\n\nWhen user provision a storage node with dedicated storage add for\njournal, it is designated to create journal partition on this dedicated\ndisk for every osd.\n    $ system host-stor-add storage-0 journal <disk uuid>\n    $ system host-stor-add storage-0 osd <disk uuid>\n\nFor above case, \"ceph-disk prepare\" request correct journal partition\nfor initialize and write header and keyring to journal disk.\n\nCloses-Bug: 1830736\n\nChange-Id: I70ae1a3bc049ad3842e0ec22851b148de5671781\nSigned-off-by: Martin, Chen <haochuan.z.chen@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update tox.ini to work with tox 4\n\nThis change will allow this repo to pass zuul now\nthat this has merged:\nhttps://review.opendev.org/c/zuul/zuul-jobs/+/866943\n\nTox 4 deprecated whitelist_externals.\nReplace whitelist_externals with allowlist_externals\n\nPartial-Bug: #2000399\n\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: I947f803712bd0dd482f9c35ba0a959f053584577\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Armada-Sysinv integration\n\nInitial implementation of Armada integration with sysinv which\nentails:\n\n- Basic application upload via system application-upload command\n- Application install via system application-apply command\n- Application remove via system application-remove command\n- Application delete via system application-delete command\n- Application list and detail viewing via system\n  application-list and application-show commands.\n\nThis implementation does not cover the following functionalities\nthat are either still under discussion or in planning:\na) support for remote CLI where application tarball resides in\n   the client machine\nb) support for air-gapped scenario/embedded private images\nc) support for custom apps' user overrides\n\nTests conducted:\n- config controller\n- tox\n- functional tests (both Openstack and simple test app):\n    - upload\n    - apply\n    - remove\n    - delete\n    - show\n    - list\n    - release group upgrade with user overrides\n- failure tests:\n    - no tar file supplied\n    - corrupted tar file\n    - app already exists/does not exist\n    - upload failure (missing manifest, multi manifests,\n      no image tags, checksum test failure, etc...)\n    - apply failure (nodes are not labeled, image download\n      failure, etc...)\n    - operation not permitted\n\nChange-Id: Iec27f356bd0047b2c7ef860ab3a2528f5a371868\nStory: 2003908\nTask: 26792\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Barbican configuration thru Puppet and SysInv.\n\n1. Add the new barbican DB and barbican user.\n2. Support DB backup/restore and upgrades for barbican.\n3. Configure barbican user and password in region config.\n4. Provide Barbican configuration with appropriate data via SysInv.\n5. Setup Barbican thru puppet manifests.\nThere are three main services that need to be configured:\n- Barbican API: a RESTful API for managing secrets.\n- Barbican Worker: a RPC interface for Barbican API.\n- Barbican Keystone Listener: a service for Keystone changes.\nAlso, HA Proxy and Firewall need to be updated with Barbican port (9311)\nas well as Remote Logging manifest to allow Barbican log collection.\n\nChange-Id: I6b0b0c90456627bebde2b834b339bc968100b6f9\nStory: 2003108\nTask: 27700\nDepends-On: I2667d56a71b7d3881c03b6a5c1e5ed61d4f0b902\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Free dcdbsync openstack instance port for https admin endpoint\n\nCurrently dcdbsync instance for openstack is listening on port 8220.\nWith the admin endpoint of dcdbsync instance for platform has https\nenabled and uses port 8220, the port of dcdbsync instance for\nopenstack is updated to use 8229.\n\nChange-Id: Ie3d60164e4e81de8e53ad452d4dbeab7ce4a5058\nStory: 2007347\nTask: 39409\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Retain more puppet log files\n\nIncreased max log directories to retain more\ndebugging info from puppet.log.\n\nWas tested by looping system host-cpu-modify\ncommands, /var/log/puppet caps at 50 log directories\ninstead of 20.\n\nCloses-Bug: 1903994\n\nSigned-off-by: Lu Yao Chen <luyao.chen@windriver.com>\nChange-Id: Ia8458396867f988d5061d3aa49fa2a21ee6ebac2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix influxdb log file cannot be collected by logrotate\n\nThe logfile for influxdb is influxd.log, not influxdb.log\nCorrect the name in controller.yaml, so that logrotate could get\nthe log correctly.\nAlso, influxdb process uses error re-direction to append the error\nmessage to influxd.log, so \"copytruncate\" need be added in logrotate\nsetting, so that log could be continue logged after logrotate\nexecution.\n\nCloses-Bug: 1833167\n\nChange-Id: I1ef484e3052355e5edc0cd0f7c629c7944daf014\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix multi-driver for standard mode via DM file\n\nWhen installing a standard system with the intel_nic_driver_version\nservice parameter set through DM file, the correct driver was not\nloaded for controller-1.\nThis was happening because the puppet configuration for the kernel boot\nparameters was not being called for non-worker nodes.\n\nTest plan:\nPASS: install standard system using DM file\nPASS: install DX system using DM file\nPASS: install SX system using DM file\n\nCloses-Bug: 2003536\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: I021f4189ba04391146d2bdd9f84f2437c35115ae\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide a specific route runtime class\n\nIn an effort to optimize the time required to update interface routes,\nrestructure the platform::interfaces class to extract creating resources\nfor routes and addresses into separate classes. This allows the route\nspecific resources and dependencies to be called from a dedicated\nruntime class.\n\nChange-Id: Ieba501a6bd86164599eff97b9fe73d847740df68\nStory: 2007101\nTask: 38156\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify default lldp system description\n\nThis commit modifies the default system description configuration\nfor the lldpd daemon to remove a product specific name and version.\nInstead, the OS name and version (default used by lldpd) will be\nused. For example, for a CentOS host, the system description would\nlook something like:\n\nCentOS Linux 7 (Core)\n\nFor security reasons, we also pass the -k option to the\nlldpd process in order to prevent the specific kernel version to\nbe broadcast.\n\nChange-Id: I2a15481b95d1e37bc2f4ae053a10c3289dd2f400\nCloses-Bug: #1796112\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "platform puppet: Config ACC100 bbdev with QMGR val\n\nThe ACC100 PF and VF configuration takes the same puppet\nconfig code path as the N3000 except that the ACC100 does\nnot require a reset, but requires bbdev config.\n\nThis patch adds platform::devices::acc100::fec class to\nexec pf-bb-config to configure QMGR on the Intel ACC100\n(Mt. Bryce) with number of 5G UL/DL qgroups and configures\nthe device with the number of VF's.\n\nStory: 2008440\nTask: 41530\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/775252\n\nSigned-off-by: Babak Sarashki <zbsarashki@gmail.com>\nChange-Id: I7d42852009fedba5136d9d726092f273ef41c7fd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add dynamic provisioning for the Mtce guestAgent\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable upstream Cinder volume backup/restore capabilities\n\nModify StarlingX system B&R procedure to align with upstream Cinder volume\nbackup/restore capabilities.\n\nTune settings to allow multiple cinder backups/restores to run in parallel.\nThe upstream cinder backup/restore algorithm is RAM dependent. The default\nbackup chunk size was about 2GB meaning running even a few backups in parallel\nwould quickly run out of RAM. The new backup chunk size is set below 500MB.\n\nStory: 2003115\nTask: 26393\n\nDepends-On: Ic28661e52a3c6742840e4575741b95c2058eadb9\nChange-Id: Ie71a2c90d89c3023fb8d043e1a26d80c43779133\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"K8s custom configuration: extra-volumes and kubelet support\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add variables for snmp in fm.conf\n\nSnmp trap client needs the following three variables\nto connect to snmp trap server.\n- trap_server_ip\n- trap_server_port\n- snmp_enabled\nModify puppet to add these variables. trap_server_ip\nand trap_server_port are fixed. snmp_enabled takes\nTrue/False depends on snmp armada app is applied\nor not (True when applied).\n\nChange-Id: Ibedaf772153f49c6dfefe644044da07b5d32bb20\nStory: 2008132\nTask: 41207\nDepends-On: https://review.opendev.org/761213\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove configurations specific to mlx4\n\nThe ConnectX-3 and ConnectX-3 Pro cards are no longer supported as of\nthe version mlnx-ofa_kernel-5.5-OFED.5.5.1.0.3.1 of the OFED. The\ninfomation can be found in the part \"Unsupported\nFunctionalities/Features/NICs\" in this link:\n\nhttps://docs.nvidia.com/networking/display/MLNXOFEDv551032/\nGeneral+Support\n\nThis change removes special treatment given to the deprecated mlx4\ndriver.\n\nTests:\n- Build successful\n- Tests executed on a host with a CX4 and another with a CX5\n    - System install successful\n    - Mofified one of the Mellanox ethernet interfaces to class\n      'pci-sriov' with the maximum number of VFs\n    - Created a virtual interface using some of the aforementioned VFs\n    - Deleted the new virtual interface and returned the ethernet one to\n      class 'none'\n    - Checked logs for any unexpected behavior\n\nStory: 2009878\nTask: 44709\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/832263\n\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: I8776ec7ec13c3c0b1255cee95289baf14ad6dbc5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change eventlet.wsgi.server loglevel for dcmanager\n\nThe level of eventlet.wsgi.server logs was changed to WARN to avoid\nprinting the the default request logs. The request logs will be printed\nby specific hook of the server. Note: this change will be set as\ndependant of the change that creates the hook that prints the request\nlogs, in order to disable the default logs when the new ones are\nenabled.\n\nTest Plan:\n\nPASS: Successfully deploy a Distributed Cloud and verify that the logs\nof DC Manager API requests no longer appear in DC Manager log files.\n\nStory: 2009824\nTask: 44549\n\nDepends-On: https://review.opendev.org/c/starlingx/distcloud/+/829396\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I49ae9286f71620b2b3264b0b58b5e99eb5cae29f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove rabbitmq dependencies from sysinv puppet\n\nContinuing the efforts from [1], this review consists in removing all\ndependencies related to amqp classes as well as initializations for\nrabbitmq variables. This removal can be done because sysinv does not\nuse rabbitmq.\n\nTest plan\nPASS - Perform fresh install and bootstrap in an AIO-SX successfully\nPASS - Perform fresh install and bootstrap in an AIO-DX successfully\nPASS - Run any system command successfully (system host-list, system application-list, etc)\n\nStory: 2010802\nTask: 48578\n\n[1] - https://storyboard.openstack.org/#!/story/2010802\n\nChange-Id: I5da60b97ac8808d95d5b76ade065ea521e62e251\nSigned-off-by: Samuel Toledo <samuel.presatoledo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add missing default value for a kubernetes puppet definition\n\nSet default value for 'onlyif' in the puppet definition 'platform::kubernetes::mask_stop_service' if no conditional criteria are set.\n\nThis fixes a regression where the mask_stop_kubelet method calls\nmask_stop_service with no value set for the onlyif parameter.\n\nTest Plan:\n- PASS: Upgrade Kubelet\n\nCloses-Bug: 2038858\nChange-Id: I06e4cf42dbe710a78443dffb83c972c73f9789bf\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "After DOR, compute nodes came back in a degraded state\n\nIt was detected that after a DOR (dead office recovery), the worker\nnodes were entering a degraded state. In the test scenario,\ncontaining AIO-DX + 3 workers in IPv6, it was caused by the missing\ncluster interface after bringing up. On the configuration, the\nmanagement interface was created on vlan186 and the cluster interface\non vlan187, with both attached to the PXE interface. Most of the time\nthis triggers an extra reboot on the worker node that corrects the\nsituation (if the host is unlocked), but occasionally the system\nremains in the error.\n\nAfter reproduction tests, the root cause was detected on systemd's\nnetwork service timeout (of 5 minutes) during vlan186 DHCP request.\nDuring the DOR recovery, the controllers did not have yet started\nthe DHCP server at the moment of vlan186's initial request (logs are\nshowing this happened after 10 minutes). Since systemd stops the\nservice, vlan187 is not configured on the kernel (the interfaces are\nconfigured following an alphabetical order), thus generating the\nalarms.\n\nThe correction adds a verification on apply_network_config.sh (run\nduring worker manifest apply) to compare the vlan interface config\nfiles in /etc/sysconfig/network-scripts/ with the configured\ninterfaces on the kernel and, if not present, apply the configuration\nto create the device.\n\nTest Plan:\nPASS  execution of DOR test with AIO-DX + 3 worker nodes\nPASS  execution of power-of/power-on of single worker node\nPASS  execution of host lock/unlock\n\nCloses-Bug: 1956755\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Ia7517c67c47013069a622a30976150c2c1127aea\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Deactivate provision of the guest-agent service\n\nThe guest-agent service it is currently being activated\nin setups where stx-openstack is applied but it's not\nbeing used since we went to containerized openstack.\nSince this service is no longer being used and it is\ncurrently causing coredump issues [1] in debian environment\nwe are deactivating the provision of the service.\nThe service can be reactivated in the future if needed (we\ncreated a StoryBoard [2] to keep track of this modification).\n\n[1] https://bugs.launchpad.net/starlingx/+bug/2000168\n[2] https://storyboard.openstack.org/#!/story/2010520\n\nTest Plan:\nPASS: Generate the debian image without the code that\nperformes the provision of the guest-agent service.\nPASS: Verify that after applying the modification in a host\nWITH stx-openstack applied the guest-agent service it is not\nbeing provisioned.\n\nDepends-on: https://review.opendev.org/c/starlingx/tools/+/870433\nDepends-on: https://review.opendev.org/c/starlingx/nfv/+/869817\n\nPartial-Bug: 2000168\n\nSigned-off-by: Rafael Falcao <rafael.vieirafalcao@windriver.com>\nChange-Id: I914ad7caa241bcd42ae1393d943b533a4ad32c06\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable kubelet support for pod pid limit\n\nEnable limiting the number of pids inside of pods.\n\nAdd a default value to protect against a missing value.\nDefault to 750 pids limit to align with service parameter default\nvalue for most resource consuming StarlingX optional app (openstack).\nIn fact any value above service parameter minimum value is good for the\ndefault.\n\nCloses-Bug: 1928353\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I10c1684fe3145e0a46b011f8e87f7a23557ddd4a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart pods deployed by statefulsets during root CA update\n\nCurrently only pods deployed by deployments and daemonsets are\nrestarted during k8s root CA update. This change added support\nto restart pods deployed by statefulsets.\n\nTest Plan:\nPASS: pods deployed by statefulsets are restarted and k8s root\n      CA update is successful.\n\nRegression:\nPASS: k8s root CA update is successful when there are no statefulsets.\n\nCloses-Bug: 1948876\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: If0d680e35b7d95b7599816c1da586757e066a669\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ostree-remount dependency on kubernetes bind mounts\n\nDuring system boot systemd parses /etc/fstab and converts\nthe two fstab /usr/local/kubernetes/current/stage{1,2} entries\ninto these units:\n\n- usr-local-kubernetes-current-stage1.mount\n- usr-local-kubernetes-current-stage2.mount\n\nCurrently there's no dependency of these units on the\nostree-remount systemd unit, and so intermittently we see\nan installation where the bind mounts don't exist.\n\nThis commit adds a dependency on the ostree-remount systemd\nunit, in order to ensure that /usr is mounted before the\nK8s bind mounts that want to be \"on top\" of it.\n\nCloses-Bug: 1989022\n\nTest Plan:\nTested system boot with added options, ensured that corresponding\nsystemd mount units had \"After=ostree-remount\" options.\n\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: I5843ab61790d2b77f776d6788301b7a1ed492e52\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Package and Enable Memcached on Controllers/AIO\n\nAdd memcached as a service on controllers/AIOs.\n\nMemcached engineering values:\n1. MAXCONN (-c option) : max simultaneous connections.\n   Set to puppet-memcached default value 8192.\n2. CACHESIZE (-m option): MB memory max to use for object storage.\n   Set to roughly 10% of 8192 = 782.\n3. -t option: number of threads.\n   Set to number of CPU cores.\n\nPuppet creates memcached service as 'disabled' and 'running'.\nThis change make sure memcached service is enabled.\n\nChange-Id: I212924a42b105ba7ecc7f46224b02a50902d59bf\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add L3 firewall support for platform networks\n\nAdding puppet classes to install L3 firewall in cluster nodes that\ncan run kubernetes (controllers and workers), It uses the hash2yaml\nfunction from the package puppet-hash2stuff, the change is marked as\na dependency for this task.\n\nThe story 2010591 is still under development and for now we are only\napplying the platform firewalls into the controller nodes.\n\nWith the change https://review.opendev.org/c/starlingx/config/+/881495\nthe new classes' config info is provided. At this first delivery the\nfirewall will not contain restrictive rules, focusing more in making\nthe necessary GlobalNetworkPolicy and HostEndpoints to be correctly\ninstalled among the nodes\n\nTest Plan:\n[PASS] install AIO-DX\n[PASS] install Standard with DX+worker+storage nodes\n\nStory: 2010591\nTask: 47954\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/881497\nChange-Id: I1d35abde612cdaf3ccb54a858618037382ff2636\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision dbmon for AIO-DX and DC systemcontroller\n\nThis change is to provision a dbmon service. The dbmon service is to\nmonitor and correct mariadb cluster state for a 2 servers\nconfiguration. See https://review.openstack.org/#/c/650288/ for\ndbmon service detail.\n\nFor the time being, the dbmon service will be provisioned regardless\nstx-openstack application has applied or not. OCF script will handle\nthe scenario that stx-openstack has not been installed.\n\nA new user story is to be defined to enhance SM to dymamically\nprovision/deprovision a service. When the enhancement is ready,\nthe service will be provisioned only after stx-openstack application\nis applied.\n\nStory: 2004712\nTask: 30363\n\nDepends-On: https://review.openstack.org/#/c/650301/\nDepends-On: https://review.openstack.org/#/c/650288/\n\nChange-Id: Ic8ca45c4e9906cb87b92fd8a0fe61ef9134642b6\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Etcd service status: check for certs error\n\nThe script /etc/init.d/etcd is used by the service manager for\nmanagement of the etcd service. The call '/etc/init.d/etcd status'\nuses etcdctl health API to determine if the service is running\nfine or not. In an event if etcd certs are replaced with new ones\nbut the service has not yet been restarted to use new ones, the\nstatus call will fail even though the service is running fine and\nthe service manager will treat that as service is failed.\n'sm-audit' (which is run periodically) uses '/etc/init.d/etcd status'\ncall to determine and maintain the service health. Service manager\nreceiving false service status may introduce a lot bugs.\n\nOne such scenario is that 'sm' ignores the 'service restart' call\nif it thinks service is disabled. This leads to etcd not being\nrestarted with new certs during upgrade activate and not being\nreachable to the kube-apiserver (which may have started using new\nclient certs).\n\nThis change modifies '/etc/init.d/etcd status' call to not just\nrely on etcd health api to determine if the etcd service is running\nand checks for the existence of etcd runtime information in case\nthe health api fails with the 'bad certificate' error.\n\nTest Plan:\nPASS: Replace old certs with new certs at /etc/etcd/ and do not\n      restart the service. Check that the '/etc/init.d/etcd status'\n      is 'running'.\nPASS: Replace old certs with new certs at /etc/etcd/ and restart\n      the service. Check that the '/etc/init.d/etcd status' is\n      'running'.\n\nCloses-Bug: 2033942\n\nChange-Id: Id30a262ca1bde6d8acb85de10882ca9bd4b59bdd\nSigned-off-by: kaustubh.dhokte <kaustubh.dhokte@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for Helm v3 and containerized armada\n\nThis removes helm initialization that works with v2 only.\nThis adds an armada manifest to configure node labels on controllers.\n\nChange-Id: I7547fb1184352cc7ab6d4c001bac21f73e429de7\nStory: 2007000\nTask: 39323\nDepends-On: https://review.opendev.org/719962\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Serialize resources intensive operations\n\nOccasionally in some labs, sysinv api is inaccessible following\nAnsible bootstrap. This is due to incomplete sysinv endpoints update\nin keystone database even though puppet returned no errors and\n.config_applied flag is generated.\n\nThis commit:\n  a) serializes the two resources intensive operations\n       - service endpoints reconfiguration\n       - Kubernetes+Helm bringup, images download\n     to avoid the possibility of some database transactions being timed\n     out. Furthermore, checking for endpoint reconfig specific flag is\n     a more reliable method than relying on the general .config_applied\n     flag.\n  b) verifies that the controller is online before exiting the playbook\n\nTest:\n  Verify that installation succeeds in labs that exhibit the issue.\n\nCloses-Bug: 1830085\nChange-Id: Ifb6e77f08a64a80a854faf15c58200e2ba49824a\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a new filesystem for image conversion\n\nAdding runtime manifest for conversion logical volume.\nAdding new 'ensure' parameter for 'platform::filesystem' class.\n\nChange-Id: I622837959a5a7aabc462640b588713396354ce73\nPartial-bug: 1819688\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove optionality of kubernetes from manifests\n\nAny place where the kubernetes::params::enabled flag\nwas checked, it is always considered to be true.\n\nThis leads to some manifest code never being invoked\nso a subsequent commit will clean up those code blocks.\n\nThe openstack manifests are not included in this change\nbecause most of those will be removed in a later commit.\n\nStory: 2004764\nTask: 29821\nChange-Id: Id47c69d6da2d243c607bcb3db0836073321e4146\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Assert needed images in cache during K8s upgrade\n\nDuring the Kubernetes upgrade progress, if the image cache is cleared on\ncontrollers before 'system kube-host-upgrade controller-0 control-plane'\nor 'system kube-host-upgrade controller-1 control-plane', the upgrade\nprocess transitions to an error state because the images cannot be\ndownloaded from the local registry during the execution of 'kubeadm\nupgrade apply' or 'kubeadm upgrade node'. This change assures that the\nneeded images are in the local cache just before the execution of these\nkubeadm commands.\n\nTest Plan:\n\nPASS: In a Standard deploy with 2 controllers and 1 worker, successfully\ncomplete the upgrade process from Kubernetes v1.23.1 to v1.24.4\nexecuting \"crictl rmi --prune\" on both controllers before the commands\n\"system kube-host-upgrade controller-0 control-plane\" and\n\"system kube-host-upgrade controller-1 control-plane\".\n\nCloses-Bug: 2007616\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I6a15e49c74e2ae91b6d5ddebfd7cb9057740b1af\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller image to v2.12.1\n\nThis commit upversions tiller to v2.12.1, to align\nwith helm upversioning.\n\nStory: 2004520\nTask: 28776\nChange-Id: I16955a9fc6edfbb60f31fc941b3ff6d7ccc2342c\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix MOTD not include system ID on controller-1\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart containerd after CA certificate is installed\n\nThis is updated version of commit\nb88aa4ed31267d046673d39e487e83552a7806f1. The docker.service is actually\nset up such that when containerd is restarted by systemd, docker is\nrestarted as well.\n\nSo this change removed docker restart, leaving only containerd restart.\nThis fixes the containerd/docker continously restarting issue caused by\nthe previous commit.\n\nChange-Id: I444849eb1aa6c86d79f32a1ec64964637fc4efb4\nCloses-Bug: 1891377\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet: Fix AIO SX cinder disk replacement\n\nCinder's DRBD is left in \"Inconsistent\" state when a disk\nreplacement is attempted on AIO SX.\n\nThe fix enables DRBD cinder volumes reconfiguration in two cases:\n1) At initial configuration,\n2) When disk is replaced.\n\nA disk replacement is triggered from sysinv by removing\nthe checkpoint file behind is_node_cinder_lvm.\n\nOn SX we have to wait for disk wipe confirmation before\nupdating DB otherwise user may unlock host without wipe\nand operation won't be retried leading to major, possibly\nunrecoverable, problems with cinder-volumes disk.\nIf DB was not updated, operation will be retried on reboot\nensuring that the disk is indeed wiped.\n\nChange-Id: Ia3391b2437d309c71bb525b8167ac55d727b3ab2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion sandbox image to align with k8s v1.18.0\n\nChange-Id: I02f6158d39b4f10764faf4055da4ab4cdc1f9662\nStory: 2006999\nTask: 39342\nDepends-On: https://review.opendev.org/#/c/718568\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Zero Touch Provisioning changes for subcloud configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update compute_reserved.conf via a platform manifest\n\nThe /etc/nova/compute_reserved.conf is not updated by the generic\nplatform module compute.pp manifest. This results in some of the\nvalues not being set properly for ovs-dpdk in starlingx.\n\nThis update creates an ERB template for compute_reserved.conf\nand manages the ERB template through the platform compute.pp\nmanifest.\n\nIn addition, the hiera data generation has been added to sysinv\npuppet platform operator.\n\nCloses-Bug: #1789726\n\nChange-Id: I3a005482342532229c66b5bd9f36d581a85d30f7\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Mask lvmetad logic\n\nLvmetad is not configured on Debian.\nFlag 'use_lvmetad' makes no sense to be used and is not used.\nFile_line will append by default if a pattern is specified but\nnot matched.\nUsing an incorrect /etc/lvm/lvm.conf will make at least lvs and vgs\nutilities to show warnings, resulting in incorrect output for puppet\nlogic. This introduces errors for puppet apply during unlock, and\nprevents proper unlock.\n\nLet lvmetad be CentOS only logic.\n\nTests on AIO-SX using Debian:\nRestored snapshot before unlock of machine that failed puppet apply.\nCopied platform::lvm class to lvm.pp. Run unlock and obtained unlocked\nenabled, no errors for puppet apply.\nSkip tests on CentOS because code was just extra indented with 2\nwhitespaces and guarded with an if used in other places.\n\nRelated: https://review.opendev.org/c/starlingx/utilities/+/837797\nStory: 2009965\nTask: 45054\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Id12d19266970605d6905bba150ce97c1eae15c5e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove old root CA certificate from controller-manager.conf\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Simplify sysinv password runtime for rehoming\n\nThis runtime is supposed to be only used for changing password in\n/etc/sysinv/api-paste.ini, /etc/sysinv/sysinv.conf,\n/etc/sysinv/cert-mon.conf and /etc/sysinv/cert-alarm.conf.\n\nTest plan:\nPassed - rehoming test for DX subcloud without host swact\n\nStory: 2010230\nTask: 46945\n\nSigned-off-by: Li Zhu <li.zhu@windriver.com>\nChange-Id: I7686c8e8e10f236b581b07cc0f33089ef3b2c7d8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet ceilometer upgrade dependency on service identity\n\nThe existing dependency for ceilometer upgrade cannot ensure that it\nwas executed after all service identites for ceilometer and gnocchi\nwere created. This causes ceilometer upgrade fails during subcloud\nconfiguration since an ordering problem that ceilometer service not\nbeing created before running ceilometer upgrade.\nThis commit is to update the dependency against the service identity\nfor ceilometer and gnocchi to ensure the correct ordering.\n\nCloses-Bug: 1791303\n\nChange-Id: Ibb4fb0fe15ba5c046d3c03478e4a9c1bee908f35\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure static routes on Debian\n\nThis change provides the content for update_routes() function. It\ncompares routes in /var/run/network-scripts/routes with the one in\n/etc/network/routes, used by ifupdown.\n\nIt adds or deletes the necessary routes on the system if detects a\ndiff between both files\n\nTest Plan (Debian only)\nPASS: first unlock of the system when /etc/network/routes is with its\n      original content and the sysinv database contains routes. All\n      routes created.\nPASS: addition of routes\nPASS: removal of routes\n\nStory: 2009101\nTask: 44731\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Iaf380bb11693f8620df51590f326a4b60d7a0ca3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "check value of kubernetes host labels\n\nBefore this commit the logic was just based on\nchecking that a key exists in the hieradata\n(e.g. openstack-compute-node) but its value was\nnot available there, so the value can not be\nchecked to see if it is enabled or disabled.\n\nAnother commit added support for the values of\nthe labels in the hieradata and this commmit\naddresses the changes required in the puppet\ncode to make checks based on both key and\nits value.\n\nCloses-bug: 1940042\nChange-Id: Iefbcb1cde7db27250d9a3629472810d20f202048\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\nDepends-on: https://review.opendev.org/c/starlingx/config/+/804526\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add support to audit-policy-file at runtime\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding admission plugin post bootrstrap\n\nThis commit adds mandatory plugins automatically, without having the\nuser specify them through system service-parameters.\n\nStory: 2007351\nTask: 38897\n\nChange-Id: Ia423bc3b7be241297d9d1c7a917ac308855c6114\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure kubelet is not running when we update the bind mount\n\nWhen updating the bind mount we need to ensure that kubelet is\nnot running (otherwise puppet complains that the mount point is\nbusy and the re-mount fails).\n\nStory: 2008972\nTask: 43354\n\nChange-Id: I1fa3a8dab5b4b9c9a46ec52584ed362b1327eca7\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add synce4l config support to puppet\n\nThis commit adds the support for synce4l configuration in puppet\nmanifest.\n\nTest Plan:\nPASS: Ensure synce4l utility is started correctly\n\nStory: 2010540\nTask: 47361\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: I7816240c22e74d83a095abcabeb6d28302d3b1f1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update containerd config to use the right docker registry cert\n\nCurrently containerd is configured to use\n/etc/ssl/private/registry-cert.crt to access docker registry at\nregistry.local:9001. But newly installed docker registry certificate\nwill be in\n/etc/docker/certs.d/registry.local:9001/registry-cert.crt. While this\nis ok for controller nodes (as the registry cert at both locations will\nbe updated to the new one on controllers), worker node will fail to\naccess registry.local by certificate verification as containerd still\nuses /etc/ssl/private/registry-cert.crt which is not updated.\n\n/etc/docker/certs.d/registry.local:9001/registry-cert.crt is the right\ncert for any client to access registry.local. This commit updated\ncontainerd config file to point to the right registry cert.\n\nChange-Id: Id9c22994edea03da3449b0146cf04a3538d67716\nCloses-Bug: 1870406\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Avoid setting up yum repos for patching\n\nYum repo initialization in puppet for patching can be\nbypassed on Debian.  The Debian patching solution is based\non ostree.\n\nThe changes in puppet to support patching on Debian through\nostree will merge when that feature is implemented.\n\nTest Plan:\n   Verify that Centos environment can be boostrapped\namd unlocked and the yum file is created.\n   Verify that Debian environment can be bootstrapped\nand unlocked.\n\nStory: 2009101\nTask: 44936\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: Ibde05d37e80e1ef2055a2512963b0484a1e26fe6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove sriov_vfs/reported # of VFs from hieradata\n\nThe original fix of https://bugs.launchpad.net/starlingx/+bug/1931458\nmade the parameter 'num_vfs' of hieradata to be used solely to retain\nthe user configuration and added a new parameter 'sriov_vfs' to store\nthe value of actual number of VFs reported from device by sysinv. It was\ndone in this way to avoid the report overwriting the user configuration\nin race conditions.\nHowever, it was noticed during patch removal procedures that once the\nhieradata had this parameter added by later FEC configuration, after the\npatch was removed the parser started to claim about the unknown parame-\nter 'sriov_vfs'.\nSince that parameter was added just to keep the reported number of VFs\nstored in hieradata (like before when used the 'num_vfs' parameter) this\nchange removes such \"debugging\" parameter to avoid patch removal issues.\n\nCloses-Bug: #1931458\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I5d52163749336ff002b8a2911554b2de13ba6382\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Enable ptpinstance manifest\n\nThis commit makes changes to the ptpinstance manifest to support\nruntime application as well as enabling the manifest for controllers,\nworkers, storage and aio configs.\n\nThis does not disable the single instance ptp functionality, so as not\nto break exiting deployment manager configs. A future review will handle\nremoving the single instance ptp manifests and deprecating the related\nCLI/APIs.\n\nTest Plan:\n\nPass: Build and install\nPass: Verify ptpinstance functionality works and can be applied\nas a runtime manifest.\n\nRegression:\n\nPass: ensure that single instance ptp is unaffected.\n\nStory: 2009248\nTask: 44293\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I064d31f87279a3c290f7ff3d76895546af15bf6a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Modify kubernetes_local_secrets_audit interval\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable rt throttling\n\nCurrently sched_rt_period_us and sched_rt_runtime_us are set to\nequal values disabling rt throttling. Although, setting\nsched_rt_runtime_us to -1 is the preferred rt throttling disable\nstrategy.\n\nTest plan:\nPASS: cat /proc/sys/kernel/sched_rt_runtime_us and verify is -1.\nPASS: busy-looping process getting 100% of the CPU core.\n\nStory: 2009886\nTask: 44880\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I5e8321d885ee10d1d79a696baad450b0ef8f0622\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Ceph pools management chart\n\n- new helm chart to set replication and min replication for\neach Ceph pool:\n  -> new helm chart name: ceph-pools-audit\n  -> the ceph-pools-audit chart creates a CronJob that runs\n     every 5 minutes; the CronJob checks the replication for\n     each existing pool and sets it right if needed, to reflect\n     the attributes of the Ceph backends\n  -> the CronJob is needed for: charts that may not manage pool\n     configuration, pools created dynamically by services that\n     may not have the current pool configuration uploaded\n     (ex: swift), updating replication without reinstalling the\n     charts that created the pools\n  -> the ceph-pools-audit chart is installed after the\n     rbd-provisioner in the application-apply\n- new overrides for the ceph-pools-audit chart that provide\nthe replication values from the attributes of the present\nCeph backends\n- enable rados-gw by default when a Ceph backend is enabled\n\nChange-Id: I1565268bac3ddc77e8368d2d6ab8600b3e4ed893\nStory: 2004520\nTask: 29034\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Make /usr readonly\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide a way to enable/disable NTP service\n\nModify NTP puppet manifest to allow enabling and disabling this service.\nThis is required in case user would like to enable PTP service instead.\nAs a result, NTP daemon must be stopped on compute/storage nodes.\nIt is still running on controller nodes, but all the servers are wiped.\nSo, system date cannot be updated by NTP on controller nodes, but\nit is still possible for compute nodes to do an initial time sync.\nAlso, PMON script is moved here from MTCE to follow enabled/disabled path.\n\nChange-Id: I0831487fb14de80edec0ee8df5cc6f23dfb6bae8\nDepends-On: I1ca6045af8c5169220b7332d45b843fdb4960f01\nStory: 2002935\nTask: 24646\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integrate gnocchi for OpenStack Telemetry\n\nThis commit integrates gnocchi as metric storage backend because of the\ndeprecation of ceilometer metering backend.\nWith gnocchi integrated, ceilometer api and collector processes are\nremoved, ceilometer agent nofitication and polling processes\nare still running to collect and normalise data from other openstack\nservices. Ceilometer notification agent also has the responsiblity\nto send samples to gnocchi backend through its gnocchi publisher and\nevents to panko backend.\nTwo gnocchi processes are introduced, gnocchi api is REST API service\nand gnocchi metricd is for metric computing and gnocchi CLI is\nsupported to query measures/metric from gnocchi backend. Ceilometer\nservice and user still need to be registered in keystone, but stop\ncreating endpoints. Gnocchi is a seperate user/service in keystone and\nrun on active controller licensing on port 8041\n\nChanges:\n\n- puppet changes to add gnocchi user and endpoints to keystone, gnocchi\n  port to haproxy and firewall,\n  remote logging as well as other necessary configurations for gnocchi\n- backup restore for gnocchi postgres db (except metric and resource\n  tables)\n- sm changes to manage gnocchi processes through created lsb scripts\n- support for multi-region setup\n- distributed cloud - do not enable service and create endpoints for\n  gnocchi in system controller\n- add gnocchi logs in syslog\n- support no reboot patching for gnocchi processes\n- add gnocchiclient in remote CLI\n- add NotIn validation method in python-voluptuous which needed in\n  gnocchi\n- collect scripts updates\n- cleanup ceilometer api and collector in puppet configuration, sm,\n  service parameter, syslog, remotelogging, patch-restart-processes\n- remote ceilometerclient from remote CLI\n- remote openstack client changes for ceilometer CLI extensions\n- remove ceilometer-api and ceilometer-collector packages from iso\n\nStory: 2002825\nTask: 22871\nDepends-On: https://review.openstack.org/587419\n\nChange-Id: Ia46c67eb6543c3694dff03435dc2b00fb2b760e5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Distributed Cloud Subcloud Compute Node Unlock\n\nService tokens were introduced in Nova Compute to resolve another\nissue. The change incorrectly adds the call to the nova::keystone::auth\nclass, which will attempt to test & set the Nova User and the Nova\nendpoints. This is a redundant operation as the Nova Controller\nmanifest would already have done this.\n\nThis increases the apply time of the Nova Compute manifest, since the\nkeystone::auth is a relatively heavy class - doing a number of\nList/GET calls to enforce the idempotentency of the underlying Exec\nclass.\n\nFunctionally, this breaks the Compute node in a subcloud as it uses an\nincorrect keystone auth url to try to create the Nova user.\n\nChange-Id: I1809b62bbb60a04d08c0afee87945fff4c0a99a8\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Runtime manifest to restart haproxy\n\nAdd new runtime manifest class to restart haproxy (only).\nHaproxy needs to restart when https endpoint certificate\nis updated (w/o reconfiguring).\n\nStory: 2007347\nTask: 40772\n\nChange-Id: I27d2e167def6e25e37a34f54c58dcb3efed752b8\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update grub defaults from  manifests\n\nThis update adds a utility, puppet-update-default-grub.sh, that is\ncalled from the grub.pp and compute.pp manifests when they call grubby\nto update the grub cmdline. This ensures that the changes being made\nvia grubby will have corresponding changes reflected in the grub\ndefaults file, so that added options are not lost if the grub cmdline\nis updated via calls to grub2-mkconfig.\n\nChange-Id: Ibf74ddf9d0445e92dd8903c67e95901d856ad373\nCloses-Bug: 1901559\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP] Remove subsystem identifier check for PTP sysfs commands\n\nThe subsystem identifier for Intel E810 NICs is not a suitable\nindentifier for determining whether a given NIC will support the sysfs\ncommand that is trying to be set. This identifier can vary by adapter\ntype and manufacturer, with a wide range of values being possible. This\nhas lead to the configuration failing to apply on NIC variants that do\nnot have matching subsystem IDs, with no error being raised.\n\nRather than checking the ID before applying the sysfs command, simply\napply the command and return the error if it does not work. This allows\nthe configuration to be applied on all E810 NICs regardless of subsystem\nID and results in an error if there is an attempt to apply to an\nunsupported NIC type. This has the benefit of alerting the user that the\nsupplied config is incorrect via the config-applied failure alarm and\nallowing it to be corrected.\n\nThe error cases are:\n\nInvalid arguments for an E810 NIC\n-bash: echo: write error: Invalid argument\n\nAttempt to apply command on a non-E810 NIC\n-bash: /sys/class/net/enp24s9f2/device/ptp/ptp0/pins/U.FL1: No such file\nor directory\n\nTest plan:\nPASS: Apply manifest to E810 NICs with various subsystem ids.\nPASS: Manifest fails to apply configuration to unsupported NIC, alarm\nraised, no other system impact\n\nCloses-bug: 1995308\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I4d9e855a79ca54df1e08b55adcd8aaf2a5096e9b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reload services after keystone password change\n\nThis commit introduces runtime classes for keystone users: vim,\nfm, dcmanager, patching and barbican, to update their password and\nreload related services after the keystone user password change.\n\nThese classes will be applied by sysinv-agent when:\nThe keystone listener in the sysinv-conductor detected a successful\nupdate of the openstack password.\n\nTest steps(the following steps are invoked for each user respectively):\n1 Disable keystone lockout mechanism.\n2 Update keystone user password by openstack CLI.\n3 Update keyring user password.\n4 Add/update hiera data in secure_system.yaml.\n5 Apply runtime class by script to reload the service.\n\nPost check after test steps:\n\nGeneral:\n1 No fm alarm raised\n2 All the services managed by sm are active\n3 No auth failure in keystone local_user table\n\nvim:\nsw-manager CLI works w/o problem\n\npatching:\n1 Password is updated in: /etc/patching/patching.conf\n2 Following services are active in systemd:\n  sw-patch-controller-daemon, sw-patch-controller, sw-patch-agent\n3 Test patch can be uploaded and applied\n\nfm\n1 FM CLI works w/o problem\n2 Password is updated in: /etc/fm/fm.conf\n\nbarbican:\n1 Password is updated in: /etc/barbican/barbican.conf\n2 Can get secret with \"openstack secret list\"\n\ndcmanager:\n1 Password is updated in:\n  /etc/dcmanager/dcmanager.conf,\n  /etc/dcorch/dcorch.conf,\n  /etc/sysinv/cert-mon.conf\n2 dcmanager CLI works w/o problem\n3 Subcloud changed with the same password can be managed and in-sync\n4 dcdbsync can get the db resource from the subcloud\n5 dcorch can audit the subcloud's identity and platform resource\n\nStory: 2010230\nTask: 46041\n\nSigned-off-by: Yuxing Jiang <Yuxing.Jiang@windriver.com>\nChange-Id: Ia9777d7ab7452c8643887920ce20fa62421ca567\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure parameters are set for vfio-pci\n\nIf a pci-sriov VF interface is configured prior to configuring a host\ndevice to use vfio-pci PF driver, the reload of vfio-pci module with\nextra required parameter does not set the parameters because the module\nis already loaded.\n\nThe fix is to set the parameters (enable_sriov and disable_idle_d3) by\nwriting to the parameters files in sysfs after the module is loaded.\n\nTest plan:\nPASS: With a pci-sriov VF interface provisioned, set a host device to\n      use vfio-pci PF driver. Ensure no puppet errors and unlock\n      successfully.\n\nCloses-Bug: 2016698\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: I07425a333916fe5d05316baa33e82dd3d5b79699\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix cron service on debian\n\nThe task scheduling service is called\n'crond' on centos and 'cron' on debian.\nPuppet needs to adjust accordingly.\n\nTest Plan:\n- Centos Unlock\n- Debian Unlock\n\nStory: 2009101\nTask: 44810\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I1db8e802fad18c2391253df94e41db392c9c329a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config values for network issues during subcloud audit\n\nAdd config values for:\n\nHandle intermittent network issues during subcloud audit by queuing the\nsubcloud for reattempt, up to a configurable max-reattempt number.\n\nStory: 2008960\nTask: 43243\n\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\nChange-Id: I8feb48db89f464eaecf9cbdffa8c154ef895e990\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable StarlingX in QEMU/KVM VM\n\nTo support StarlingX running in Openstack Nova VM (QEMU/KVM\nenvironment), there is a new user parameter added in ansible\nplaybook to indicate if the system is running in an Openstack VM.\nA corresponding service parameter is created in service parameter\nand to be used to generate a puppet hieradata \"virtual_system\".\n\nA couple of changes required for \"virtual system\" only:\n- disable kubelet cpu manager to use full set of cpu and\n  memory resources\n- set registry.central to system controller's mgmt IP on\n  subcloud to be able to pull images from central cloud\n  registry in DC mode\n- explicitly set registry.local to subcloud's mgmt IP on\n  subcloud as dcorch synchronizes the dns server with\n  system controller's dns server which cannot be reached\n  on subcloud\n\nChange-Id: I3b21b76cc58a71319a32d2ca2e11d35306ba2292\nStory: 2007858\nTask: 40720\nDepends-On: https://review.opendev.org/747478\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-manifests: Added apparmor rule for /etc/ntp_initial.conf\n\n'/etc/ntp_initial.conf' is created by puppet ntp module and it\nis impossible to be assigned the read/write permission by the\ndefault apparmor profile '/etc/apparmor.d/usr.sbin.ntpd'.\nThis commit uses the puppet command to add the 'r' permission\nto '/etc/ntp_initial.conf' after it is created by puppet ntp\nmodule.\n\nTest Plan:\nPass: -Deploy the iso on an AIO-SX\n      -Check for successful system login\n      -Execute following steps to enable app-armor\n       #system host-lock controller-0\n       #system hos-update controller-0 apparmor=enabled\n       #system host-unlock controller-0\n      -No delay/timeout of 180 secs observed in the [puppet.log]\n       with apparmor enabled.\n      -The ntpd-profile-reload command executes only on apparmor being\n        enabled.\n      -Successfully DM configured Simplex system using ansible-playbook\n\nCloses-Bug: 2020773\n\nChange-Id: If18564a428e4809bf1d94081d35ac1e87fd7e5ee\nSigned-off-by: Harshad Sonde <harshad.sonde@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "When executing upgrade bootstrap for AIO-SX only update /etc/network/\n\nDuring upgrade bootstrap, the runtime execution of the puppet class\nplatform::network::runtime created a lock timeout with sysinv-agent\nto allow the interface configuration in the kernel. The lock exists\nto allow sysinv-agent to collect interface information for the\nsystem inventory.\n\nThe optimized upgrade feature created this runtime execution to fill\nthe contents in /etc/network/interface.d/ and /etc/network/routes\nto be available during the network bringup phase that happens after\nthe system unlock in an earlier step than the regular puppet manifest\nexecution. But as part of apply_network_config.sh execution it also\nbrings up the interfaces, accessing the script protected section and\ncausing lock timeout.\n\nThis change uses the file /var/run/.network_upgrade_bootstrap to\nindicate a upgrade bootstrap  is under way to just populate the\n/etc/network files and to not activate the interfaces.\n\nThe interface activation is not needed as the bootstrap is still under\nway and the minimal network configuration is already provided prior to\nthe bootstrap. After unlocking the files in /etc/network will provide\na faster network availability as systemd's network service is one of\nthe first to be executed during boot.\n\nTest Plan:\n[PASS] in 21.12 add an assorted network configuration with\n       - vlan, bonded, and ethernet interfaces (the vlan interface on\n         top of both base interfaces)\n       - configure the bond interface with static address\n       - add routes on all platform and data interfaces\n[PASS] execute lock/unlock in 21.12 to verify config in applied\n[PASS] execute AIO-SX upgrade to 22.12, at the bootstrap end check\n        files in /etc/network/\n[PASS] finish upgrade and after unlock verify the network access and\n        address, interfaces, and route creation in the kernel\n\nCloses-Bug: 2036451\n\nChange-Id: Ib04f72298252a52a8a05cf644671106ad6530e5f\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change pod pid limit default value\n\nChange the behavior of kubernetes pod pid limit in case the service\nparameter is missing.\n\nThe initial change(I10c1684fe3145e0a46b011f8e87f7a23557ddd4a) proposed a\nvalue to protect the system by default in case the service parameter was\nmissing. The value was aligned with what was believed to work for\nStarlingX apps. Some apps, openstack for example, are upstream and\nStarlingX doesn't control changes inside them. Instead of maintaining\nthe value initially proposed here, change the approach.\n\nChange the behaviour to use the maximum value for the service parameter\nby default.\n\nPartial-Bug: 1928949\nRelated-Bug: 1928353\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I0f776d9a8be57363475b926242a6fa7192addd56\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Rotate k8s certificate automatically\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for PF vfio-pci driver\n\nThis commit adds the support for vfio-pci driver for physical function\nof the ACC100.\n\nTest Plan:\nPASS: Test host-device-modify to set PF driver to vfio-pci.\nPASS: Test that PF is functional for sriov-fec-operator\n\nStory: 2010341\nTask: 46641\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: I6b1c7b6f526e765622ad4c03053b58d2e5973bed\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support ovs in container\n\nAs stx cutovers to containerization, most openstack components run in\ncontainers, but ovs-dpdk running on the host.\n\nThis patch is to support ovs running in container, and make it the\ndefault setting. We still support running ovs-dpdk on the host.\n\nFor option ovs-dpdk on the host, run follow command before unlock.\n```\nsystem modify --vswitch_type ovs-dpdk\n```\n\nChange-Id: I111865de17fc82a1e7c269fb97f53a181fb382b2\nStory: 2004649\nTask: 28610\nCo-authored-by: Huifeng Le <huifeng.le@intel.com>\nSigned-off-by: chengli3 <cheng1.li@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support trap_server_port configurable\n\nAdd parameter for trap_server_port to make user can\nconfigure snmp trap server port number through\nuser helm override.\n\nStory: 2008132\nTask: 41548\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\nChange-Id: Iac44d813447881591efd7b4a088185f2d59986be\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement CNI cache file cleanup for stale files\n\nIt has been observed in systems running for months -> years\nthat the CNI cache files (representing attributes of\nnetwork attachment definitions of pods) can accumulate in\nlarge numbers in the /var/lib/cni/results/ and\n/var/lib/cni/multus/ directories.\n\nThe cache files in /var/lib/cni/results/ have a naming signature of:\n\n<type>-<pod id>-<interface name>\n\nWhile the cache files in /var/lib/cni/multus have a naming signature\nof:\n\n<pod id>\n\nNormally these files are cleaned up automatically (I believe\nthis is the responsibility of containerd).  It has been seen\nthat this happens reliably when one manually deletes a pod.\n\nThe issue has been reproduced in the case of a host being manually\nrebooted.  In this case, the pods are re-created when the host comes\nback up, but with a different pod-id than was used before\n\nIn this case, _most_ of the time the cache files from the previous\ninstantiation of the pod are deleted, but occasionally a few are\nmissed by the internal garbage collection mechanism.\n\nOnce a cache file from the previous instantiation of a pod escapes\ngarbage collection, it seems to be left as a stale file for all\nsubsequent reboots.  Over time, this can cause these stale files\nto accumulate and take up disk space unnecessarily.\n\nThis commit attempts to alleviate the problem by introducing\na CNI cache cleanup script which runs as a cron job every 24 hours\nand deletes files which are over 1 day old.\n\nThe cleanup mechanism analyzes the cache files by name and\ncompares them with the id(s) of the currently running pods. Any\nstale files detected are deleted.\n\nTEST PLAN:\n\n- Confirm job runs at prescribed time\n- Confirm existing pods cache files are not deleted\n- Confirm stale cache files from no longer existing pods are\n  deleted after the file is 6 hours old.\n- Confirm stale cache files from no longer existing pods are\n  not deleted if the file is younger than 6 hours old.\n- Confirm the script does not run if kubelet is not up yet\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/814439\nCloses-Bug: 1947386\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Ife36b48ef97d4a7a9477bbb47bf4b0fc16b8a776\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add advertise address to apiserver-change-params\n\nThis work is fixing two issues:\n\n1. Executing the apiserver-change-params script will cause the\n   kube-apiserver advertise-address parameter to be reset, resulting in\n   a disruption in the communication with kubernetes. The cause of this\n   bug is that kubeadm config view doesn't dump the advertise-address,\n   which is a property of InitConfiguration, so using it only causes\n   kubeadm init phase control-plane apiserver to set a default\n   advertise-address.\n2. The command kubeadm config view became deprecated in k8s v1.19 and\n   was removed in k8s v1.22 as reported on\n   https://github.com/kubernetes/kubeadm/issues/2203.\n\nTest Plan: Verify advertise-address is not reset during apiserver change\nparams\n\nPASS: Verify that modifying and applying kube-apiserver oidc parameters\ndoesn't reset advertise-address in\n/etc/kubernetes/manifests/kube-apiserver.yaml\nPASS: Verify that upgrade command `system upgrade-activate` doesn't\nreset advertise-address in /etc/kubernetes/manifests/kube-apiserver.yaml\nPASS: Verify upgrade completes succesfully\n\nRegression: Verify other kube-apiserver resources are not affected\n\nPASS: Verify /etc/kubernetes/manifests/kube-apiserver.yaml changes in\napiserver-change-params are consistent\nPASS: Verify ConfigMap ClusterConfiguration changes in\napiserver-change-params are consistent\nPASS: Verify ConfigMap kubeadm-config changes in apiserver-change-params\nare consistent\n\nNotes: Above tests were executed in systems with both kubernetes v1.18.1\nand v1.21.3\n\nCloses-Bug: 1900153\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\nChange-Id: Ic81a8e20990aa88aad240a7c6d9a79dee38aa370\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move params from horizon.pp to keystone.pp\n\nMove unused params (lockout_period and lockout_retries) from\n/usr/share/puppet/modules/openstack/manifests/horizon.pp to\n/usr/share/puppet/modules/openstack/manifests/keystone.pp and\nuse them to control values generated in the keystone.conf.\nThese params will be controlled by lockout_seconds and\nlockout_retries system parameters.\n\nTest Plan:\n\nPASS: modify parameters and see the list updated.\nPASS: modify parameters, restart services and see the\nkeystone.conf file section updated.\nPASS: build and install iso to check default_parameters\nupdated.\nPASS: create valid user and get blocked.\n\nDepends on: https://review.opendev.org/c/starlingx/config/+/817464\n\nCloses-bug: 1950490\n\nSigned-off-by: fperez <fabrizio.perez@windriver.com>\nChange-Id: I7523035ed91cd20beb8c74b60dc8425086168fdd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix route config handling for DOR\n\nIn a DOR (Dead Office Recovery, where all nodes reboot at once), both\ncontrollers are rebooting at the same time. This means that there is\nno active controller from which to retrieve puppet data in order to\napply the controller manifests. As such, we have to be careful not to\nrely on having the controller manifests run on every controller boot,\nfor things like launching services or any sort of changes in a\nvolatile file system like /var/run.\n\nThe route configuration optimization changes that were added in\nhttps://review.opendev.org/703034 inadvertently relied on existing\nnetwork configuration data being cached in /var/run, however. As a\nresult, a route configuration change after a DOR of a system with\nstandard controllers would end up running with no cached network\nconfig data (an AIO system would have this data generated as part of\napplying the worker manifest), and the apply_network_config.sh utility\nwould think that all network interfaces have been removed from the\nsystem. It would then proceed to apply that config, deleting the\ninterfaces and taking down all networking.\n\nThis commit enhances the apply_network_config.sh to introduce a\n--routes option to separate the route configuration operations from\nthe rest of the networking config. When a route is added or deleted,\nthen, only the route config changes are processed, ignoring network\ninterfaces.\n\nAdditionally, this adds a check in the interface section of the\napply_network_config.sh utility to verify that at least 'lo' exists.\nSince the loopback interface should always exist, its absence would\nindicate that the interface config data is missing or corrupted, and\nis unsafe to apply.\n\nChange-Id: I5583ec916aee8117e5686cfb10fb18ddda4806b1\nCloses-Bug: 1895693\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update kubelet system overrides on unlock\"\n\nThis reverts commit f426f5c67a22d9eedd941b6033e24cf2cb25f61a.\n\nReason for revert: Causes multi-node sanity to fail.\n\nChange-Id: Icb1ef1b54d906b92720b59fb37a1766656157d6d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update k8s plugin directory\n\nWe need to support upgrading from a CentOS-based system\nto a Debian-based system.  Debian uses OSTree which\nmeans that /usr is read-only.\n\nDuring the upgrade of a multi-node system there is\nan issue where the kube-controller-manager-controller-1\npod (created on the CentOS system) is trying to write to\n/usr/libexec which is not valid on the upgraded node running Debian.\n\nThis commit is to update the pod's yaml file with the new\nwritable directory /var/opt/libexec after Debian is installed.\nThe pod is retarted after the yaml file is updated.\n\nA separate change will be made to update kubeadm-config\nconfigmap with this new directory on Debian system. This\nconfigmap change will make sure the new directory is\nused permanently.\n\nThis commit only covers platform upgrade case. Downgrade is not\ncovered and there will be a separate commit for it.\n\nTest Plan:\n\nPASS: Upgrade from stx 6.0 to stx 8.0 in AIO-DX and the pod is\nrunning\nPASS: Upgrade from stx 6.0 to stx 8.0 in AIO-SX and the pod is\nrunning\nPASS: Fresh Debian iso installation on DX\n\nTask: 47161\nStory: 2009303\n\nSigned-off-by: Junfeng (Shawn) Li <junfeng.li@windriver.com>\nChange-Id: I503beef44a7c1a16a12226a2988e54535c5c4162\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Collapse glance into platform in ControllerFS API\n\nThe existing \"platform\" filesystem is now resizable and added to\nthe ControllerFS API. The \u201cglance\u201d filesystem is merged into\n\"platform\" and therefore removed from the ControllerFS API. The\n\"--force\" flag is removed from the controllerfs-modify API as\nit was only used for glance fs resizing.\n\nThe folder /opt/cgcs is removed and the \u201chelm_charts\u201d and \u201ckeystone\u201d\nfolders now resides under /opt/platform.\n\n  ls /opt/platform/\n  armada  config  helm  nfv  puppet  sysinv\n\n  ls /opt/cgcs/\n  helm_charts  keystone\n\nResources related to drbd-cgcs and /opt/cgcs are removed from puppet\nor updated to use drbd-platform and /opt/platform.\n\nSM is no longer monitoring resources related to drbd-cgcs.\n\nTested in AIO-SX, AIO-DX and Standard hardware labs.\n\nPartial-Bug: 1830142\n\nChange-Id: I0a80c95a057e9d6d2acec5f33cc4da31cd20955e\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move subcloud audit to separate process\n\nSubcloud audit is being removed from the dcmanager-manager\nprocess and it is running in dcmanager-audit process.\n\nThis update adds associated puppet config.\n\nStory: 2007267\nTask: 39640\nDepends-On: https://review.opendev.org/#/c/725627/\n\nChange-Id: Idd2e675126a01d6113597646ddd9eb4a0bc5be44\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add registry.k8s.io docker registry\n\nIn an effort to uprev the SPO images, add the\nregistry.k8s.io registry, which is where the upstream release images are\nnow tracked and stored.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/869433\n\nPASS: build-pkgs -c -a\nPASS: build-image\nPASS: boot\nPASS: SPO image downloaded from private repo after apply\n\nStory: 2010310\nTask: 47086\n\nSigned-off-by: Rahul Roshan Kachchap <rahulroshan.kachchap@windriver.com>\nChange-Id: I1234ccdb425e25922e916605c8ead78a90926f1f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable kubernetes SCTPSupport feature\n\nThe feature gate for sctp support in apiserver was added in\nkubernetes 1.12 but is disabled by default.  This commit enables it.\n\nInformation about SCTP is here:\nhttps://kubernetes.io/docs/concepts/services-networking/service/#sctp\n\nThe centos version of netcat can be used to validate the feature.\nA Dockerfile for building a centos netcat is provided.\n\nTested by:\n\nkubectl run --generator=run-pod/v1 --image netcat:v1.0.0 \\\n    listen-sctp -it --rm -- --sctp -l -p 9000\n\n(get IP of the listener pod)\nkubectl run --generator=run-pod/v1 --image netcat:v1.0.0 \\\n   test-sctp -it --rm -- --sctp <listener pod IP> 9000\n\nChange-Id: I9642e485cb9c30f6b1272c00ec1046b9c98211ac\nStory: 2006472\nTask: 36403\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add icr.io docker registry\n\nIn an effort to uprev the portieris images, add the\nicr.io registry, which is where the upstream release images are\nnow tracked and stored.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/871023\n\nPASS: build-pkgs -c -a\nPASS: build-image\nPASS: boot\nPASS: portieris image downloaded from private repo after apply\n\nStory: 2010394\nTask: 47167\n\nSigned-off-by: Rahul Roshan Kachchap <rahulroshan.kachchap@windriver.com>\nChange-Id: I5834363efcc6bc140dcae6f4dcd109a7d064505d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore failed on AIO-SX\n\nWhen using \"config_controller\" to do restore on AIO-SX, SM is signaled\nto manage the services through /etc/platform/.initial_config_complete\nright after controller manifest is applied. For restore, SM shouldn't\nstart to manage the services this early. This is a new behaviour\nintroduced by Ansible Bootstrap. This commit adds a check for restore\nin platform::config::controller::post to delay SM service management.\n\nStory: 2004761\nTask: 30522\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\nChange-Id: Ia19907bd07c84ec988d32bd48da6803b20e961c6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: apply network config with correct dependency\n\nIt was detected that on a system with 2 or more labeled interfaces\n(those are ifupdown representation of \"interfaces\" that will only\nconfigure the IP address on a base interface, e.g. interface vlan160\nmay have labeled interfaces vlan160:1 and vlan160:5) the order of\nexecution was preventing them to be applied because the execution\nwas happening before the base interface.\n\nThe execution was decided by the result of the find command, this\nchange applies a sort on the list to be sure that the execution is\nrespecting the base interface first, e.g:\ni)  enp0s8 => enp0s8:1 => enp0s8.100 => enp0s8.100:1 => enp0s8.100:5\nii) vlan160 => vlan160:1 => vlan160:5\n\nAlso:\n1) added a log message in case of ifup or ifdown failure\n2) prevent the processing of labeled interfaces in\n   verify_all_vlans_created()\n\nTest Plan (Debian and CentOS):\nPASS add interfaces and lock/unlock the controller\nPASS edit interfaces and lock/unlock the controller\nPASS remove interfaces and lock/unlock the controller\n\nCloses-Bug: 1987918\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I7bc8d2bb25a74a5900b46936b59fc83b9251b53b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial HA kubernetes deployment\n\nProvides initial HA support for our kubernetes deployment, including:\n- Tuning kubelet and kube-controller-manager configuration to provide\n  faster detection/response to node failures. Pods on failed nodes\n  will now be evicted in approximately 50s vs. the default of about\n  5m40s.\n- Configure kube-dns and tiller-deploy pods with a node selector to\n  ensure they only run on master nodes.\n- Update VIM to apply NoExecute taint to any kubernetes node when host\n  services are disabled (e.g. due to host lock or host failure).\n  Kubernetes will then evict any dynamic pods from the node (but not\n  static pods or daemonset managed pods).\n- Update VIM to remove NoExecute taint from any kubernetes node when\n  host services are enabled.\n\nChange-Id: I71cb5b5fb066b752fa909b297ad839aa94c0edb1\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002843\nTask: 22790\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add B&R information comments to DRBD manifest\n\nThis commit adds a series of comments to the DRBD manifest\nso that users doing any changes to this manifest know also\nupdate the list of DRBD devices in the restore playbook.\n\nChange-Id: Iae1d9d98391759669871b016721418922aa134ce\nPartial-bug: 1854169\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: puppet-manifests: do not call grubby to edit grub.cfg\n\nThe grub.cfg file is including in OSTree images and may be signed\nas part of secure boot, as such it is not to be edited on the\ntarget. Modifications to grub.cfg can be affected by changing the\ntemplate used by LAT during image building. Runtime changes, such\nas those applied previously by tools like 'grubby' must now be\nmanaged via variable substitution in grub.cfg and using\n/boot/efi/EFI/BOOT/boot.env and /boot/{1,2}/kernel.env.\nUpdate instances of using grubby that edited grub.cfg to using\nthis alternative approach.\n\nAlternatively, use script /usr/local/bin/puppet-update-grub-env.py\nto wrapper grub-editenv to edit grub variable kernel_params in\n/boot/efi/EFI/BOOT/boot.env and kernel in /boot/{1,2}/kernel.env\n\nThe grub cmdline can have multiple hugepages config arguments, in\npairs of hugepagesz and hugepages parameters. This commit extends the\npuppet-update-grub-env.py to handle these parameters in pairs,\nallowing for multiple pairs.\n\n...\n$ puppet-update-grub-env.py --add-kernelparams \"a=b aa c \\\n    hugepagesz=1G hugepages=0 default_hugepagesz=1G\"\n$ puppet-update-grub-env.py --add-kernelparams \"a=d \\\n    hugepagesz=2M hugepages=0\"\n\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params= a=d aa c hugepagesz=1G hugepages=0 \\\ndefault_hugepagesz=1G hugepagesz=2M hugepages=0\n\n$ puppet-update-grub-env.py --remove-kernelparams \"a c \\\n    hugepagesz hugepages\"\n\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params= aa default_hugepagesz=1G\n...\n\nTest Plan for Debian:\nPASS: system installation, bootstrap and unlock\n\nStory: 2009965\nTask: 45365\n\nSigned-off-by: Hongxu Jia <hongxu.jia@windriver.com>\nChange-Id: I735bfc48000ce6f6269e0d4ed59eda7b3e288bd2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix in-service re-sizing of docker-lv\n\ndocker-lv is an XFS file system. Add support for re-sizing XFS\nfilesystems by using blkid to query the file system type and call\nxfs_growfs for XFS filesystems. Maintain the current behavior by calling\nresize2fs for all non-XFS file systems.\n\nChange-Id: If5de15d232c66e99f7f5c752d96ef92674dafb1d\nStory: 2002876\nTask: 26864\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix openldap manifest apply failure during lock/unlock\n\nAfter initial unlock, subsequent lock/unlock of an AIO-SX system\nwill see openldap configuration takes a long time during puppet\nmanifest apply, and eventually fails the whole manifest apply, leaving\nthe system partially configured and trigger system reboot.\n\nThis change updated ldap puppet module to fix this issue.\n\nTest Plan:\nPASS: AIO-SX system deployment\nPASS: After deployment, verify secure openldap is accessible by\n      ldapsearch -xH ldaps://controller -b \"ou=People,dc=cgcs,dc=local\"\nPASS: After deployment, verify openldap users by\n      ldapfinger\nPASS: After deployment, verify openldap users can login on console and\n      by ssh\nPASS: After deployment, delete secret system-openldap-local-certificate,\n      trigger cert-mon to renew openldap cert/key, verify the cert/key\n      files are updated\n      /etc/ldap/certs/openldap-cert.crt\n      /etc/ldap/certs/openldap-cert.key\nPASS: lock/unlock the system (multiple times), verify the puppet\n      manifests apply successfully during unlock.\nPASS: After lock/unlock, verify openldap works properly by repeating\n      the after deployment tests.\n\nStory: 2009834\nTask: 46569\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ie8804549f27307df8797a2e94e3410bae0992670\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update lighttpd config to support ICA signed certificate\n\nUpdated lighttpd puppet template to generate configuration file\nthat supports intermediate CA signed certificate.\n\nChange-Id: Id7d10d91a7ba7c35bcaf3056824e80410e72cfb8\nCloses-Bug: 1883300\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Moving the grub parameters update to sysinv puppet operator\n\nThe default huge pages size and 1G huge pages setting depend on\nthe user configuration data and they should be updated by the\nsysinv puppet operator when generating hiera data.\n\nDepends-On: https://review.opendev.org/#/c/682258/\nStory: 2006295\nTask: 36006\n\nChange-Id: I3f436f999e3abf9ed2de3d83561332ba1107c0e2\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Updates for multipath support\n\nRefactor is_primary_disk_rotational fact to detect HDD/SSD, NVMe, and\nmultipath devices and update the multipath blacklist exceptions\n\nThis will detect /dev/sdaX, /dev/nvmeXnYpZ, and /dev/mapper/mpathX-partY\nand resolve to the underlying block device so the rotational property\ncan be retrieved.\n\nBlacklist exception support is added for:\n- HP 3PAR SANs (H/W multipath)\n- QEMU (for virtual multipath development)\n- TrueNAS (currently only iSCSI support validate)\n\nTest Plan:\nPASS - AIO-SX: HPE multipath install/bootstrap/unlock\nPASS - AIO-SX: Qemu virtual multipath install/bootstrap/unlock\nPASS - AIO-DX: Qemu virtual multipath install/bootstrap/unlock\nPASS - AIO-DX+: Qemu virtual multipath install/bootstrap/unlock\nPASS - 2+2 (controller storage): Qemu virtual multipath install/\nbootstrap/unlock\nPASS - 2+2+2 (dedicated storage): Qemu virtual multipath install/\nbootstrap/unlock\nPASS - Add OSD ceph storage configuration (AIO-SX)\nPASS - Expand CGTS volume group using extra disk (Partition) (AIO-SX)\nPASS - Expand CGTS volume group using extra disk (disk) (AIO-SX)\nPASS - Add nova local volume group using extra disk (AIO-SX)\nPASS - App pod that alocates and writes into a PVC\u00a0(AIO-SX)\nPASS - Local disk Commands (Disk API) - AIO-SX/DX\n- host-disk-list\n- host-disk-show\n- host-disk-partition-list\n- host-disk-partition-show\n- host-pv-list\n- host-pv-show\n- host-stor-list\n- host-stor-show\n- host-lvg-list\n- host-lvg-show\n- host-pv-add\nPASS - Create nova-local volume group\nPASS - Local disk Commands on AIO-DX after swact\n\nRegression:\nPASS - AIO-SX: Non-multipath install/bootstrap/unlock (NVME)\nPASS - AIO-DX: Non-multipath install/bootstrap/unlock (SSD)\nPASS - 2+2: Non-multipath install/bootstrap/unlock (SSD)\nPASS - 2+2+2 : Non-multipath install/bootstrap/unlock (SSD and HD)\nPASS - Distributed cloud: Non-multipath install/bootstrap/unlock\n\nChange-Id: I62cbb9e009b1d30ce7b85ae03c9eee09390e5af7\nDepends-On: https://review.opendev.org/c/starlingx/tools/+/860590\nStory: 2010046\nTask: 47118\nCo-Authored-By: Robert Church <robert.church@windriver.com>\nSigned-off-by: Adriano Oliveira <adriano.oliveira@windriver.com>\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update network interfaces during upgrade bootstrap execution\n\nThere are two issues adressed by this change:\n\n1. The change introduced by\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/895726 prevents\nthe interfaces from being activated during upgrade bootstrap. Such\nbehaviour causes issues when specific network configurations are needed\nfor the upgrade to finish. This change reverts it, but making sure that\nthe sysinv lock issue is properly taken care of.\n\n2. Given an interface that is already activated and configured with ip\naddresses via the 'ip' command, if an attempt is made to bring it up\nvia the 'ifup' command, the command fails and the default route (if\npresent in the config file) is not properly configured. To prevent this\nfrom happening, this change improves the logic in the function that\nbrings the interface down, so that the interface is guaranteed to be in\ndown state and have no IP adresses.\n\nTest plan\n\nSystems\n  - AIO-SX IPv4\n  - AIO-SX IPv6\n\nTest IP addresses (examples)\n+---+-----------------+-----------------+\n| # | IPv4 (/24 mask) | IPv6 (/64 mask) |\n+---+-----------------+-----------------+\n| 1 | 10.20.1.1       | fd00::1:1       |\n| 2 | 10.20.1.2       | fd00::1:2       |\n| 3 | 10.20.1.3       | fd00::1:3       |\n| 4 | 10.20.1.4       | fd00::1:4       |\n| 5 | 10.20.2.1       | fd01::1:1       |\n+---+-----------------+-----------------+\n\nTest scenarios\n\nThe initial setup for each test must follow what is described in each\ncorresponding scenario below. For it to be valid, the configuration in\nthe kernel must be in sync with the sysinv database.\n\n1. Standard ethernet interface as OAM\n  - oam0\n    > Type: regular ethernet\n    > Underlaying interface: 'if0' for reference\n    > Static IP: #2\n    > Gateway IP: #1\n\n2. VLAN interface as OAM\n  - oam0\n    > Type: VLAN ID 100\n    > Interface name: 'vlan100' for reference\n    > Underlaying interface: 'if0' for reference\n    > Static IP: #2\n    > Gateway IP: #1\n\nActions\n\n- Edit ifcfg-<interface>:\n  > Manually edit /etc/network/interfaces.d/ifcfg-<interface> to change\n    MTU value (for example, from 1500 to 1502), this will cause the\n    script to detect the difference and trigger an interface update.\n\n- Erase ifcfg-<interface>:\n  > Manually remove /etc/network/interfaces.d/ifcfg-<interface> file\n    from the filesystem.\n\n- ifdown <interface>:\n  > Run command 'ifdown <interface>' to cause the interface to be\n    deactivated by ifupdown.\n\n- Set link up <interface>:\n  > Run command 'ip link set up dev <interface>' to put interface's\n    link to UP state.\n\n- Create VLAN <vlan-name> on <iface>:\n  > Create VLAN interface and set it's link to UP through the commands\n    'ip link add link <iface> name <vlan-name> type vlan id <vlan-id>'\n    and 'ip link set up dev <vlan-name>'.\n\n- Add IP <address> to <interface>:\n  > Run command 'ip address add <address> dev <interface>' to add an\n    IP address to the interface.\n\n- Add route to <interface> via <address>:\n  > Run command 'ip route add default via <address> dev <interface>' to\n    add a default route to the interface.\n\n- Modify MTU:\n  > Modify the MTU of the interface via sysinv (example:\n    'system host-if-modify controller-0 oam0 -m 1502')\n\n[ Test Case 1 - Direct script call tests ]\n\nFor the tests, changes to the OAM interface will be made to check if\nits parameters (link state, IP address, default route) are correctly\nrestored by the apply_network_config.sh script. The changes here are\nmade manually to the files and not through sysinv.\n\nTest procedure\n\n1. Apply initial setup.\n2. Apply actions.\n3. Run /usr/local/bin/apply_network_config.sh as root.\n4. Check that interface state, IP address and default route in kernel\n   match the ones in the sysinv database.\n\nTests\n\nFor scenario #1\n\nPASS For if0, edit ifcfg\nPASS For if0, erase ifcfg\nPASS For if0, ifdown, erase ifcfg\nPASS For if0, ifdown, edit ifcfg, set link up, add address IP#2\nPASS For if0, ifdown, edit ifcfg, set link up, add address IP#5\nPASS For if0, ifdown, edit ifcfg, set link up, add address IP#2,\n     add route via IP#4\n\nFor scenario #2\n\nPASS For vlan100, edit ifcfg\nPASS For vlan100, erase ifcfg\nPASS For vlan100, ifdown, erase ifcfg\nPASS For vlan100, ifdown, edit ifcfg, create VLAN, add address IP#2\nPASS For vlan100, ifdown, edit ifcfg, create VLAN, add address IP#5\nPASS For vlan100, ifdown, edit ifcfg, create VLAN, add address IP#2,\n     add route via IP#4\nPASS For if0, edit ifcfg\nPASS For if0, erase ifcfg\n\n[ Test Case 2 - Indirect script call on lock/unlock ]\n\nTest Procedure\n\n1. Apply initial setup.\n2. Lock host.\n3. Apply actions.\n4. Unlock host.\n5. Check that interface state, IP address and default route in kernel\n   match the ones in the sysinv database.\n\nTests\n\nFor scenario #1\n\nPASS For if0, modify MTU\nPASS For if0, erase ifcfg (to simulate first unlock when ifcfg-* files\n     don't exist)\n\nFor scenario #2\n\nPASS For vlan100, modify MTU\nPASS For if0, modify MTU\nPASS For if0 and vlan100, erase ifcfg\n\n[ Test Case 3 - Indirect script call on upgrade ]\n\nTests\n\nPASS Perform upgrade on VirtualBox\nPASS Perform upgrade on a physical lab\n\n-----------------------------------------------------------------------\n\nCloses-Bug: #2036451\nSigned-off-by: Lucas Ratusznei Fonseca <lucas.ratuszneifonseca@windriver.com>\nChange-Id: Ibda7c744e9be26b0bbcbd1520ffe15825ad1f60f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"debian: Update scratch mount location\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Horizon: Error viewing system information page with https\n\nWhen system is configured with https, the sm-api internal endpoint\nis incorrectly configured with https in haproxy.\n\nCloses-Bug: #1794373\n\nChange-Id: I0d2bc14dc5b2ac89b0720e8bddd6fb63348f3afd\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix stale data cleanup on the logical volumes\n\nThe stx-puppet tries to wipe the start and end of some logical\nvolumes to prevent problems, but the command uses the wrong output\nfile resulting in the creation of junk files. The command for scratch\ndoes not work since it's already mounted before the bootstrap. For this\nreason it was decided to unmount the filesystem before wiping the\ndevice's data.\n\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/849047\n\nTest Plan:\nPASS: Perform bootstrap and restore-platform playbooks on centOS\nPASS: Perform bootstrap and restore-platform playbooks on Debian\n\nCloses-bug: 1975851\n\nSigned-off-by: Hugo Brito <hugo.brito@windriver.com>\nChange-Id: I3d0aa664a1bd72dd49ca2f4941bc06d25517b474\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Containerization, support 2 keystones in sysinv\n\nSupport bare metal and pod based keystone in sysinv.  The existing\nkeystone_authtoken section of sysinv.conf remains and is used for\nplatform service authentication, while openstack service authentication\nparameters are moved to a new openstack_keystone_authtoken section.\nAdmin credentials are used in the new openstack_keystone_authtoken\nsection and the region name parameters are also moved to this new\nsection.\n\nChange-Id: I7a53dd5a2dc52213e0f1e0cc748649a33f0f9f40\nStory: 2002876\nTask: 26926\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Amend kube-apiserver 1.23 configuration to use PSP\n\nEnabling PodSecurityPolicy using service parameter \"admission_plugins\"\nin k8s 1.22+ versions of kube-apiserver configuration, results in\nkube-apiserver pod not able to restart.\nStarting with k8s 1.22 version, kube-apiserver configuration includes\nseccompProfile field as part of securityContext in the container spec.\nSecurityContext configuration prevents the kube-apiserver pod to\nrestart.\nSeccompDefault feature gate is not being enabled currently and\nseccompProfile setting is impacting PSP configuration.\nIn order to be able to use PSP functionality in the transitioning\nK8s 1.23 release, seccompProfile configuration requires to be removed\nfrom kube-apiserver configuration.\n\nTest Plan:\nPASS: Verify \"enable PodSecurityPolicy(PSP)\" using \"admission_plugins\"\n      service parameter, is successful.\nPASS: Verify that pod \"kube-apiserver-controller-0\" runs successfully\nPASS: Verify kube-apiserver is up and running with the PSP enabled.\n\nStory: 2009833\nTask: 45645\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I269c23352bf790d423add2a1e3c05f63c6e1a6cc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Puppet: Fix unacceptable location warnings\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix vswitch manifest enabled parameter default value\n\nSince vswitch is not a required service for the platform\nwe can disable it by default. This prevents the dependency\nof the manifest on the OVS plugin hieradata, which may provide\noutdated data during patch apply.\n\nTest plan:\nPASS: Host lock and unlock with enabled default to undef.\nPASS: Bootstrap with enabled default to undef.\nPASS: Bootstrap with vswitch_type=none.\nPASS: Bootstrap with vswitch_type=ovs-dpdk.\n\nCloses-Bug: 1965143\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ia07877d2188b681dfcf9c2700222c1cc7f73f7e6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Drive cpupower max CPU frequency from compute manifest\n\nThis change aims to control the host CPU max frequency\nvia puppet runtime. This will be integrated with a new\nhost attribute in sysinv-db to persist this limit.\n\nTest plan:\nPASS: Bootstrap a system.\nPASS: Trigger runtime manifest successfully.\n\nStory: 2009886\nTask: 44881\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Id5249c90aa6d03aa2dc87b5ad800d1fb9bb70691\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix two coredns pod in simplex system\n\nThere are 2 coredns pod in default. For simplex system, use kubectl\nscale cmd to set the replicas to be 1.\n\nTest:\nPass simplex and duplex deploy test, and coredns pod is 1 for simplex\nand 2 for duplex. affinity and nodeselector setting for duplex is kept.\n\nCloses-Bug: 1822880\n\nChange-Id: I18f6cb9039bf86ffcd94f36fa5348ff274cc482d\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding a trusted CA certificate in ansible\n\nSome parts of the ansible playbook may require installing a trusted CA\ncert on the system. For example specifying a docker registry using a\nself signed cert.\n\nThis change will allow the ansible playbook to call the system\ncertificate-install command during initial config.\n\nChange-Id: Ic094837388b0fb644d647e693314dd3abaab1266\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nPartial-Bug: 1831946\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart docker after restarting containerd\n\nSince docker and containerd are decoupled in systemd, restarting\ncontainerd won't restart docker any more. This change updated puppet\nclasses to restart docker when needed.\n\nTest Plan (on DX system):\nPASS: Run multiple ssl_ca certificate install/uninstall, verify\n      operations are all successful, docker and containerd restart\n      as expected, pmon doesn't report dockerd failure, and no\n      host-swact or reboot.\nPASS: Set docker proxy by \"system service-parameter-add\", verify both\n      containerd and docker get restarted and \"docker pull\" from\n      Docker Hub works.\n\nCloses-Bug: 2012545\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I9970cc0a8ec4897043b84d143f6cb2a02513ff66\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify _audit_kubernetes_labels interval\n\nThe _audit_kubernetes_labels is responsible for syncing labels created\non a node before it's unlocked and is missing from kubernetes.\n\nIncreasing this audit interval to 180 seconds prevents it from being\ncalled too many times, but still does not take a long time to sync\nlabels when a new node is unlocked.\n\nTEST PLAN:\nPASS: AIO-DX: manually replaced these files and no crashes happened.\nPASS: rebuild the whole system the modification with no crashes.\nPASS: AIO-DX: verify that the audit is being called called during the\nperiod.\nPASS: AIO-DX: follow the sysinv logs seeking errors. No error was\nfound.\nPASS: AIO-DX: follow the sysinv logs to guaratee that the labels are\nbeing synced.\n\nStory: 2010087\nTask: 45979\n\nSigned-off-by: Caio Cesar Ferreira <Caio.CesarFerreira@windriver.com>\nChange-Id: I8cc70345e758f9da9ab8e8b4d77354eae331fd6e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for multus and sriov CNI, device plugins\n\nThis commit adds support for the Multus, SRIOV CNI, and SRIOV\ndevice plugins plugins.\n\nIt is intended that these would be used outside of the stx-openstack\napplication, to pass through devices for a user defined container.\n\nThe Multus CNI plugin enables attaching multiple network interfaces to\npods in Kubernetes\n\nThe SRIOV CNI plugin allows passing through of an SRIOV VF to a\ncontainer, with support for IP, vlan, DPDK  configuration.\n\nThe SRIOV device plugin is a kubernetes device plugin for discovering\nand advertising SRIOV VFs in a Kubernetes host.\n\nSysinv changes have been made to populate the SRIOV device plugin\nconfiguration file with appropriate values based on the host's\nconfigured PCI-PT and SRIOV interfaces.\n\nTo enable SRIOV interfaces in a container, the user would create\na custom multus NetworkAttachmentDefinition with type 'sriov'\nand refer to it in the Pod's k8s.vi.cni.cncf.io/networks annotation.\n\nA few sample NetworkAttachmentDefinition and pod deployments can be found\nhere:\n\nhttps://github.com/intel/sriov-network-device-plugin\n\nStory: 2005208\nTask: 29983\nTask: 30054\n\nCo-Authored-By: Litao Gao <litao.gao@windriver.com>\nCo-Authored-By: Jackie Huang <jackie.huang@windriver.com>\n\nChange-Id: I01587af6a4dc40fe7542b140e5bbee539d93740f\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update haproxy config to include keystone request retry.\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add docker proxy configuration for kubernetes\n\nCurrent config_controller for containerization pulls kubernetes\nimages from public container registry. This requires controller\nto access internet. If a host network is behind a proxy, there\nis no chance to setup docker proxy configuration during config_\ncontroller, therefore, kubernetes images are not accessible.\n\nDocker proxy configuration questions were added to require users\ninput http/https proxy and no proxy settings. The docker proxy\nconfigurations are added to service_parameter table in sysinv.\n\nhttp-proxy.conf is the proxy info file required by docker daemon,\ngenerated by docker puppet manifest. It consists of the user\ninput docker proxy configuration.\n\nTests:\nAIO-SX: public k8s images accessible\nAIO-DX: public k8s images accessible\nAIO-SX without k8s config: config_controller successfully\n\nStory: 2004710\nTask: 28741\n\nChange-Id: Ie273ad77338cdec496c5d05bf3e05baa83166626\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix task ordering to prevent race condition on ptp config gen\n\nChanged the task ordering for the ptpinstance runtime manifest. The\nprevious ordering could result in a race condition where collectd was\nbeing restarted before puppet had finished writing all of the ptp\nconfigs. This would result in collectd initializing and not reading all\nof the ptp config files.\n\nChanged the chaining arrow to ensure that collectd is not restarted\nuntil the config generation has completed.\n\nTest Plan:\nPASS: Generate multiple ptp configs and run the manifest with system\nptp-instance-apply. Ensure that collectd starts after config generation\nis complete. Performed dozens of iterations over the course of other\ndevelopment work and the race condition was not observed again.\n\nStory: 2010723\nTask: 48442\nChange-Id: I057c80a1c8488488ba26c739c9083ebfe63738d7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for dcmanager-audit-worker service\n\nWe're moving the bulk of the dcmanager subcloud audits to separate\nworker processes, so we need to add a service for the main worker\nprocesses (which will then spawn additional workers).\n\nStory: 2007267\nTask: 41869\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nDepends-On: https://review.opendev.org/c/starlingx/ha/+/775457\nChange-Id: I119d24ae67ec4a40c360ac721582b45388231cbf\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Barbican bootstrap and runtime manifests\n\nBarbican service is needed during bootstrap phase for StarlingX.\nImplement bootstrap and runtime manifests to achieve that.\n\nChange-Id: I6c22ebddacf8aec3a731f7f6d7a762f79f511c78\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve log retention for audit.log during massive outage\n\nThe audit.log is flooded with keystoneauth warning when subclouds\ngo offline. Thus, during a massive outage, the log file rotates\n4 times in 4 hours.\n\nThis commit fixes the issue and only outputs ERROR log levels\nfrom keystoneauth for dcmanager services.\n\nTests Executed:\n1) Verified that the line \"default_log_levels = keystoneauth=ERROR\"\nis added to the config file \"/etc/dcmanager/dcmanager.conf\"\n2) Verified that keystone auth warnings are not present in audit.log\n\nChange-Id: Ic83119aeead898b03f87fbf31187ec8f004bbd32\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\nStory: 2009272\nTask: 43628\nDepends-On: https://review.opendev.org/#/c/814049\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Change pod pid limit default value\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Change the page size mounted at /dev/hugepages\n\nThe libvirt helm chart assumes that the default hugepage\nsize is mounted at /dev/hugepages.\n\nThe default size mounted at /dev/hugepages was fixed to 2M,\nwhile the kernel default huge page size was set to 1G on\nBaremetal, as a result the libvert pod failed to start since\nit was unable to write to the hugepage mount.\n\nThis update changes the page size mounted at /dev/hugepages\nto be the same as the kernel default hugepage size.\n\nChange-Id: Icc0326b99338ca7c06b113e6991f01b838030aca\nCloses-Bug: 1844576\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sssd systemd service file override\n\nsssd is monitored by pmon. But currently the Restart option in its\nsystemd service file is set to on-failure. This sometimes causes\nsystemd and pmon to fight to restart the service when it fails. All\nprocesses monitored by pmon should have Restart set to \"no\".\n\nThis change added a systemd override file to set Restart to \"no\" for\nsssd service.\n\nTest Plan:\nPASS: Standard system deployment.\nPASS: Check sssd Restart option using \"systemctl cat sssd\", verify\n      Restart option is set to \"no\", as following:\n\n      # /etc/systemd/system/sssd.service.d/sssd-stx-override.conf\n      [Service]\n      # pmond monitors sssd service\n      Restart=no\nPASS: Kill sssd process, verify pmon restart it successfully by\n      tailing pmon.log, and verify sssd is running by \"systemctl\n      status sssd\" command.\n\nCloses-Bug: 2023421\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I84521caf3745122492afe9ef4a251e42129b29b0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable communication from nova-api-proxy to VIM\n\nPrior to kubernetes integration, the nova-api-proxy\ncommunicated with the VIM using port 30003 on the loopback\naddress. This worked fine when both the nova-api-proxy and\nthe VIM were running on bare metal.\n\nWhen nova-api-proxy is running in a pod, it\ncannot use the loopback address to communicate with the VIM,\nsince the loopback address is local to the pod. The\nnova-api-proxy pod will instead use the floating management\naddress (which is present on all systems) to communicate with\nthe VIM. The problem is that on AIO simplex systems, the\nfloating management address is also in the loopback subnet.\nThe fix for this is to use a non-loopback address for\nmanagement on AIO simplex systems. This required changes to\nconfiguration scripts/utilities to allow the user to\nspecify the management subnet on AIO simplex systems,\ninstead of hardcoding it to a loopback address.\n\nChange-Id: I26c15657471f8214e628c6d43eaab07eb8e744ec\nStory: 2003910\nTask: 28061\nDepends-on: Ib7c08bfc1c661a9fb347308e55cc806b4dd129ad\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Clamp kubernetes at 1.12.3 during init phase\n\nRather than pulling the latest upstream stable version,\nthis enforces a known version of 1.12.3\nThis was required after 1.13 was released Dec 3 and broke\nfunctionality.\n\nStory: 2004520\nTask: 28311\nChange-Id: Ia870483d523098cf1597085c3111ca71ea0b8b56\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: update global_filter regex to work on debian\n\n/etc/lvm/lvm.conf configuration file has a slight difference on\nDebian compared to CentOS. The global_filter regex used to change\nthat file in puppet only works on CentOS, with the update now also\nworks on Debian OS.\n\nTest Plan:\nDebian/CentOS:\nPASS: global_filter entry on /etc/lvm/lvm.conf updated correctly\nPASS: Controller unlocked/enabled/available\n\nStory: 2009965\nTask: 45466\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I600e7289dca85183493a265f9a62764e40a46ecd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Stardandize makefiles for puppet-modules-wrs\"\n\nThis reverts commit 24fd045f6883dc060d6e09b5444080cae5196847.\n\nThis commit is causing an installation failure. It appears\nthat it has changed the location of some puppet manifests.\n\nChange-Id: Ic9e2a7638f9b87199417016c4d50d84c6534aa88\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion kubernetes to 1.16.0\n\nSpecify the 1.16.0 kubernetes client\n\nChange-Id: I8bdf82379221df9ab77757b0fe1f310b33a69023\nStory: 2005860\nTask: 36706\nDepends-On: https://review.opendev.org/#/c/684351\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix missing kubelet service enable for worker nodes\n\nPrevious commit:\n  https://review.opendev.org/c/starlingx/stx-puppet/+/780600/\nkubelet enable is skipped for the worker nodes.\n\nChange-Id: I7769aebb4a9e38404af0c883640e1a27bb1e9e84\nCloses-Bug: 1918139\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate admin ep cert on subcloud controllers in puppet\n\nEnabled admin endpoint cert to be generated in manifest directly\nfrom k8s secret data (via secure hieradata). This operation is\nconsistant to the system controller as well as admin endpoint cert\nrenewal.\n\nPartial-Bug: 1923510\n\nChange-Id: I442f3c2c97cf83588aefa8b4fe808834a31fdcc5\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix route configuration in DC setup\n\nIn distributed cloud (DC) systems it was observed that configuration of\nroutes used to connect the DC controller(s) to the subclouds was failing\nsince the proper function 'update_routes' was not been found in the\nproper child script (either for CentOS or Debian).\n\nThis change fix it by performing the same verification to detect what\nscript should be sourced, depending on the base distro being used.\n\nTest Plan:\nPASS: Install in DC enviroment (dc-controller: 2 controllers+1 compute,\n      plus 2 AIO-SX subclouds) and checked connectivity via DC\n      management routes.\n\nTask: 44840\nStory: 2009101\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I21524b75c401a6d9de03e1efe71555f54f62b9a3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes custom configuration support: runtime\n\nThese changes allow users for global customization\nof kubelet and control plane components during\nruntime process.\n\n* Validations have been relaxed to enable creation of\n  new sections in kubernetes service through service-parameter.\n  e.i.: kube-apiserver, kube-scheduler, kube-controller-manager.\n\n* Validations have been relaxed to enable creation of\n  new parameters in kubernetes service through service-parameter.\n\nTest Plan:\n* Fresh Install: AIO-SX, Standard.\n* Upgrade: AIO-SX, Standard.\n* Create, modify, delete supported parameters and verify changes on\n  k8s control plane components and sysinv database.\n* Add and apply not supported parameters and verify kube-apiserver auto\n  restore process.\n* Validate launch example Pods, for both simplex and duplex systems.\n\nStory: 2009766\nTask: 44376\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I6408d37d6e4f1902f74261c5261abdbe0d6ed111\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Increase kubernetes apiserver event ttl\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Modify _audit_kubernetes_labels interval\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Register configuration for ovsdb-server and ovs-vswitchd with pmon daemon\n\nLinking pmon configuration files for ovsdb-server and\novs-vswitchd to link_path in /etc/pmon.d. Doing this\nwill register the configuration with pmon daemon.\n\nChange-Id: Icf2fff05782db1ea9f3bf8410ee982366d148d99\nStory: #2002947\nTask: #22942\nDepends-On: https://review.openstack.org/#/c/648330/\nSigned-off-by: Chenjie Xu <chenjie.xu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update kubelet system overrides on unlock\"",
        "issue_summary": ""
    },
    {
        "commit_message": "/etc/ceph/ceph.client.None.keyring not created on standby controller\n\nThis commit ensures that file /etc/ceph/ceph.client.None.keyring is\ncreated on both controllers after ceph backend is added.\n\nChange-Id: I49c7b540caca18bada7166c9e7fb2f4b3475a5d3\nCloses-Bug: 1810440\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add k8s cfg file to the OAM firewall script\n\nIn the change\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/897467 the OAM\nfirewall was not updated to pass the k8s config file as argument\nto calico_firewall_apply_policy.sh. It then created an error that\nprevented the global network policy to be created, making the OAM\ninterface to block all traffic, except for the failsafed ones.\n\nThis change corrects that\n\nTest Plan\n[PASS] In AIO-DX remove the current OAM GNP and execute lock/unlock\n        on one of the controllers, verify the OAM GNP is recreated.\n[PASS] In AIO-DX remove the current OAM GNP and force the runtime\n        execution by creating the file\n        /etc/platform/.platform_firewall_config_required and observe\n        the request to recreate the OAM GNP\n\nCloses-Bug: 2038550\n\n\nChange-Id: Ica03dbf6ffd9f6f592fa53efa40293191203377a\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Workaround for console session timeout terminating user processes\"\n\nThis reverts commit dd82356a9c4f3e07a4670b5f280ff8092995c0e4.\n\nReason for revert: see https://review.opendev.org/c/starlingx/stx-puppet/+/870667\n\nPartial-Bug: 1999049\nChange-Id: Ife29714e9ca6406f86ff8c411e6e21964af4a38b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable PCH sanity check on compute nodes (PTP slaves)\n\nThere can be configurations (i.e. LAG or VLAN) that use several NICs\nwith different PTP hardware clocks on management network.\nboundary_clock_jbod allows such configuration and needs to be enabled.\nBefore we used this option on controller nodes only because of PTP\nenabling on both OAM and management network interfaces. With LAG\nsupport this option needs to be enabled on compute nodes as well.\n\nChange-Id: I523844fce76bd2a90332d31e6104e4eaa36c6ca1\nCloses-bug: 1828017\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Purge filebucket contents after every apply\n\nSince filebucket doesn't have a built in cleanup mechanism, filebucket\nentries will continually grow over time as puppet implements file\nchanges. Eventually, this will have space and inode impacts on the root\nfilesystem.\n\nTo avoid these issues on long running systems, remove the contents of\nthe filebucket directory after every apply.\n\nChange-Id: I02519b9f61b0c1b95ceeca073448f42851ed9551\nStory: 2007101\nTask: 38155\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add use_usm parameter to dcorch.conf\n\nAdd use_usm parameter to /etc/dcorch/dcorch.conf to be used\nin a switch to choose between the usm and patching api. Once the usm\nis fully integrated, this parameter will be removed.\n\nTest Case:\nApply the change and restart the system controller and\nensure use_usm parameter is in /etc/dcorch/dcorch.conf\n\nStory: 2010676\nTask: 48610\n\nChange-Id: I9ff6e3a7c5eaef81e0d6c9ca7529fe4c278275bc\nSigned-off-by: Christopher Souza <Christopher.DeOliveiraSouza@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix puppet-lint errors\n\nRunning tox locally or through zuul would fail with\npuppet-lint warnings.\n\nThis was introduced by puppet-lint 2.4.0 and still exists\nin 2.4.1\n\n2.3.6 works as expected, so now we are clamping\nto that version.\n\nChange-Id: I19a1d4df2b299e4dcb581df43874d8e1866b3962\nCloses-Bug: 1847534\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added classes to restart service manager and vim-webserver\n\nFor service manager, created a class to stop, modify the OAM IP and\nrestart it. In the case of vim-webserver, a new class to only restart the\nservice during runtime\n\nStory: 2008531\nTask: 42061\nChange-Id: I7846c5ab3f1f8d0adb741356164a20932f9ed25f\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart patching services after keystone_authtoken changes\n\nThe patch services(sw-patch-agent and sw-patch-controller-daemon if\nthe node is a controller) are expected to reload if the patching\nconfig changes. However, the subscription on\nFile[$::patching::params::patching_conf] starts after the\nconfiguration of keystone_authtoken, which results the services still\nusing the old configure.\n\nThis commit applies the sw-patch-agent.service and\nsw-patch-controller-daemon.service to the Patching_config collector,\nso the services will be reloaded after any value in patching_config\nchanges.\n\nTests:\n1 Installed and bootstrapped an AIO standalone system and a standard\nduplex subcloud.\n2 Manually modify the keystone password configuration, lock/unlock the\nnodes, the start time of sw-patch-agent and sw-patch-controller-daemon\nare later than the timestamp of the configuration file.\n3 Issue a \"dcmanager subcloud add --migrate\" command to migrate the\nsubcloud to another central cloud, during the migration, the hieradata\nis aligned with the new central cloud, but the configuration on\ncontroller-1 remains. After lock/unlock the controller-1 in the\nsubcloud, the subcloud can get managed and the  patching_sync_status\nand load_sync_status can get in-sync\n\nCloses-Bug: 1929595\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I923c9e88c9b53d2ba4bf8fb43aa9dabf1bbb728e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase timeout for sriovdp deletion\n\nIn an AIO-SX, pods get launched by kubelet soon after puppet is done\nwith controller's manifest but is still working with worker's manifest.\nWhen pods are several the concurrency may lead the SRIOV device plugin\nto not be deleted (then restarted) in the expected time frame.\nThe final solution for this problem is on the way, by refactoring the\ncurrent AIO to orchestrate between pods bring-up and worker setup. In\nthe meantime, the workaround solution in this change is the increase\nof the original timeout for deletion of the SRIOV device plugin.\n\nCloses-Bug: 1916620\nImplements: increased timeout value to manage sriovdp in kubernetes.pp\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I0f6fb20a0ed5086fc80794b35715eea8d3d74cb8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Collectd+InfluxDb-RMON Replacement(ALL METRICS) P1\n\nThis update introduces two new open source services to the Titanium\nCloud.\n\nThe first is 'collectd' which is a plugin based resource monitoring\nengine intended to obsolete the existing rmond process.\nThe second service is 'influxdb' which is a light weight time series\ndatabase intended to store sample data.\n\nCollectd and influxdb are configured through puppet and are started by\nmanifest.\n\nCollectd runs on all hosts while influxdb only runs on the controllers,.\nColectd periodically monitors platform cpu, memory and filesystem\nresources in terms of percentage used value. The value sample for each\nmonitored resource for each audit cycle is forwarded to the active\ncontroller for storage in the 'influxdb' database.\n\nThis update develops several collectd 'support' plugins for managing\nthresholds, alarms, and host degrade. Additionally, this update\nimplements home-grown plugins for platform cpu and memory monitoring\nand combines the static and dynamic filesystem resource monitoring in\nrmond into a single filesystem plugin based on collectd's stock 'df'\nplugin.\n\nCollectd's network plugin is configured to forward samples to the active\ncontroller while influxdb that only runs on the controllers are\nconfigured to listen for collectd samples and then store them in its\ndatabase.\n\nChange-Id: I797f01ca09df3a7e8236153e4f0cb1f90be4c9b5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove usage of forward-journald\n\nThis is a logging tool that was created as a workaround\nto a bug where docker would crash when journald was stopped\n(https://bugzilla.redhat.com/show_bug.cgi?id=1300076).\n\nThe bug has since been fixed on docker and tests have shown\netcd does not present this bug at the moment,\nso forward-journald can be removed.\n\nTest Plan:\n\nCentos\nPass: etcd service started normally\nPass: Logs saved to /var/log/kern.log as before change\nPass: etcd service does not crash when systemd-journald is stopped\n\nDebian\nPass: etcd service started normally\nPass: etcd service does not crash when systemd-journald is stopped\n\nNote:\nSome of the etcd logs that show up on centos at /var/log/kern.log\nare not showing up for debian.\nTested adding forward-journald to debian but the behavior\nis the same with or without it.\n\nStory: 2009101\nTask: 44603\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I7ea13b4dde212322aab31c9e0469f87c8762e7d8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change collectd plugin search path\n\nThis update changes the collectd's plugin\nsearch path from /etc/collectd.d to\n/etc/collectd.d/starlingx to avoid loading\nthe collectd default plugins.\n\nPartial-Fix: 1905581\nDepends-On: https://review.opendev.org/c/starlingx/monitoring/+/772516\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\nChange-Id: I1999f25244465430d9c1385a2fc3c002d0e108c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ANSIBLE Bootstrap changes for System Controller\n\nThis update contains the following misc. config changes to\nsupport ansible bootstrap for system controller.\n\nCreates deps model for dcmanager and dcorch puppet modules.\nCreates a system controller postgres run time manifest which is\napplied upon the creation of initial controller host or replay after\nthe distributed cloud role has been changed.\nThe patch_vault file system is created during the first controller\nunlocked.\nAnd allows the dc role to be modified during bootstrap.\n\nChange-Id: Id7b416274b2a854c469bfdca7448bf1ddea639d7\nStory: 2004766\nTask: 35650\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Eliminate exports for simplex systems\n\nCurrently exports.pp is configured with a non-existent peer address.\nEliminate the variable on AIO-SX since it is not being used.\n\nTesting:\n- Build successful\n- Successfully bring up AIO-SX\n- Successfully migrate from AIO-SX to AIO-DX\n- Verify all hosts are unlocked and running\n- Verify AIO-DX hostname in '/etc/exports'\n\nStory: 2010722\nTask: 48519\n\nChange-Id: Idbfc98b8cfce42d5f393d9d9a556f6a147dc667d\nSigned-off-by: Mohammad Issa <mohammad.issa@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update puppet ceilometer upgrade dependency on service identity\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Removal of infrastructure network code\n\n* Removed table iinfra and its CLI and api commands\n* Removed infrastructure_interface from /etc/platform/platform.conf\n* Removed the infrastructure code in config_controller\n* Updated tox unit tests\n\nTests performed on AIO-SX, AIO-DX, Standard 2+2 and Standard 2+2+2\nTested using Ansible playbook on AIO-SX.\n\nStory: 2004273\nTask: 29472\n\nChange-Id: I5162d374f98fa7d74fc9d23fe9e7f85a331a7240\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable configurable vswitch memory\n\nCurrently, a DPDK enabled vswitch makes use of a fixed 1G hugepage to\nenable an optimized datapath.\n\nIn the case of OVS-DPDK, this can cause an issue when changing the\nMTU of one or more interfaces, as a separate mempool is allocated\nfor each size.  If the minimal mempool size(s) cannot fit into the\n1G page, DPDK memory initialization will fail.\n\nThis commit allows an operator to configure the amount of hugepage\nmemory allocated to each socket on a host, which can enable\njumboframe support for OVS-DPDK.\n\nThe system memory command has been modified to accept vswitch\nhugepage configuration via the function flag. ie:\n\nsystem host-memory-modify -f vswitch -1G 4 <worker_name> <node>\n\nStory: 2004472\nTask: 28162\nChange-Id: Ie58d1b8317b4eb3c498524db6bd53ffff3bf1a39\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable all non-essential openstack services in a kubernetes config\n\nAll openstack services except keystone has been disabled when the initial\nsystem is configured using the --kubernetes option. This includes openstack\nservices running on the controller as well as the ones running on\ncompute nodes.\nSeveral unlock semantic checks for compute nodes including the requirement to\nprovision data interfaces prior to unlock have also been removed in the\nkubernetes configuration\n\nChange-Id: I555a62ac621d26217928d2522eb631fe9bb1f906\nStory: 2002876\nTask : 26168\nSigned-off-by: Shoaib Nasir <shoaib.nasir@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding makefile for puppet-manifests\n\nChange-Id: I67159e6454819c5d1c80f7ee965658991ddedaed\nStory: 2004043\nTask: 27549\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add serial console configuration manifest\n\nDrive serial console configuration via puppet manifest. Hieradata\nwill be provided when [1] were introduced, which is passing the\nserial console configuration from the hands of the sysinv agent to\nthis puppet manifest + platform plugin.\n\n[1] https://review.opendev.org/c/starlingx/config/+/845175\n\nCloses-Bug: 1978009\n\nTest plan:\nPASS: Bootstrap AIO-SX, host unlock and verify alarms.\nPASS: Set host ttys_dcd attribute and check serial console.\nPASS: Unset host ttys_dcd host attribute and check serial console.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ie6d5f595a00d75a8d5bd43b2195cebf4e67b70cc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart openldap service after a certificate update\n\nWhen the openldap certificate expire, CertMon identifies it and Puppet\ngenerates a new certificate to restore TLS encryption between ldap\nserver and client. It was noticed that after the new certificate is\ncreated, a TLS encryption failure is logged in /var/log/daemon.log\nreported by sssd. This failure could be prevented by restarting\nopenldap service, enabling TLS encryption again per the new certificate\nrecently generated by Puppet.\n\nThis commit adds an exec resource to restart openldap service and it is\nintended to restore the TLS encryption after ldap certificate is created\nor updated.\n\nTest Plan:\nPASS: Full build, system install, bootstrap and unlock SX system.\nPASS: In a SX system with available enabled active status, manually\n      change system date 1 year ahead in time to expire the ldap\n      certificate. Run kube-cert-rotation.sh and kube-expired-kubelet-\n      cert-recovery.sh scripts to renew certificates and restore k8s\n      services affected by the time change. Wait until the system-\n      openldap-local-certificate secret is regenerated and observe that\n      /etx/ldap/certs/openldap-cert.crt is regenerated as well. The\n      openldap service is restarted and the TLS encryption is now\n      restored.\n      The kube-cert-rotation.sh and kube-expired-kubelet-cert-\n      recovery.sh scripts can be found on the link below.\n      (https://opendev.org/starlingx/config/src/branch/master/sysinv/sysinv/sysinv/scripts).\n\nStory: 2010815\nTask: 48478\n\nChange-Id: Ia042ab544954fe6e9d2f5aea832d8048a42bd912\nSigned-off-by: Manoel Benedito Neto <manoel.beneditoneto@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable Baremetal Libvirt and Enable baremetal horizon services\n\nAll openstack services except keystone and horizon need to be\ndisabled in a kubernetes configuration. This task re-enables openstack\nhorizon dashboard as a baremetal service, and in a kubernetes config, it\ndisables the platform libvirt services which run on compute nodes or\non controller hosts in an AIO config\n\nStory: 2002876\nTask : 26168\n\nChange-Id: I20e938ca83149474bf2c507062a0e65b69f005bc\nSigned-off-by: Shoaib Nasir <shoaib.nasir@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: Ib4e64858022a39a6143d51985363513ee6019a6d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ldap user not found issue on Debian\n\nplatform::password update nsswitch.conf with ldap so that nscd\nknows to where to query ldap user info. But currently during\ncontroller unlock, platform::password is applied after\nplatform::ldap::server (where nscd is restarted together with slapd),\nso nsswitch.conf is not updated yet by the time nscd is running.\nThis will cause ldap user not found issue when the user tries to\nlogin.\n\nThis commit fixed this by applying platform::password before\nplatform::ldap::server in aio puppet manifest.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap, controller unlock\nPASS: after controller unlock, login by \"admin\" user on\n      console, and su to \"admin\" on ssh session.\n\nTest Plan for CentOS:\nPASS: AIO-SX, AIO-DX system deployment\nPASS: On AIO-SX, after controller unlock, login by \"admin\" user on\n      console, and su to \"admin\" on ssh session.\nPASS: On AIO-DX, after both controllers unlock, login to both\n      controllers by \"admin\" user on console, and su to \"admin\" on\n      ssh session on both controllers.\n\nStory: 2009101\nTask: 44862\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ia1b09f2be94ed46cce63ea14375f2877cc5ee03c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Collectd network configuration\n\nProcess values from network_servers and apply\nthese fields to collectd network plugin configuration.\n\nFor IPv6 brackets around IP must be removed to make it work in Collectd.\n\nFor every configured host, an entry with the following\nformat will be added:\n\nServer \"HostN\" \"PortN\"\n\nStory: 2009018\nTask: 42875\nDepends-On: https://review.opendev.org/c/starlingx/config/+/799470\n\nSigned-off-by: Fernando Theirs <Fernando.Theirs@windriver.com>\nChange-Id: I248d0ddab58fce09d54b7befa9d6ac212d071487\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: I251438ffa46abb3840e0709240a074cfd06a0848\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set proper permissions on docker filesystem\n\nThe puppet manifests are currently setting the file permissions\nfor the docker filesystem (/var/lib/docker) to 750. However,\ndocker changes the permissions to 711. The result of this is that\nwhenever the puppet manifests are applied, the permissions are\nchanged, which has a cascading effect, causing docker to be\nrestarted and all running pods to be stopped. In the AIO-SX,\nthis happens when the compute manifests are applied, resulting\nin all pods being torn down while kubernetes is in the middle\nof trying to start them. This is bad.\n\nThe solution is to update puppet to set the permissions for\nthe docker filesystem to 711. That way, puppet will not\nchange the permissions or restart docker.\n\nChange-Id: I0a7ca6f21947841afe4ca3a8ba6b4f49e58d5e8a\nStory: 2004520\nTask: 28573\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Revert \"Changing tiller pod networking settings to improve swact time\"\"\n\nThis reverts commit a5c236dc522c050b036e638955c03074a2963996.\n\nIt was thought that setting the TCP timeouts for the cluster\nnetwork was enough to address the issues with the helm commands\nhanging after a controller swact. This is not the case. In\nparticular, swacting away from the controller with the\ntiller-deploy pod seems to cause tcp connection from that pod to\nthe kube-apiserver to hang. Putting the tiller-deploy pod back on\nthe host network \"fixes\" the issue.\n\nChange-Id: I8f37530e1f615afcffcf6cb1d629518436c99cb9\nRelated-Bug: 1817941\nPartial-Bug: 1837055\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add pod_network_cidr tag to the calico ERB\n\nAs part of upgrading the calico ERB template to the calico 1.7 compliant\nformat, the pod_network_cidr printing tag was inadvertently left out.\nThis will add it back to the template so we can set the network from the\nkubernetes.pp manifest.\n\nChange-Id: Icee91f810e11fd8527beac5edb4017dd44c4611c\nStory: 2002843\nTask: 26751\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Spectre/meltdown kernel options controllable by customer\n\nImplements customer configuration of kernel options to control\nspectre/meltdown related kernel options.  Default (with \"nopti\nnospectre_v2\" options) can be changed to \"\" using\n\nsystem modify -S spectre_meltdown_all\n\nChange-Id: I6241b8ecda15216a35f45cfeb7c1749294fc0cb8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision/deprovision dbmon dynamically\n\nThis change is to provision and deprovision dbmon service on an\nAIO/DX or distributed cloud systemcontroller after stx-openstack\napplication is active.\n\n1. Add active state to kube-app.\nA kube-app is active after the first time it is applied successfully,\nand deactive when it is being removed.\nAn util function is provided to access the active state of a given\nkube-app.\n\n2. apply stx_openstack runtime manifest to provision/deprovision\nbased on the active state of stx-openstack application\n\nStory: 2005486\nTask: 30922\n\nChange-Id: Icbe63de21f27d7a804715ec72a04d1aba3910b09\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial kubernetes config on compute\n\nSupport the deployment of kubernetes on compute hosts. If the\n\"--kubernetes\" option was given for the config_controller command,\nkubernetes will be configured on all compute hosts.\n\nUse a config file when calling kubeadm init, instead of passing\ncommand line parameters.\n\nChange-Id: I43cadd8311280a3e7fd64d637991b4dc046a21ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore ceph during system restore\n\nOn AIO and standard setup, ceph osd(s) are running on the\ncontroller nodes. During restore after ceph is operational\nthe backup crushmap needs to be set before creating osd(s).\n\nChange-Id: Id2a7c666fa3670c460f412cfc0184ad0a9f6ccff\nStory: 2004761\nTask: 30522\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add kubelet support for volume plugins\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Ignore grub audit recovery if removing nohz parameter\n\nThis change aims to disable the grub audit recovery mechanism in the\nspecific scenario which the user wants to disable the nohz_full\nparameter by assigning the disable-nohz-full label. This also ensures\nthat all platform services are not disabled if the cmd_ok variable is\nset to false by verifying a new flag called ignore_recovery.\n\nPartial-Bug: 1983029\n\nTest plan:\nPASS: Assign disable-nohz-full label host lock and unlock.\nPASS: Remove disable-nohz-full label host lock and unlock.\nPASS: Verify nohz was enabled/disabled in both tests above.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I932e5e3c13aba8fcd6d929fb2e0be9bfd93ae5ae\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Modify _audit_device_image_update interval\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Adjust puppet ntp configuration\n\n- Fixed ntp service name for debian\n\n- Removed ntpdate from puppet.\nOn debian, it is just a script, not a service.\nAnd its use is deprecated on both centos and debian.\nReplacing with /usr/sbin/ntpd\n\nhttps://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-configuring_ntp_using_ntpd#s1-Configure_ntpdate_Servers\nhttps://packages.debian.org/bullseye/ntpdate\n\nTest Plan:\nPASS bootstrapped and unlocked\nPASS ntp service is running and enabled\nPASS no puppet errors related to ntp\nPASS ntp-modify updates ntp.conf\nPASS clock is synced to ntp server given on ntp-modify\nPASS run same tests on centos\n\nStory: 2009965\nTask: 45222\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I9948b1ce25e7fb7d70857f41a9c69c72d61d1ea1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ldap puppet duplicate declaration error\n\nOn CentOS based STX system, ansible bootstrap will fail to complete\nduring puppet configuration. The failure is caused by a duplicate\ndeclaration error in ldap.pp. This change fixed this error by\nupdating ldap.pp to avoid the duplicate declaration.\n\nTEST PLAN (CentOS only):\nPASS: System deployment (bootstrap and unlock)\nPASS: System lock/unlock\nPASS: Verify openldap user accessibility by\n      getent passwd <openldap user>\nPASS: Verify openldap user existance by\n      ldapsearch -x -b 'ou=people,dc=cgcs,dc=local' '(objectclass=*)'\nPASS: Verify ldapscripts tools can access openldap users by\n      ldapfinger <openldap user>\nPASS: Verify openldap users can login system on console and by ssh\n\nCloses-Bug: 1993832\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Iaf24e5e946eb3ba9f194b1f1c743bec98898b1c4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO System Controller CPU manager changes for kubelet\n\nThis changes Puppet manifest for kubernetes. kubelet options for AIO\nsystem controller are made to match a standard controller. The CPU\nmanager policy is configured as 'none' with no reserved cpus.\n\nChange-Id: I10d41cd9974d0a9255f634f3b3fc09212774bdec\nPartial-Bug: 1855920\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add auto-version for remaining stx/stx-puppet packages\n\nUpdate remaining StarlingX packages with hardcoded TIS_PATCH_VER to\nuse PKG_GITREVCOUNT where possible, with offsets as needed to ensure\nthe version is incremented above the hardcoded version.\n\nChange-Id: I110ef3a10c3164f8edb706b9257f33178b4a2517\nStory: 2008455\nTask: 41456\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Correct ordering when upgrading etcd certs\n\nDuring an upgrade activate we generate new etcd certs. As part of this\nprocess we need to restart etcd and direct the kube-apiserver to use the\nnew certs.\n\nWith this update we'll restart the etcd server before updating the\nkube-apiserver. Finally we'll wait for the kube-apiserver to be ready.\nWaiting for the apiserver is necessary so subsequent sysinv operations\ncan interact with kubeadm.\nhttps://bugs.launchpad.net/starlingx/+bug/1954488 and \nhttps://bugs.launchpad.net/starlingx/+bug/1953183 are seen if we do not\nwait for the apiserver.\n\nNote curl -f is used to ensure the readyz call returns 200/OK.\n\nCloses-Bug: 1954488\nCloses-Bug: 1953183\nChange-Id: I3b31153d8779262c0bf5e57526b41421689bad36\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Replace image registry with registry.k8s.io\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove dependency on puppet-nslcd from puppet-manifests\n\npuppet-nslcd will be removed and no longer available on Debian.\nThis change removed the dependency from puppet-manifests\npackage.\n\nTest Plan:\nPASS: puppet-manifests package build.\nPASS: system deployment.\nPASS: ldap functions (add new users, ldap user login on console\n      and by ssh, etc) work normally.\n\nStory: 2009834\nTask: 46176\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I370d09509ed317165b314bc170d593e528fb90ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix board management module access bug\n\nAdd egress icmp support in calico global policy because maintenance\nhas a BMC reachability audit that uses ping towards the provisioned\nBMC IP.\n\nChange-Id: I911a4da23a5b4ac7c0302bb9465cfe7cdab4c34c\nCloses-Bug: #1826421\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix barbican-api.log rotation issue\n\nThe barbican-api process currently writes directly\nto its logfile. As such, the logrotate config file\nneeds a copytruncate directive to ensure the process\ndoesn't end up writing to the rotated file instead.\n\nChange-Id: I60c8a08ce612fd7f82e05f69b168919b12ab0017\nPartial-Bug: 1836632\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename max_cpu_frequency to max_cpu_mhz_configured\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/843661\n\nStory: 2009886\nTask: 45495\n\nTest plan:\n  Bootstrap\n  Verify max_cpu_mhz_allowed is set\n  Set max_cpu_mhz_configured from CLI\n  Set max_cpu_mhz_configured from GUI\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ia533e7c1b7de743f54b8397175427f5d8a43946e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update apiserver certificate's SANs when OAM IP change\n\nWhen the bootstrap manifest is applied the system adds any OAM IP\naddresses to the apiserver's certificate SAN list. This is used for\nremote kubectl access. However when the OAM IP address is changed,\nthese IP values are not updated. Without the correct values in\napiserver cert remote access will fail.\n\nThis update introduces a kubernetes certsans runtime puppet manifest\nwhich will be applied during OAM IP change process to update apiserver's\ncert SANs list with the new IPs.\n\nChange-Id: Iedf35ddaedef5cae2e81941446fc6a8de39639f6\nCloses-Bug: 1878451\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore taint to master nodes\n\nThe node-role.kubernetes.io/master taint will be restored to all master\nnodes, excluding AIO systems, to prevent user pods from being scheduled\nand run. These workloads will be scheduled and run on a worker node.\n\nTest Plan:\n\nPASS: Building a designer iso and doing a fresh install\n      on Standard and AIO. Verified that taint is being added\n      only on Standard.\nPASS: Upgrading a Standard System (from 21.12 to 22.02 with\n      these changes). Verified that the taint is being added on both\n      controllers.\nPASS: Bootstrap playbook replay. Verified that taints are applied after\n      bootstrap replay.\n\nStory: 2009232\nTask: 43349\n\nSigned-off-by: Enzo Candotti <enzo.candotti@windriver.com>\nChange-Id: I859c0344c3523cbe70fb8881265f9150033355e3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Provision dbmon for AIO-DX and DC systemcontroller\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce new log file in /var/log/rss-memory.log\n\nThis change adds a new log /var/log/rss-memory.log for\nmemory growth debuging\n\nThe following entry into crontab will output daily at 01:00:\n0 1 * * * /usr/bin/date >> /var/log/rss-memory.log;\n /usr/bin/ps -e -o ppid,pid,nlwp,rss:10,vsz:10,\n comm,cmd --sort=-rss >> /var/log/rss-memory.log\n\nTest Plan:\n\t- PASS: Build an image, install and bootstrap successfully\n\t- PASS: Apply monitor pods so addon logs would be installed.\n\t- PASS: Check that log entries are correctly displayed.\n        - PASS: Tested on controller, AIO, worker and storage hosts.\n\n\nCloses-Bug: 2019007\nChange-Id: I6f8e6208d203bcc77320ced3766af04dab977829\nSigned-off-by: Cesar Bombonate <Cesar.PompeudeBarrosBombonate@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "remove flag fault_management_pod_disabled\n\n\"fault_management_pod_disabled\" is a provisional flag using to\nstop vim raising alarms/logs to containerized fm. It should be\nremoved when containerized fault management is ready.\n\nDepends-On: https://review.opendev.org/#/c/642925/\nChange-Id: I2e2dff874531d0f34c79c939c5535ff4432ae73e\nStory: 2004008\nTask: 36504\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: remove deprecated IPv6 interface from auto\n\nFollow up for https://review.opendev.org/c/starlingx/stx-puppet/+/856564\n\nThe interface labeled interface was not being removed from the auto\nfile. This created a situation where networking could not be restarted\nbecause the labeled interface was still trying to be brought up.\n\nExample:\nsysadmin@controller-0:~$ ls /var/run/network-scripts.puppet/\nauto  ifcfg-ens1f0  ifcfg-lo  ifcfg-vlan111  ifcfg-vlan111:5\nifcfg-vlan222  interfaces  routes\n\nsysadmin@controller-0:~$ cat /var/run/network-scripts.puppet/auto\nauto ens1f0 lo vlan111 vlan111:1 vlan111:5 vlan222\n\nAs seen above.  ifcfg-vlan111:1 does not exist even though it is still\ndefined in auto.\n\nTEST PLAN\nPASS: Install and unlock Debian (AIO-SX, AIO-DX)\nPASS: Perform backup + optimized restore on afflicted system (AIO-SX)\n\nCloses-Bug: 1998504\nSigned-off-by: Joshua Kraitberg <joshua.kraitberg@windriver.com>\nChange-Id: I060650a8de305260b6d5e81f8e9f8e75266d409c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Runtime secure OpenLDAP configuration for Debian\n\nThis commit concerns only Debian deployments.\nThe runtime configuration updates are required to support a secure\nOpenLDAP server for a Debian installation.\nThis commit completes the secure OpenLDAP configuration done at\nbootstrap with OpenLDAP schema configuration done at host-unlock.\nThe following OpenLDAP configuration updates will be applied using\npuppet implementation:\n- Copy the TLS/SSL certificate and key from Kubernetes repository to\n\"/etc/ldap/certs\" directory in files \"openldap-cert.crt\" and\n\"openldap-key.key\".\n- Set the owner and group as \"openldap\" for \".crt\" and \".key\" files.\n- Configure the TLS/SSL certificate and key files in the ldap\nschema file \u201c/etc/ldap/schema/cn=config.ldif\u201d.\n\nTests performed:\nPASS: Integration test with openldap certificate: check the openldap\ncertificate and key files are correctly created in \"/etc/ldap/certs\".\nPASS: Check the ownership of the openldap certificate and key files\nis \"openldap:openldap\".\nPASS: System command \"certificate-list\" shows the openldap certificate\nhas been installed.\nPASS: Openldap certificate and key files have been added to schema\nfile \u201c/etc/ldap/schema/cn=config.ldif\u201d.\nPASS: Deletion of openldap secret triggers the creation of a new\nsecret.\nPASS: List all OpenLDAP users\nPASS: Add new OpenLDAP user\n\nStory: 2009834\nTask: 45901\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/851906\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I1f5819e7164898e67845bfcbbec331a280450fe1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Apply NAT on k8s outgoing pkgs for all protocols\n\nBy default the platform firewall for kubernetes traffic\nis configured to apply NAT on outgoing traffic generated\ninside the K8s cluster only for TCP ports.\n\nThe outgoing traffic of other protocolos (e.g. UDP, ICMP)\nare leaving the system without NAT. When the traffic is\ngenerated on workers nodes the packages leaves the system\nwith the internal management IP address.\n\nTest Plan:\n----------\nPASS: CENTOS Standard fresh install.\nPASS: Verify that the iptables \"Kubernetes post-routing\nrule\" is updated to accept all protocols.\nPASS: Verify src IP of outgoing traffic of UDP protocol\nfrom worker nodes (e.g. sending SNMP traps).\n\nCloses-Bug: 1981405\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Id6d9465f318a8360ff5459d16255e8ce49dbdee9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase kubernetes apiserver event ttl\n\nIncrease kubernetes apiserver event-ttl to 24h\n\nChange-Id: If846c99c9d9a5318a7b90b49649fc62d5e214274\nCloses-Bug: 1830899\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Permission change of /etc/apparmor.d directory\n\nSetting the permission of /etc/apparor.d so that users in the\nsys_protected group can update apparmor profiles using 'aa-logprof'\ncommand. This permission is set at install/upgrade time.\n\nTest Plan:\nPASSED: Boot with the ISO and check if 'sys_protected:rwx'\n        permission is added for /etc/apparmor.d directory\nPASSED: AIO-SX update an apparmor profile using aa-logprof.\n\nCloses-Bug: 2026666\n\nChange-Id: I047df1367d9c579bec67fbd8cc310527bbeba47a\nSigned-off-by: Jagatguru Prasad Mishra <jagatguruprasad.mishra@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add openldap CA cert into system trusted CAs\n\nThis change is part of refactoring openldap CA certificate\ninstallation. With this change, the openldap ca certificate, taken\nfrom hieradata, will be added to system trusted CA bundle file by\npuppet over host unlock. Once this CA certificate is installed,\nopenldap clients will be able to access secure openldap service.\n\nTest Plan:\nPASS: Standalone system deployement successfully, after hosts are\n      unlocked, verify openldap CA certificate is present as\n      /etc/pki/ca-trust/source/anchors/openldap-ca.crt\n      and is included in\n      /etc/ssl/certs/ca-certificates.crt\nPASS: DC system controller deployement successfully, after hosts are\n      unlocked, verify openldap CA certificate is present as\n      /etc/pki/ca-trust/source/anchors/openldap-ca.crt\n      and is included in\n      /etc/ssl/certs/ca-certificates.crt\nPASS: DC subcloud deployment successfully (openldap CA cert will be\n      done in followup changes)\nPASS: Verify client access to secure openldap by\n      ldapsearch -xH ldaps://controller -b \"ou=People,dc=cgcs,dc=local\"\nPASS: Verify client access to secure openldap by\n      ldapfinger admin\nPASS: Verify openldap user login from console and by ssh.\n\nStory: 2009834\nTask: 46514\nDepends-On: https://review.opendev.org/c/starlingx/config/+/860509\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ie87a7fc8bcaa96aa885f3fe54a1a4ba73250d701\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Keep platform-nfs-ip for upgrade process\n\nThe platform-nfs-ip service is not necessary for fresh installs\nbecause it is just an alias for the controller IP.\nBut for old releases like StarlingX rel. 6 or 7 the\nplatform-nfs-ip uses a specific IP, If for some reason an error\noccurs during the upgrade process, the upgrade will be aborted\nand the nodes will downgrade to the older release again.\nAt this moment the nodes will try to communicate with the\nprevious platform-nfs-ip IP configured in /etc/hosts.\nBut if the active controller is using the new Release\nthis IP doesn't exist anymore and the downgrade will fail.\nFor this reason the platform-nfs-ip service will be available\njust for upgrade operations and will be deprovisioned for fresh\ninstalls or at the end of the upgrade process\n( upgrade-activate phase ).\n\nTest plan\nPASS Fresh install on AIO-SX\n     Fresh install on AIO-DX\nPASS Upgrade AIO-DX system from CENTOS Rel 7 to DEBIAN Rel 8\nPASS Reboot controller-0 during upgrade of AIO-DX\n     controller-1 was the active one with the new release ( Rel 8 )\n     controller-0 using old release.\n     reboot controller-0 and check if it could connect to\n     controller-1 using old platform-nfs-ip.\nPASS Upgrade-abort during AIO-DX upgrade\n     controller-1 was the active controller and already upgraded\n     controller-0 was upgraded but locked.\n     Abort the upgrade and downgrade to old release ( Rel 7 )\n\nPartial-Bug: #2012387\nDepends-On: https://review.opendev.org/c/starlingx/ha/+/878116\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: Ifd1a411835289f2450ed6bce686de6477cc1d6a3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix k8s custom configuration configmap init flag\n\nAfter system bootstrap, when service-parameter-apply is executed\nfor the first time, it verifies that the k8s configmaps linked to\nservice-parameters extra-volumes exist, then creates a flag\n(configmap_initialization_flag) to skip this step on subsequent\nruns. If the flag is not generated, the k8s custom configuration\nscript checks the k8s configmaps each time it is run.\n\nTest Plan:\n  PASS: Fresh Install STD/DX\n  PASS: Apply K8s service-parameter.\n  PASS: Verify configmap initialization flag has been created.\n\nCloses-bug: 2022983\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Ie28247fd62945f90a9018a7ebb7942245ea5aeb4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow compute nodes access to private docker image server\n\nUpdate the NAT firewall rules to allow the compute nodes to pull docker\nimages from our private server operating on port 9001.\n\nThis can be reverted once we have a public server on ports 80/443.\n\nChange-Id: I427e13819eaf54aa6dd5248056494d4f9a825f51\nStory: 2002843\nTask: 27031\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian package for puppet-fm\n\nAdd debian packaging infrastructure for puppet-fm.\n\nStory: 2009101\nTask: 43311\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I001fb33d1fb6a5535a13ea835e987c9bdd99aff9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename crashDumpMgr to crash-dump-manager\n\nThis review https://review.opendev.org/c/starlingx/metal/+/897593\nupdates the crashDumpMgr name to crash-dump-manager.\n\nThis commit updates the crashDumpMgr name accordingly.\n\nTest Plan:\nPASS: Build ISO and perform a fresh install. Add and apply new\ncrashdump service parameters and force a kernel\npanic. Verify that after the reboot, the max_files, max_used,\nmin_available and max_size values are updated accordingly to the service\nparameters values.\n\nStory: 2010893\nTask: 48911\n\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/897593\n\nSigned-off-by: Enzo Candotti <enzo.candotti@windriver.com>\nChange-Id: I337bfe19d0df38df2700d1c9d0695df4a3c3c33c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set up endpoint groups for distributed keystone\n\nThis commit sets up Endpoint groups in SystemController and RegionOne\nregions via Keystone Puppet manifest\n\nStory: 2002842\nTask: 22785\n\nChange-Id: I9a61dd4dd2ae18b00a7ea3ad2f0e6dc52cf0c348\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix two coredns pod in simplex system\n\nThere are 2 coredns pod in default. For simplex system, use kubectl\nscale cmd to set the replicas to be 1.\nA coredns class is created for coredns configuration. And is configured\nto run as initial configure only, the same as kubernetes::master::init.\n\nTest:\nPass simplex and duplex deploy test, and coredns pod is 1 for simplex\nand 2 for duplex. affinity and nodeselector setting for duplex is kept.\n\nCloses-Bug: 1822880\n\nChange-Id: Ic2bbdc614acc0a04f91bec71691c2ff097218915\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "DC cert manifest should only apply to controller nodes\n\nDC cert manifest should only apply to controller nodes on system\ncontroller.\nThis fix is for DC with worker nodes in central cloud.\n\nChange-Id: I4233509a6f0afb3013c01e81dea6f655d9e15371\nCloses-Bug: 1878260\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch 'starlingx/master' into HEAD\n\nChange-Id: I395646683f437ef151b67eeb919e2c28c5fab55d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet: Fix unacceptable location warnings\n\nThe names of classes/defines should match the name that's\nimplied by their file path. Puppet throws an \"unacceptable\nlocation\" warning whenever this condition is not satisfied.\n\nTest Plan:\nPASS: Build & install\nPASS: AIO-SX Successful Bootstrap\nPASS: AIO-SX Successful Unlock\nPASS: Verified that 'unnaceptable location' warnings are\n      no longer present on puppet.log\n\nStory: 2010757\nTask: 48026\n\nChange-Id: I1cd3d09e90bfeb3d206b540717943ea1e6413444\nSigned-off-by: Matheus Guilhermino <matheus.machadoguilhermino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"puppet-manifests: Added apparmor rule for /etc/ntp_initial.conf\"\n\nThis reverts commit a5615ce766aabaf398c4be6bd82e544ae9140e57.\n\nReason for revert: It breaks nodes configuration. The profile reload command requires apparmor being enabled, but it is exec-ed without checking.\n\nChange-Id: Iad32884fcfc1241593a9ee6da290378544630c41\n",
        "issue_summary": ""
    },
    {
        "commit_message": "docker-registry scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on docker-registry service documentation\n\nTEST PLAN:\nPASS: AIO-SX: build a new Debian ISO. Install, boostrap and\nperform a host-unlock verifying expected number of threads\ncreated.\n\nStory: 2010087\nTask: 45707\nChange-Id: I8dd10b5d3d9c8d7e7886996a620d4b776c45c980\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix ldap puppet duplicate declaration error\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove some firewall rules\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Make Ceph the default Storage Backend\n\nSince Ceph is mandatory for all operations it is now configured by\ndefault. User no longer needs to use CLI commands to enable it.\n\nThis commit make Ceph the default backend in both config_controller\nand Ansible playbook. In Ansible, we decouple Ceph DB configuration\nfrom manifests application. The playbook sets needed data structures\nin sysinv DB but Ceph itself is enabled on first unlock when\ncontroller manifests are applied on first controller-0 unlock.\n\nThis commit also adds:\no ceph crushmap loading through puppet as ceph is no longer\n  running before unlock to load it and the crushmap is needed when\n  OSDs are configured on unlock.\no add possibility to remove OSD stors while node is locked and\n  corresponding stor state is configuring-on-unlock.\n\nChange-Id: I937bfb4f9397e726966067f54331d649f53f4fe2\nStory: 2004695\nTask: 30053\nDepends-On: https://review.openstack.org/#/c/643914/\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate openrc file in /etc/platform\n\nCreate the platform openrc file in /etc/platform, while\nleaving existing /etc/nova/openrc file alone for now.\nNew platform/client.pp file is created and most of the\ncontents of openstack/client.pp moved there.\nopenstack/client.pp can be removed once kubernetes is the\ndefault.\n\nChange-Id: Ib6de59da6dfc9f34a24054405b6cda30d0b74ac1\nStory: 2002876\nTask: 27499\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: SR-IOV device plugin config file mount\n\nThis commit fixes a bug that may occur on the second node of an\nAIO-DX system if the sriovdp=enabled label has been applied after\ninitial install but before first unlock.\n\nIn this case, the device plugin may start launching before the\nworker manifest has populated the config file.  Since the pod\nattempts to mount the config file and it is not present, it gets\ncreated as a directory.\n\nThe fix simply sets the hostPath type for the config file to 'File'\n\nCloses-Bug: #1831124\nChange-Id: Ie55a0cb80dcee81a81059118ebef6c8c01cb6996\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for cgts-vg/instances-lv fs\n\nTo support long running patch-able systems that don't require a\nreinstall, the entire root disk will be allocated to cgts-vg as part of\ninstallation.\n\nIn this context, to support existing single disk worker sub-function\ninstalls, add support for a 'cgts-vg/instances-lv' filesystem. This\nmaintains the existing support for 'a nova-local/instances-lv'\nfilesystem which can be used for larger multi-disk installs.\n\nUpdates include:\n- Proper labeling of wipe activities when creating, resizing, or\n  removing LVs\n- Add classes to support optional creation of instances-lv filesystem\n  include runtime support for resizing.\n- Remove dead code related to cinder-volumes volume group\n- Fix long-standing lvremove bug that could nuke all filesystems on\n  optional filesystem removal\n\nTest Plan:\nPASS - Install AIO-SX, bootstrap, unlock\nPASS - Install 2+2+2, bootstrap, unlock\nPASS - AIO/worker: Add instances-lv before unlock\nPASS - AIO/worker: Lock, remove instances-lv, unlock\nPASS - AIO/worker: Lock, add nova-local, unlock\nPASS - AIO/worker: Lock, remove nova-local, add instances-lv, unlock\nPASS - AIO/worker: Lock, remove instances-lv, add nova-local, unlock\nPASS - AIO/worker: Lock, remove nova-local, unlock, lock, add openstack\n       label, ensure instances is required\n\nChange-Id: I1fc585872e4192c45d4ee706404b14e663a59aac\nStory: 2010444\nTask: 46983\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/866532\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Docker Logical Volume in CGTS-VG.\n\nDo not add Docker Logical Volume in CGTS-VG at all if --kubernetes\noption not specified for config_controller.  Will prevent hw lab\ninstalls from failing.  VBox installs with --kubernetes will be\nfine if disk size is appropriate, hw lab installs with --kubernetes\nstill need work.\n\nChange-Id: I6f3f3620dd06bfa5fbc751f5ca84191c4195ced4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Fix stale data cleanup on the logical volumes\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix nslcd service failure after unlock for Debian\n\nnslcd service failed after controller unlock on Debian. The reason\nis that nslcd.conf specified the service to start with gid \"ldap\",\nwhich doesn't exist. This change updated ldap puppet to specify\n\"openldap\" as nslcd's gid.\n\nNote that this change will bring nslcd service up, but it doesn't\nfully works still (not connect to ldap server, ldap users can't\nlogin). A dependent library libnss-ldapd is missing from the iso.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap\nPASS: controller unlock, nslcd service is running with \"openldap\"\n      as its gid.\n\nStory: 2009101\nTask: 44746\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ic9865e0d0630790b1b4266722a874d185ab22960\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart collectd at the end of configuring cpu\n\nRestart collectd after configuring cpu to ensure collectd loads\nupdated configuration\n\nCloses-Bug: 1837424\nChange-Id: I10e0f431dfd01637f38319d506559aa3927f11ff\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix interface (re)configuration for single-nic system\n\nCurrently, the apply-network-config manifest step launches a script\nthat detects differences between puppet's view of what the\nifcfg-* network scripts should be and what the value\nof the ifcfg files actually are in the /etc/sysconfig/network-scripts/\ndirectory.\n\nIf there are differences, the puppet representation of the interface\nconfiguration is copied to the system network-scripts directory and\nthe interface is brought down and up to apply the config.\nIf there are no changes between the puppet view and the system view,\nthe interface is left alone.\n\nAn issue can occur in a single-nic system comprising a physical\nlower ethernet interface configured for SR-IOV with upper vlan\ninterfaces (oam, mgmt, etc).  If the lower interface is\nre-configured, it is subsequently brought down/up to apply\nthe changes.  This causes the upper vlan interfaces to also\nbe brought down by the kernel.  In the case of an IPv6 system,\nthe interfaces will lose their addresses as well as any configured\ndefault route.  In the case of an IPv4 system, the default route\nwill be wiped out, which could cause issues in a distributed cloud\nenvironment.\n\nThis commit addresses the issue by detecting whether any lower\ninterface associated with a vlan interface has been marked for\nre-configuration.  If this is the case, the vlan interface is\nalso added to the up/down list to cause it to re-apply the\nexisting static configuration (if it is not already in the list).\n\nCloses-Bug: 1926366\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: I40177900ef58a9619fecb34ceffc412f31d1a965\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change order and attributes for mount-related resources\n\nAfter an upgrade, the host fails its first configuration attempt\nby Puppet with a mount error, but manages to configure and mount\ncorrectly on the second attempt. The failure happens when Puppet\nchanges several attributes from /scratch on /etc/fstab, triggers\na refresh and this in turn triggers a remount, but the fs is not\nmounted at that moment.\n\nThis commit brings the exec resource used to manually mount the\nfilesystem to execute before the mount resource, if they aren't\nmounted, as the mount resource refresh tries to remount devices\nthat already were in the /etc/fstab. Also this commit changes\nthe ensure attribute for scratch filesystem to 'present' because\nPuppet gets lost with this device status and then tries to run\nmount / umount operations incorrectly.\n\nTest Plan:\nPASS: verify that Puppet applies the configuration on the host\n      after a host upgrade\nPASS: verify that /scratch mountpoint is mounted and configured\n      correctly on /etc/fstab after a host upgrade\nPASS: verify that Puppet applies configuration successfully on\n      a host after lock/unlock\nPASS: verify that Puppet applies configuration successfully on\n      a host after a forced reboot\n\nRegression:\nPASS: verify that fresh install (bootstrap and host unlock)\n      runs sucessfully\n\nCloses-bug: 1962784\nChange-Id: If2a491d3a859156ceb637cb25f213d8d6450edf3\nSigned-off-by: Heitor Matsui <HeitorVieira.Matsui@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Don't ping local addresses on controller\n\nWhen verifying addresses we specify the interface that we expect\nthe traffic to use.  For addresses that belong to the active\ncontroller, this means that the connectivity test will fail because\nthe valid route is via the \"lo\" loopback device rather than the\nexternal network interface.\n\nSince the relevent addresses are statically configured anyway,\nthe simplest solution is just to skip checking for connectivity\non controller nodes.\n\nNote: the change is logically just adding two lines, but the indentation\nchanges make it look more complicated.\n\nChange-Id: I326ae03c5dc368692e43aeb7d5ba2ae95c957145\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for setting optional k8s cpu configuration flag\n\nIf the host-label 'kube-ignore-isol-cpus=enabled' is added to a host,\nthen file '/etc/kubernetes/ignore_isolcpus' will be created for kubelet\nto consume so that it can determine how to handle application-isolated\nCPUs.\n\nStory: 2008760\nTask: 42166\nSigned-off-by: Robert Church <robert.church@windriver.com>\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: Ifbcc245d0e2716b7abb7726d38d3662e7b53d770\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller image\n\nThis commit upversions tiller, in order to fix an issue that is being\nseen with per-host overrides in neutron chart.\n\nRequires at least the following tiller image for the neutron per-host\noverrides to work correctly:\n\ngcr.io/kubernetes-helm/tiller@sha256:\n022ce9d4a99603be1d30a4ca96a7fa57a45e6f2ef11172f4333c18aaae407f5b\n\nStory: 2003909\nTask: 27082\nChange-Id: If70fe5b0d7dfc09f766f8ddfdb34dd48b44721bf\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change subcloud local registry token auth realm to registry.local\n\nIn DC system, subcloud local registry token realm is currently set to\noam floating IP address. When a new docker registry certificate is\ninstalled in central cloud and get synced to subcloud, access to local\nregistry in subcloud is broken during certificate verfication, with error\nlike the following:\n\nError response from daemon: Get https://registry.local:9001/v2/: Get\nhttps://10.10.10.13:9002/token/?account=admin&client_id=docker&\noffline_token=true&service=192.168.101.2%3A9001:\nx509: certificate is valid for 192.168.204.2, 10.10.10.3, not\n10.10.10.13\n\nThis change updated subcloud local registry's token auth realm to be\ndomain name registry.local so the certificate verfication is against\nthe DNS names in the certifcate. This makes the verfication succeed.\n\nChange-Id: I710e2e27461276db90cd9f9275655b5ecf00e342\nCloses-Bug: 1851252\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "lowlat: enable ktimer_lockless_check if it exists\n\nEnable check for raising timer interrupt only if one is pending.\nThis allows nohz full mode to operate properly on isolated cores.\nWithout it, ktimersoftd interferes with only one job being\non the run queue on that core, causing it to drop out of nohz.\n\nIf ktimer_lockless_check doesn't exist in the kernel, then no\nerror is reported ie. it just fails silently.\n\nCloses-Bug: 1870456\nChange-Id: I93d0fab3e9f4f56f9afb9bbfaa04882cf9068db5\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce number of workers in systemcontroller\n\nThis commit reduces the number of works in a system controller for\nkeystone, horizon, barbican, sysinv and fm on a DC system. The\nresult has been verified on DC-2.\n\nTest plan:\n1 Bring up a DC system with this change.\n2 Patch this change to a large DC system.\n\nStory: 2008960\nTask: 44057\nSigned-off-by: BoYuan Chang <boyuan.chang@windriver.com>\nChange-Id: I8e2d200eef1affe1a3261e116ec39e43d2cc426f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixed puppet error when installing a worker node\n\nThe puppet error is due to the resource relation specified\nusing ordering arrow (->). Deleted the relation as the\nAppArmor permission change of /etc/apparmor.d is not related\nto the previous block.\n\nTest Plan:\nPASSED: Standard: Boot with the ISO and check if 'sys_protected:rwx'\n        permission is added for /etc/apparmor.d directory.\nPASSED: Standard: Check for puppet error \"Evaluation Error: Illegal\n        relationship operand\" on controller and worker nodes.\n        There should not be any such error.\n\nCloses-Bug: 2026666\n\nChange-Id: I6dd3e461be0e24844fff0ca240b6db7721fa1801\nSigned-off-by: Jagatguru Prasad Mishra <jagatguruprasad.mishra@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "set sysvar vm_min_free_kbytes as function of total mem\n\nProblem description:\nDuring times of high memory pressure, the kernel will drop\ninto synchronous memory allocation mode if the amount of free\nmemory in the normal zone drops below the min watermark.\nSynchronous mode reclaims some memory before allocating any,\nand is thus vastly slower than asynchronous mode. If under high\nmemory pressure we drop to synchronous mode, and there's a lot\nof memory allocation requests being made ie. contention for\nlocks in the memory allocator, and one of the tasks contending\nis being monitored by pmon, then it can be blocked long enough\nto trigger a watchdog timeout which brings down the entire node.\n\nSolution:\nOne way to reduce the chances of dropping below the min\nwatermark in the normal zone is to increase the amount of\nkernel reserved memory via sysctl variable vm_min_free_kbytes.\nThe three watermarks, min, low, and high are all calculated and\nset by the kernel based on the amount of kernel reserved memory.\nWhile all three of the watermarks will be increased, the spread\nbetween them will also be increased.  When the number of pages\nin the zone drops below low, the kswapd will run and reclaim\npages (typically from the buffer cache) until the high\nwatermark is met.  This operates a lot like a water pressure\ntank.  So by increasing the amount of kernel reserved memory,\nkswapd should engage sooner and thus increase the odds that\nwe don't hit the min watermark.\n\nCurrently the amount of kernel reserved memory is set statically\nto 128 MB except on a storage node where we set it to 256 MB.\nThis is really too low on systems with a lot of memory.  It\nshould be set as a function of total system memory.  There are\nmany possibilities for such a function, such as just setting it\nto a percentage of total memory such as 0.5% or 1% as examples.\n\nHere we take a quantum approach to the function, reserving\n128 MB for every 25 GB of system memory, with also a minimum\namount specified that we won't go below.  This is approximately\n0.5% based on the step function.  Why this approach?  Because it\nhas no impact on typical small vbox nodes used in development.\nThose nodes are typically around 25 GB in size, and it isn't\na great idea to be reclaiming pages from the buffer cache just\nto have them sit unused, as these small emulated nodes need all\ni/o performance help they can get.\n\nThis approach to the function is not absolute and is subject to\nchange as we learn more about how to best tune the settings.\n\nChange-Id: I6244497b262c217dc9467010501a3041e102a288\nCloses-Bug: 1940855\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move DNS requirement into kubernetes::master\"",
        "issue_summary": ""
    },
    {
        "commit_message": "[multios] Add spec files for openSUSE and Open Build Service\n\nAdd the RPM spec and changes file for OBS to be able to build the package\nfor openSUSE via the Open Build Service (OBS) and the associated _service\nfile.\n\nStory: 2006508\nTask: 36783\nTask: 36784\nTask: 36785\nTask: 36786\nTask: 36787\nTask: 36788\nTask: 36789\nTask: 36790\nTask: 36791\nTask: 36792\nTask: 36793\nChange-Id: Ia9e2bdcb2873d769720f849e781ef5e6bb971e64\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update dnsmasq conf file for host-record support\n\nAdd option 'conf-file' in dnsmasq conf file to use additional\nconfig file in persistent store. This additional conf file is used\nto support host-record option of dnsmasq.\nUsers can add A, AAAA and PTR records to the DNS with TTL support.\n\nTest Plan:\nPASS: Successful build\nPASS: Successful bootstrap and unlock\nPASS: Verify ping hostnames by adding host-record in new conf file\n\nStory: 2010835\nTask: 48724\n\nChange-Id: I583d1cf783a32a3dc6f2d1c9786287a7f64809a3\nSigned-off-by: Joseph Vazhappilly <joseph.vazhappillypaily@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sssd puppet classes to generate sssd configuration\n\nThis commit added sssd puppet classes to generate a basic\nsample sssd.conf that will bind sssd to local openldap. The\nclasses can be used to add/delete/modify extra domains to sssd\nconfiguration in the future.\n\nTest Plan for Debian:\nPASS: packages build, image build.\nPASS: SX system bootstrap, unlock successfully.\nPASS: basic sample sssd.conf generated based on hieradata in\n      secure_system.yaml.\nPASS: existing ldap functions don't break (ldap user login,\n      ldap user creation etc.)\n\nTest Plan for CentOS:\nPASS: packages build, image build.\nPASS: SX system bootstrap, unlock successfully.\nPASS: existing ldap functions don't break (ldap user login,\n      ldap user creation etc.)\n\nStory: 2009834\nTask: 45837\nDepends-On: https://review.opendev.org/c/starlingx/config/+/850771\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I03b01b93c07074e5e67c106d83388f268f4be0b5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix umask not found when applying kubernetes.pp\n\nOn Debian, umask is a built-in command so \"umask 077\" in\nkube-apiserver-change-params.erb will fail the manifest\nsince umask could not be found. This change fixed it by\nrunning umask with shell as provider.\n\nTest Plan on Debian and CentOS:\nPASS: \"system service-parameter-apply kubernetes\" complete\n      successfully, no error in puppet.log.\nPASS: check /tmp/cluster_configmap.yaml and\n      /tmp/kubeadm_config_view.yaml have the right permission:\n      -rw------- 1 root root /tmp/cluster_configmap.yaml\n      -rw------- 1 root root /tmp/kubeadm_config_view.yaml\n\nCloses-Bug: 1978718\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ie680cac904ef10bf063c0e6329192edc075e6a1e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-smapi\n\nAdd debian packaging infrasturcture to package puppet-smapi\nfor Debian.\n\nStory: 2009101\nTask: 43301\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I20125f40d3531db9b83f64b1a24c1701e2cbef9c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Tweaked configuration file to be used by ACC100\"",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Fix puppet-manifests build\n\nFile was removed from the Makefile, it is not installed.\n\nStory: 2009101\nTask: 43317\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I0d83ae437d4385ac275da8fc8c6a9f8ffb21569b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet-lint support\n\nThis update adds the tox and zuul configuration to\nrun puppet-lint against the puppet manifests. The\ninitial update ignores all existing errors, which\nwill be cleaned up later.\n\nChange-Id: I293abc2eac6bc6216cbbf6d939c1ba3474fb9384\nStory: 2004515\nTask: 28665\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle sysinv dpdk_elf_file configuration\n\nAs part of Debian migration, the sysinv procedure to check DPDK\ncompatibility for each host interface was also updated in order to make\nit customizable in case one would like to use other virtual switch than\nthe delivered OVS with DPDK support [1].\n\nFor other virtual switches, that might or not rely on DPDK, the ELF\ntarget that sysinv uses to verify interfaces compatibility must be\ncustomizable and the query_pci_id script is already able to use custom\nvalues [2].\n\nThis change adds to puppet the system configuration that will write, if\ndefined, the correct value for the ELF path. This platform parameter can\nbe overridden on the hiera data so puppet will update sysinv.conf\naccordingly.\nFor now, when deploying StarlingX with vswitch_type=ovs-dpdk we will\noverride it to the query_pci_id script default value (i.e., the\n/usr/sbin/ovs-vswitchd ELF) using the respective sysinv puppet module\nand let it as an example for anyone that is later using a different\nvswitch which requires this customization [3].\n\n[1] https://review.opendev.org/c/starlingx/config/+/872979\n[2] https://opendev.org/starlingx/config/src/commit/2cd0b1e14abca919fd5ae8c27d71e7a82cc72d9a/sysinv/sysinv/sysinv/scripts/query_pci_id#L34\n[3] https://review.opendev.org/c/starlingx/config/+/887106\n\nTest Plan:\nPASS - Build puppet-manifest package\nPASS - Build a custom stx ISO with the new package\nPASS - Bootstrap AIO-SX virtual system (vswitch_type=none)\n       and ensure the hiera data was not modified neither\n       sysinv.conf was updated\nPASS - Bootstrap AIO-SX virtual system (vswitch_type=ovs-dpdk)*\n       and ensure the hiera data was modified correctly and\n       sysinv.conf was updated accordingly\n* A successful complete installation with ovs-dpdk is still blocked by\na bug that will be solved soon:\nhttps://bugs.launchpad.net/starlingx/+bug/2008124\n\nStory: 2010317\nTask: 46389\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: Iaf31d3b5e2fc03b4783473e4329a780a516a9d43\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Rename max_cpu_frequency to max_cpu_mhz_configured\"",
        "issue_summary": ""
    },
    {
        "commit_message": "SM monitors cluster-host floating IP\n\nThe cluster-host floating IP is managed by SM.\nThis commit reuses the existing cinder-ip service to monitor the\ncluster-host floating IP address for the kubernetes config.\nThis is a temporary change until a cluster-host-ip resource\nis added to SM.\n\nStory: 2004273\nTask: 28962\nChange-Id: Ibff1766e6115b946cba6f8f1289463ceb866d135\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Swift on controllers\n\nEnable Swift on controllers to provide low-capacity object storage for\nusers who don't want to rely on the Swift-over-Ceph solution.\n\nSwift can be turned on after config_controller by CLI:\nsystem service-parameter-modify swift config service_enabled=true\nsystem service-parameter-modify swift config fs_size_mb=50 (optional)\nsystem service-parameter-apply swift\n\nBy default the filesystem size is 25MB. Users can optionally modify the\nsize before issuing service-parameter-apply:\nsystem service-parameter-modify swift config fs_size_mb=50\n\nStory: 2003518\nTask: 24793\nDepends-On: https://review.openstack.org/595330\n\nChange-Id: Ic28a2c21ee0823ce55b5d1f0e1123a418d20be04\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Restart collectd after ptpinstance runtime manifest\n\nPTP instances are configured and applied without lock and unlock hosts.\nThis commit ensures that collectd is restarted via pmon after ptpinstance\nruntime manifest is run.\n\nTest Plan:\nPASS: Verify collectd is restarted after ptpinstance config is applied\n\nStory: 2009248\nTask: 44434\n\nChange-Id: I681edb09d84a88e93a96f121e6854039e8e6a9ed\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Run kubeadm command with specific configuration file\n\nPuppet manifests use the kubeadm command during initializing\nkubernetes nodes. However, it is not passing the --kubeconfig\nparameter to this command, so the command will search for the\nkubeconfig file. Normally it finds this file in\n/etc/kubernetes/admin.conf, but if a user accidentally (or\nintentionally) creates a config file at /root/.kube/config, this\nfile can take precedence and cause the kubeadm command to fail.\n\nThis commit updated the command with /etc/kubernetes/admin.conf as\nits configuration file explicitly.\n\nChange-Id: I2942fa4a275145cc3a1b6c6fdb0f3827a244f1bb\nCloses-Bug: 1882678\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding a trusted CA certificate\n\nWe currently don't support adding a trusted CA certificate. This might\nbe required to connect to a docker registry using a self signed\ncertificate.\n\nThis change extends the certificate-install system command with the\nssl_ca mode. The certificate will be installed on all nodes via a\nruntime puppet manifest.\n\nChange-Id: I126ff67ed4682879e6ca11710503a316bd97ddf7\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nPartial-Bug: 1831946\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Skip platform ceph osds puppet manifest following DOR\n\nceph::osd puppet manifest will fail during controller puppet\nmanifests apply following DOR, because as both controllers are\nbooting up, there is no ceph monitor cluster so puppet is unable\nto validate or invalidate the existing configuration.\n\nThis change updated platform::ceph::controller class to skip\nplatform ceph osds in the case of DOR.\n\nChange-Id: I0254ce28869bc87c5e939ea8984d175244ebb65f\nPartial-Bug: 1904739\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config sysinv to use internal endpoint when validate client token\n\nCurrently in sysinv.conf, \"interface\" attribute of [keystone_authtoken]\nis not configured, so sysinv will use default admin endpoint when it\nvalidates client token against keystone. For a system restored from backup,\nadmin endpoints are https before controller unlock (restored from\nkeystone DB) while haproxy for the https admin endpoints is not\nconfigured yet (will be configured during unlock). So ansible B&R task\nrestore-more-data will fail when it tries to run \"system host show\"\ncommand to check host status.\n\nThis update configures sysinv to use \"internal\" endpoint as default to\nvalidate client token. Sysinv shouldn't use admin endpoint anyway.\n\nChange-Id: I32739af9e1867298fdf3e0b0d3779e6c05bb5d31\nCloses-Bug: 1876418\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add RPC config to cert-mon.conf\n\nAdd RPC config to cert-mon configuration.\nOn system controller, cert-mon will act as RPC server to receive RPC\ncalls from dcmanager when a subcloud is either online or becomes managed.\n\nChange-Id: Icea457a7186ecd45f8199751a6e5d2b1263e067f\nStory: 2007347\nTask: 40469\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support of ACC200 FEC device\n\nThis commit added the support of ACC200 FEC device.\n\nTest Plan:\nPass: Test FEC Operator on lab with ACC200 device\n\nStory: 2010341\nTask: 46852\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/864756\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: Ibf24dc7a8262d971acdd28250db1164fa66674c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify _storage_backend_failure_audit interval\n\nThis audit verifies if there's a storage backend stuck in 'configuring'\nstate, the timeout for this is 1200 seconds, set in the\nSB_CONFIGURATION_TIMEOUT constant.\n\nAfter a research, we noticed that the time interval does not need to be\n60 seconds, since the timeout of the configuration is 1200. Increasing\nit to 400 seconds (1/3 of the timeout) is enough to capture any storage\nbackend stucked.\n\nThis commit is a continuation of the study started at task 45711.\n\nTEST PLAN:\nPASS: AIO-SX: manually replaced these files into a Debian installation\nand no crashes happened.\nPASS: rebuild the whole system with the modification with no crashes.\nPASS: AIO-SX: verify that the audit is being called during the period.\nPASS: follow the sysinv logs seeking for errors. No error was found.\nPASS: guarantee that all audits are being called by the periodic tasks.\n\nStory: 2010087\nTask: 45828\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/848329\nSigned-off-by: Bruno Costa <bruno.costa@windriver.com>\nChange-Id: Idafdf98e0dfd6942b31284a3fd1b47c649c82634\n",
        "issue_summary": ""
    },
    {
        "commit_message": "dnsmasq puppet changes to support new UEFI LAT bootloader\n\nAdd dnsmasq puppet support for new UEFI LAT bootloader.\n\nSupport both CentOS and Debian.\n\nTest Plan:\n\nPASS: Verify Debian build and install\nPASS: Verify CentOS build and install\nPASS: Verify configured dnamasq.conf file in Debian\nPASS: Verify configured dnamasq.conf file in CentOS\nPASS: Verify CentOS Auto Install of DX system\nPASS: Verify Debian system node PXEboot ; bios and uefi\n\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/840997\n\nStory: 2009301\nTask: 45357\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\nChange-Id: I762672995efd63411cba38bce014b5cdf7405e56\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet vswitch service dependency on hugepage mount\n\nThe existing dependency for ensuring the hugepage directory was mounted\ndid not ensure that it was executed before the openvswitch service was\nstarted.  This causes an ordering problem under some configurations\nsince the OVS DPDK EAL init will fail since it cannot map the hugepages.\n\nThis update ensures the dependency is defined against the service rather\nthan the generic platform::vswitch puppet class to correct the\nincomplete dependency ordering.\n\nStory: 2003104\nTask: 24862\n\nChange-Id: I2dc9479024bd8363503058c0a9d3034b7c662a07\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet support for authenticated registries\n\nThis commit supports to pull images from alternative authenticated\nregistries that configured at Ansible bootstrap to bring up k8s pods\nat puppet time.\n\nAt bootstrap time, barbican secrets are created to store credentials\nfor accessing registry and alternative registries info are stored in\nservice parameter. At puppet time, the barbican sercret is retrieved\nto get the credentials in order to pre-pull k8s images that required\nby kubeadm to bring up static pods(ie..kube-controller-manager,\nkube-apiserver, kube-scheduler..).\n\nThe images for dynamic pods(kube-multus, kube-sriov-cni, calico..) and\ntiller are not needed to pre-pull, imagePullSecrets is added in their\npod spec to pass credentials to kubelet. This is done in Ansible\nbootstrap https://review.opendev.org/#/c/679136/\n\nThis commit also updates to pull Armada image before creating Armada\ncontainer if Armada image is not available in docker cache.\n\nTests(AIO-SX, AIO-DX, Standard):\n - All types of system are installed successfully\n - Verified all k8s/gcr/docker images are downloaded from\n   authenticated registry on controller-1 and worker nodes\n - Verified images from authenticated registries are used\n   by k8s static/dynamic pods on controller-1 and worker nodes\n - Swact to controller-1, lock/unlock controller-0. Verified\n   that tiller image is downloaded from authenticated registry\n   and tiller pod is created on controller-1\n - Swact to controller-1, apply application. Verified that\n   Armada image is downloaded from authenticated registry and\n   Armada container is created.\n\nChange-Id: Iaabef0f5d8a6a4640dcfde93a8c0449948f4a59f\nDepends-On: https://review.opendev.org/679335\nStory: 2006274\nTask: 36379\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO manifest to start kubernetes once\n\nThis change is to avoid restarting kubernetes.\nAlso calling sysinv-reset-n3000-fpgas to reset N3000 FPGAS\non host start up.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/785683\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/780600\nChange-Id: I4a27840820fd45ad86cef4dfce6ea0389e583f68\nPartial-Bug: 1918139\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubelet cpu-manager-policy=none options for application-isolated\n\nThis changes kubelet cpu-manager options so that --kube-reserved is\nnot specified in conjunction with --cpu-manager-policy=none.\n\nIn the 'none' case, we only reserve cpus with --system-reserved so\nthat kube-system pods only run on platform cores and not\napplication-isolated cores.\n\nChange-Id: I2cf77d68b1c615ae6a0052d2b1e5b96a5c80d3d7\nCloses-Bug: 1850242\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: update openstack bash completion file path\n\nThe directory '/etc/bash_completion.d' does not exist on Debian\nmaking puppet fail when running on that OS. On Debian, completion scripts\nare supposed to be in /usr/share/bash-completion/completions.\n\nSee: https://bugs.debian.org/776954\n\nUpdate the path for the script plus puppet so it works on both CentOS\nand Debian.\n\nTest Plan:\n\nPass: Execute ansible playbook on CentOS\nPass: Controller unlocked/enabled/available CentOS\n\nPass: Execute ansible playbook on Debian\n\nStory: 2009101\nTask: 44573\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I9fd2d1e8405d9c4e5bb699b5d44debbab9dccbd8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify kubernetes_local_secrets_audit interval\n\nThis audit only purpose is to ensure synchronization between k8s\nsecrets and keyring, but there's already a notification system by\nkeystone that sync this data.\n\nAfter a research, we noticed that the appropriate time interval\nfor this audit is to be executed only once per day.\n\nThis commit is a continuation of the study started at task 45711.\n\nPASS: AIO-SX: manually replaced these files into a Debian installation\nand no crashes happened.\nPASS: rebuild the whole system with the modification with no crashes.\nPASS: AIO-SX: verify that the audit is being called during the period.\nPASS: follow the sysinv logs seeking for errors. No error was found.\nPASS: guarantee that all audits are being called by the periodic tasks.\n\nStory: 2010087\nTask: 45720\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/848329\nSigned-off-by: Bruno Costa <bruno.costa@windriver.com>\nChange-Id: I334c2900ba5a824e80988516f179e9d92ceb87bb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Database connection exhaustion in dcmanager during sync\n\nWhen a data sync is triggered for large number of subclouds (~100),\nthe sync fails for some subclouds due to database connection exhaustion.\nIn order to fix this issue, the limit on the number of database\nconnections has been increased.\n\nStory: 2007267\nTask: 38956\nChange-Id: I88ed37ba3a143e3abee78a9f5584b16f17becc76\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable unsafe_noiommu_mode if vswitch enabled\n\nA failure in the stx-puppet manifest was introduced in [1]. The\nfailure occurs because the vfio-pci driver is not loaded when vswitch\nis disabled and it is a required kernel module for the\nunsafe_noiommu_mode exec \"echo\" command.\n\nTest plan:\nPASS: Verify that in a hybrid cluster environment (openstack nodes and\nk8s workers) after removing the vswitch host label the the vswitch is\nsuccessfully disabled.\n\n[1] https://review.opendev.org/c/starlingx/stx-puppet/+/818567\nStory: 2009702\nTask: 44289\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I480b99a1cd09cb3db44bed0f30b09fef0036c801\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"debian: Disable kvm-timer-advance\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix upgrade with Host TPM\n\nThis commit allows TPM certificates, per controller hosts, to be\npersisted across:\n- Host Reinstalls\n- Controller Restores\n- Doing a Backup on controller-1 and doing a Restore on controller-0\n- DX / SX Upgrades\n\nBy populating them in Sysinv's per host tpmdevice table's tpm_data\nfield, we manage to push these certs in as hiera data and recreate the\nTPM certs\n\nThe TPM binary memory maps are base64 encoded to allow RPC conduction\nand storage in DB, as by default when the Agent RPC message is parsed,\nit is done so using json.dumps which expects utf-8 encoding. The Binary\nmaps are base64 decoded prior to be written to the hiera records so that\nthe right content ends up in the files when the config manifest applies.\n\nChange-Id: Ie8b282808afacbba92949eefb85e96d6be441822\nStory: 2002886\nTask: 22847\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for external Ceph\n\nThis commit introduces a new storage backend \"ceph-external\" to support\nexternal ceph.\n- It provide the capability to provision an external Ceph cluster as\n  backend for Cinder, Glance, Nova\n- The connectivity to the 3rd party Ceph cluster is ensured through\n  importing a Ceph configuration file\n- Any combination of other backends and the external Ceph backend is\n  supported with limitations\n- Create /opt/extenstion/ceph directory in drbd.pp\n- When instance-backing is \"remote\" on a compute node, if the ephemeral\n  ceph pool is moved from one ceph backend to another, a config\n  out-of-date alarm should be generated for that compute node to signal\n  that the compute node needs to be locked and unlocked in order for\n  nova-compute to be restarted on that compute node.\n- For adding an external ceph backend, it is done by two POST requests:\n  one to upload the ceph config file and one to add the backend. For\n  modifying an existing external ceph backend, it is done by one POST\n  request to upload the ceph config file and one PATCH request to modify\n  the backend.\n\nStory: 2002820\nTask: 22737\n\nChange-Id: Ie504ffae9f4895a67502ecfa3f0fbf267bb65e99\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH support for 2 node configuration\n\nIn order to enable Openstack's helm charts on StarlingX we need\na distributed persistent storage for Kubernetes that leverages\nour existing configurations.\n\nChanges made:\n- allow CEPH to be configured on a 2 node configuration\n  with a single floating monitor.\n- floating monitor is managed by SM.\n- the CEPH monitor filesystem is DRBD replicated between\n  the two controller nodes\n- add ceph crushmap for two node setup; both controllers are\n  in the same group and redundancy is created between the\n  two nodes\n- only replication 2 is supported\n\nChange-Id: Ic97b9fafa752a40befe395be2cafd3096010cc5b\nCo-Authored-By: Stefan Dinescu <stefan.dinescu@windriver.com>\nDepends-On: I8f9ea4798070e08171ad73da39821bc20b7af231\nStory: 2002844\nTask: 26878\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix bootstrap error with resource duplication\n\nThe Debian packages need to be aligned with the\nCentos configuration.\n\nFuture changes may revisit the packaging, however\ncurrently they are expected to be the same.\n\nBased on:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/830872\n\nThese changes are scoped to only affect Debian.\nNo testing is required for other environments.\n\nTest Plan:\n  PASS: Build / Bootstrap / Unlock Debian environment.\n  PASS: No errors in puppet logs.\n\nStory: 2009101\nTask: 44573\nCo-Authored-By: Daniel Stevens <DanielStevens.TorresCardenas@windriver.com>\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: Ifdea18db5f79e819dcb0d630102f6a605705214e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing linters errors E010, E011, E020, E041,E043, E003, E001,E042\n\n    Listed below are the errors which were fixed as well as the actions\n    taken to fix them:\n    E010: do not on the same line as for\n    --> let do and for in the same line\n    E011: then not on the same line as if or elif\n    --> let then and if or elif in the same line\n    E020: Function declaration not in format ^function name {$\n    --> fix the format to suit ^function name {$\n    E041: Usage of $[ for arithmetic is deprecated for $((\n    --> fix from $[ to $((\n    E043: arithmetic compound has inconsistent return semantics\n    --> do not use +=, ++, -=, --; use value=value+?  instead.\n    E001: check that lines do not end with trailing whitespace\n    --> delete trailing whitespace\n    E003: ensure all indents are a multiple of 4 spaces\n    --> add/delete spaces\n    E042: local declaration hides errors\n    --> let declaration and assignment in two lines.\n\n    Listed below are test cases done which run one controller\n    and one compute in KVMs\n    Test-Install      ----  success\n\nRelated: https://review.openstack.org/#/c/600663/\n         https://review.openstack.org/#/c/601221/\n\nStory: 2003360\nTask: 26213\n\nChange-Id: I3ece37db3a326ea58bd344f43beefcbbbd4f0ad4\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable QEMU memory balloon usage statistics.\n\nSet mem_stats_period_seconds in nova.conf to 0.\nIt will disable QEMU memory balloon usage statistics.\nThere are 2 reasons of doing that in StarlingX:\n1. StarlingX doesn\u2019t support memory overcommit and adding\nQEMU memory balloon device doesn\u2019t make any difference.\n2. QEMU memory balloon usage statistics interrupts a VM run\nand causes unacceptable jitter in cyclictest once in a while.\n\nCloses-bug: 1803615\nChange-Id: Iaea1962601755736688f2deb61730ab1d548b8b1\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "On runtime, kube-sriov-device-plugin needs to be restarted\n\nThe previous correction for bug 1918139 removed the sriov plugin\nrestart necessary during runtime, done during the interface sriov\nassign to a datanetwork (allowed on an unlocked AIO-SX). Without\nit, the pod creation will not be able to use a datanetwork created\non runtime.\n\nThe correction bring back the platform::kubernetes::worker::sriovdp\nclass to be used only on runtime\n\nCloses-Bug: 1918139\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Ied19bf3138b58b279b350d067ae0c1080e220f31\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upgrade hiera from version 3 to version 5 on Debian\n\nThe following warning was given during bootstrap on debian:\n\n\"/etc/puppet/hiera.yaml: Use of 'hiera.yaml' version 3\nis deprecated. It should be converted to version 5\"\n\nFor that reason, 'hiera.yaml' was upgraded to version 5.\n\nSince version 5 doesn't work on CentOS, some changes were made\nto the debian/rules and to the shared Makefile so that\nhiera version 3 is used on CentOS.\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/837245\n\nDebian Bullseye tests:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nCentOS 7 tests:\nPASS: Build & install\nPASS: hiera.yaml file is kept at version 3 (No changes on CentOS)\nPASS: Successful Bootstrap\n\nStory: 2009101\nTask: 44841\n\nSigned-off-by: Matheus Machado Guilhermino <Matheus.MachadoGuilhermino@windriver.com>\nChange-Id: I4fca59ce4447cf521e5b0b45fc4a52dfd47ec996\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker runtime integration.\n\nProvision 10G logical volume in cgts_vg for\ndocker usage. puppet changes to configure and start docker if\n--kubernetes config_controller option specified.\n\nChange-Id: I6820025e34564283981798a53ad2f3d42162e804\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable Max CState limitation\n\nTo run properly, after the installation process of the\nKubernetes Power Manager, the system must be configured in\norder to remove the Intel Max CState limitation from\nGRUB command line.\n\nAlso, to avoid conflicts between functionalities, when\nthe Kubernetes Power Manager is enable, is necessary to\ndisable the configuration of Max CPU frequency.\n\nTEST PLAN:\nPASS: Configuration after app installation\nPASS: Configuration during boot time\nPASS: AIO-SX bootstrap successfully\nPASS: Standard bootstrap successfully\nPASS: 'power-management' label assignment to nodes\n      successfully\nPASS: Nodes lock and unlock\n\nStory: 2010773\nTask: 48495\n\nAuthor: Rom\u00e3o Martines <romaomatheus.martinesdejesus@windriver.com>\nCo-author: Eduardo Alberti <eduardo.alberti@windriver.com>\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/887958\nChange-Id: I50ce20230fa3dfc2e23f1c587f930114a9a623af\nSigned-off-by: Eduardo Juliano Alberti <eduardo.alberti@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Branch kdump config between OS's\n\nCurrent puppet kdump configuration is applicable\nonly to centos, so it was moved to a conditional.\n\nAlso added some basic configuration for kdump\nservice on debian.\n\nTest Plan - Debian:\nPASS bootstrapped and unlocked\nPASS kdump service enabled and running\n\nTest Plan - Centos:\nPASS bootstrapped and unlocked\nPASS kdump service enabled and running\nPASS no changes on puppet log\n\nStory: 2009965\nTask: 45506\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I54f870de5de7564c2818d9696ed70941ea0aada2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow configuration of isolcpus\n\nAllow a mixture of floating and pinned workloads by allowing the\napplication cpu's to be split between isolated and non-isolated\n\nUpdate the kubelet cpu manager options based on the k8s_isol_cpus\nparameter\n\nDepends-On: https://review.opendev.org/682693\nChange-Id: Ibc4cbbe83962bf0b0e4f9297db0cef1e75db5b74\nStory: 2006565\nTask: 36664\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH support for 1 node configuration\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1 and 2 node configurations.\n\nThis commit enables CEPH on 1 node configuration.\n\nDetails:\n* Allow CEPH to be configured on a 1 node configuration with a single\n  monitor.\n* Allow CEPH OSDs to be assigned to controller disks (only dedicated\n  disks allowed)\n* No enforcement on the number of OSD's.\n* Enable OSD level redundancy versus node redundancy that is present on\n  the standard system cluster,\n* Adding/Modifying CEPH backend configuration require node to be locked.\n* After adding the backend & before unlock: Monitor is immediately\n  available; Backend will be in \u201cprovisioned\u201d state; Secondary tiers can\n  be added at this stage.\n* Configuration is be applied on unlock. CEPH OSDs will start after\n  reboot.\n* Adding OSDs require node to be locked, they will be operational after\n  unlock.\n* Host-unlock is allowed only if number of configured OSDs per tier\n  matches replication number configured for that tier.\n* Services supported in this configuration: cinder, glance,\n  rbd-provisioner, swift, nova (with remote ephemeral storage).\n* Support for replication 1, 2 and 3 per tier, default to 1. Replication\n  is changeable on the fly for this configuration.\n* Update StarlingX HA for storage process groups - we no longer have 2\n  controllers so we disable group monitoring.\n\nChange-Id: I92edca700b7cc557a71edfb33e0453e860f52078\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 26877\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create runtime class to update DNS resolv.conf\n\nIt was detected the command 'system dns-modify' updates the\nresolv.conf correctly but after reboot the resolv.conf\nis overwritten with old values.\nThe reason was the system.yaml was being updated but code\nwas not calling script: puppet-manifest-apply.sh to update\nYAMLs in the path that puppet will use.\nChanged code to use puppet runtime class and the right\nfunction to update YAMLs and call puppet-manifest-apply.sh.\n\nTest Plan (DEBIAN: Standard CENTOS: AIO-DX):\nPASS  Modify DNS and check resolv.conf in both controllers\nPASS  Modify DNS and reboot both controllers\nPASS  Install AIO-DX in VBox using ISO with this fix\nPASS  Install Standard in VBox using ISO with this fix\n\nPartial-Bug: #1989142\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I3f98264a74371ce80ba7d1d41147e12424582d83\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Prep for remote install of sub-cloud controller-0\n\nAs part of ongoing activity which will extend the remote\nsub-cloud deployment to include the installation of\ncontroller-0.\n\nThe subcloud iso images would be installed on the\nfilesystem of the system controller in a versioned directory\n(/opt/platform/iso/<version>).\n\nThis update contains the following prep works:\n\nCreates a dcmanager run time manifest which is applied upon\ncreation of initial system controller host. This runtime\nclass creates /opt/platform/iso and /www/pages/iso\nfile resources and a bind mount to mount /opt/platform/iso to\n/www/pages/iso. This is required to serve the iso images by\nhttp server. This bind mount resource is managed by SM.\n\nIt also adds 'iso' to the lighttpd static content list.\n\nChange-Id: I38316f7704c70bc0da419d4b0338b47d9f1f97eb\nStory: 2006980\nTask: 37715\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial kubernetes config on controller\n\nSupport the deployment of kubernetes on controller-0 through a new\n\"--kubernetes\" option on the config_controller command. This is\njust an early version of the code to allow other to build on it.\n\nChange-Id: I8514ca35606d5573de3f52b56551395618cca79b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure anti-affinity for coredns pods\n\nThere is no supported way to do this to configure the coredns pod for\nanti-affinity. See https://github.com/kubernetes/kubeadm/issues/1416\n\nFor now we will set this with a patch in the kubernetes manifest.\n\nChange-Id: I3c83cee9d3209b223fd2c2e1149a85205e3c9b15\nStory: 2004520\nTask: 29726\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix issues when switch between HTTP and HTTPS\n\nIssues:\n1- wrs-ssl.rpm installs a key file that is expected to be modified by\nuser. Updating, patching or removing this RPM can potentially change the\nuser file.\n2- Going back to HTTP after going to HTTPS fails\n3- Going back to HTTPS again after going back to HTTP, access fails\nuntil a new key is installed\n4- key files under /etc/ssl/private are required to be removed when\ngoing back to HTTP\n5- sysinv creates backup copies of key (.pem) files\n\nFixes:\n1- renaming the self signed certificate installed by wrs-ssl.rpm so\nthat:\n- the key file is not installed in place\n- the self-signed certificate remains available to reinstall when going\nback and forth between HTTP and HTTPS\n2- updating the lighttpd.conf manifest so that the daemon does not look\nfor pem files in HTTP mode\n3- modifying sysinv so that the pem files are removed from both\ncontrollers when going back to HTTP\n4- modifying sysinv so that the tool does not create a backup copy of\nthe pem file.\n\nStory: 2002894\nTask: 22857\n\nChange-Id: Ibd0958e910a8914a3c65d3504ff82ebbef24c6c5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "sriov_vfs is undef by default in sriov_enable\n\nDuring tests of version upgrade and patch applying it was observed that\nFEC device is enabled considering the legacy contents of hieradata, and\nthis configuration does not contain (yet) the 'sriov_vfs' parameter.\nHowever, the 'sriov_enable' resource has no default value for that pa-\nrameter, causing the puppet manifest to fail.\n\nThis change sets the default value of 'sriov_vfs' to 'undef' for this\ncase when it is not found already in hieradata contents.\n\nCloses-Bug: #1931458\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I50723f6c4e0de859b670378ff05beecda5d0a280\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv password change runtime manifest\n\nThis commit introduces a runtime class for updating sysinv keystone\npassword in config files on all subcloud controller node(s) without\nrestarting sysinv services.\n\nThis class will be applied by sysinv-agent when the keystone listener\nin the sysinv-conductor detects successful update of the openstack\nsysinv password.\n\nThe new sysinv keystone password comes from hieradata, so updating\npassword in hieradata is a prerequisite.\n\nThe commit also includes a fix for fm password runtime manifest.\n\nTest Plan:\nPASS: The sysinv password was successfully changed in the api-paste.ini,\n      cert-alarm.conf, cert-mon.conf and sysinv.conf files.\n\nStory: 2010230\nTask: 46239\n\nSigned-off-by: Li Zhu <li.zhu@windriver.com>\nChange-Id: I919b8cf8832fd0e39bc3731c66a3883331a3b784\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable etcd with security setting.\n\nUpdate etcd puppet to support security settings.\n\nPartial-Bug: 1894870\n\nChange-Id: Ifb5bb2506a260186bf4e8caa487bbeaae04df80b\nSigned-off-by: Zhipeng Liu <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename the existing /opt/patch-vault filesystem to /opt/dc-vault\n\nThe filesystem /opt/patch-vault is renamed to /opt/dc-vault so that\nit can be re-used to store FPGA images and software loads. Thus,\nnecessary changes have been made in the puppet manifests.\n\nStory: 2006740\nTask: 39550\nDepends-On: https://review.opendev.org/#/c/723007/\nChange-Id: I26055b12e7bd241adb072c609f72b8d113b4a20e\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubernetes, tiller and calico\n\nThis clamps kubernetes at 1.13.5 during the init phase.\nUpversions helm/tiller from 2.12.1 to 2.13.1\nUpversion calico to v3.6\n\nInformation about how to configure and test when upversioning\ncalico is located in the calico.yaml.erb file.\n\nStory: 2005198\nTask: 30211\nDepends-On: If9476b26b315e8c863e1ec487cbf701972a82a98\nChange-Id: I7fed5d75cb9f8b593fda7dc1bdd125c4e6d7affc\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix permission of puppet saved logs tar file\n\nChanged the permissions of puppet saved logs tar file from\n644 to 600 to comply with openscap rules security requirements.\nVerified that installation is successful for AIO-SX\nand Standard 2+2 system configurations.\n\nStory: 2008037\nTask: 40694\n\nChange-Id: I1fe365e808a085999667e898788afacf61fd6612\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove references to deprecated script\n\nupgrade_k8s_config.sh has been deprecated and\nremoved due to lack of support for \"flow\" style YAML.\nDeprecated functionality has been superseded\nby better YAML-aware handling in sysinv.\n\nUpdating how we invoke kubeadm, we will now use an explicit\nversion of kubeadm when calling it.  The version called\nwill now match the version we are upgrading to in order to handle\nthe format unsupported by previous versions of kubeadm.\n\nTest Plan\nPASS:\n- Manually update scripts on controllers and worker nodes based on\n  https://review.opendev.org/c/starlingx/integ/+/880390\n- Perform manual upgrade from k8s v1.21.8 to v1.22.5\n- Verify kubernetes successfully upgraded to v1.22.5\n\nTest was performed in the lab with local changes\nto verify the code.\nPatch was not tested.\n\nCloses-Bug: 2017696\nChange-Id: I840eb566057be495fe0da3cae7604bf8055c0d4f\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move the grub audit manifest to the post stage\n\nThis update moves the grub audit to the worker manifest post stage.\nThis would allow the worker manifest apply to complete prior to\nreboot the host, should there be a mismatch.\n\nRelated-Bug: 1841670\n\nChange-Id: I7690769a38e088e91a009ed7aa59a937bab42987\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for k8s upgrade abort failure recovery\n\nThis change is to create a new puppet class\nplatform::kubernetes::upgrade_abort_recovery used to\nrecover the etcd, docker, containerd and kubelet services\nwhen failure occured during k8s upgrade abort.\n\nThe puppet class 'platform::kubernetes::upgrade_abort' is refactored\nso this can be externally retried and keep the previous working etcd\ndata directory. The etcd directory is moved to temporary backup\nlocation, and is deleted only on successful etcd snapshot restore.\n\nThis uses pmon-stop/pmon-start with the systemd services to prevent\nhosts having maintenance autonomous reboot after 30 seconds.\n\nTest Plan:\nAIO-SX: Perform k8s upgrade v1.24.4 -> v1.25.3\nPass: Run 'system kube-upgrade-abort' at stage upgraded-networking and\nmanually force the upgrade abort to fail, verify the recovery code\nis called and executed successfully, verify that all systemd services\n(docker, containerd, etcd, kubelet) are started and pods are up and\nrunning\n\nStory: 2010565\nTask: 48205\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/885464\n\nChange-Id: I83408b681a4284e521eba880f7059bd5a7146a3f\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet host filesystem ephemeral storage at runtime\n\nAt runtime, restart the kubelet after the ephemeral storage update,\nto allow it to handle the updated ephemeral-storage.\n\nTest Plan:\nPASSED Verify controller host-fs-modify kubelet\nPASSED Verify worker host-fs-modify kubelet\nPASSED Verify kubectl described node reflects updated ephemeral-storage\nPASSED Verify application pods continue running\nPASSED Verify no stuck Configuration 250.001 alarm or puppet Error\n\nCloses-Bug: 1947006\nSigned-off-by: John Kung <john.kung@windriver.com>\nChange-Id: I03ed193678c811274e0a1b595b8ff9450f290cee\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix failure in puppet cinder when having multiple CEPH backends\n\nMove file resource to a place where it's called only once and\nnot for every backend.\n\nChange-Id: I0d9be2f1f3b1b63796c16793527c5fc77fa8d156\nStory: 2002844\nTask: 27613\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Stardandize makefiles for puppet-modules-wrs\n\nThe puppet-modules-wrs is formed by several subcomponents, in all\nof them the same changes were applied:\n\n  - Create a makefile with a install target.\n  - Remove license file from build_srpm.data as is not needed.\n  - Update target in specfile\n  - Change autosetup to setup in specfile, this was bug in the spec\n    files.\n\nChange-Id: I960b092292222fdb58380422889022d68d748c37\nStory: 2004043\nTask: 27552\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add runtime class for coredns SX to DX migration\n\nAs part of SX to DX migration, the configuration for coredns must be\nupdated, including setting the scale replica count. This update\ncreates a runtime manifest class that is applied as part of the\nmigration.\n\nChange-Id: Id5433020883b75e005d37cc1229ac579712b99e6\nPartial-Bug: 1929148\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support subcloud deploy upload the common files\n\nCreate /opt/platform/deploy to host the deploy common files.\n\nPartial-Bug: 1864508\n\nChange-Id: Ifd40cb02d4a2ee17a05457b43c6227aaa069e01e\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add filesystem dependency to kubernetes worker init class\n\nThere is a race condition that can lead to kubeadm join\nbeing called before the '/var/lib/kubelet' mount point\nis created.\n\nAn early run of the join executes ok leaving expected\nconfig and otherwise content in the local /var/lib/kubelet\ndirectory.\n\nThen when the filesystem manifests creates the\n/var/lib/kubelet mountpoint the kubernetes config content\ncreated earlier gets hidden by the mount thereby causing\na non-recoverable kubelet process failure due to missing\nconfig.yaml\n\nThis update adds a filesystem class dependency in the\nkubernetes::worker:init class to ensure the\n/var/lib/kubelet mountpoint is created before the\nkubeadm join is run.\n\nTest Plan:\n\nPASS: Verify Normal System Install\n\nChange-Id: Ibc110589260c23f86beb5a6eaf1008b3d4f387b3\nCloses-Bug: 1843344\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change optional parameters for Debian haproxy\n\nStarlingX makes use of parameters \"reqadd\" and \"rspadd\" by default,\nwhich are supported on version 1.5 which is the version on CentOS:\n\nhttps://www.haproxy.org/download/1.5/doc/configuration.txt\n\nBut, on Debian, it uses version 2.2 and starting on version 2.0 those\nhave been deprecated:\n\nhttp://www.haproxy.org/download/2.0/doc/configuration.txt\n\nAnd there is an explicit comment to avoid using those parameters.\n\nAs the section \"HTTP header manipulation\" has been removed on version\n2.2:\n\nhttps://www.haproxy.org/download/2.2/doc/configuration.txt\n\nThe new option is to use \"http-request add-header\" and\n\"http-response add-header\"\n\nAs example, for request, the configuration changes from:\n\nreqadd X-Forwarded-Proto:\\ http\n\nTo:\n\nhttp-request add-header X-Forwarded-Proto http\n\nThe same format applies to the response.\n\nTest Plan:\n\nPASS: Debian image built successfully\nPASS: Debian image installed successfully\nPASS: Debian image bootstrapped successfully\nPASS: Debian image unlocked successfully (without UAR #43)\nPASS: haproxy service started successfully (checked sm-dump)\nPASS: /etc/haproxy/haproxy.cfg configured properly by puppet\nPASS: /etc/haproxy/haproxy.cfg checked on CentOS\nPASS: On both CentOS/Debian no error on AIO apply manifest\n\nStory: 2009965\nTask: 45149\n\nSigned-off-by: Adriano Oliveira <adriano.oliveira@windriver.com>\nChange-Id: I67fbcf297e35717bc649b11ae07ce36505cda6c4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure VIM to use pod based OpenStack services\n\nWhen kubernetes is configured and the OpenStack application has\nbeen installed, the VIM will be configured to access the OpenStack\nservices running in pods (keystone, nova, rabbitmq, etc...).\n\nIn order to support this, some extensions were done to the sysinv\nhelm code to allow parts of the OpenStack application\nconfiguration to be retrieved (e.g. endpoint info). Changes\nwere also required to dnsmasq configuration to get resolution of\npod based names (e.g. keystone.openstack.svc.cluster.local)\nworking properly.\n\nThis commit is just the first step and has limitations. There is\nno trigger to reconfigure the VIM after the OpenStack application\nhas been installed - a controller lock/unlock is required.\n\nStory: 2003910\nTask: 27852\n\nChange-Id: I1c6dcdecd1365104457009196bbcf06b19c95489\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restrict barbican.conf access permissions\n\nCurrently Barbican configuration file /etc/barbican/barbican.conf has\nownership root:root, and permission 644. This update changed its ownership\nto be barbican:barbican, and access permission to be 600.\n\nChange-Id: I385d6e63307a82198be71c6f4f4abdb49c703cd7\nCloses-Bug: 1887575\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: only update routes after interfaces are configured\n\nIn Debian it was detected a dependency to create interfaces before\nthe creation of routes. This change sets this order for the Debian\ninstallations, and keeps the current order for CentOS.\n\nDetected that is all static routes are removed the file\n/var/run/network-scripts/routes is not generated, we need to\nremove all route in /etc/network/routes. This was not happening\n\nAlso adding log messages if the route creation/delete fails.\n\nTest Plan\nPASS  add routes with system host-route-add and unlock on Debian\nPASS  del routes with system host-route-delete and unlock on Debian\n\nCloses-Bug: 1977558\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I72714349957c6a2241485907ea79f8b3e6fe6537\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable --reserved-cpus option in k8s v1.18.1\n\nThe option was introduced in k8s v1.17 and will now be used to define\nthe explicit set of CPUs that are reserved for specific cpu functions in\nStarlingX.\n\nThis retires setting the number of CPUs reserved in the --kube-reserved\nand --system-reserved options.\n\nChange-Id: I1a3d4e4cca7b6940682a787c2e7348e56a047a06\nStory: 2006999\nTask: 39529\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix collectd service config on Debian\n\nFix for collectd config file not installed\nin expected place for Debian build.\nChanged encoding based on OS family\nPlugin dir changed based on OS family\n(/usr/lib or /usr/lib64)\n\nTest Plan: Debian\n\nPASS: build package and iso\nPASS: AIO-SX fresh install\n      check after ansible bootstrap and unlock\n      for collectd.conf file\nPASS: check collectd.log including cpu and\n      memory usage information\n\nTest Plan: Centos\nTODO: Apply same changes and restart collectd\n      No errors in log\n\nStory: 2010080\nTask: 45575\n\nSigned-off-by: Joao Paulo Tavares Musico <joaopaulotavares.musico@windriver.com>\nChange-Id: I93a25d8444eecdcd7e8a939356a0e4ba3ee4580f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix legacy service-parameter names integration in k8s custom\n\nThe K8s control plane component configuration can be updated\nvia service parameters.  There are some service parameter\nnames used in earlier versions (legacy) that are different\nfrom the current valid k8s parameter names, so a translation\nmust be done for compatibility reasons. For example\nservice-parameter name \"admission_plugins\" must be\ntranslated to \"enable-admission-plugins\"\n\nWhen the user uses legacy service parameter names to set k8s\nparameters, the updating script discards them wrongly\nduring the cleanup step.\n\nThe changes introduced move the translation of parameter\nnames (to the accepted k8s format) after the parameters\nare loaded from hieradata.yaml, so the rest of the script\nis abstracted from the legacy service-parameter nomenclature.\n\nTest Plan:\n* CENTOS and DEBIAN distro:\n  - Fresh Install with AIO-SX and DX/STD.\n  - Add parameter with old service-parameter nomenclature.\n  - Apply changes on kubernetes service.\n  - Verify cluster health and configuration.\n\nCloses-Bug: 1993842\nCloses-Bug: 1993748\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I0f789b3b8ce1052fa6be213dc63f5945a1efeb3d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable subcloud keystone public endpoint access on OAM IF\n\nCurrently keystone public endpoint on subcloud is not accessible from\nOAM IF for two reasons:\n\n- haproxy is not configured for keystone\n- The OAM global network policy doesn't allow keystone public endpoint\n  port (5000) to go through.\n\nInaccessible to keystone causes remote CLI not working as keystone is\nthe first service the CLI needs to access to authenticate the requests.\n\nThe change enabled the access by updating haproxy configuration and\nthe OAM gnp.\n\nChange-Id: I540b44994c8c20f13d14d2e26eda6351b0f916e7\nCloses-Bug: 1886712\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Revert \"Add Kata Container support in StarlingX\"\"\n\nThis reverts commit 0f9dd0491b6847c069f77f5dac418a638bb25712.\n\nDepends-On: https://review.opendev.org/703263\nChange-Id: I81fe7f8502d14ba6e414fafddff6252f0eea8e5d\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Strip out port from the alternative registry url\n\nIf the alternative registry url contains a port, it's\nstripped out during Ansible bootstrap. Strip it out\nat puppet side too.\n\nChange-Id: I98b3564da838a0900a720e6bd7f3fb8b8670f111\nDepends-On: https://review.opendev.org/687655\nCloses-Bug: #1847409\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-sshd\n\nAdd debian infrastructure in order to create a debian\npackage for puppet-sshd.\n\nStory: 2009101\nTask: 43299\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: Ie56c91c6af0caf88d48975c45620b6b019b17a60\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix MOTD not include system ID on controller-1\n\nThe Message of the Day (MOTD) is assembled from several\nsources, including: /etc/motd.head; /etc/sysinv/motd.system;\n/etc/platform/motd.license; and /etc/motd.tail. In the event\nthat /etc/sysinv/motd.system is missing, the MOTD will simply\nexclude the system name.\n\nDuring the bootstrap process of controller-0, the motd.system\nfile is generated utilizing the predefined system name.\nHowever, this is not the case during the bootstrap process of\ncontroller-1, where the file remains ungenerated.\n\nThe proposed solution initialize the motd.system file using a\npuppet template during controller-1 unlocking step.\n\nTest Plan:\n- PASS: Fresh Install DX Env\n- PASS: Verify MOTD message on controller-0.\n- PASS: Verify MOTD message on controller-1.\n\n- PASS: Fresh Install STD Env\n- PASS: Verify MOTD message on controller-0.\n- PASS: Verify MOTD message on controller-1.\n\nCloses-bug: 2037551\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I97b7e140baf837aecd961d7ea8fc5947fcae2106\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Database connection exhausts during dcorch audit\n\nIn a distributed cloud system with lots of subclouds, seeing QueuePool\nlimit exception during dcorch audit, and the particular subcloud cannot\nsynced with the system controller until the next audit attempt. This\nchange increases the overflow limit to 500 on the db connection and\nrestrict the db connection size to 1 to prevent the idle connection\nremaining in the pool.\n\nChange-Id: I93eae7b7e8927f4a70d0073bf4619bcf0de15df7\nCloses-Bug: 1889292\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH: Adding OSD storage devices no longer need nodes to be locked\n\nCurrent procedure for adding OSDs on AIO-DX and Standard w/o storage\nnodes (2+2) requires controllers to be locked, OSDs added, node\nunlocked, controllers swacted then lock/unlock is needed for the\nother controller. This is too complex and not suitable for\nproduction.\n\nThis commit simplifies OSD management by enabling runtime addition on\na node that is operational 'enabled' thus avoiding the complex\nprocedure described above.\n\nThe runtime addition is handled by executing the Ceph OSD puppet\nmanifests when OSDs are added via the 'host-stor-add' API. Ceph OSDs\nare stopped, manifests are executed, OSDs are started and status is\nreported back to sysinv.\n\nMonitoring is done in a new column called 'state' with 4 values:\n1. 'configuring' - puppet manifests are running;\n2. 'configuring-on-unlock - node is locked and manifests will be run\n   on unlock;\n3. 'configured' - once configuration is successful, #1&#2 above will\n   turn into #3;\n4. 'configuration-failed' - error state if manifests fail, this may be\n   corrected by a lock/unlock of the node or a reinstall;\n\nThe 'state' column can be checked with 'system host-stor-list\n<node_id_or_hostname>'.\n\nChange-Id: Iccaaa0728a43936cd4c6e1ed590e01ba8f0fbaaa\nStory: 2002844\nTask: 29795\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix N3000 FPGA reset dependency\n\nAn N3000 FPGA reset is performed by a docker container application\nlaunched by the sysinv FPGA agent on system startup.\n\nWe must wait for the reset to occur before configuring an FPGA NIC\nand/or FEC device for SR-IOV, as the reset will clear all configured\nVF data (number of VFs as well as drivers).\n\nThis commit ensures the management network configuration is applied\nbefore the 'reset wait' in order for the sysinv FPGA agent to begin\nthe container launch and reset operation.\n\nNote: a partial-fix for the docker login part of this bug has\nbeen merged to the config repo as commit-id: f5d8c40993\n\nTesting:\n\nStandard SR-IOV interfaces (no FPGA NICs or devices)\nFPGA SR-IOV ethernet type interfaces (no FEC devices)\nFPGA SR-IOV vf type interfaces (no FEC devices)\nFPGA SR-IOV FEC devices (no FPGA interfaces)\nFPGA SR-IOV FEC devices and network interfaces\nAIO-SX, subcloud\n\nChange-Id: Ic2c620bd5eb79becb0f78d21cb287440dacfa836\nCloses-Bug: #1886121\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update kubelet config path location for Debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"remove flag fault_management_pod_disabled\"\n\nThis reverts commit 62f425d67322aaac0bb8507e67e0eafa2b74c970.\n\nfeature FM containerization is delayed to stx 4.0. Switch the\nopenstack alarms reported to fm in platform instead of fm in\ncontainers\n\nChange-Id: If95f3b472d7d83ff526299588ee14a0678691551\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust eng_workers rules to be used by Scaled Down services\n\nActually the eng_workers parameter use the same number of assigned\nplatform cores to define the number of threads used by StarlingX base\nservices on AIO installations.\n\nThis change tunes the eng_workers parameter to disconsider the\nHyper-Threading (HT) when calculating the quantity of threads required\nby the services.\n\nTEST PLAN:\nPASS: AIO-SX: create and deploy CentOS installation ISO successfully\non host with HT enabled.\nPASS: AIO-SX: check if the correct qty of threads (in this case only\none) was configured on base services.\n\nPASS: AIO-SX: create and deploy CentOS installation ISO successfully\non host with HT disabled.\nPASS: AIO-SX: check if the correct qty of threads (2) was configured\non base services.\n\nPASS: AIO-SX: change the number of dedicated platform cores using the\nCLI and verify the change was effective and reflected in the services.\n\nPASS: AIO-DX: sanity and regression tests (maintenance and sysinv) w/ \nHT enabled performed by QA team.\n\nStory: 2010087\nTask: 45621\nDepends-On: https://review.opendev.org/c/starlingx/config/+/855652\n\nSigned-off-by: Reynaldo P Gomes <reynaldo.patronegomes@windriver.com>\nChange-Id: I902c561113bc80f36be9ad10a78ba4c86412f73f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion Armada SHA to be a newer image\n\nUsing SHA: af8a9ffd0873c2fbc915794e235dbd357f2adab1\nwhich was built and tagged on April 9, 2019.\n\nThe previous Armada SHA was from Sept 2018.\n\nThe manifest.xml is updated to not generate armada warnings\nfor libvirt, openvswitch, nova and neutron.\nThe warning was:\n  \"label_selector\" not specified,\n  waiting with no labels may cause unintended consequences.\n\nStory: 2005198\nTask: 30436\nChange-Id: I97b633d9e6e1e4574e25dc8b69500faae4b4a809\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add PTP monitoring to collectd\n\nThis update adds Precision Time Protocol (PTP) monitoring\nto the current list of inhouse developed collectd plugins.\n\nRefer to the ptp.py header for a description of the monitoring\nservice algorithm and inline comments for detailed behavior.\n\nTest Plan: see depends update commit message\n\nDepends-On: https://review.openstack.org/#/c/647524\nChange-Id: I46ebcb91e80a617853c298a03b1f733e0c33afb8\nStory: 2002823\nTask: 29492\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet system overrides on unlock\n\nMove generation of kubelet's systemd override file,\nkube-stx-override.conf, from platform::kubernetes::master::init\nto platform::kubernetes::configuration so that the file will\nbe generated on every host unlock. This facilitates delivery\nof systemd service changes via patches to existing installs.\n\nThis change is needed by bug 2027810 to ensure that the\norphan volume cleanup script is executed as part of the systemd\nExecStartPre kubelet service override.\n\nTest Plan:\n\nPass:  - Update the kube-stx-override.conf.erb file\n       - Lock the host\n       - Unlock the host\n       - Verify that kube-stx-override.conf has been updated\n       - Verify AIO-SX\n       - Verify Standard config\n\nPartial-Bug: 2027810\nChange-Id: I3b496abc807bf75716d28079c62ef4700dcd3244\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove dcorch-snmp\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial firewall config causes temporary packet loss\n\nDue to ordering of firewall rule/policy configuration, all incoming\npackets may be dropped during firewall configuration, until its\ncompletion. This creates a race condition where this packet loss\ncould result in manifest application failure, causing the initial\nunlock to fail.\n\nIn order to avoid this packet loss, this update adds ordering\ndependencies to ensure the default policies are applied only after\nthe common platform firewall rules.\n\nChange-Id: I196911a197e6efb58e41d742a57216d0175cd4be\nCloses-Bug: 1814619\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"dcorch for containerized openstack services - puppet\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"remove puppet class update_kubeadm_feature_gates\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove redundant ptp4l value\n\nA default value was left in the ptp4l.conf template. While this doesn't\nimpact the behavior of the process it may be confusing to users\noverriding the default value.\n\nChange-Id: I15f0e41d5e812f87f0828c0fd3d3b7c74125d766\nStory: 2006759\nTask: 38904\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "device plugin images can be pulled from private registry\n\nCheck user specified docker registry and pull device plugin from\nit if exists. And fix 2 issues related to private registry.\n\n1. pause image redirection is not needed in k8s 1.13\n2. missing double quotes in /etc/docker/daemon.json\n\nCloses-bug: 1829299\n\nChange-Id: I71074056009544abd6c91b10716b3dd5bf7b9e89\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove some firewall rules\n\n* Remove those firewalls rules managed by puppet for exposing platform\n  services, because we have used Calico to create some rules to do the\n  same thing.\n* Remove system firewall-rule-related commands and controllers.\n\nPassed tests:\n* Fresh build\n* Deployment(simplex, duplex, multi-node)\n* System-level tests\n  * firewall-rule-xxx commands was removed as expected.\n  * puppet firewall rules have been removed as expected.\n  * manually check iptable rules.\n  * use the utility of uc to test exposed tcp ports and a few\n    non-exposed tcp ports again.\n  * create vms\n\nStory: 2005066\nTask: 29864\n\nDepends-On: https://review.openstack.org/#/c/649217\nChange-Id: Ie5df744598c75d45d21ce6585f31f6d8f1809f04\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "In IPv6 only search addresses in tentative if interface is UP\n\nDuring usage it was observed, in IPv6, that if a interface is with\noperational state in DOWN, it will take more time to leave the DAD\nstate \"tentative\", if the system starts without carrier the flag\nremains until a carrier signal is provided.\n\nSince interfaces in DOWN are not affected by duplicated address\nin the network, this change adds a script to test this condition\nover active interfaces only.\n\nTest Plan:\n[PASS] remove the signal of an ethernet port that is configured and\n        execute lock/unlock. Observe that there will be no puppet\n        error in \"wait-for-tentative\".\n\nCloses-Bug: 2030960\n\nChange-Id: I8befd232324a2386879627f0d19ea7d14cccc126\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix keystone fails to start during unlock for Debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for multiple hpe3par backends\n\nThis update adds support for configuring up to 12 HPE 3PAR backends at the same\ntime. Typical large 3PAR SANs have multiple volume types to take advantage of\ndifferent price points and performance. A separate backend configuration is\nrequired for each volume type.\n\nChange-Id: I8acd6865d5ca33bf72f9e0d2cb4d88020082e7b8\nStory: 2002996\nTask: 23011\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix DC rootca certificate file location and update command for Debian\n\nCorrect the platform configuration in puppet for Debian installation by\nchanging the DC rootca certificate file location and update command\naccordingly.\n\nTest Plan:\nPassed: bring-up of system controller on CentOS\nPassed: bring-up of system controller on Debian\n\nStory: 2010119\nTask: 45722\n\nSigned-off-by: Li Zhu <li.zhu@windriver.com>\nChange-Id: I214710d5d82ad17547dd9a282deaf127e6b791bf\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reset N3000 device based solely on its presence\n\nInstead of resetting N3000 device in the AIO manifest when the PCI\naddress of some is(are) reported back by sysinv-[fpga-]agent, this\nchange introduces a new facter to look for the device at system\nand flag its existence. Then, during AIO manifest apply, that flag\nis checked and N3000 is reset (if not yet done) regardless of any\nconfiguration already available at database/hieradata.\n\nPartial-bug: #1933119\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: Ibdb2b1a77b9ec3a3a516e5cf28da59e9ac74be60\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve kubeadm upgrade apply logging on timeout\n\nThis improves logging for 'kubeadm upgrade apply' which upgrades the\nfirst kubernetes control-plane. Puppet exec does not provide any logs\nin the case of a timeout (this is a deficiency), so we don't have any\nsense for progress or the root cause of failures.\n\nThe exec timeout is increased to 600 seconds from the default of 300\nseconds. This specific command takes a long time to complete (usually\n> 90 seconds), and we occasionally exceed 300 second timeout when\nupgrading 250 subclouds in parallel.\n\nThe -v6 option is added to increase debug verbose logging so we get\ndetails about health, API calls, timing, and specific upgrade steps.\n\nTest plan:\nPASS: Run system kube-host-upgrade controller-0 control-plane\nand verify new kubeadm-upgrade-apply.log file.\nPASS: Manually invoke puppet-manifest-apply.sh with class\nplatform::kubernetes::upgrade_first_control_plane and 2 second\ntimeout, verify new kubeadm-upgrade-apply.log file.\n\nCloses-bug: 1998830\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: I794050b6afaae21af1830b6f89ad6304e7faf14b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update containerd registry.local configuration\n\nAs part of bootstrap, k8s.gcr.io/pause:3.2 is pulled via crictl from\nregistry.local with explicitly provided credentials. If this image is\nmanually removed or removed due to garbage collection, containerd is\nunable to pull it from registry.local.\n\nProvide a complete registry.local configuration by:\n - Completing the configuration values for the TLS configuration.\n - Adding the auth setting for the auth configuration.\n\nChange-Id: I3214f68ef0b38d7267428f8a21b34ffc681e1f85\nPartial-Bug: #1881353\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"docker-token-server scale down\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Reserve tiller ports as part of controller bootstrap\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Enable PTP synchronization on management network for AIO\"\n\nThis reverts commit dd16076821ae092cd84e5dafbc5234f2ec59608f.\nManagement interfaces list is empty on worker nodes.\nPTP manifest fails to apply on them because of that.\n\nCloses-Bug: 1850434 \nCloses-Bug: 1850462\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\nChange-Id: I985f26ed67d20630c391ccf8905f0463cb5f73a1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"CEPH support for 2 node configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Reserving libvirt default migration port range\n\nThe default live-migration port range (49152-49215) that is\nspecified by libvirt and used by qemu (qemu.conf) conflicts\nwith CentOS ephemeral port range (32768-60999) and eventually\nit leads to connection errors during live-migration operations.\n\nReserving this port range from ephemeral range on worker nodes,\nso only explicit port binding will be available for those ports.\n\nCloses-Bug: #1941646\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I8a8705bf3939aa4fe1faf8f5d487ac64096ea880\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move DNS requirement into kubernetes::master\n\nThis was causing a failure in computes unlock process where the\nPlatform::Dns class cannot be found.\n\nCloses-bug: 1817126\nChange-Id: I0a9e9b60580944a49b9672803fc05216f204b222\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add code that erases routes file prior to its content generation.\n\nWhen generating new contents for the file '/var/run/\nnetwork-scripts.puppet/routes', Puppet reads routes that already\nexist in the file and adds them to the new contents. This behavior\ncauses deleted routes not to be erased from the OS. This commit adds\ncode that erases routes from the file prior to it's content\ngeneration, ensuring that its route list matches sysinv's.\n\nTest plan\n\nFor each test, the following steps were performed:\n1. Run route related command.\n2. Check that changes were applied to the OS.\n3. Lock / unlock host.\n4. Check that changes remain active in the OS.\n\nPASS Add route A. Check that route A is present in the OS.\nPASS Add route B. Check that routes A and B are present in the OS.\nPASS Delete route A. Check that route B is present in the OS and\n     route A is not.\nPASS Delete route B. Check that routes A and B are not present in\n     the OS.\n\nThe tests were performed in the following systems:\n  AIO-SX IPv4\n  AIO-SX IPv6\n\nCloses-Bug: #2015102\n\nSigned-off-by: Lucas Ratusznei Fonseca\n               <lucas.ratuszneifonseca@windriver.com>\n\nChange-Id: Iec4bc1521c42dfd87da4085d80ea03f08028c950\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom cinder policy.json\n\nEnable consistency groups:\n\n    Volumes can be assigned to consistency groups to ensure that snapshots\n    of all volumes in the group are taken at the same point in time.\n    Therefore everyone should benefit from them.\n\n    Based on description at:\n    http://docs.openstack.org/admin-guide/blockstorage-consistency-groups.html\n\nCinder extensions authorization policy\n\n  Add authorization policy for StarlingX extensions:\n  1. volume_extension:snapshot_export_attributes\n  2. volume_extension:snapshot_backup_status_attribute\n\nStory: 2003117\nTask: 23236\nRelated-To: https://github.com/starlingx-staging/stx-cinder/pull/2\n\nChange-Id: I5b1b8025f65d9b8c7209d97ccc19db93ab97693f\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Patch puppet-manifest-apply.sh with workaround\n\nThis is a temporary patch that changes the behaviour of\npuppet warnings on Debian.\n\nA TODO comment was included to point out that this should be\nreverted when all puppet warnings on Debian bootstrap, aio\nunlock and runtime are resolved.\n\nDebian Bullseye tests:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nCentOS 7 tests:\nPASS: Original file is installed instead of patched file\n\nStory: 2009964\nTask: 45507\n\nSigned-off-by: Matheus Machado Guilhermino <Matheus.MachadoGuilhermino@windriver.com>\nChange-Id: I03859d9cdd347fceb6e56557054424f3bb7a02e2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change default pod tolerations to 30sec\n\nBy default, pods will get a toleration of 300 seconds for the\nnotReady:NoExecute and unreachable:NoExecute taints.  This is\nexcessively long for our purposes.\n\nThis commit changes the commandline args for kube-apiserver to use\n30 seconds for each of these instead to get a faster response time.\n\nChange-Id: Ic7153e0ea03a1835efcd907cbcef8c8715a0539d\nPartial-Bug: 1829432\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update the kubernetes bind mounts based on the desired versions\n\nBefore calling kubeadm/kubelet/kubectl we want to ensure that the\nbind mounts are properly set up so that we get the version of the\ncommand that is appropriate.\n\nWe probably don't actually need to check the bind mounts in\nclass platform::kubernetes::kubeadm since on initial install the\nansible playbooks will set it, and during a kubernetes upgrade\nthe runtime manifests should set them and persist the changes to\n/etc/fstab.  That said, it won't hurt anything and won't add much\ndelay to double-check on host startup.\n\nWe also may not need to check the bind mounts in\nclass platform::kubernetes::upgrade_first_control_plane since the\nkubeadm mount for the first controller should have been updated in\nclass platform::kubernetes::pre_pull_control_plane_images and the\nkubelet mount doesn't get updated until\nclass platform::kubernetes::master::upgrade_kubelet.  But again\nit shouldn't cause problems to double-check it.\n\nStory: 2008972\nTask: 42880\nChange-Id: I3ec63c7ed069e521df320ebddb2e71aa8a9eedfe\nDepends-On: https://review.opendev.org/c/starlingx/config/+/802302\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix umask not found when applying kubernetes.pp\"",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP] Puppet task to set currentUtcOffetValid for ptp4l\n\nAdd a task to apply the generated pmc command for each ptp4l instance.\n\nThe pmc command must run after the given ptp4l instance has been\nstarted.\n\nTests:\n\nPass: Build and install on AIO-SX\nPass: Validate that parameter is set and removed correctly, check\nthat the flag is present in Announce messages\nPass: Validate that the system TAI clock has the correct offset\nfrom CLOCK_REALTIME\nPass: Add the new param to the wrong instance type or with a bad value\nand ensure there are no adverse affects\n\nStory: 2010033\nTask: 45378\n\nDepends-on: https://review.opendev.org/c/starlingx/config/+/842003\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: If6b224e1f1e63a42c55b6657ace3959563071bf7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow DNS server configuration for kubernetes\n\nIn kubernetes deployments, a DNS server is required to locate\nthe registry servers used to download the kubernetes images.\nCurrently, when config_controller is run, the 8.8.8.8\nnameserver is used, with no way to change it. Some users\nneed to specify their own name server to be used during\nthe execution of config_controller.\n\nThis change allows the user to specify up to three DNS\nservers when running config_controller interactively or with\na config file. If using a config file, add the following\nsection to the config file (only one nameserver is required,\nbut up to three are allowed):\n\n[DNS]\nNAMESERVER_1=8.8.8.8\nNAMESERVER_2=8.8.4.4\nNAMESERVER_3=9.9.9.9\n\nChange-Id: I59556138a11c6f627f45886a2da6b8a1ad9d89e1\nCloses-bug: 1812449\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add NAT rule for subclouds using the admin network\n\nFor subclouds using the admin network, the connection to the\nsystem controller operates exclusively via the admin network.\n\nIn this configuration, only the controllers of a subcloud\nhave an admin network and associated interface.\n\nThe management network of the subcloud is essentially private\nand is used by other nodes of the system (ie. worker) to\ncommunicate internally.\n\nOne problem posed by this is LDAP authentication.  Because the\nLDAP server is located on the system controller, a worker node\n(without an admin network connection) will have an issue\nconnecting to the server.\n\nThe worker node _does_ have a default route to the subcloud's\ncontroller nodes.  The controller nodes _do_ have a route to\nthe system controller.  The issue occurs in the opposite\ndirection.  Because the subcloud's management network is\nessentially private, the system controller will not know how\nto send responses to the worker node.\n\nThis commit in part resolves this issue by enabling an\nLDAP SNAT rule which will translate worker traffic to the\nLDAP server to the appropriate admin network address.  This\nway, the return traffic from the system controller will know\nwhere to go.\n\nNote:\n\nThis commit also adds the ability to add specific ports to\nan SNAT rule.  The dports has been taken away from the\nkubernetes-nat rule, as:\n\n1. It was not even used\n2. Adding ports to a rule with a protocol of 'all' will cause\n   errors in puppet/iptables.\n\nTesting:\n\nPASS: NAT rule is created on fresh install w/ admin network\n      present.\nPASS: NAT rule is deleted on deletion of admin network\n      address pool.\nPASS: At runtime, update the subcloud between usage of\n      admin / management network.\nPASS: kubernetes-nat rule is still present and unchanged\n      after this commit.\n\nStory: 2010319\nTask: 48612\n\nChange-Id: I0a52456f580b060cd9740d0c3de9c79b0e5d4ad1\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update correct iptable config values in /etc/sysctl.d/k8s.conf\n\nThe /etc/sysctl.d/k8s.conf file is missing the below iptable config\nvalues which causes the error in kubeadm init -\n\"/proc/sys/net/ipv6/conf/default/forwarding was not set to 1\"\nduring optimized BnR opearion.\n\nnet.ipv4.ip_forward = 1\nnet.ipv4.conf.default.rp_filter = 0\nnet.ipv4.conf.all.rp_filter = 0\nnet.ipv6.conf.all.forwarding = 1\n\nRecent changes in the below review modified the way Kubernetes is\nrestored. It exposes the incorrect kernel parameters in stx-puppet.\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/890370\n\nThis change updates the correct iptable configuration values in the\nfile /etc/sysctl.d/k8s.conf during bootstrap which fixes the\noptimized BnR operation failure.\n\nThese settings are intended to exactly align with the settings\nalready being configured by the bringup-kubemaster task in the\nansible-playbooks.\n\nTest Plan:\nPASS: Fresh install ISO as AIO-SX. Verify that /etc/sysctl.d/k8s.conf\n      have the correct configuration values.\nPASS: Performed optimized BnR on IPv4 enabled AIO-SX.\nPASS: Performed optimized BnR on IPv6 enabled AIO-SX.\n\nCloses-Bug: 2038545\n\nChange-Id: I585117190b2372cfd7c978eff9bd9ff6da61a88f\nSigned-off-by: Ramesh Kumar Sivanandam <rameshkumar.sivanandam@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement Active-Active Heartbeat as HA Improvement\n\nThis update removes hbsAgent configuration from SM now\nthat it is no longer an SM managed/monitored process.\n\nStory: 2003576\nTask: 24907\n\nDepends-On: https://review.openstack.org/#/c/617835\nChange-Id: Ifceb92b5e82c45e1ac42068d11675006f2586169\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add container runtime interface (CRI) placeholder to config.toml\n\nThis commit extends containerd config.toml template file  to include\nplaceholder for custom CRI entries. The custom CRI entries can be\nspecified via service-parameter method (Change-Id: Icc5fd16 stx/config).\n\nStory: 2008434\nTask: 41389\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/776220\n\nSigned-off-by: Babak Sarashki <babak.sarashki@windriver.com>\nChange-Id: Ib1dd5bd2fbb5e386cf06ab4161226c3bf6f107ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Exempt keystone sysinv user from failed auth lockout\n\nKeystone sysinv user is heavily used by multiple services especially\nin DC system. Particularly it is used by DC subcloud as the user to\npull docker images from Central Cloud. This could cause the sysinv user\nto be locked out due to multiple failed authentication during certain\noperations such as subcloud rehoming, where the rehomed subcloud is\nusing the password from the original DC to access the destination DC's\ncentral registry before changing to use the password of the destination\nDC.\n\nThis update exempts keytone sysinv user from failed auth lockout by\nsetting sysinv's 'ignore_lockout_failure_attempts' option to true\nduring first controller bootstrap.\n\nThis is re-work of commit: 02f086e4f97b409e6f8df2409edc907a5e0d55ea\n\nTest Plan:\nPASS: Deploy a SX and DX systems. After first controller is unlocked,\n      verified 'ignore_lockout_failure_attempts' option is set to true\n      for sysinv user in keystone Database.\nPASS: Lock/unlock controllers, verify the option doesn't change.\n\nCloses-Bug: 1949117\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ia7a7841494b11a2cdb208509a3b0f85d56a57180\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Install secondary controller nodes with kubeadm join\n\nKubeadm init is no longer supported for installing secondary nodes in an\nHA kubernetes cluster. kubeadm join with the --controller-plane option\nshould be used.\n\nChange-Id: I21a30b9e871d05c59a19e33a9d278f0217682da6\nCloses-Bug: 1846829\nDepends-On: https://review.opendev.org/702797\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce runtime extension classes for patchability\n\nThis update introduces a set of empty extension classes that can be\nused in patches to safely introduce new runtime classes. The patch can\nupdate an unused extension class to include the new runtime class,\nallowing sysinv to be patched to apply the selected extension class\nrather than the new runtime class directly. This allows sysinv to\nsafely apply the class on a remote host, even if the host has not yet\nbeen patched.\n\nCloses-Bug: 1931270\nSigned-off-by: Don Penney <don.penney@windriver.com>\nChange-Id: I302d7100a52d085aa5c58f80173edb5cfd490054\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix invalid multi-drivers-switch cmdline parameter\n\nThe multi-driver puppet implementation did not account for the\nservice parameter set to an empty string that happens during\nsystem upgrade causing reboot loop.\n\nTesting:\nPASS: upgrade/unlock controller-1 and upgrade/unlock controller-0 successfully\n\nStory: 2010326\nTask: 46772\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: I77ca2531c6181e50664e77629281e5cd7979e0e1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change 'sysadmin' default shell to bash\n\nThe user 'sysadmin' by default uses /bin/sh. Changing it to\n/bin/bash will enable k8s commands autocompletion.\n\nTest Plan: (On both CentOS and Debian)\nPASS: Install AIO-SX lab. Verify k8s commands autocomplete\n      works. Perform lock, unlock and reboot operations.\n      Verify that the sysadmin continues to use /bin/bash as the\n      default shell and k8s autocomplete works after each\n      operation\n\nCloses-bug: 1942455\n\nSigned-off-by: Kaustubh Dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Ibe2f097b77d7c2b6842b309faf7b5a35a89fad49\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"fix two coredns pod in simplex system\"\n\nThis reverts commit 38da2aaa372a12059c40ed3f362f31a5a2955e6e.\n\nThis commit has broken installations. The failure happens\nafter installing the first controller and unlocking it.\nNone of the SM managed services will start due to a\nfailure applying the puppet manifest.\n\nChange-Id: I65bd3dac79e6788d6708d5f22be1bef1cbff3fbd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet-mtce Debian packaging\n\nAdd debian infrastructure for puppet-mtce.\n\nStory: 2009101\nTask: 43308\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: Ib7cee79e94b718d356aaf8dc0e56e361b7cbf7cd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "One Node System install stuck in degraded state\n\nThe cloud platform is configured explicitly to not use LVM metadata\nservice for caching disk metadata.\n\nCurrently LVM puppet is used to (in this order):\n1. set 'use_lvmetad = 0' in /etc/lvm/lvm.conf\n2. stop and disable lvm2-lvmetad.service\n\nLVM metadata is also listening on a socket created by\nlvm2-lvmetad.socket service unit.\nThe socket file is under: /var/run/lvm/lvmetad.socket\n\nIf lvm2-lvmetad.service (LVM metadata daemon) is stopped and\n'use_lvmetad = 1', it can still be started via LVM metadata socket\nwhen needed, such as when running 'lvs' command. This is called\nservice activation by socket in systemd.\n\nThere is a potential race condition in the current LVM puppet\nmanifest, where an LVM command (such as 'lvs') can arrive between\nthe moment lvm2-lvmetad.service is stopped and 'use_lvmetad' is set\nto 0, causing the service to restart. From this moment, with LVM\nmetadata service running and 'use_lvmetad = 0', each LVM command will\nraise the following warning:\n\n\"WARNING: Not using lvmetad because config setting use_lvmetad=0\"\n\"WARNING: To avoid corruption, rescan devices to make changes visible\n(pvscan --cache)\"\n\nLVM command result parsing will be affected and puppet manifest will\nfail. The solution is to update the LVM puppet manifest to ensure\n(in this order):\n\nlvm2-lvmetad.socket is masked and stopped\nlvm2-lvmetad.service is masked and stopped\n'use_lvmetad = 0'\n\nStory: 2002983\nTask: 22992\n\nChange-Id: I16deb7f01fbedf8cb102af932f52834f69eda681\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix puppet-manifest version to 1.0.0\n\nWith the Package Versioning we are moving to standarize\nthe version in the spec files to initially be 1.0.0\n\nChange-Id: Ie65e658e4044c9b89630391f65565a32da421955\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding version acceptor to dcorch proxy\n\nauthtoken validation was causing issues with horizon doing identity\napi version lookups while checking permissions for the application\ncredentials panel when in the SystemController region.  This adds\nan acceptor to bypass the authtoken checks for the identity root\naddress (/v3)\n\nChange-Id: I43bd1b107b74713740238c225c756f88aa42a237\nDepends-On: https://review.opendev.org/#/c/689538\nCloses-Bug: 1846239\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add support for kube-upgrade-abort\"",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Print nic parameters to a conf file\n\nThis change contains three items:\n\n1. Puppet now prints the nic control commands to a conf\nfile in order to better support collectd monitoring and alarming.\n\nThe conf file is generated at /etc/ptpinstance/clock-conf.conf\n\nFormat\n[interface]\nparameter 1\n\n[interface2]\nparameter 2\n...\n\n2. Removes the port_name value that is no longer used and\nwas causing an additional bug where puppet could fail to apply.\n\n3. Rework the nic_clock and nic_reset tasks to correct an issue where\nnic_reset would not correctly run.\n\nMinor cleanup: Removed some unrequired provider => shell parameters on\nvarious exec tasks.\n\nTesting:\n\nRegression: Pass\nPerformed a full build and install, verified that ptp configuration\ncould be applied and clock config is generated.\n\nStory: 2009130\nTask: 44439\nTask: 44440\nTask: 44451\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I9bdf52d334d6e4183ad99e40a3a4e88fa6d62a01\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement Pci Interrupt Affinity Agent\n\nCreate an agent which runs on each worker node to do pci interrupt\naffinity work.\nIn this patch, it will add related puppet file to get configurations\nfrom helm data.\n\nBelow test done and pass, see detailed test spec in story link.\n1) deployment test with/without openstack application\n2) Periodic audit pci irq affinity\n3) Remove VM without sriov pci port\n4) Remove VM with sriov pci port\n5) Add VM without sriov pci port\n6) Add VM with sriov pci port\n7) Add VM without pci_irq_affinity_mask\n8) Add VM without cpu policy set\n9) VM resize test\n10) Remove one pci port for VM\n11) config file apply\n\nStory: 2004600\nTask: 28850\n\nChange-Id: I798180800284feea4a694ff7c20b12dd24dda958\nSigned-off-by: zhipengl <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unnecessary IP for platform-nfs.\n\nIt is not necessary to allocate a specific IP address\nfor NFS.\nIt will use the floating management IP address. So\nthere is no reason to use the platform-nfs-ip service\nanymore.\nWith this change, another IP address is available to\nconfigure an additional Worker node.\n( i.e: subnet /29 )\n\nStory: 2010351\nTask: 46502\n\nTest plan ( Debian only )\nPASS Installed 2+2 system with subnet configuration (/29)\n     (2controllers, 2 workers)\nPASS Installed 2+2 system using IPv6 subnet\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/859902\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I367c42b353f49cdf05b6225e4df613b8e299b929\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Manage remotelogging.conf with a template\n\nRemotelogging.pp uses sed expressions and file_line to change\nremotelogging.conf. Templates is a better way to manage the file.\nThis commit changes the remotelogging.conf to be managed by\npuppet template.\n\nChange-Id: I2e8ef30acdd3200d8d2a4adf4f396c4f2cc21a2a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Periodic message loss between VIM and Openstack pods\n\nThe requests to Openstack services hang/fail sometimes\ndue to message loss when connecting to internal service\nendpoints. This issue was observed before and fixed in\ncommit https://review.opendev.org/#/c/683818/ by setting\nnet.ipv4.tcp_tw_reuse to 0, however, it's still being\nseen on recent STX loads.\n\nIt has been tested and proved that requests go through\ningress pod do not have the issue. In the commit\nhttps://review.opendev.org/750001, pci affinity agent\nhas been updated to talk to keystone public host,\nso this commit updates its default keystone auth\nport to 80 to align with keystone public host.\n\nChange-Id: I10897c7148a07f42f76b4a74258f736245bf9dca\nCloses-Bug: 1880777\nDepends-On: https://review.opendev.org/750001\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove creation of /etc/kuberetes/kubeadm.yaml\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet for Debian Docker module\n\nDocker package name in Debian is called `docker.io`\n\nThis updates docker.pp to support both os packages.\n\nTest Plan:\n\nPASSED Debian: bootstrap and verify docker is running\nPASSED Centos: bootstrap and verify docker is running\n\nStory: 2009101\nTask: 44445\nSigned-off-by: Lucas Cavalcante <lucasmedeiros.cavalcante@windriver.com>\nChange-Id: I51ff4936b7a90e19b07b2870eaa3a9ed0ed43392\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: process route metric parameter\n\nIf the file /var/run/network-scripts.puppet/routes contains the metric\nvalue, it is not processed by apply_network_config.sh\n\nThis change adds the field to be parsed and used with \"ip route add\"\n\nTest Plan:\nPASS  set parameter with system host-route-add and lock/unlock and\n      verify metric value on the kernel\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/844985\n\nCloses-Bug: 1977983\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I60473b0a5471592fc5f07478fe5e82ee55d3be9e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait for control-plane endpoints health during k8s upgrade abort\n\nThis script waits for the k8s control-plane component endpoints\n(apiserver, scheduler, controller-manager, kubelet) to be up and\nrunning at the end of platform::kubernetes::upgrade_abort.\n\nRetry/timeout parameters are configured to wait up to 3 minutes.\n\nTest plan:\nPass: Verify the abort waits for all control-plane endpoints to be\nhealthy.\nPass: Verify /var/log/kubernetes/k8s-endpoints-health.log shows\n'Timeout: Kubernetes control-plane endpoints not healthy' message\nafter timeout exceed.\n\nStory: 2010565\nTask: 48203\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/885582\n\nChange-Id: I232b4746a3eb899ba87e706160547e8792489394\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update haproxy config to include keystone request retry.\n\n- Add keywork retry_on in haproxy::backend\n- Add values retry_on in keystone.pp\n- Modified keystone_http_connect_timeout 10 to 15 in api.pp, api_proxy.pp, certalarm.pp and certmon.pp\n\nthis workaround solves:\n- DC Scale | RR Patch Orchestration fails as it cannot retrieve patches for subcloud after the apply\n- DC Patch - Parallel patch orchestration fails to establish connection to MGMT interface of subclouds\n- Patch orchestration fail due to transient keystone errors\n\nTest plan:\n1. (PASSED) Patch Creation:\n    - Construct a \"reboot required\" RR patch that encompasses the specified changes.\n    - Generate an \"in-service test\" NRR patch.\n\n2. (PASSED) Initial Setup:\n    - Commission a DC system with over 500 subclouds.\n    - Assert that the patch encompassing the fix is applied successfully on the DC.\n\n3. (PASSED) Strategy Creation and RR Patch Deployment (Max 250 Subclouds):\n    - Created a RR patch strategy with max_parallel_subclouds set to 250\n    - Checked that the RR patch strategy is applied to all subclouds successfully.\n    - Repeat this process in more 250 subclouds\n    - Checked that the patch strategy is applied to all subclouds successfully.\n\n4. (PASSED) Strategy Alteration and NRR Patch Deployment (Max 500 Subclouds):\n    - Eliminate the existing patch strategy.\n    - Initiate a NRR patch strategy, adjusting the max_parallel_subclouds parameter to 500.\n    - Checked that the \"in-service test\" NRR patch is successfully applied across all subclouds and that no linked issues arise.\n\nCloses-Bug: #2025646\nChange-Id: I95e9c8f3cd904d7f637da2ea69a83fd7fa5f03a1\nSigned-off-by: Bezerra Filho, Moacir <Moacir.BezerraFilho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ansible Bootstrap Deployment\n\nThis commit is initial submission of bootstrap playbook which\nenables the bootstrap of initial controller. The playbook\ndefaults are meant for configuring the localhost in vbox\ndevelopment environment. Custom hosts file and user overrides\nare required for configuring multiple hosts and lab specific setup.\nSecret file and SSH keys are required for production test enviroment.\n\nTests performed:\n - installation\n - config_controller complete to ensure the current method of\n   configuring the first controller is intact\n - localhost bootstrap with default hosts file\n - multiple remote hosts bootstrap with custom hosts file\n - reconfigurations with user overrides\n - stx-application applied in AIOSX and AIODX\n - Failure & skip play cases (invalid config inputs, incorrect load,\n   connection failure, no changes replay, etc...)\n\nTODO:\n - Support for standard & storage configurations\n - Docker proxy/custom registry related tests\n - Package bootstrap playbook in SDK\n - Config_controller cleanup\n\nChange-Id: If553f1eeed32606bacc690ef277e60606e9d93ea\nStory: 200476\nTask: 29686\nTask: 29687\nCo-Authored-By: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Set default value for private_dc_ip_address\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Call nova-sriov script only at initialization\n\nCalling script nova-sriov as part of openstack::nova::compute::runtime\nresults in the loss of sr-iov interfaces for an active instance.\n\nThis fix ensures calling of script nova-sriov is limited to when we\napply compute manifests (ie on unlock).\n\nChange-Id: I895a252dafc8677fcbfce4bcd2b2f50a2732ff32\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Decouple Fault Management from stx-config\n\nList of changes:\n1.Remove all fault management (FM) database tables from sysinv DB\n2.Remove all FM commands from sysinv REST API service\n3.Remove all FM CLI commands from cgts client\n4.Add FM user to config controller to support region config\n5.Update backup restore to reference the new alarm database table\n6.Update controller config test files and add the new FM user\n7.Add a FM puppet module in order to manage configuration data and\n  database; to configure user, service and endpoint in Keystone\n8.Add a FM puppet operator to populate FM and SNMP configuration data\n9.Update NFV puppet to support FM endpoint configuration\n10.Update haproxy manifest to support active-active FM API service\n\nStory: 2002828\n\nTask: 22747\n\nChange-Id: I96d22a18d5872c2e5398f2e9e26a7056fe9b4e82\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Makefile to puppet-dcdbsync\n\nThis puppet module was missed when the other ones were updated to use\nMakefile for the install target.  Add the Makefile and update the\ncentos specfile to use the install target.\n\nStory: 2006613\nTask: 36801\nTask: 36802\nChange-Id: If3e13cb235469354c1778d4d0e0bab94b0b0e670\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "New service parameter for intel_pstate\n\nThis commit implements changing boot commandline intel_pstate using\nthe service parameter mechanism. The new \"intel_pstate\" parameter\ngets stored as a system-wide service parameter and is instrumented\nfor controller, worker and storage personalities.\n\nintel_pstate can be set to [disable, passive, force, no_hwp, hwp_only,\nsupport_acpi_ppc, per_cpu_perf_limits], and none is the default.\nhttps://www.kernel.org/doc/Documentation/admin-guide/pm/intel_pstate.rst\n\nThe service parameter command will be used to change intel_pstate\nkernel boot parameters.  The new value will take effect only after\nnode unlock (reboot).\n\nTesting:\nPASS: Verify standard installation\nPASS: Verify service parameter configuration using valid/invalid values\nPASS: Verify intel_pstate boot parameters on all nodes\n\nPartial-Bug: 2016842\nSigned-off-by: Jiping Ma <jiping.ma2@windriver.com>\nChange-Id: I3c52e4b26ca8c657e2d62030d07f36eff30bb9e5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup legacy rehome manifest\n\nSome of the existing puppet manifests are no longer required during\nthe subcloud rehoming. This commit removes the legacy manifests.\n\nTest plan:\nPassed - rehome a AIOSX subcloud between two DCs\n\nDepends-on:\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/859888\n\nStory: 2010230\nTask: 46580\n\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I9275441babf172805c88ffa36c87575ca64ca172\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision cert-mon service on DC controllers\n\nDepends-on: https://review.opendev.org/#/c/738029\nChange-Id: I88c623e13b59a8e20d8f067f51bfce09b93630f5\nStory: 2007347\nTask: 40174\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Set neutron dhcp host agent scheduler to host-based\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase open FD soft limit of docker-distribution\n\nIn a large scale system, when pulling a large number of images in\nparallel, the docker-distribution(registry) service will hit the open\nfile soft limit, most of them are network sockets, throwing errors like\n\"too many open files; retrying in ...\". To avoid that, this commit\nincreases the open file soft limit to 4k, which equals its default\nhard limit of the service in centOS.\n\nTest passed:\n1 Deploy an AIOSX system with this change, check the open file limit\nis increased to 4k after deployment.\n2 Verify the open file limit remains 4k after restarting the\ndocker-distribution by 'sm-restart service docker-distribution.\n2 In a large DC system, increase the open file limit of\ndocker-distribution service to 4k, then apply an application on all\nthe subclouds to pull images from the central registry in parallel. Can\nnot see this error any more\n\nStory: 2009725\nTask: 45116\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I8b18b2802e2ee569f50c6bb1272ee93c4eeed5c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new kubelet filesystem to host_fs\n\nAdd a new filesystem called \"kubelet\" to all hosts with a default\nsize of 10G. This new fs will be managed by the host_fs API.\n\nAlso made the scratch filesystem resizable on all hosts.\n\nTested with install of hardware Standard and AIO-DX labs. Also\ntested install of a vbox AIO-SX lab.\n\nPartial-Bug: 1830142\nDepends-On: https://review.opendev.org/671120\n\nChange-Id: I968f84b8ba7a069ec3d7027d4eb4a7355a06d9d3\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update SR-IOV CNI images to StarlingX versions\n\nThis commit updates the SR-IOV CNI and device plugin images to point\nto StarlingX generated stable images rather than those from the\n(previous) nfvpe repo.\n\nThis change allows us more control over the specific version of these\nprojects that will be used in StarlingX.\n\nStory: 2005208\nTask: 33485\nDepends-On: https://review.opendev.org/#/c/661757\nChange-Id: I764c2ef01c24f5e8d29be8eca7e3682752315efc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom ceilometer configuration files\n\nWe have some custom configurations in pipeline.yaml and polling.yaml\nin stx-ceilometer. This update configures those yaml files through\npuppet instead.\n\nCustom changes:\n1. Add csv_sink and vcpu_sink in pipeline.yaml\n2. Enable more polling meters in polling.yaml\n\nStory: 2003120\nTask: 23239\n\nChange-Id: I06ee94752a7bae396d767d0577d8a4a6204779f8\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cluster network cleanup\n\nAdd cluster_host_interface to /etc/platform/platform.conf.\nOnce the services are converted to use cluster_host_interface,\nthe infrastructure_interface will be removed.\n\nStory: 2004273\nTask: 29472\n\nChange-Id: I3a989fef6441be231368d6eeebb3725145b15f37\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Limit number of notification workers to 10 max\n\nThe current setting of ceilometer notification workers can result in\nan excessive number in multi-node system with high core controllers.\nIt should be limited to 10 max to avoid unnecessary system resources\nconsumption and to improve vcpu scaling responsiveness. The degraded\nvcpu scaling performance is caused by time taken to rebuild the\ntransformer caches in all workers following a swact/service restart\nas well as the increased cpu sample age in these caches.\n\nTests conducted: sanity, nightly sanity and 25 iterations of vcpu\nscaling tests in multi-node system with 32-core controllers.\n\nCloses-Bug: #1790679\n\nChange-Id: I47b7f14a75846fd9765e9a2ea2fb3ca3a6cad01a\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kdump config remove Mellanox eth drivers from ramdisk\n\nThis is just an extension of commit:\n\nf46c154188b5d90bdd19ba2a5952b4f8c565d5d3\nkdump config remove intel eth drivers from ramdisk\n\nwhere we removed all of the Intel ethernet drivers\nfrom the kdump ramdisk.  They were chewing up scarce\nmemory and are not needed to dump a vmcore.  We should\nhave also removed the Mellanox network drivers at the\nsame time.  There are some reports of nodes containing\nMellanox cards failing to dump the vmcore after\na kernel crash.\n\nVerification:\n- ensure that /etc/kdump.conf now has the omit line\n  containing the Mellanox drivers\n- on plaform containing Mellanox cards, force a\n  crash dump via echo c >/proc/sysrq-trigger .  On the\n  serial console, watch the crash kernel boot up and\n  observe that the Mellanox hardware is no longer\n  initialized by a driver.  Watch that the vmcore dump\n  completes successfully.\n\nChange-Id: I721fef3e5e4769d821d3146c126b0ec908beed75\nCloses-Bug: 1957938\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix mtce.pp to handle missing /etc/rmonfiles.d directory\n\nhttps://review.openstack.org/#/c/628687/  stopped packaging the\nquery_ntp_servers.sh script. However, since there were no other\nfiles being packaged into that directory the spec file choose\nnot to create an empty directory.\n\nWhen config controller called the mtce.pp manifest to install\ndynamic files into /etc/rmonfiles.d it could not. So it failed.\n\nThis update adds a directory check block to the mtce.pp file\nto create the directoy if its not present.\n\nTesting: Install AIO SX in SM1\n\nChange-Id: Ib2dfadb261be6f9ebbaa7213eb6669b25158c779\nCloses-Bug: 1811693\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Cloud keystone scalability\n\nCurrently the RegionOne keystone and sysinv endpoints created at\nbootstrap remain after controller manifest fully applied. This patch\ncleanup these 6 endpoints from keystone by removing them once subcloud\nregion endpoints are created.\n\nStory: 2002842\nTask: 22785\nDepends-On: https://review.openstack.org/587415\n\nChange-Id: I1d7c57eef80336c08779bbfc1497cb219955aad9\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "K8s custom configuration: extra-volumes and kubelet support\n\n- ExtraVolumes runtime custom configuration support has been added.\n- Kubelet runtime custom configuration support has been added.\n- Created/updated log entries to improve understanding of the\n  update process.\n- The change_k8s_control_plane_params script timeout was updated\n  to 600 seconds due to the average update time resulting from\n  different test cases.\n- An initial backup for the control-plane components will be\n  ensured from puppet.\n\nTest Plan:\n  PASS: Fresh Install with Debian AIO-SX and DX/STD.\n  PASS: Backup and Restore. Debian AIO-SX and DX/STD.\n  PASS: Backup and Restore with optimize mode. Debian AIO-SX and DX/STD.\n  PASS: Upgrade from 22.06 CentOS to 22.12 Debian.\n  PASS: Extra-Volumes runtime testing\n    1) File Type:\n      * Add service-parameter that requires a config file.\n      * Add extra-volume parameter.\n      * Apply changes on kubernetes service.\n      * Verify cluster health and configuration.\n    2) Directory Type:\n      * Add service-parameter that requires a directory.\n      * Add extra-volume parameter.\n      * Apply changes on kubernetes service.\n      * Verify cluster health and configuration.\n  PASS: Kubelet runtime testing\n    1) Add valid parameter with valid value & apply.\n       - Pod updated successfully.\n    2) Modify valid parameter with valid value & apply.\n       - Pod updated successfully\n    3) Modify valid parameter with invalid value & apply.\n       - Pod update failed.\n         Auto recovery process completed successfully.\n    4) Delete latest added parameter & apply.\n       - Pod updated successfully.\n    5) Add valid parameter with invalid value & apply.\n       - Pod update failed.\n         Auto recovery process completed successfully.\n    6) Delete latest added parameter & apply.\n       - Pod updated successfully.\n    7) Add invalid parameter (not spuported by kubelet)\n       - Pod update failed.\n         Auto recovery process completed successfully.\n\nStory: 2009766\nTask: 46888\nDepends-On: https://review.opendev.org/c/starlingx/config/+/865171\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I27f500aa2805c8fe86b665aa5d2c631617733c88\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Copy front-proxy server certificates to second master\n\nCopy the front-proxy server certificates to the second master\nwhen it is installed so they match the certificates on the\nfirst master.\n\nChange-Id: I83b63f7fdb96403c217ca7aaa024d11315d27df2\nCloses-Bug: 1855915\nDepends-On: https://review.opendev.org/#/c/698350\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create mon runtime puppet class\n\nCreate the class platform::ceph::mon::runtime to be used to change at\nruntime if ceph will accept insecure global id reclaim.\n\nUsing this a caller can change the param $auth_id_reclaim (which\ndefaults to false). When the value is true id reclaim is allowed and\nthe respective alarms are disabled, otherwise, if the param is false id\nreclaim is forbidden and the respective alarms are enabled.\n\nTest plan:\nApply Sysinv service-parameter which changes param $auth_id_reclaim in\nthree states:\n    - True\n    - False\n    - Null\n\nStory: 2009867\nTask: 44562\nChange-Id: I856924c56c2a6005d9e1889d2a6b0fb049b00b08\nSigned-off-by: Delfino Curado <delfinogomes.curadofilho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "dcdbsync for containerized openstack services - puppet\n\nThis update contains changes to deploy and config the dcdbsync instance\nfor containerized openstack services, including:\n\n- Added a set of puppet modules to generate configuration file for the\n  openstack dcdbsync instance to run on platform.\n- Updated dcdbsync puppet with runtime classes to be called after\n  stx-openstack application is succussfully applied to generate the\n  configuration for openstack dcdbsync instance, and to remove the\n  configuration file once stx-openstack is removed. The dcdbsync\n  instance for openstack is also deprovisioned and stopped once\n  stx-openstack is removed.\n- Update sm runtime puppet to provision/deprovision the openstack\n  dcdbsync service.\n\nThe overall procedure is, during stx-openstack app application,\ndcdbsync identities will be created in containerized keystone. After\nstx-openstack is successfully applied the dcdbsync runtime puppet is\ncalled to generate the configuration file for openstack dcdbsync\ninstance with some information retrieved from helm (particularly\nkeystone passwords). Finally sm runtime is called to bring up the\ndcdbsync service into running. When stx-openstack app is removed,\nopenstack dcdbsync instance will be cleanup with configuration file\nremoved and service deprovisioned and stopped.\n\nChange-Id: I6119a3c37b1c534c8f8059c0939609e4f4b031b7\nStory: 2004766\nTask: 36104\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix directory permissions for /var/log/rabbitmq\n\nUpdated /var/log/rabbitmq directory permissions to 750 from 755\nto disallow world access to rabbitmq log files but at the same\ntime to allow group access.\nThe changes are made to comply as much as possible with\nopenscap rules security requirements.\nVerified that installation is successful for AIO-SX\nand Standard 2+2 system configurations.\n\nStory: 2008037\nTask: 40694\n\nChange-Id: I1c0112575033c04983c56298e2131882911333de\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Ceph split brain on multinode\n\nDue to changes that make Ceph work on 1 node configuration\n'mon_initial_members = controller-0' was added to /etc/ceph.conf.\nThis settings allows ceph to work with a single monitor. On\nmultinode it may cause brain split as controller-0 may start by\nitself if it is not able to immediately connect to the good cluster.\n\nThis will also cause problems at Backup & Restore when controllers\nare reinstalled but older ceph cluster is recovered. In this case\nvalid monitor data present on storage-0 is downloaded by the monitor\non controller-0. Problem is that if mon_initial_members = controller-0\nthen the monitor on controller-0 will be happy to start by itself and\nwill not download the valid data from storage-0 leading to a possible\nbrain split condition.\n\nThis commit sets this option for 1 node configuration only and\nkeeps it undef for multinode.\n\nChange-Id: I01d5563260ad211b04fe4904c32f255f4e683b07\nCloses-bug: 1801772\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Tweaked configuration file to be used by ACC100\n\nWith the upgrade of pf-bb-config tool used to configure Mt.Bryce device\nalso another configuration file is used. Furthermore, this configuration\nfile has the 'num_vf_bundles' field modified to match the number of VFs\nactually configured by 'system host-device-modify' command.\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/797736\nCloses-bug: #1933372\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I22cfc1abe3532a1c1be9c560a499771445d96f7f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubeadm config view in update certSANs\n\nThe command kubeadm config view became deprecated in k8s v1.19 and was\nremoved in k8s v1.22 as reported on\nhttps://github.com/kubernetes/kubeadm/issues/2203.\n\nThis work replaces this command with its equivalent kubectl replacement.\n\nTest Plan:\n\nPASS: Verify command `system oam-modify` changes the OAM IP successfully\nPASS: Verify advertise address isn't reset during OAM IP change\n\nRegression:\n\nPASS: Verify SX system install\n\nCloses-Bug: 1955830\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\nChange-Id: I391a837c43a9836fc3007bc71dcbf313004eeb6e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow vswitch_class to be configured\n\nThis commit adds a vswitch_class option to platform::vswitch::params,\nwhich specifies which class is to be used for the virtual switch.\nIn order to enable OVS as the default virtual switch, this defaults\nto ::platform::vswitch::ovs, but can be overwritten to allow using\na different virtual switch.\n\nStory: 2003526\nTask: 24802\nChange-Id: I3a1d3eebd4220fdf342a5269f33e786241e218e0\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"debian: change lvm backups location for debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "downgrade calico to v3.1.4 and add IP autodetect\n\nCalico is being downgraded to v3.1.4 since the latest versions\nare causing readiness and liveness failures.  Based on K8S v12.1,\nCalico should be on v3.3.x, therefore the underlying issue should\nbe investigated further and Calico upgraded once resolved.\n\nThis update also changes the IP autodetect method to ensure the\nproper IP is selected.  This is required for hosts that have\nmultiple IP addresses and the wrong address is being selected\nbased on the default find first address method.\n\nChange-Id: I31c3630bde69160786866d0bc1bc29816892943f\nStory: 2002843\nTask: 22791\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial changes to enable new upgrades\n\nMaking initial changes to enable new upgrades. Most\nof the changes are related to removing older upgrade code that\nis no longer necessary (i.e. all the packstack to mattstack\nconversion code).\n\nChange-Id: I8fe4c8c0d3f12fd7b4fc45b226bf969ffda72dc7\nStory: 2002886\nTask: 22847\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enhance glance to support distributed keystone\n\nAs part of Distributed Cloud keystone scalability, this patch enhance\nglance to support distributed keystone in DC config.\n\nThis patch include:\n- enhance glance store driver to support authentication to system\n  controller keystone by username and password, so that glance client\n  can talk to glance registry on system controller to fetch images\n  created on system controller.\n- enhanced puppet manifest to configure glance-api and glance-registry\n  on both system controller and subcloud.\n\nChange-Id: I6a7a4c593407b7d3f28b2f51b402936927963039\nStory: 2002842\nTask: 22785\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Tiller upgrade prep\n\nRemoves references of the armada image name in sysinv.conf. Image\nversions will be stored in sysinv/common/image_versions.py.\n\nDepends-On: https://review.opendev.org/684401\nStory: 2006590\nTask: 36725\n\nChange-Id: I53ca532f87a592310d1a05d0c8c98f72d3bc0f9c\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: labeled interface stanza creates deprecated IPv6 address\n\nLabeled interface stanzas for inet6 family are creating deprecated\naddresses, due to ifup internal logic (it is setting preferred_lft to\nzero). If an IPv6 address is marked deprecated it will not be used as\nsource address for communications from the interface.\n\nThis change makes the parser identify these cases and sets the label\ninterface to the base interface for the first label (e.g. :1) used by\nsysinv to identify as platform networks when generates the\ninterfaces file in /var/run/network-script/\n\nTest Plan (Debian only)\n[PASS] install and unlock AIO-DX with IPv6 network, using management\n       and cluster-host on the same interface vlan.\n[PASS] executed a follow up lock/unlock to use the generated scripts\n       in /etc/network/interfaces.d/\n[PASS] add/edit/remove interfaces and then lock/unlock\n\nStory: 2009968\nTask: 46251\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I9ee27bb9181d196559c3e0143c3e4d859ca0413a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix haproxy/novnc interaction in containers setup\n\nnova-novncproxy pod is currently listening at platform floating mgmt\naddress port 6080 in containers setup.  However this implicitly requires\nthe pod to track the active controller which is not desired or\nenforceable causing the pod to frequently fail to come up.\n\nTo fix, don't override config option vnc/novncproxy_host.  This will\nrevert behaviour to upstream default of listening at 0.0.0.0:6080 but\nalso requires that we do not configure nova forwarding in haproxy to\navoid port conflict.  This is in line with overall networking\narchitecture for containers.\n\nStory: 2003909\nTask: 27081\nChange-Id: I8eff1ad837c6a874a2a11e2f6bc73876042bb171\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create hugepage mountpoints where openstack-helm expects it.\n\nBy default, libvirt and openstack-helm expect the hugepage mountpoints to be\nunder /dev, while we currently use mountpoints under /mnt.\n\nTo get containerized libvirt working, add a set of mountpoints under /dev.\nLater on we can switch our existing code over to use the new mountpoints\nand remove the mounts under /mnt.\n\nJust to make things interesting, the libvirt helm chart also expects the\ndefault hugepage size (2M in our case) to be mounted at /dev/hugepages, so\nwe add another mountpoint for that pagesize.  Ideally we'd upstream a helm\nchart change to auto-detect the mountpoint, at which time we could remove\nthis hack.\n\nChange-Id: I88baa169dd357e73295aa32f4044da35e3a7fd6a\nStory: 2003909\nTask: 27081\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Boost sm process priority in VBox environment\n\nThere is an instance that sm claimed its main thread ran sluggish\nas some critical timer run behind the scheuled timing.\nThe issue could prevent the sm from scheduling services.\nAs the result, the controller could fail to enable.\n\nThe issue was found only on vbox labs on AIO-SX, the fix is to boost\nsm process priority to nice value -10 from current -2.\n\nCloses-Bug: 1816764\nDepends-On: https://review.openstack.org/638664\nChange-Id: Iafa17b1c47d65cc7394552ea1c8e7a78398e4869\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Remove armada and helm v2\"\n\nThis reverts commit 9c5a2af47bffbfa581f982b27bb24187e370f7f2.\n\nChange-Id: Ic07fa7d4d6c2cb4b8ef2f4c12c9426578c9c86e3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart kubelet after hugepage allocation\n\nOn AIO systems, kubelet is launched prior to the application\nof the worker puppet manifest. However, in some cases, the\nhugepage allocation is occurring as part of this manifest\napplication, and kubelet does not have these hugepages in\nits availability.\n\nTo address this, the kubernetes manifest is updated to define\na refresh dependency against the hugepage allocation on AIO,\nin order to restart kubelet if needed.\n\nChange-Id: I3289b83fb5bf93553b786694a153be84a97ebe8d\nCloses-Bug: 1830927\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet manifests missing networking dependencies\n\nDuring initial unlock of the controller, we see memcached thrashing\non startup for several minutes. In addition, NTP date setting hangs\nfor a couple of minutes before failing. Both cases are due to the\nservices being launched in the puppet manifest before the networking\nconfiguration is done, and both need networking configured to run\nsuccessfully.\n\nThis update adds a dependency against networking configuration for\nboth memcached and NTP setup in the manifests. For NTP on the\ncontroller, the dependency is added against DNS configuration, which\nin turn is dependent on networking config. This ensures DNS config\nis also complete before attempting NTP setup, which may use\nhostnames for NTP servers.\n\nCloses-Bug: 1830805\nChange-Id: I8f9f612e3aad3ad71a511d0d5415e2a05acbc0c1\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove InfluxDB\n\nInfluxDB was not fully productized, nor is it used by other end-users.\nIt should therefore be removed from all deployments to avoid it\nconsume unnecessary resources (cpu, memory and storage).\n\nParts of system's dependencies with InfluxDB were remove here.\n\nStory: 2009018\nTask: 42760\nDepends-On: https://review.opendev.org/799502\n\nSigned-off-by: Fernando Theirs <Fernando.Theirs@windriver.com>\nChange-Id: I74e8c0078501506557a8df5d641493c1055dfcbf\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: Duplicate puppet resource for SR-IOV VF driver\n\nThis commit fixes a bug which can be seen if more than one interface\nis configured with the same SR-IOV VF driver.\n\nIn this case a duplicate puppet resource error will occur after host\nunlock.\n\nCloses-Bug: #1831077\nChange-Id: I7eeedfdbba62e1a0c71ce367bd717fdafb44ca63\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca host update trustNewCA\n\nAdded puppet runtime classes for master node and worker node.\nThis manifests will\n- update k8s components configuration to remove any possible\nregistry of the old rootCA\n- restart services like sysinv-conductor and cert-mon\n- rearrange files to the initial state, as they were organized\nbefore the procedure, now with the new k8s root CA.\n\nStory: 2008675\nTask: 42706\nChange-Id: I590fd2ee212333aed01443bc6873d1dd9d667363\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove support for nova-local lvm backend for compute hosts\n\nThis story tracks the removal of the nova-local lvm backend for compute\nhosts. The lvm backend is no longer required; nova-local storage will\ncontinue to support settings of \"image\" or \"remote\" backends.\n\nThis story will remove custom code related to lvm nova-local storage:\n- the 'sysinv host-lvg-modify' command is modified:\n\n  --instance_backing lvm parameter is removed\n  ('image' and 'remote' remain)\n\n  --instances_lv_size_gib <size> option is removed\n\n- puppet instances_lv_size configuration is removed\n\n- local_lvm is removed from storage host-aggregates\n\nDocImpact\nStory: 2004427\nTask: 28083\n\nChange-Id: I5443a07f8922bcab7fa22e5ff8fc2d0ff3fb109d\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set the correct memcached server in puppet ceilometer\n\nThe existing memcached server address configured in puppet ceilometer\ncannot be recognized by memcached in an ipv6 system, this causes the\nfailure of caching ceilometer resource metadata.\nThis update is to correct the format of memcached server configured in\nceilometer puppet for ipv6 system.\n\nCloses-Bug: 1790662\n\nChange-Id: Icfdcb688cb0740d10c5d970e53564680e75058e9\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Platform restore for AIO-DX and Standard no-storage configuration\n\nThis commit is to support platform restore for AIO-DX and Standard\nno-storage configuration using restore_platform playbook:\n - For AIO-DX, the restored ceph crushmap is loaded through puppet\n   when controller-0 is unlocked for the first time. OSDs are\n   created on controller nodes during controller unlock.\n - For Standard no-storage configuration, the restored ceph crushmap\n   is loaded through sysinv when ceph quorum is formed. OSDs are\n   created on controller nodes by applying ceph osd runtime manifests.\n - The .restore_in_progress flag file is removed as part of first\n   unlock of controller-0.\n\nChange-Id: I65bfc67cf90e894d125eb6c860139b26d17b562e\nStory: 2004761\nTask: 35965\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removed deprecated parameter on puppet-fm and puppet-sysinv\n\nThe following warning was given during bootstrap on debian:\n\n\"The password_hash parameter was deprecated and will be removed\"\n\nFor that reason, password_hash parameter was switched to password.\n\nThe parameter got deprecated cause Debian is using a newer version of\nthe module:\nhttps://docs.openstack.org/releasenotes/puppet-openstacklib/\nvictoria.html#deprecation-notes\n\n\nTest Plan:\n\nPASS: Build & install\nPASS: Successful Bootstrap and unlock on Debian\nPASS: Successful Bootstrap and unlock on the latest\nversion on Debian\nPASS: Build & install on centOS\nPASS: Successful Bootstrap and unlock on centOS\n\nStory: 2009101\nTask: 44981\n\nSigned-off-by: lbonatti <LuizEduardo.Bonatti@windriver.com>\nChange-Id: I99e500d41ae53c04973a3bcbacf9969b34b5938a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enabling platform keystone account lockout\n\nModifying keystone.conf lockout parameters\n\nChange-Id: Ida7e4768188de1bd272da0617eb1ea5b73df27de\nCloses-Bug: 1838100\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Mtce: Make Heartbeat Failure Action Configurable\"",
        "issue_summary": ""
    },
    {
        "commit_message": "add patch to update description for admin and services projects\n\nupdate the descriptions of the admin and services projects created\nin the platform keystone as distinction.\n\nthe default is:\nadmin: admin tenant\nservices: Tenant for the openstack services\n\nupdated to:\nadmin: admin project\nservices: project for the platform services\n\nCloses-bug:1824872\nDepends-On: https://review.opendev.org/654024/\nChange-Id: I819f07f821e7cc7c9c4c87fcc1ed2ada1edcf05c\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv-agent interval values to sysinv.conf\n\nFollowing the modifications proposed in the change [1], this\nstory aims to add to the sysinv.conf the new sysinv-agent audits via\npuppet manifest.\n\nTEST PLAN:\n\nPASS: AIO-SX: Manually replace this file into a Debian installation\nPASS: AIO-SX: Rebuild the whole system with the changes without\n              crashes (including bootstrap and host unlock - CentOS)\nPASS: AIO-SX: Verify if the both audits are being called in the correct time\nPASS: AIO-SX: Look for errors in sysinv logs\n\nStory: 2010087\nTask:  45718\n\nDepends-On:\n   [1] https://review.opendev.org/c/starlingx/stx-puppet/+/848329\n\nSigned-off-by: Marcos Paulo Oliveira Silva\n               <Marcos.PauloOliveiraSilva@windriver.com>\n\nChange-Id: I2597c86f96ac592ec85e61f5e2bc89af6cf6a35c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure docker and containerd once per AIO deploy\n\nPrevent a double configuration of docker and containerd\nfor AIO scenarios.\n\nChange-Id: I0cb9fdde5acf8d5d44d526e70ae4af726932709f\nCloses-bug: 1869193\nSigned-off-by: Paul Vaduva <Paul.Vaduva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable kubernetes TTLAfterFinished feature\n\nThis update enables the kubernetes TTLAfterFinished feature so that\ncontainer jobs resource objects that have finished execution will\nget automatically retired (cleaned-up).\n\nJob configurations specify .spec.ttlSecondsAfterFinished with a\nvalue in seconds to utilize this feature.\n\nFeature documentation is here\nhttps://github.com/kubernetes/enhancements/blob/master/keps/sig-apps/0026-ttl-after-finish.md#summary\n\nThe TTLAfterFinished is planned for Pods and Jobs but is only\nimplemented for Jobs at the time of this submission.\n\nTest Plan:\n\nPASS: Verify automatic cleanup according to ttl specification.\nPASS: Verify TTLAfterFinished does work with kind.Job containers\nPASS: Verify TTLAfterFinished does not work with kind.Pod containers\nPASS: Verify TTL job retirement with [10, 30, 300, 3600] second timeouts\nPASS: Verify TTL Error jobs are retired after specified timeout\nPASS: Verify multiple simultaneous jobs with different timeouts\n\nPASS: Verify system install and feature auto enable\n\nChange-Id: Ia6ed2b6ad31a2d2e920cfa65d59595ac49faee2e\nStory: 2006980\nTask: 37775\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"relocate /www to /var/www\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding back kvm_advance_timer service\n\nOn compute nodes with openstack-compute label, the\nkvm_timer_advance_setup.service should be enabled.\n\nThe puppet service runs before kubelet.\n\nChange-Id: I84d6c6234d4bd1c8c0c52f5735d7520377b2fe80\nPartial-Bug: 1823751\nDepends-On: https://review.opendev.org/#/c/672124\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet: add support for mpath device\n\nThe device node in /dev/ and device path in /dev/disk/by-path\ncan not be used directly for mpath devices, use /dev/mapper/mpathN\nand /dev/disk/by-id/dm-uuid-mpath-<WWID> instead, and change\nthe following accordingly.\n\n* boot_disk_device_path: get it renamed to boot_disk_persistent_name\nand change it to get the correct boot disk path for mpath\n\n* is_primary_disk_rotational: get the correct device name for mpath\n\n* ceph.pp: for mapth device, check if the device path has the same wwid\n\n* multipath.pp: enable multipath server by default\n\nTest Plan:\n\nPASS: AIO-SX without Ceph\nPASS: AIO-SX with Ceph, 1 osd\nPASS: AIO-SX with Ceph, 2 osd\nPASS: AIO-SX with Ceph, 4 osd\n\nStory: 2010046\nTask: 45431\n\nSigned-off-by: Jackie Huang <jackie.huang@windriver.com>\nSigned-off-by: Thiago Miranda <ThiagoOliveira.Miranda@windriver.com>\nChange-Id: I4b8f8aaf3ee9cd8646b3f6f3f6fd3febba77402c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX: Fix adding OSD at runtime hanging when /dev/rbd* are mounted\n\nThis mostly happens when stx-openstack application is running\nas there are a couple of pods that uses RBD PVCs.\n\nThe reason of the hang is that, on AIO-SX, all OSDs are stopped\nwhile new ones are configured. This leads to data on the /dev/rbd*\nto be inaccessible when runtime puppet manifests executes\n'ceph-disk list' to query the state of all storage devices in\nthe system.\n\nThis commit removes the code that stops existing OSDs on all\ndeployments. A side effect is a decrease in time needed to\nadd the OSDs on a node with many OSDs already configured.\nFor e.g. time for adding an OSD on a system with 7 OSDs can\ntake more that 2 minutes, while with this change it drops to\naround 30 seconds.\n\nChange-Id: I41a65d42a45a90b00f65509f4e536eb1c345a91b\nCloses-Bug: 1829855\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: install IPv6 default route on worker nodes\n\nOn Centos the IPv6 default route is installed using the class\nplatform::network::network_route6. The reason can be attributed to\nDHCPv6's protocol.\n\nThis change implements the route installation on the kernel for Debian\nby saving the routes on the file\n/var/run/network-scripts.puppet/routes6 to be used in conjunction with\n/var/run/network-scripts.puppet/routes by the apply_network_config\nscript\n\nTest Plan\n[PASS] lock/unlock compute node, routes were installed on the kernel\n       after bring up\n[PASS] add/remove IPv6 routes on the compute node using the system\n       command (host-route-add/delete)\n\nStory: 2010211\nTask: 46286\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/857508\n\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\nChange-Id: I93a2b57091a5ee55a7d89beeef1c5e8dfb5f2481\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make sure network interfaces on an N3000 FPGA are enabled for SR-IOV only after the device is reset\n\nDuring backup/restore it was found that multiple unlock attempts\nfailed with the following error message:\n\"Expecting number of interface sriov_numvfs=8. Please wait a few\n minutes for inventory update and retry host-unlock\"\n\nThis happens because the FPGA reset affects the NIC ports attached to\nit removing the SR-IOV configuration done before.\n\nThis commit adds a sriov-enable dependency to N3000 FPGA reset to make\nsure that SR-IOV is re-configured after the reset.\n\nTest Plan:\nPASS: AIO-SX: change numvfs, unlock and check puppet logs\n\nCloses-Bug: 2027618\n\nChange-Id: I96a05af7436956e40734070cc13da86a5fbf0863\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Debian: puppet-manifests: do not call grubby to edit grub.cfg\"\n\nThis reverts commit 0f6eb74ed7415defe94dc8b92c5cb9c16aee8b26.\n\nReason for revert: On a hardware lab there is a puppet failure\ndue to incorrectly handing the hugepage parameter on the command\nline.  This causes the controller to fail to go enabled and a\nreboot loop.\nThe original commit can be re-posted for review once this issue\nis fixed.\n\nChange-Id: If286566d74a88158818ed59eb3802328bf1093b0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "keep admission-plugins list set at bootstrap\n\nAvoid change_kube_apiserver_params.py overrides plugins from\nenable-admission-plugins list configured at bootstrap when\nsystem service-parameter-apply kubernetes is executed.\nchange_kube_apiserver_params.py should keep the current\nadmission-plugins list and add or remove plugins from the list\nif the end-users add or remove plugins using admission_plugins\nparameter\n\nTest Plan: Check that system service-parameter-apply kubernetes doesn't\noverride admission-plugins list.\n\nPASS: After bootstrapping and configured enable-admission-plugins list\ncheck that system service-parameter-apply kubernetes does not remove\nthe current plugins from the list.\nPASS: After add a admision_plugins via service-parameter and apply,\ncheck that the new admission plugin is added to the current admission\nplugins list configured at bootstrap.\nPASS: After remove a admision_plugins via service-parameter and apply,\ncheck that the new admission plugin is removed from the current\nadmission plugins list configured at bootstrap.\n\nStory: 2009766\nTask: 44935\n\nSigned-off-by: Giana Francisco <francisco.giana@windriver.com>\nChange-Id: Icb42174033200fef75061fdb9f96c7e5dc5fae3e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase min_free_kbytes to 256M for storage to avoid OOM issue\n\nHelp to prevent the OOM issue that it failed to allocate memory\nwith error message 'page allocation failure: order:2, mode:0x104020'\n\nAs the min_free_kbytes in the linux documentation shows:\nThis is used to force the Linux VM to keep a minimum number\nof kilobytes free.  The VM uses this number to compute a\nwatermark[WMARK_MIN] value for each lowmem zone in the system.\nEach lowmem zone gets a number of reserved free pages based\nproportionally on its size.\n\nKeeping more memory free in those zones means that the os itself is\nless likely to run out of memory during high memory pressure and high\nallocation events.\n\nBased on the issue occurs on the storage node so far, we only update\nthe value for the storage node.\n\nCloses-Bug: #1924209\n\nChange-Id: Iae2e5a0787f69c62ba5da53663371fd2be148e15\nSigned-off-by: Zhixiong Chi <zhixiong.chi@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the n3000 config file\n\n- Remove \"-a\" flag from the command as it has been deprecated in the\n  original pf-bb-config source.\n\nTest Status:\n- PASS: Configure device using host-device-modify with 1 VF and unlock\n  the host.\n- PASS: Create a test pod requesting 1 VF.\n- PASS: Run dpdk test-bbdev application on 1 VF inside the pod.\n\nCloses-Bug: 2020128\n\nStory: 2010698\nTask: 48063\n\nChange-Id: I229b505755138495c79513e926f674c28797b79b\nSigned-off-by: Nidhi Shivashankara Belur <nidhi.shivashankara.belur@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Revert Patch of puppet-manifest-apply.sh\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Security: Add nospectre_v1 to the security params\n\nMost of the v1 mitigation is baked into the kernel and not\noptional.  The swapgs barriers are, however, optional.\nThey have a negative performance impact so we disable them\nby using the nospectre_v1 kernel bootarg.\n\nPartial-Bug: 1860193\nDepends-On: https://review.opendev.org/#/c/704406\nChange-Id: Iaa11ba3f430fc064ebda679cf290474d3be413da\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP on Debian] Fix location of PTP config files\n\nThe configuration and the command-line options files for PTP services\n(ptp4l, phc2sys and ts2phc) do not reside in the same /etc paths in\nCentOS and Debian. This change makes Puppet to decide based upon the OS\nversion about the correct location of them.\nThis change also removes some deprecated manifest & template files not\nused anymore (they used to be referred by legacy PTP configuration).\n\nTest Plan:\nPASS: Installed private build of puppet-manifests package in lab pre-\n      installed with Debian from stx-debian-pipeline, then applied PTP\n      configuration to run ptp4l and phc2sys services and checked\n      .conf files are correct and services are running.\n\nRegression:\nPASS: Fresh install of CentOS, then applied PTP configuration to run\n      ptp4l and phc2sys services and checked .conf files are correct\n      and services are running.\n\nTask: 45475\nStory: 2009965\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I6f4d65e04ed5c7e7fe6a83c21f3faad11a99af57\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix puppet warnings on ceph.pp\n\nSome define statements had incomplete locations\nthat were generating 'unacceptable location' warnings\nafter aio unlock.\n\nPrepending 'platform::ceph::' to every instance of\nthe problematic locations solved the warnings.\n\nDebian Bullseye Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nCentOS 7 Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nStory: 2009965\nTask: 45543\n\nSigned-off-by: Matheus Machado Guilhermino <Matheus.MachadoGuilhermino@windriver.com>\nChange-Id: I761b75b30eecbb6e838c7a03735c1b4e6ca21ec2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove magnum from baremetal.\n\nMagnum is no longer packaged on bare metal.\n\nThe sysinv and upgrades code related to magnum has been removed.\n\nThe helm configuration for magnum remains, although it is not currently\nsupported in containers either. The magnum-ui is not installed in\nplatform or containerized horizon so the code to enable it is removed.\n\nSome upgrade code remains, due to the fact that that utility is\nin the process of being re-written.\n\nStory: 2004764\nTask: 34333\nChange-Id: I56873b4e04aac2e7d0cd57909beea00ecc2c1b9a\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set kubelet certificate rotation to 1 month\n\nUse the experimental-cluster-signing-duration parameter to set the\nkubelet certificate to expire after 1 month. Kubelet certificate\nrotation is enabled by default.\n\nCloses-Bug: 1834685\nChange-Id: Ie5b91a86c1a1b536e51719dad99be0cc89d65722\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add SR-IOV rate-limit dependency\n\nCurrently, the binding of an SR-IOV virtual function (VF) to a\ndriver has a dependency on platform::networking.  This is needed\nto ensure that SR-IOV is enabled (VFs created) before actually\ndoing the bind.\n\nThis dependency does not exist for configuring the VF rate-limits\nhowever.  There is a chance that the VF rate-limiting configuration\nhappens before the VFs are actually created.\n\nThis commit fixes the issue by creating a dependency on\nplatform::networking from the sriov::config class, which ensures\nthe VFs are created before both driver binding and rate\nlimiting configuration occurs.\n\nCloses-Bug: #1927758\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Ic452247eb8c980e1b18bdc54832eb635d7a9fc54\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for SR-IOV VF rate limiting on N3000 FPGA NICs\n\nIt is possible that a user may encounter puppet failures on system\nlock/unlock after configuring tx max rate-limiting on an SR-IOV\ninterface belonging to an N3000 FPGA.\n\nThe problem may occur if puppet configures the max tx rate on the\nVF(s) after the device has been reset, but before it has been\nbrought down/up (which causes the VFs to be created).\n\nThis commit fixes the issue by adding an explicit dependency\nthat ensures the rate limit setting for each VF occurs after\nit's driver binding (this is the more appropriate thing to\ndo even outside of the context of the N3000 issue).\n\nSince there is an existing dependency on the N3000 for the\ndriver bindings to occur after the device reset/ifdown/ifup,\nthe particular issue noted above is resolved.\n\nTesting:\n\nPASS: examine the puppet logs and ensure the relationship\n      between the driver binding and rate-limit setting for each\n      configured VF has been noted.\nPASS: ensure the system unlocks successfully and that the\n      VFs have the appropriate tx max rate setting and have\n      been associated with the appropriate driver.\nPASS: tested the rate-limit setting with VF drivers vfio and\n      netdevice (kernel driver)\n\nRegression:\n\nPASS: ensure that if a user has not configured rate-limiting\n      that the dependency is noted, but the rate-limiting\n      action is not performed.\nPASS: ensure that the system behaves as before for SR-IOV\n      interfaces that are not attached to an N3000 FPGA.\n\nCloses-Bug: 1956604\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: I5321aa94c8bc0e93fcc107429d44f294da1d17ff\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update root disk detection\n\nThe root filesystem is now carved out of the cgts-vg volume group\ninstead of a dedicated partition. Look for the /boot partition to\ndiscover the root disk.\n\nTest Plan:\n- PASS: BIOS AIO-SX\n- PASS: UEFI AIO-SX\n- PASS: BIOS 2+2+2\n- SKIP: secure boot, not ready for Stx8.0\n- PASS: AIO-SX upgrade\n- PASS: AIO-DX upgrade\n- PASS: DC subcloud install (virtual test)\n\nChange-Id: I1fd19f793f74497f3329bdadc4b7e4208b799e5d\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/865076\nStory: 2010444\nTask: 46884\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update debian packages for pkg-versioning\n\nThe Debian packaging meta_data file has been changed to reflect all the\nlatest git commits under the directory, pointed as usable, and to\nimprove pkg-versioning addressing the first commit as start point to\nbuild packages.\n\nThis ensures that any new code submissions under those\ndirectories will increment the versions.\n\nThe commit SHA 7b680ed0cf was choosen to be the SRC_BASE_SRCREV of the\npuppet-sshd's metadata because is the commit that creates the debian\ndirectory with build files structure.\n\nTest Plan:\nPASS: Verify package versions are updated as expected.\nPASS: build-pkgs -c -p puppet-sshd\n\nStory: 2010550\nTask: 47500\n\nSigned-off-by: Manoel Benedito Neto <Manoel.BeneditoNeto@windriver.com>\nChange-Id: If7e46fc983b33dceb10ea1b2023f1b55aa95f96e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update dnsmasq.conf for UEFI pxeboot\n\nDue to recent grub2 update for CVE-2020-15705, pxeboot must use the\nshim.efi file for secure boot, rather than grubx64.efi directly.\n\nChange-Id: I864ff46f449e92dfd5f1667379bc56aaaf6dfe2c\nCloses-Bug: 1927730\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/790253\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/790254\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove trap destination from fm.conf\n\nWith the host-based SNMP removal,\nremove trap_destination entry from fm.conf\n\nStory: 2008132\nTask: 41350\nChange-Id: I3f0298233beedc3370fa8c4c2dbc65fe678b14a6\nDepends-On: https://review.opendev.org/765381\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Disable NTP on controller when PTP is enabled\n\nThe ntp puppet manifest was incorrectly starting NTP on system\ncontrollers when PTP is enabled, which results in two services trying to\nadjust clocks and causes instability in the PTP time. This change makes\nit so that NTP is not enabled when the host clock_synchronization\nparameter is set to ptp.\n\nTests:\n\nPASS: Configured NTP on host, lock/unlock, confirm ntp is running, PTP\nis not.\nSwitch to PTP, lock/unlock, confirm PTP is running and NTP is not.\n\nStory: 2009130\nTask: 44814\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I64262843ec8bb83d1b6e4ce1dfa19eafdcbc098f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove docker registry default setting in containerd config file\n\nDocker registry is configured as secure registry in default in\nconfig.toml. User may config docker registry as insecure registry\nin localhost.yml, and lead to configuration conflict. Remove the\ndefault setting in config.toml to solve it.\n\nCloses-Bug: 1863144\n\nChange-Id: I4b3b3e1095f10a9ce2e92a3c84330dab1af3f895\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow user specified registries for config_controller\n\nCurrently docker images were pulled from public registries during\nconfig_controller. For some users, the connection to the public\ndocker registry may be slow such that installing the containerized\nservices images may timeout or the system simply does not have\naccess to the public internet.\n\nThis change allows users to specify alternative public/private\nregistries to replace k8s.gcr.io, gcr.io, quay.io and docker.io.\nInsecure registry is supported if all default registries were\nreplaced by one unified registry. It lowers the complexity for\nthose who build his own registry without internet access.\n\nDocker doesn't support ipv6 addr as registry name, instead\nhostname or domain name in ipv6 network is allowed.\n\nTest:\nAIO-SX/AIO-DX/Standard(2+2):\n  Alternative public registry (ipv4/domain) with proxy\n    - config_controller pass\n  Private registry (ipv4/ipv6/domain) without internet\n    - config_controller pass\n  Default registry with/without proxy\n    - config_controller pass\n\nStory: 2004711\nTask: 28742\n\nChange-Id: I4fee3f4e0637863b9b5ef4ef556082ac75f62a1d\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use kubelet.conf instead of admin.conf on worker nodes during upgrade\n\nSpecifying a config file that does not exist causes kubelet upgrades\nto fail on worker nodes when some of the commands return errors.\n\nadmin.conf does not exist on worker nodes, but exists on controllers.\nThe code has been updated to use kubelet.conf during worker kubelet\nupgrade actions.\n\nThe worker init code has also been changed when pulling the pause\nimage so that it does not try to contact k8s.gcr.io.\nThe kubernetes-version needed to be passed in when querying for the\npause image.\n\nStory: 2008137\nTask: 41828\nChange-Id: I6565132bd587927bd26c845c2ea56a995ac6da1c\nSigned-off-by: albailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial integration of DC with admin network\n\nBecause the management network and its parameters are\nembedded in many parts of the system, having a separate\nadmin network makes it much easier to change the parameters\nof this network (subnet, gateway, etc) after a subcloud has\nbeen provisioned.\n\nThe admin network will take precedence over the existing\nmanagement network for communication between the\nsubcloud and system controller if it is defined.\n\nThe management network will still exist on the subcloud, but\nwill be a private network.\n\nThis commit defines the admin network class and changes the\nhaproxy rules to point to the appropriate admin endpoint\nfor services required for subcloud administration.\n\nNote: See Depends-On review.\n\nTest Plan:\n\n- Bootstrap and install DC subcloud with admin network defined.\n  PASS: Ensure the openstack admin endpoints on both the subcloud\n        and system controller for the affected services use the\n        admin subnet of the subcloud\n  PASS: Ensure the subcloud can become online and in-sync using\n        the admin network.\n\nRegression:\n\n- AIO-SX: On a non-DC system, ensure the openstack endpoints for\n          the various services are not impacted by the change.\n\n- Bootstrap and install DC subcloud with no admin network defined.\n  PASS: Ensure the openstack admin endpoints on both the subcloud\n        and system controller for the affected services use the\n        management subnet of the subcloud (no impact)\n  PASS: Ensure the subcloud can become online and in-sync with the\n        management network (no impact).\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/865287\n\nStory: 2010319\nTask: 46911\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Id69e1b674618277f216b3d48a4dd8c09a09ad18c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait for service restart during etcd upgrade\n\nDuring etcd upgrade actions, we restart the etcd service then attempt\nactions with etcdctl. etcd may take several seconds to start, so we need\nto wait before attempting the etcdctl commands.\n\nTest Plan:\nPASS: Runtime manifest with this class\nPASS: Runtime manifest with this class and 10s wait in etcd start\n\nFailure Path:\nPASS: Manifest fails if etcd start exceeds 15s\n\nRegression:\nPASS: StX4 to StX5 Upgrade\n\nCloses-Bug: 1946372\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nChange-Id: Ie5560875f5590032a77dadc9fa8c89d81adaf66b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fernet key synchronization\n\nThis update contains the following changes for Distributed\nCloud Fernet Key Synching & Management:\n\n1.Disable key rotation cron job for distributed cloud\n2.Add a fernet key repo config option in puppet sysinv\n3.Add fernet repo sysinv APIs for create/update/retrieve keys\n4.Add a fernet operator to create/update/retrieve the keys\n\nStory: 2002842\nTask: 22786\n\nChange-Id: Ia14caeef067fa481e3a4159c1658289250632779\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Local Docker Registry HA Integration\n\nAdd new 1g DRBD filesystem for docker local registry\nMake SM manage docker local registry\n\nStory: 2002840\nTask: 22782\n\nChange-Id: I55fb1369c7141e2f40c35d01379925439264eed9\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate DNF repo config files from puppet\n\nUpdate the patching manifest to generate the DNF repo config files.\n\nDepends-On: https://review.opendev.org/700961\nChange-Id: I9f21ae4bd20b7a1c861f9ac06e47cec579940438\nStory: 2006227\nTask: 37934\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add logic to recreate routes when interfaces are brought down/up\n\nWhen the apply_network_config.sh script detects changes in an\ninterface's config file, it brings the link down and up again. This\ncauses any associated routes to be only automatically deleted from the\nkernel and not restored.\nThis commit adds logic to restore any affected routes when the\nassociated interface is brought down/up.\n\nTest plan\n\nSetup:\n\nSystem\n- AIO-SX IPv4\n\nInterfaces\n- data0: ETH static ip 10.10.10.3/24\n- data0.100: VLAN static IP 10.10.11.3/24\n- data1: ETH static ip 10.10.20.3/24\n- data1.200: VLAN static IP 10.10.21.3/24\n\nPre-existing routes\n- rt01: 10.20.1.0 -> 10.10.10.1 via data0\n- rt02: 10.20.2.0 -> 10.10.10.1 via data0\n- rt03: 10.20.3.0 -> 10.10.11.1 via data0.100\n- rt04: 10.20.4.0 -> 10.10.11.1 via data0.100\n- rt05: 10.20.5.0 -> 10.10.20.1 via data1\n- rt06: 10.20.6.0 -> 10.10.20.1 via data1\n- rt07: 10.20.7.0 -> 10.10.21.1 via data1.200\n- rt08: 10.20.8.0 -> 10.10.21.1 via data1.200\n\nRoutes to be added\n- rt09: 10.20.9.0 -> 10.10.10.1 via data0\n- rt10: 10.20.10.0 -> 10.10.11.1 via data0.100\n- rt11: 10.20.11.0 -> 10.10.20.1 via data1\n- rt12: 10.20.12.0 -> 10.10.21.1 via data1.200\n\nActions\n- Change interface: manually edit /etc/network/interfaces.d/ifcfg-* to\n    change MTU value, this will cause the script to detect the\n    difference and trigger an interface update.\n- Add route: manually edit /var/run/network-scripts.puppet/routes\n    to add a new route, this will cause the script to detect the\n    difference and trigger an update in the routes.\n- Remove route: manually edit /var/run/network-scripts.puppet/routes\n    to remove a route.\n\nProcedure for direct tests\n1. Perform action\n2. Run /usr/local/bin/apply_network_config.sh as root\n3. Validade that routes in /var/run/network-scripts.puppet/routes and\n   in the kernel match\n\nDirect tests:\n\nPASS Change data0.100\nPASS Change data0\nPASS Change both data0.100 and data1.200\nPASS Change both data0 and data1\nPASS Add route rt09\nPASS Remove route rt01\nPASS Change data0.100 and add route rt10\nPASS Change data0.100 and remove route rt03\nPASS Change data0 and add routes rt09 and rt10\nPASS Change data0 and remove routes rt01 and rt03\nPASS Change data0 and data1, add routes rt09, rt10, rt11, rt12\nPASS Change data0 and data1, remove routes rt01, rt03, rt05, rt07\nPASS Repeat all the previous tests in an equivalent IPv6 setup\n\nIndirect tests:\n\nPASS Lock system, change MTU of data0 via 'system host-if-modify',\n     unlock system\nPASS Lock system, erase /etc/network/interfaces.d/ifcfg-* and\n     /etc/network/routes, unlock system\n\nCloses-Bug: #2036667\nSigned-off-by: Lucas Ratusznei Fonseca <lucas.ratuszneifonseca@windriver.com>\nChange-Id: If7f301ff797a6644aaa3ff7f73de530d680c6b3b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Separate CA for k8s and etcd\n\nSharing cert between kubernetes-ca and etcd-ca will dramatically\nincrease the complexity of updating etcd-ca cert.  Therefore do the\nseparating CA work.\n\nTest Plan:\n0) General -- PASS\n   check the communication status between apiserver and etcd\n   check the etcd status and configuration on controllers\n   verify applications are upgraded\n   check certs are split\n   check certs are persisted\n\n1) Deployment test on simplex -- PASS (changeset 12)\n   Lock/unlock simplex\n   Simplex spontaneous reboot\n\n2) Deployment test on duplex -- PASS (changeset 12)\n   Switch active controller (changeset 13)\n   Reinstall controller and Swact (changeset 13)\n\n3) Backup and restore starlingx platform on simplex -- PASS (changeset 12)\n\n4) Backup and restore starlingx platform on duplex --\n     PASS with config-out-of-date on c0 (changeset 12)\n     retest in progress\n\n5) Upgrade starlingx platform on simplex -- PASS (changeset 12)\n\n6) Upgrade starlingx platform on duplex -- PASS\n\nStory: 2008833\nTask: 42320\n\nDepends-on: https://review.opendev.org/#/c/800412/\nChange-Id: Ib5ed7976184b61112b545af198cc5c3b4f406aee\nSigned-off-by: yuchengde <chengde.yu@intel.com>\nSigned-off-by: Michel Thebeau <Michel.Thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce a wait until network interfaces are ready\n\nThe DAD (Duplicate Address Detection) mechanism keeps\nipv6 network interface in tentative state until it finishes.\nDuring this time no binding to this interface address is\npossible and networking dependent services fail to start\n\nChange-Id: I9cfa604a0d75400f6d3c7172b3b973b0d50c3578\nCloses-bug: 1871638\nSigned-off-by: Paul Vaduva <Paul.Vaduva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add parameter to openrc and change permissions\n\nThis commit changes the file \"/etc/platform/openrc\" to allow its usage\nby other users. The parameter \"--no_credentials\" was added for\nthis purpose. Also, the permissions of this openrc file was changed to\n0644 to allow its usage by users with no privileges.\nThe typical use case is an LDAP user with or without privileges\nsources this openrc file and then sets the variables OS_USERNAME,\nOS_PASSWORD and PS1 (that uses OS_USERNAME).\nAlso, the test to check if the controller is the active one, changed:\npreviously, it was tested just if the password gotten was empty, but as\nthe reason now to get an empty password may be a user with insufficient\nprivileges, the test changed to check whether the executable file\n\"keyring_file\" exists (it exists only in the active controller and that\nis the reason why a standby controller gets an empty password).\n\nTest Plan:\n\nPASS: Successfully deploy an AIO-DX containing this change. Check that\nthe permissions of \"/etc/platform/openrc\" are 644, owner root, group\nsys_protected.\nPASS: In the deployed AIO-DX, create 2 users: user1 is not part of\ngroups sys_protected and root, user2 is part only of group\nsys_protected.\nPASS: In the active controller of AIO-DX, using users user1 and user2,\nexecute the following commands: for \"source /etc/platform/openrc\n--no_credentials\" command, the result for all users is that the file is\nsourced without errors; for \"source /etc/platform/openrc; system\nhost-list\", user1 gets a message saying it doesn't have privileges to\nread keyring password and an error message for system command, while\nuser2 gets the commands executed without errors.\nPASS: Repeat the test above for standby controller: for \"source\n/etc/platform/openrc --no_credentials\" command, all users get a message\nsaying it should only be loaded from active controller; for \"source\n/etc/platform/openrc; system host-list\", also a message is printed\nsaying it should only be loaded from active controller and an error\nmessage appears for system command.\n\nPartial-Bug: 2024627\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I6ef2ca16a272d1fc7c4a24b9f5b48a9cb860450f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update containerd config with registry.central cert\n\nRegistry.central's certificate is not in the containerd config file.\nThis causes failures when deploying kubernetes pods that uses images\nfrom registry.central in a distributed cloud deployment.\nRegistry.central's certificate could be self signed. This commit\nspecifies registry.central's certificate to be trusted by containerd.\n\nCloses-bug: 1887392\n\nChange-Id: I8debac4fb8b994deafc02416c500a1d412a8aeca\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Barbican provisioning in SM in kubernetes environment\n\nSince Barbican is in charge of storing BMC passwords for MTCE now\nwe need it to run as a bare-metal service alongside with kubernetes.\nThis patch enables SM provisioning for barbican in this case.\n\nChange-Id: Id51f679738d429e78f388b6dc42e7606ef0c41ab\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update NTP manifest to ensure controller syncs from mate if no servers\n\nThis update enhances the check around the ntp.pp ntpdate call to only\navoid running the command when there are no external servers on an\nAIO-SX controller. If running in duplex, the standby controller can\nsync its time from the active controller.\n\nChange-Id: I7619ee5a488a3ec795aa196d305c7c7a66ce1c2f\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove puppet-manifests code made obsolete by ansible\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow directory listings for iso dir\n\nUpdate lighttpd.conf.erb to allow directory listings for iso dir\n\nStory: 2006980\nTask: 38747\n\nChange-Id: I99b0b10d6f1d6c81af8b9b272bf1a9b4af44a749\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add OpenID connect params to kubeadm\n\nThis commit modifies the kubeadm template to support OpenID connect\nparams.\n\nDepends-On: https://review.opendev.org/671259\n\nStory: 2006235\nTask: 35836\n\nChange-Id: I38f736aa68f9c0031ed697cdf17cd28ed08cadf6\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Configure anti-affinity for coredns pods\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid SRIOV misconfiguration at FEC device\n\nWhen performing a batch SRIOV configuration (e.g. from shell script),\nit may be possible that commands consecutively issued - either related\nto interface(s) or a second FEC device settings - make the FEC device\nconfiguration to be not fully applied, and then unlock fails by\nsemantic check.\n\nThe reason for that is hieradata might get updated by intermediate\ninventory reports that could overwrite the values to be set with the\ncurrent ones, since it hasn't separate fields for both values. This\nchange makes 'num_vfs' to be used as the \"configured\" value (like it is\nactually used in puppet manifest) and creates another 'sriov_vfs' that\nwill contain the current value for number of VFs.\n\nAnother change is not calling platform::devices::fpga::fec::vf when\napplying runtime manifest, which could also fail in case PCI addresses\nare changing from what is in hieradata.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/795850\nCloses-Bug: #1931458\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I97c4751f9f977468d26bb2e6fea62ed7a6fa75cb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Removing unused flag disable_worker_services\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add subcloud audit parallelization config values\n\nConfig values to control cert-mon parallelization\n\nStory: 2008960\nTask: 43242\n\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\nChange-Id: I42ffcde16de2a89856b2220eee034175707aa59a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix application-apply of stx-openstack on simplex\n\nThe application-apply of the stx-openstack application on\nsimplex configurations has been failing since the barbican\nchart was added to the application. The failure was due\nto lost node status messages from the kubelet to the\nkube-apiserver, which causes the node to be marked\nNotReady and endpoints to be removed.\n\nThe root cause is the kubernetes bug here:\nhttps://github.com/kubernetes/kubernetes/issues/74412\n\nIn short, the addition of the barbican chart added enough\nnew secrets/configmaps that the kubelet hit the limit of\nhttp2-max-streams-per-connection. As done upstream, the\nfix is to change the following kubelet config:\nconfigMapAndSecretChangeDetectionStrategy (from Watch to\nCache).\n\nChange-Id: Ic816a91984c4fb82546e4f43b5c83061222c7d05\nCloses-bug: 1820928\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase max_pool_size for dc audits\n\nIncrease max_pool_size for dcorch and dcmanager audits to avoid\ndatabase thrashing with connect/disconnect requests resulting in\nsharp CPU spike caused by postgres on every dcorch/dcmanager audit\ncycle. The CPU spike is magnified when both dcorch and dcmanager\naudits happen to run at the same time which can impact resources\nintensive operations such as batch subcloud deployment. Low\nmax_pool_size setting makes sense for on-demand services such as\nfm, not for services that perform regular audits.\n\nThese settings will be re-assessed and adjusted when all DC\nscalability related features are complete.\n\nCloses-Bug: 1895605\nChange-Id: I138faa640933bd255d7ae90d3388733f35431e4d\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "PTP Configuration Enhancements\n\nGlobal ptp4l options will be provided by sysinv via service parameters.\nphc2sys will use /etc/ptp4l.conf for most options. Other options will be\nuser configurable via service parameters.\n\nChange-Id: I55603258cc3c1e72b57964635e05bb8d6e6088c4\nStory: 2006759\nTask: 38669\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove armada and helm v2\n\nWith the application framework moving to FluxCD,\nArmada is no longer supported and its configuration\nfiles and resources are no longer necessary.\n\nThe same applies to helm v2 (Tiller) with the system\nnow using helm v3.\n\nTest Plan:\nPASS: app operations still work\nPASS: deploy and all system apps uploaded/applied\nPASS: deploy unlocked/enabled/available\nPASS: upgrade sx\nPASS: upgrade dx\nPASS: deploy dc\nPASS: bnr\n\nStory: 2010560\nTask: 47272\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I279961409332311eb0e070710e318b04f877c2dc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Change SM Port scope to handle AIO config.\n\nThe mtc.ini file is updated a second time in AIO config.\nDue to the scope of the SM ports being for controller only\nand no defaults we see the sm port assignments missing in\nAIO configs.\n\nThis update defaults the SM port numbers and changes the scope\nof the parameters so that they get set on all node types for\nall system types.\n\nTesting included provisioning an AIO system.\n\nChange-Id: Ib53921c4b59a9e67ed136a03504bdf0775de6dff\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Correct workers configuration in All-in-one System Controller\n\nSince All-in-one duplex can also be used as the System Controller\nin distributed cloud, the number of eng_workers is therefore derived\nthe same way as in standard system.\n\nStory: 2007267\nTask: 38785\nChange-Id: I739eee867588ae510b875d0d3be4f45b57ab2e38\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable PTP support for Link Aggregation\n\nThe Linux bonding driver aggregate multiple NICs into a single bonded\ninterface of two or more NIC slaves. This bonded interface has no\nPTP hardware clock associated with it and cannot be used by the\nLinuxPTP for clock synchronization. Need to derive all the LAG slaves\nfrom the bonded interface and feed them to the LinuxPTP daemon instead\nof the bonded interface. VLAN interface names should be cleared from\nVLAN numbers as well in order for PTP to work.\n\nChange-Id: I022e2d74e6459825129107881dd585bb2a13f953\nCloses-bug: 1828017\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix host name resolution for AIO-SX IPV6\n\ndnsmasq is not processing DNS requests sent to the UDP port 53 when binding\nto the loopback interface on an IPv6 system. The requests are processed\ncorrectly if dnsmasq is explicitly configured to listen for the management\naddress via the listen_address parameter.\n\nCloses-Bug: 1881772\nRelated-Bug: 1821026\n\nChange-Id: I47f733d2a35c946acd2952efd246a973826e8114\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Adding nvidia_vgpu drivers support\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix installation of default ipv6 route\n\nFor a worker node in a Standard IPv6 system, a default route is\nadded to the system controller.\n\nCurrently, this default route will appear in the\n/var/run/network-scripts.puppet/routes6 file, with it's contents\nmerged with the /var/run/network-scripts.puppet/routes file.\n\nUltimately, the combined routes will be written to Debian's\n/etc/network/routes file.\n\nAn issue was noted in which the default route was not present\non a worker node after installation.  This led to the puppet\nmanifest failing when it tried to access the k8s registry on\nthe controller.\n\nIt was noticed that in the route merging code, an individual\nroute line was being appended to the end of the 'routes' file\nwith 'cat' rather than something more appropriate like 'echo'.\n\nCloses-Bug: 1995142\n\nTesting:\nPASS: Ensure the default route is added and applied by the\n      apply_network_config script.\nPASS: Ensure previous failing puppet manifest now passes\nPASS: Ensure the worker node can be locked/unlocked successfully\n      and the default route retained.\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Ideaea85dbae05fea648f1cff5a12c2ddadf82f87\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable ceph process recovery after config done\n\nAfter DOR some storage hosts are not starting \"Host Services\" and\n/etc/services.d/storage/ceph.sh is not executed. Because of this\n/var/run/.ceph_started flag file is not created. The flag file\nwas added to prevent ceph_pmon_wrapper.sh (pmon.d recovery) from\nstarting ceph processes before the configuration is applied.\n\nCeph initialization relied on \"Host Services\" to start ceph\nservices and also create /var/run/.ceph_started. After this step\nceph_pmon_wrapper.sh would be allowed to restart services if\nthey were not available.\n\nInstead of debugging why \"Host Services\" are sometimes not started\nwe enable ceph service recovery after ceph is configure by creating\nthe flag file in \"post\" stage.\n\nChange-Id: I20e036d28340635d768dfbfcdabe876f3cf10344\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Detect BONDING_OPTS when applying network config\n\nThis commit adds BONDING_OPTS to the list of attributes to check for\nchanges when applying network config.\n\nThis commit also adds BONDING_OPTS as a special case inside of\nnormalized_cfg_attr_value.  This is necessary becase The BONDING_OPTS\nattribute contains '=' characters, so is not correctly parsed by\nsplitting on '=' as done for other attributes.  Because this is only\nbeing used to check for changes to BONDING_OPTS, rather than actually\nusing the returned value, this will return the whole line for\nBONDING_OPTS.\n\nCloses-Bug: 1789444\nChange-Id: I01d1ef2bc80093d41fe95b68e4abdc309b574d47\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO reaffine tasks and k8s-infra during startup\n\nThis update reimplements the affine-tasks init script and service to\ndynamically reaffine tasks and k8s-infra cgroup cpuset on AIO nodes.\nThis accomodates CPU intensive phases of work. Tasks are initially\nallowed to float across all cores. Once system is at steady-state,\nthis will ensure that K8S pods are constrained to platform cores and\ndo not run on cores with VMs/containers.\n\nThis will speedup the first stx-application apply, as well as pod\nrecovery after lock/unlock, reboot, and controller swact.\n\nThis script waits forever for sufficient platform readiness criteria\n(e.g., system critical pods are recovered, critical openstack pods\nare running, nova-compute pod is running) before reaffining back\nto platform cores.\n\nThis corrects the pod affinity problem seen on AIO introduced by fix\nfor bug: 1826592, commit e513baad44181f667085886007632d0ebf79eeb0,\ni.e., fix allowed the AIO to not timeout, but left pods floating.\n\nChange-Id: Ic257378eac451904a200a0f2e79f7bc4f8373009\nPartial-Bug: 1832781\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove ceph mon restart during upgrade\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a cron job to purge dcorch database\n\nThis commit adds a daily cron job to purge deleted orch\nrequests that are older than 3 days, their orch jobs\nand resources from dcorch database.\n\nStory: 2007267\nTask: 39044\nDepends-On: https://review.opendev.org/720277\nChange-Id: Ibc9f78ac89f4cc6706886a49062c3f5a6145cc9f\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Gracefully stop the isolcpu and kubelet service\n\nThis change ensures that the isolcpu_plugin service is\nstopped and masked prior to masking and stopping the\nkubelet service. Additionally, on startup, the kubelet\nservice is unmasked and started prior to unmasking isolcpu_plugin.\nThis change is intended to avoid any race conditions that can\noccur because of the dependency on kubelet by isolcpu_plugin,\nresulting in numerous restarts of both services and\nleading to failed node upgrades.\n\nTest Plan:\n\n   - PASS: Upgrade kubelet AIO-SX\n   - PASS: Upgrade kubelet on a STANDARD installation\n\nCloses-Bug: 2036985\n\nChange-Id: Ifb2b512c3953d2a1f7efdba289a31d5a9315cae4\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Ensure network config has been applied before containerd\"",
        "issue_summary": ""
    },
    {
        "commit_message": "robustify AIO-SX kubelet upgrade\n\nDuring a kubelet upgrade, we need to change the stage2 bindmount\nfrom the old version of kubelet to the new version.  Unfortunately\nwe have seen this intermittently fail due to the stage2 mount\nbeing \"busy\" due to kubectl running at the time of the attempted\nunmount.\n\nThe real solution will likely be to change to using symlinks\ninstead, but for now we can improve robustness by explicitly\nunmounting the stage2 filesystem with retries, then explicitly\nmodify the bind mount, then explicitly mount the stage2 filesystem\nagain.\n\nWe also change the order of operations slightly to mask the kubelet\nservice before shutting it down in pmon.  This avoids any chance\nof the service being restarted spuriously.\n\nWe also add the \"--runtime\" flag to the unmount/mount operations.\nThat way if anything goes wrong a reboot can restore the stage2\nmount.\n\nTest-Plan:\nPASS - Perform a normal manual K8s upgrade to 1.24\nPASS - Repeatedly trigger a standalone version of the puppet\n       manifest to alternate between the 1.23 bind mount and the\n       1.24 bound mount.  Run for several hours without failures.\n\nStory: 2010301\nTask: 46896\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: Iffc4a09cb0b15022aa541d85e06624016efd5374\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix 'openstack::lighttpd::runtime'\n\nthe names of classes/defines should match the name that's\nimplied by their file path on puppet 5.5\n\nHaving the class 'openstack::lighttpd::runtime' on the\nhorizon.pp file was causing the following warning on bootstrap\nUnacceptable location. The name 'openstack::lighttpd::runtime'\nis unacceptable in file\n'/usr/share/puppet/modules/openstack/manifests/horizon.pp'\n\nTo solve this warning, the class 'openstack::lighttpd::runtime'\nwas moved to a new file named lighttpd.pp\n\nDebian Bullseye Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nCentOS 7 Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nStory: 2009965\nTask: 45406\n\nSigned-off-by: Matheus Machado Guilhermino\n<Matheus.MachadoGuilhermino@windriver.com>\nChange-Id: I032505771f74b331e174aaa7e108c9df2c89b302\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"[PTP SyncE] Fix generation of clock-conf.conf\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove docker login at startup\n\nDocker container runtime is no longer being used to run the\nN3000 FPGA tools.\nThere is no need to run docker login during startup.\n\nStory: 2008972\nTask: 43499\nDepends-On: https://review.opendev.org/c/starlingx/config/+/810689\n\nChange-Id: I69b62f8fee670f8f01f83619b167654ead3eaf0d\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Don't fail if pods restart timeout during root CA update\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Workaround for console session timeout terminating user processes\n\nThe change https://review.opendev.org/c/starlingx/config-files/+/861633\ncauses an unexpected behavior of systemd, terminating user processes\nin case of session timeout, between the moment after bootstrap and before unlock. As a workaround, this change removes pam_systemd.so from PAM common-session file during bootstrap, avoiding the issue and also performance degradation.\n\nFollowing changes must be reverted:\nhttps://review.opendev.org/c/starlingx/config-files/+/866211\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/867098\nhttps://review.opendev.org/c/starlingx/config-files/+/861633\n\nTest Plan (Debian AIO-SX):\n[PASS] Install, bootstrap and unlock.\n[PASS] Verify \"pam_systemd.so\" config is removed after bootstrap.\n[PASS] Verify there is no extra \"systemd --user\" processes running in\nbackground.\n[PASS] Verify no issues occur in standard upgrade scenario or during runtime manifest apply.\n\nPartial-Bug: 1999049\nSigned-off-by: Davi Frossard <dbarrosf@windriver.com>\nChange-Id: I3c8964b1aa961fcea51f65205bfdbf8d39241569\n",
        "issue_summary": ""
    },
    {
        "commit_message": "New public service vim ep SystemController region\n\nAs part of the changes to add nfv_client to remote CLI we added a\npublic endpoint at SystemController region to provide access for\nremote users.\n\nTest Plan:\nPASS New public endpoint created with\nPASS Hieradata override with current OAM_IP\nPASS Access endpoint created\nPASS Remote-cli use of created endpoint, through sw-manager command\n\nPartial-Bug: #1949620\nChange-Id: Ia2ac8457a6629832c904b86dc9b0a7a3266dd358\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: temporary disable multipath by default\n\nIt is observed during a lock-unlock that multipath fails to start on\nDebian.\n\nDisable multipath by default to allow Debian testing.\nThere will be a follow-up commit to fix the issue and re-renable\nmultipath by default.\n\nTests on AIO-SX Debian:\nPASS: unlock\nPASS: lock-unlock\n\nSKIP CentOS tests because it is just a refactor.\n\nStory: 2010046\nTask: 45431\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I034cf2747d3f12214c5008a5b6a74abb13dadd03\n",
        "issue_summary": ""
    },
    {
        "commit_message": "grubenv file got corrupted after writing on it\n\nEvery change made to kernel_params is done by updating the\n/boot/efi/EFI/BOOT/boot.env file. This modification consists of\nrewriting the file with addition/removal of some kernel_params.\nThis addition/removal is done by running the\nstx-puppet/puppet-manifests/src/bin/puppet-update-grub-env.py file.\nAfter adding a long string of parameters and then performing a removal,\nthe /boot/efi/EFI/BOOT/boot.env file becomes corrupted and cannot be\nupdated. If a new update is made, the following error is encountered:\n\ngrub-editenv: error:environment block too small.\n\nThis affects the host when any changes made by \"system host-modify-cpu\"\ncommand are executed, causing potential reboot loop when the host is\nunlocked, and eventually it gets in degraded state.\n\nThe fix for this bug is unset kernel_params before every writing occurs\nin grubenv file. Unset is a way to sanitize the kernel_params variable,\nwhich contains the parameters modified by the command\n\"system host-modify-cpu\", before a new writing occurs to that variable\nagain.\n\nTest plan\n  PASS: Run initial bootstrap for CentOS/Debian successfully\n  PASS: Run system host-modify-cpu and unlock host successfully\n  PASS: kernel_params, in grubenv file, is unset every time a writing\n        occurs\n  PASS: grubenv file updated with no issues even after a long string of\n        parameters being added/removed\n\nCloses-bug: 1981745\n\nSigned-off-by: Samuel Presa Toledo <samuel.presatoledo@windriver.com>\nChange-Id: I6f6854a0273765f17954cd5cb7131a22d73c8e97\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert Patch of puppet-manifest-apply.sh\n\nScript puppet-manifest-apply.sh was patched until the warnings in\nrunning the bootstrap, aio unlock and runtime manifests were resolved on\nDebian: https://review.opendev.org/c/starlingx/stx-puppet/+/844121\nIn addition to the patch reversal, a whitelist was created for virtual\nenvironments, where any warnings during the development process can be\nadded. The whitelist was implemented with an initial warning (\"Could not\nretrieve fact ipaddress\"), that only affects virtual environments.\n\nTest Plan:\nPASS: Build & Install\nPASS: AIO-SX & AIO-DX Successful Bootstrap\nPASS: AIO-SX & AIO-DX Successful Unlock\nPASS: Verified that Warnings added to the whitelist doesn't affect\nmanifests execution in virtual environments.\n\nStory: 2010757\nTask: 48644\nChange-Id: Id67facc82bed7e069efb5f52e0775a69da355de0\nSigned-off-by: Luis Marquitti <luis.eduardoangelinimarquitti@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "memcached scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on memcached's documentation\n\nTEST PLAN:\nPASS: build a new Debian ISO.\nPASS: AIO: SX|DX|DX+: Reboot system.\nPASS: AIO: SX|DX|DX+: Check if modifications were applied.\nPASS: AIO: SX|DX|DX+: Install, bootstrap and perform a host-unlock.\nPASS: AIO: SX|DX|DX+: Check parameter through command line using ps\ncommand.\n\nStory: 2010087\nTask: 45766\nChange-Id: Id667f21d1778251233314000b2763fa2dad877d1\nSigned-off-by: Rom\u00e3o Martines <romaomatheus.martinesdejesus@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait for kube apiserver after apply service parameter\n\nWhen doing a: \"system service-parameter-apply kubernetes\"\nthe kube apiserver will be restarted but the service\nparameter command will return regardless of the apiserver\nstate. And if we run some 'kubectl' commands after that, they will\nfail until the apiserver is back online.\nTo avoid these bad scenarios, we will wait for the kube apiserver\nto be up after we apply the service parameter.\n\nCloses-Bug: 1953183\nChange-Id: Ic3cc3728a8eb363a06f268c904680f30c40b5d44\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "containerd scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on containerd service documentation\n\nTEST PLAN:\nPASS: build a new Debian ISO.\nPASS: AIO: SX|DX|DX+: Install, bootstrap and perform a host-unlock\nverifying that GOMAXPROCS is following the correct scalability set\nparameter.\nPASS: STD: Install, bootstrap and perform a host-unlock verifying\nthat GOMAXPROCS is following the correct scalability set parameter.\nPASS: Single-core for scale-down testing.\nPASS: Increased cores for scale-up testing.\n\nStory: 2010087\nTask: 45710\nChange-Id: I959f6426419e8fb5ed1398fb7e88a3d5219e80ec\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Add docker proxy configuration for kubernetes\".\n\nThis change broke the installation of kubernetes system (config_controller --kubernetes) when no docker proxy was specified.\n\nThis reverts commit e4086a073b7f661d4014061f25525120c27ea679.\n\nChange-Id: I8343741a50fa0857fde9dfe0ee8f81de80a0ff13\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet class for keystone password changing\n\nAdd runtime puppet class to update configuration files and restart\nservices triggered by openstack user password set\n\nConfig-files changed by puppet execution:\n  /etc/dcmanager/dcmanager.conf\n  /etc/dcorch/dcorch.conf\n\nServices restarted:\n  dcorch-engine\n  dcmanager-manager\n  vim\n\nTest Plan:\n\nPASS: Verify that runtime class update password in configuration\n      files (dcorch.conf and dcmanager.conf)\nPASS: Verify services that are restarted appeared in\n      /var/log/sm-customer.log\nPASS: Verify that vim is working after password change with patch\n      apply using sw-manager patch-strategy commands\n\nStory: 2009194\nTask: 43249\nDepends-on: https://review.opendev.org/c/starlingx/config/+/812365\n\nChange-Id: I8f0a2a610c5ac48855f86002ae3cb323dc42db69\nSigned-off-by: Alexandre Horst <alexandre.horst@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unused flag disable_worker_services\n\nThe disable_worker_services file was originally created\nto prevent the (bare metal) nova-compute services from\nrunning on a newly upgraded controller in an AIO-DX\nconfiguration. This situation no longer exists because\nthe bare metal nova-compute services do not exist after\ntransiting to containers. this flag is no longer needed.\nRemoving all references to the disable_worker_services file.\n\nChange-Id: I4f11674956f9aae1e4e805db2eb0696c3023e71e\nCloses-Bug: #1838432\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix bios_cstate naming mismatch\n\nHieradata provided by grub plugin is bios_cstate instead of bios_cstates.\n\nStory: 2009886\nTask: 45442\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I642fa362887492d0898176221ad10ca361576280\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify collectd manifest to not start collectd\n\nThe collectd puppet manifest auto starts the\ncollectd process before a node's configuration\nis complete. This has been see to lead to a\ncollectd process core dump in the collectd's\nnetwork plugin due to being started before\nnetworking is setup or fully operational.\n\nCollectd has a service file that has been\nmodified by the Depends-On update to start\ncollectd after config is complete.\n\nPartial-Bug: 1872979\nDepends-On: https://review.opendev.org/772349\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\nChange-Id: I70ded9b745b7dadb7c50b1d5f9ba8bdcb5ffa2da\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Correct ptpinstance template file render error\n\nThis template was added in\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/817823\n\nThe template file was improperly commented out, meaning it will not\nrender properly. This template is not currently used as the ptpinstance\nbehaviour has not been activated, but this should be corrected so as not\nto interfere with development.\n\nStory: 2009248\nTask: 43964\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I0d806f75e45944f89650581cf7c84c70333bb18a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable keystone to send out event notification\n\nnotification driver need be set for keystone, in order to send out\nnotification. The driver value could be \"messaging, messagingv2,\nrouting, log, test, noop (multi valued)\".\nThis is in order to monitor admin password change in sysinv.\n\nPartial-Bug: 1853017\n\nChange-Id: Ie55a16723e92ea85a615477788ca922cca3bfe42\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Handle PTP instance removal\n\nWhen the operator removes (deassigns) a PTP instance of a host, both the\nservices and the configuration files created, started and running for\nthat instance have to be stopped and removed from the affected host.\n\nThis change improves the puppet manifest to cleanup PTP instances\nresources, keeping only those still remaining in hieradata after the new\nconfiguration is applied.\n\nTest Plan:\n\nPASS: Fresh install (bootstrap) of AIO-SX lab, then configured with PTP;\nPASS: Adding/removing PTP instances with subsequent lock/unlock of host;\nPASS: Adding/removing PTP instances in runtime (w/ ptp-instance-apply).\n\nTask: 44506\nStory: 2009248\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I604eb6e3cc8709f22e415b5f2e4557d893091a40\n",
        "issue_summary": ""
    },
    {
        "commit_message": "restore fix to not overwrite oidc-issuer-url\n\nstx-puppet commit f6a29166 corrects the unintended adjustment of\noidc-issuer-url by a sed command.  Whereas commit 56b34f04 copies the\nsed command from erb file to python but omits the previous fix.\n\nRestore the adjustment of sed command to allow oidc-issuer-url to be\nused unadjusted. The original fix is applied to the python version of\nsed command.\n\nTest Plan:\nPASS: Patch /usr/share/puppet/modules/platform/files/change_k8s_control_plane_params.py;\n      Run 'system service-parameter-apply kubernetes';\n      Wait for kube-apiserver process to restart;\n      And observe output of 'ps -ef | grep apiserver'\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/862408\n\nCloses-Bug: 1994172\n\nChange-Id: I5a191cd3980736dd8cbb1b488649d090b000c6bf\nSigned-off-by: Michel Thebeau <Michel.Thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix puppet network.pp to load vfio-pci driver with sriov enabled\n\n- Modified manifests/network.pp enabled sriov when driver is vfio-pci\n\nplan test:\n01. PASSED - system host-lock controller-0\n02. PASSED - Configure any NIC that has status UP\n             (check with the command: ip addr)\n03. PASSED - system host-if-modify -m 1500 -n sriov0 -c pci-sriov \\\n                -N 63 --vf-driver=vfio controller-0 <interface_name>\n04. PASSED - system host-unlock controller-0\n\n05. PASSED - system application-upload <sriov-fec-operator-version.tgz>\n06. PASSED - system application-apply sriov-fec-operator\n\n07. PASSED - cat /sys/module/vfio_pci/parameters/enable_sriov eq. \"Y\"\n08. PASSES - cat /sys/module/vfio_pci/parameters/disable_idle_d3 eq. \"Y\"\n\n(In this example I'm using ACC200 but it can be ACC100 or N3000)\n09. PASSED - kubectl apply -f sriov-fec-config-acc200-vfio-pci.yaml\n10. PASSED - kubectl apply -f acc200.yml\n11. PASSED - kubectl exec acc200 -it \u2013 bash\n12. PASSED - echo $PCIDEVICE_INTEL_COM_INTEL_FEC_ACC200\n13. PASSED - Run the script below in the container\n    CPU_SET=$(taskset -pc 1 | sed -e 's/pid 1.s current \\\n                affinity list://g')\n    for d in $(lspci -d 8086:57c1 | cut -d' ' -f1) ; do\n        /opt/sysroot/usr/local/bin/dpdk-test-bbdev \\\n        --vfio-vf-token=02bddbbf-bbb0-4d79-886b-91bad3fbb510 \\\n        -l $CPU_SET -a $d -- -c validation \\\n        -v /opt/sysroot/usr/local/app/test-bbdev/ldpc_dec_default.data\n    done\n14. PASSED - DPDK Validation with testpmd was performed\n\n\nCloses-bug: #2033103\nSigned-off-by: Bezerra Filho, Moacir <Moacir.BezerraFilho@windriver.com>\nChange-Id: I880551fafbb351c370acedeaf43f9de595fea0af\n",
        "issue_summary": ""
    },
    {
        "commit_message": "add runtime manifest update admin endpoint cert\n\nThis is to add runtime manifest for subcloud to update admin endpoint\ncertificate.\n\nStory: 2007347\nTask: 39961\n\nChange-Id: Ife7141140b3d5e904fca5c03f7fd8b05f7bb5284\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ignore error on k8s taint removal from puppet\n\nThere are cases where the kubernetes taint is not present on,\nor has already been removed from, a newly configured standby\ncontroller. This causes the taint removal command run by the\npuppet manifest to fail. This failure can be safely ignored,\nso the command is updated by this commit to always return\nsuccess.\n\nChange-Id: Icdb55738e052c65a28e44582e345038b0de83c37\nCloses-Bug: 1815795\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add method to reconfigure kubelet at runtime\n\nThis adds two runtime methods to reconfigure kubelet:\nplatform::kubernetes::master::update_kubelet_params::runtime\n- this updates the kubelet-config ConfigMap with new parameters\n\nplatform::kubernetes::update_kubelet_config::runtime\n- on each node, 'kubeadm upgrade node phase kubelet-config'\n  is used to regenerate the /var/lib/kubelet/config.yaml file,\n  then kubelet is restarted.\n\nAlong with this new configuration update mechanism, new kubelet-config\nvalues from puppet are formatted with update script, i.e.,\nimageGCHighThresholdPercent: 79\nimageGCLowThresholdPercent: 75\nevictionHard:\n  imagefs.available: 2Gi\n\nThese new settings reduces likelihood of Node-Pressure Eviction\nthat occurs essentially near 86% /var/lib/docker usage. The default\nupstream default imageGCHighThresholdPercent 85 is too high,\nespecially with evictionHard imagefs.available default of 15%.\n\nThe new image garbage collection parameters are engineered below\nthe system global default 80% file-system threshold. This allows\nkubelet imageGC to cleanup space prior to hitting /var/lib/docker\nalarms.\n\nThe evictionHard imagefs.available is reduced to 2Gi,\nfrom the previous setting 15% which translated to 4.5Gi.\n\nTESTING:\nPASS - manually fill /var/lib/docker to exceed imageGC and\n       verify GC operates\nPASS - AIO-DX fresh install gets updated kubelet config\nPASS - AIO-DX apply/remove designer patch with updated kubelet config\nPASS - 'system kube-config-kubelet' updates K8S nodes kubelet config\nPASS - AIO-DX reinstall controller-1 has updated kubelet config\nPASS - AIO-DX install new worker node gets updated kubelet config\n\nPartial-Bug: 1977754\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: If634a8f59be3c13bf48612c7c67ca2802a03fc28\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support optional nova-local volume-group\n\nFor pure worker nodes we do not require a nova local vg. Modify the\nworker manifest to only add the supporting logical volumes if the volume\ngroup is present.\n\nStory: 2004022\nTask: 30672\nChange-Id: I5deffc6eb968d585074fed4ef5bc5455f0c35b8b\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Optional https for containerized openstack\n\nThe certificate for openstack services are installed and stored\nunder /etc/ssl/private/openstack. The endpoint tls parameters are\nconfigured by the helm overrides.\n\nTests performed:\nAIO-SX: application apply, reapply and launch instance\nAIO-DX: application apply, reapply and launch instance\nStandard system: application apply, reapply and launch instance\nPause and Resume instance. Ensure that no audit error is seen.\n\nStory: 2004433\nTask: 28096\n\nChange-Id: Ib81f9541ebf116dee817e0b55f31866ed0d283f0\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Tune ptp parameters for better performance\n\nAdjust some ptp parameters to improve performance and robustness:\n- set scheduling policy of ptp processes (ptp4l & phc2sys) to fifo\n  with priority 70\n- increase rate of phc2sys clock syncing to 10/s vs. default 1/s\n- increase tx timestamp timeout to 20ms.  This seems to prevent \"timed\n  out while polling for tx timestamp\" errors which cause ~30s hit while\n  ptp is re-initialized.\n\nStory: 2006759\nTask: 37253\nChange-Id: Ib71c9a32ba8d4865a255c19bf4bed8a62d2d1962\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for multiple FPGA_5GNR devices\n\nWhen multiple devices are present, pf_bb_config can be called\nwith the -a option to automatically configure the probed devices\nand thus prevent entering interactive mode.\n\nTest Plan:\n    PASS: Verify that pf_bb_config command executed successfully\n    PASS: Verify if everything worked after host lock/unlock\n\nPartial-Bug: 1970785\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: I3f6e8381f296f97ae9cd6f557bf7c9dd0c2b50b0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added class to handle pci runtime config on kubernetes\n\nThe new class adds a handler on puppet to trigger\nconfiguration on runtime when an SR-IOV interface is\nassigned to a data network on an unlocked host\n\nStory: 2008531\nTask: 41707\nDepends-On: https://review.opendev.org/c/starlingx/config/+/772759\nChange-Id: Iddbc272eb6b3321c987c2700e63734ee57244cf9\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implementation of PTP support in SysInv and Puppet\n\nPrecision Time Protocol (PTP) support is added to StarlingX.\nController Nodes act as a Boundary Clocks and synchronize its clock to a\nGrand Master clock via OAM interface. Serve as a time source to other nodes.\nCompute/Storage Nodes are Slave Clocks (Ordinary Clocks) and synchronize\nits clock to a Controller Nodes via Management interface.\nAPI is provided to enable and configure PTP as follows:\n\"system ptp-modify --enabled=<true/false>\" is there to turn it on/off.\nNote that NTP must be disabled first before turning PTP service on.\n\"system ptp-modify --mode=<hardware/software/legacy>\" selects time stamping.\nHardware timestamping is the default option and achieves best time syncing.\n\"system ptp-modify --transport=<l2,udp>\" switches between IEEE 802.3 or UDP\nnetwork transport for PTP messaging. L2 is the default transport.\n\"system ptp-modify --mechanism=<e2e,p2p>\" sets the PTP delay mechanism.\nOptions: default delay request-response (E2E) mechanism and peer delay (P2P).\n\"system ptp-show\" displays the current status of PTP service.\n\nChange-Id: I6bb6162903c70a49b55f4fc02b44e5ca8a66d5a5\nStory: 2002935\nTask: 22923\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-manifests: Added apparmor rule for /etc/ntp_initial.conf\n\n'/etc/ntp_initial.conf' is created by puppet ntp module and it\nis impossible to be assigned the read/write permission by the\ndefault apparmor profile '/etc/apparmor.d/usr.sbin.ntpd'.\nThis commit uses the puppet command to add the 'r' permission\nto '/etc/ntp_initial.conf' after it is created by puppet ntp\nmodule.\n\nTest Plan:\nPass: Deploy the iso on an AIO-SX\n      Execute following steps to enable app-armor\n      #system host-lock controller-0\n      #system hos-update controller-0 apparmor=enabled\n      #system host-unlock controller-0\n      No delay/timeout of 180 secs be seen in the [puppet.log]\n\n\nCloses-Bug: 2020773\n\nChange-Id: Iff5f8711db95ebc09b0a551cfbc48d5844461887\nSigned-off-by: Haiqing Bai <haiqing.bai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Replace hiera_hash and hiera_include funcs\n\nThe use of the hiera_hash and hiera_include functions generate\nwarnings during bootstrap since hiera v5 is being used.\nTo avoid this, the functions were replaced by variations of the\nlookup() function.\n\nDebian Bullseye Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nCentOS 7 Test Plan:\nPASS: Build & install\nPASS: Successful Bootstrap\nPASS: Successful Unlock\n\nStory: 2009965\nTask: 45332\n\nSigned-off-by: Matheus Machado Guilhermino\n<Matheus.MachadoGuilhermino@windriver.com>\nChange-Id: I82b7b500e713f1d099b854f69229304b7955ea79\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Always add controller aliases\n\nIn upgrade process the /etc/hosts restores old\nvalues without the controller-platform-nfs alias\nin controller.\nThis issue doesn't happen in fresh install,\nBut adding the aliases in config::hosts guarantees\nthat alias will always be present.\n\nTest plan ( Debian only )\nPASS Installed 2+1 system with subnet configuration (/29)\n     (2controllers, 1 worker)\nPASS upgrade AIO-SX system\n\nStory: 2010351\nTask: 46770\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: Ie401d6a10895972e932e0b28e3107c8dd5b69112\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Extend cert-mon network_max_retry default value\n\nWe are running into cases where slow hardware means that subclouds can\ntake a long time to complete their startup. In such cases, cert-mon\nis giving up on the initial audit after 15m, leaving the subcloud in\nan out-of-sync state until the next daily cert-mon audit run.\n\nThe network_max_retry works with the network_retry_interval (in seconds)\nto affect the total time spent retrying a subcloud before giving up:\n\n  network_retry_interval * (network_retry_interval/60) = time in minutes\n\nSo we are increasing the overall retry time from 15m to 90m:\n\n   30 retries * 180s/60m per retry = 90m\n\nTest Plan:\n\nPASS:\n- install using new values, verify that the default is now changed\n- verify retry limit is reached\n- verify case where daily audit is initiated while the subloud is in the\n  reattempt state\n\nCloses-Bug: 1964811\n\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\nChange-Id: I3d279a4c0f9f041047df4b5a3e850396d91bbb24\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph initialization on AIO is done only in 'controller' manifests\n\nOn AIO deployments puppet is run twice with two different manifests:\n1. 'controller': to configure controller services\n2. 'worker': to configure worker services.\n\nCeph is configured when 'controller' manifests are applied, there is\nno need to run them a second time, when 'worker' set is applied.\n\nCommit adds new puppet classes to encapsulate ceph configuration\nbased on node personality and adds a check to not apply it a 2nd\ntime on controllers.\n\nIf the ceph manifests are executed a second time then we get into\na racing issue between SM's process monitoring and 'worker' puppet\nmanifests triggering a restart of ceph-mon as part of reconfiguration\n\nAfter a reboot on AIO, SM takes control of ceph-mon monitoring\nafter 'controller' puppet manifests finish applying. As part of this,\nSM monitors processes death notification and gets the pid from the\n.pid file. And periodically executes '/etc/init.d/ceph status\nmon.controller' for a more advanced monitoring.\n\nWhen the 'worker' manifests are executed, they trigger a restart\nof ceph-mon through /etc/init.d/ceph restart that has two steps: 'stop'\nin which ceph-mon is stopped, and 'start' in which it is restarted.\n\nIn the first step, stopping ceph-mon leads to the death of ceph-mon\nprocess and removal of its PID file. This is promptly detected by\nSM which immediately triggers a start of ceph-mon that creates a\nnew pid file. Problem is that ceph-mon was already in a restart,\nand at the end of the 'stop' step the init script cleans up the\nnew pid file instead of the old.\n\nThis leads to controllers swacting a couple of times before the system\ngets rid of the rogue process.\n\nChange-Id: I2a0df3bab716a553e71e322e1515bee2bb2f700d\nCo-authored-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nStory: 2002844\nTask: 29214\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reserve ports in the ephemeral port range\n\nSet ip_local_reserved_ports for keystone and tiller\n\nPer https://www.kernel.org/doc/Documentation/networking/ip-sysctl.txt,\nthis variable will:\n- Specify the ports which are reserved for known third-party\n  applications.\n- Note that ip_local_port_range and ip_local_reserved_ports settings are\n  independent and both are considered by the kernel when determining\n  which ports are available for automatic port assignments.\n\nThis results in the following on controllers:\n\n$ cat /proc/sys/net/ipv4/ip_local_port_range\n32768   60999\n\n$ cat /proc/sys/net/ipv4/ip_local_reserved_ports\n35357,44134-44136\n\nChange-Id: I59219dc1e6b834e105be55e1e863b8f82fe50816\nCloses-Bug: #1851533\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kube rootca update abort changes\n\nThis change updated k8s master and worker rootca runtime classes\nto support kube rootca update abort procedure.\n\nWe also added a fix to cert-mon errors when update start again\nafter abort.\nWhen root ca update start again after abort at the stage of host\ncerts get updated, cert-mon will generate TLS errors at the stage\nof trustbothcas. This is fixed by moving the signing ca cert to\nthe top of the admin.conf when update-certs phase completes on the\nhost.\n\nStory: 2008675\nTask: 43067\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I79d4298694bcba96b89602e93adca49a71d284b6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Distributed Cloud configuration\n\nThe following changes are required to enable system\ncontroller and sub cloud configuration in a distributed\ncloud environment:\n\n* Remove references to os-keystone-region-name as the\nopenstack patches that support it, have been removed.\n* Change the iptables rule for the NAT entry, to only\napply, if the selected outgoing interface is the\nOAM interface.\n* Configure keystone endpoints, before configuring\nopenrc on subclouds\n* Remove all openstack services, and users from the region\nconfig and update the tox\n* Disable nova, cinder and neutron api proxy\n\nOnly tested distributed cloud configuration as multi-region\nconfiguration is not supported in the current release.\n\nStory: 2004766\nTask: 30017\n\nChange-Id: I5c43e2112f34225aa9e23ff777c5333ae77efcdc\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove dcdbsync public endpoint from keystone catalog\n\ndcdbsync is a private service only used by dcorch in DC system to\nsynchronize keystone resources. It's not supposed to have public\nendpoint in keystone catalog to expose its service on OAM IF.\n\nThis update removed its public endpoint from keystone catalog.\n\nChange-Id: Idfb95ad26ea99e3ca01d78b974284909f82becc0\nCloses-Bug: 1892391\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce neutron workers from eng_workers to eng_workers_by_2\n\nIn the case of a LO DOR with neutron workers equal to the number of\ncores, neutron-server was observed to consume nearly all of the CPU,\ncausing critical CPU alarms, and starving out the system.\n\nIn order to prevent this, this commit changes both the number of API\nworkers, and the number of RPC workers, to be eng_workers_by_2 rather\nthan eng_workers.\nBy cutting the number of workers in half, this change prevents too much\nthroughput in neutron from grinding the system to a halt, and provides a\nreduction in the overall time for a LO DOR. as well as giving somewhat\nmore consistent DOR results, consistenly <~45 mins with this change,\nrather than frequently over an hour, or not completing without this\nchange.\n\nChange-Id: Ib40257ef34766a250b70edcb704220675ed0cc85\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup config.toml.erb of MARK_* comments\n\nThe comments that contain strings \"MARK_BEGIN\" and \"MARK_END\"\nare not used anymore in ansible bookstrap and they need\nto be cleaned up from config.toml.erb template.\n\nChange-Id: Id53bc58d2624581b6e50ead1c77a5cd424631ae5\nCloses-Bug: 1892768\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/779047\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix word and statement errors in comments\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Standby controller in reboot loop after modifying the partition size\n\nThe root cause of this issue is that when the newly standby controller\nis coming up, the partition manifest calls \"sm-unmanage / sm-manage\"\nfor drbd-cinder service. However at this time /var/run/sm.db is not\navailable yet which causes \"sm-unmanage / sm-manage\" to fail.\n\nThis commit adds a check in the partition puppet file that only\nif the system is up \"sm-unmanage\" and \"sm-manage\" will be called.\n\nChange-Id: I1869f024579350265684f2ee3bb5e3e74e6427cb\nCloses-bug: 1809009\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix basic rpmlint issue found via opensuse build\n\nThe Open Build Service is stricter on reporting issues with\nRPMs and specfiles, so fix them here.\n\nStory: 2006564\nTask: 36742\nTask: 36796\nChange-Id: Id990f71daf367015d2bf7c83eceb81d16132c35d\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Apply PTP configuration at runtime\n\nAllow PTP configuration to be applied at runtime. Introduce a new\nruntime class in the ptp manifest.\n\nCloses-Bug: 1861726\nStory: 2006759\nTask: 38771\nChange-Id: I279cf4f9bf72e19981d4204e8e3b4bab8dcd7ff3\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set osd_pool_default_size based on deployment\n\nThe ceph.conf file packaged in the Ceph RPM sets 'osd_pool_default_size\n= 2'. This is a valid initial value for most deployments. The exception\nis for the AIO-SX single OSD installation (which is our default minimum\nAIO-SX configuration). In this deployment configuration, this value will\nproduce a HEALTH_WARN specifying \"Degraded data redundancy\".\n\nThis commit will set 'osd_pool_default_size' based on the deployment and\nspecifically set it to '1' for the AIO-SX. This will provide a HEALTH_OK\ncluster on controller unlock.\n\nIf/when additional OSDs are added, the 'system storage-backend-modify'\ncommand can be used to change the replication factor to provide a higher\nlevel of data redundancy.\n\nThis change removes the long-stanging need to run the following command\nwhen provisioning the AIO-SX:\n\n  ceph osd pool ls | xargs -i ceph osd pool set {} size 1\n\nThis will also now enable automatic loading of the platform-integ-apps\nk8s application and subsequent loading of the rbd-provisioner for\npersistent volume claims on the AIO-SX.\n\nChange-Id: I901b339f1c7770aa16a7bbfecf193d0c1e5e9eaa\nStory: 2005424\nTask: 33471\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add dcmanager-state service\n\nThis commit is part of:\n\"Refactor portion of dcmanager into dcmanager-state process\"\nin the distributed cloud project.\n\nTest Plan:\nPASS:\n- Validate dcmanager-state service lifecycle\n\nStory: 2009725\nTask: 44317\nDepends-On: https://review.opendev.org/c/starlingx/ha/+/825169\n\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\nChange-Id: I0bb12714655f94b691585fddbe91b003d47c59b3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Container pinning on worker nodes and All-in-one servers\n\nThis story will pin the infrastructure and openstack pods to the\nplatform cores for worker nodes and All-in-one servers.\n\nThis configures systemd system.conf parameter\nCPUAffinity=<platform_cpus> by generating\n/etc/systemd/system.conf.d/platform-cpuaffinity.conf .\nAll services launch tasks with the appropriate cpu affinity.\n\nThis creates the cgroup called 'k8s-infra' for the following subset\nof controllers ('cpuacct', 'cpuset', 'cpu', 'memory', 'systemd').\nThis configures custom cpuset.cpus (i.e., cpuset) and cpuset.mems\n(i.e., nodeset) based on sysinv platform configurable cores. This is\ngenerated by puppet using sysinv host cpu information and is stored\nto the hieradata variables:\n- platform::kubernetes::params::k8s_cpuset\n- platform::kubernetes::params::k8s_nodeset\n\nThis creates the cgroup called 'machine.slice' for the controller\n'cpuset' and sets cpuset.cpus and cpuset.mems to the parent values.\nThis prevents VMs from inheriting those settings from libvirt.\n\nNote: systemd automatically mounts cgroups and all available\nresource controllers, so the new puppet code does not need to do\nthat.\n\nKubelet is now launched with --cgroup-root /k8s-infra by configuring\nkubeadm.yaml with the option: cgroupRoot: \"/k8s-infra\" .\n\nFor openstack based worker nodes including AIO\n(i.e., host-label openstack-compute-node=enabled):\n- the k8s cpuset and nodeset include the assigned platform cores\n\nFor non-openstack based worker nodes including AIO:\n- the k8s cpuset and nodeset include all cpus except the assigned\n  platform cores. This will be refined in a later update since\n  we need isolate cpusets of k8s infrastructure from other pods.\n\nThe cpuset topology can be viewed with the following:\n sudo systemd-cgls cpuset\n\nThe task cpu affinity can be verified with the following:\n ps-sched.sh\n\nThe dynamic affining of platform tasks during start-up is disabled,\nthat code requires cleanup, and likely no longer required\nsince we are using systemd CPUAffinity and cgroups.\n\nThis includes a few small fixes to enable testing of this feature:\n- facter platform_res_mem was updated to not require 'memtop', since\n  that depends on existance of numa nodes. This was failing on QEMU\n  environment when the host does not have Numa nodes. This occurs\n  when there is no CPU topology specified.\n- cpumap_functions.sh updated parameter defaults so that calling\n  bash scripts may enable 'set -u' undefined variable checking.\n- the generation of platform_cpu_list did not have all threads.\n- the cpulist-to-ranges inline code was incorrect; in certain\n  senarios the rstrip(',') would take out the wrong commas.\n\nStory: 2004762\nTask: 28879\n\nChange-Id: I6fd21bac59fc2d408132905b88710da48aa8d928\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Device image repository\n\nThe device images are stored in the drbd filesystem\n(/opt/platform/device_images) in the active controller.\nIn order to allow the other worker hosts to retrieve the device images\nfrom the active controller over lighttpd, the directory\n/www/pages/device_images is created as a bind mount of the drbd\ndirectory. This mount resource is managed by SM.\nThe 'device_images' is added to the lighttpd static content list.\n\nTests performed on the following systems:\nAIO-DX, AIO-DX plus compute, Standard 2+1\nDC with AIO-DX plus subcloud\nDC with Standard subcloud\n\nStory: 2007875\nTask: 41877\nDepends-On: https://review.opendev.org/c/starlingx/ha/+/776489\n\nChange-Id: I4e7686ece49546d7ef84f5724370167afaf21375\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix version for openSUSE\n\nWe are standarizing on x.y.z so fix this to 1.0.0\n\nChange-Id: I9ea3cd268d92b69c24b67fbfa3978d513dc810ae\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-dcdbsync\n\nAdd debian packaging infrastructure for puppet-dcdbsync.\n\nStory:2009101\nTask: 43314\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I45f7c80c7e48e489c23b9c31bbccb7208a55694e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wrap IPv6 in square brackets in ceph.conf\n\nNew version of ceph requires IPv6 to be wrapped in square brackets\n\nWhen running a B&R procedure on ipv6 setups, the restore playbook\nfails.\nThis happens because the restore playbook has to add the v1 protocol\nport number in the public_addr option for the monitor group in order\nto start the ceph monitor. It fails in ipv6 networks because ipv6\naddresses must be wrapped in square brackets and they are not.\n\nHow it is (example):\n  [mon.controller-0]\n  public_addr = fd01::2\n\nHow it should be (example):\n  [mon.controller-0]\n  public_addr = [fd01::2]\n\nTest Plan:\n - AIO-SX ipv4 B&R\n - AIO-DX ipv4 B&R\n - AIO-SX ipv6 B&R\n\nStory: 2009074\nTask: 44044\nSigned-off-by: Felipe Sanches Zanoni <Felipe.SanchesZanoni@windriver.com>\nChange-Id: Ia16a5b98e5b880654f7f9395b4c904dab9314cc0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove mtce_notifier from collectd configuration\n\nThe alarm debounce support addition to the fm_notifier\nplugin required that the mtce degrade notifier be\nmerged into the fm_notifier to ensure proper\nalarm/degrade accounting.\n\nThis merge obsoletes the mtce_notifier.\n\nUnnecessary mtce port config is dropped.\n\nTest Plan:\n\nPASS: Verify collectd configuration after file removal\n\nChange-Id: I560c093faba5c8e9804d51ac625d5c71db662a36\nPartial-Bug: 1848580\nDepends-On: https://review.opendev.org/#/c/690794/\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion armada image\n\nUpversion armada image from existing\naf8a9ffd0873c2fbc915794e235dbd357f2adab1\nto\ndd2e56c473549fd16f94212b553ed58c48d1f51b-ubuntu_bionic\n\nThe specific image was chosen because it contained upstream\narmada commit df68a90e057c2e1e3427d6b8497b437c8a4c3b7e, which\nis a fix for keystone kubernetes auth. The ubuntu bionic image\nwas chosen because the old image was an ubuntu bionic based image.\n\nTesting done by applying stx-openstack on standard, simplex,\nand duplex systems.\n\nStory: 2005860\nTask: 33693\n\nChange-Id: Ifd8a66d46e2dfd47ca7c5ab9807076ef43e67027\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable raise/get/clear NFV alarm to container fm-rest-api\n\nadd puppet parameters and write to nfv config file to\ndisable raise/get/clear NFV alarm to container fm-rest-api service\n\nStory: 2004008\nTask: 33573\nDepends-On: https://review.opendev.org/#/c/658972/\nChange-Id: I3ab37fe476ad083b5c8acca2684973eec30b8005\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix to not restart alias interface\n\nThe alias interface may at times be brought up before its parent\ninterface (ethernet or vlan) depending on how the interface config\nfiles are listed in the filesystem.\nThe fix is to not restart the alias interface. If there is a\nchange in the alias interface configuration, the parent interface\nwould be restarted instead.\n\nPartial-Bug: 1817593\n\nChange-Id: I83b88e1587c6468d85e14a50de934908586cbc9b\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian - Fix update ca certs command\n\nCorrect update ca certs command for Debian.\n\nTest Plan:\nVerify: Bootstrap and adding a Subcloud on Debian\nVerify: Bootstrap and adding a Subcloud on Centos\n\nStory: 2010119\nTask: 45803\n\nSigned-off-by: Li Zhu <li.zhu@windriver.com>\nChange-Id: Ic624f13a650d02c51c38ceaf65dbb91e40808b93\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify SM ETCD health check\n\nThis change is done to check etcd health,\nthrough client url endpoint instead of systemctl.\n\nCloses-Bug: 1930456\nSigned-off-by: Jose Infanzon <jose.infanzon@windriver.com>\nChange-Id: I8321fec80c1d4d80edb7af27c68c2ff1311c8b31\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"[PTP SyncE] Print nic parameters to a conf file\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"fix two coredns pod in simplex system\"",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP] Add default value for pmc_gm_settings\n\nAdding a default value for the pmc_gm_settings variable to correct an\nissue where the worker manifest can fail on first unlock when\npmc_gm_settings is not defined.\n\nTesting:\n\nPass: Install AIO-SX, configure ptp services and unlock node.\n\nStory: 2010033\nTask: 45490\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I22bdadb5576282027a5309af64a6489b4589abf4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add runtime class for kube-apiserver\n\nThis change adds a runtime class to restart kube-apiserver.\nKube-apiserver needs to be restarted sometimes to pick up new config\nchanges or refresh cached content. This specific bug deals with\noidc-auth, and restarting kube-apiserver to pick up a new ssl ca.\n\nTesting\n\nPASS: apply oidc-auth, change certificates to use certs signed\n      by a new ca, install new ca through sysinv, apply oidc auth\n      again, try to authenticate through oidc-auth and run a\n      kubectl command\n\nPASS: perform a system upgrade, with oidc-auth applied before the\n      upgrade. Change the certificate to be signed by a new ca\n      after the upgrade. apply oidc-auth again. try to authenticate\n      through oidc-auth and run a kubectl command\n\nChange-Id: Ia606ea95d0ce5d38d88d086c87900af184abe1b1\nPartial-Bug: 1952118\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Pull images from registry with credential file\n\nThis commit adds the ability to use the content of a created credential\nfile as the value of the --creds parameter for `crictl pull` command,\npreventing logging the literal credential values on puppet log files.\n\nThe registry_credentials file is created from a template file that\ninterpolates the scope variable containing the value of the\ncredentials. As soon as the file is created and read, the file is\ndeleted from the /tmp/puppet directory.\n\nTest Plan:\nPASS: Deploy a SX system and observe Controller-0 status is available\n      enabled active.\nPASS: Deploy a DX system and observe in the puppet logs from\n      Controller-1, the exec commands are logged with the sed command\n      where it would have the credentials to the registry. Observe the\n      both controllers are available enabled active status.\nPASS: Observe exit 0 output in each log file of Controller-1 listed by\n      the execution of the command below.\n      find /var/log/puppet -type f | xargs grep -l \"creds\"\nPASS: Upgrade kubernetes version from v1.24.4 to v1.25.3 in AIO-SX and\n      AIO-DX systems. Observe the state upgrade-complete after finishes\n      the manual kubernetes components upgrade for both types of\n      systems.\n\nCloses-Bug: 2008726\nSigned-off-by: Manoel Benedito Neto <manoel.beneditoneto@windriver.com>\nChange-Id: Id2579767f25cb5d0cabe38528e7aa72bb9c7a8b2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Monitor the datanetwork for non-OpenStack work node\n\nUpdate the lmon to support datanetwork interface monitoring\nand use collectd to control the alarm information. Now lmon\nwill obtain the list of interfaces from /etc/lmon/lmon.conf\nwhich can be generated by puppet.\n\nChange-Id: I45fd056bd71f2ff9b49b52b8143e43179f18e03c\nStory: #2002948\nTask: #37326\nDepends-on: https://review.opendev.org/#/c/694927\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes firewall rule addition\n\nAdd firewall rule to allow compute hosts to have external http/https\naccess through the controllers.\n\nStory: 2002843\nTask: 27031\nChange-Id: I35b31d590f67b7fed223c0db0058c064de006387\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Multus support for IPv6 service endpoint\n\nThe K8s service host in the Multus kubeconfig file is currently\nnot wrapped with [brackets] in the case an IPv6 cluster service\nendpoint has been configured.\n\nThis causes issues for Multus when it attemps to get (curl) for\nthe address.\n\nThis fix ensures the IPv6 address is properly formatted for use\nby Multus.\n\nCloses-Bug: 1836972\n\nChange-Id: I803edfb86a70d232d6015a7bb130da0756a56458\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "create config for sm-api\n\n1. create smapi service endpoint, credential\n2. create sm-api.conf for sm-api configuration\n3. configure haproxy, so sm-api binds to mgmt fixed ip, with haproxy:\n    mgmt fixed ip -> mgmt floating ip -> oam floating ip\n\nStory: 2002827\nTask: 22744\n\nChange-Id: I743f6b0f09c06325d3c9dc6e11902420882e7931\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker Registry Keystone Authentication\n\nThis commit adds functionality for Docker registry to authenticate\nusing Keystone.\n\nFirst, this commit contains puppet changes which are required to\nmanage the new token server required for Keystone authentication.\n\nSecond, with proper authentication now implemented, we are removing\nthe \"insecure\" flag for the controller registry in the \"daemon.json\"\nfile in \"/etc/docker\".\n\nWith the \"insecure\" flag removed, Docker will start complaining about\ncertificate issues. This commit also includes generation of default\ncertificates suitable for use by Docker registry as well as a sysinv\ncommand \"system certificate-install -m docker_registry\" to update the\ncertificate.\n\nDocker registry token server works only with PKCS1 style keys while we\nwould like to use PKCS8 keys by default. This is why our default\ncertificate and installed certificate create both a PKCS1 style key as\nwell as a PKCS8 style key. The keys are installed to\n\"/etc/ssl/private/\" as registry-cert.crt, registry-cert.key, and\nregistry-cert-pkcs1.key.\n\nStory: 2002840\nTask: 22783\nDepends-On: https://review.openstack.org/#/c/626354/\n\nChange-Id: I0127bd5f10f3950739678929b92eb1b77e2119db\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace coredump.conf by Puppet ERB template\n\nA puppet erb template was created with coredump parameters\nprocess_size_max, external_size_max, max_use and keep_free,\nwith default values, to make possible the user configure them\nby command in the host.\n\nThe configurations will update the system file\n/etc/systemd/coredump.conf.d/coredump.conf\n\nTest Plan:\n\nPASS: TC1\n      changes in the service-parameter table related to coredump\n      --> coredump.conf updated automatically according to the\n          puppet erb template\n\nPASS: TC2\n      check sysctl -p /etc/sysctl.d/50-coredump.conf command executed\n      --> coredump.conf updated aumatically and the puppet.log\n          generated for the same timestamp\n\nStory: 2010026\nTask: 45268\nDepends-on: https://review.opendev.org/c/starlingx/config/+/839631\n\nSigned-off-by: Virginia Martins Perozim <vmartins@windriver.com>\nChange-Id: I7735dcf2514ccdb0c6a4f3a6fe32ee3618ec90a0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "DRBD replication, rebuilding monitor and PVCs during migration to AIO-DX\n\nGiven the system capability \"simplex_to_duplex_migration\" exists on the\nsystem to indicate that it is going through a migration from AIO-SX\nto AIO-DX, this commit will during the unlock process, create a DRBD\nreplicated filesystem for the floating monitor, rebuild the monitor\nstore.db from the existing Ceph OSDs on the system, recover the\npreviously existing cephfs filesystems, updates the ceph crushmap\nand updates the Ceph monitor IP on existing PersistentVolume resources.\n\nStory: 2008587\nTask: 42078\n\nSigned-off-by: Pedro Linhares <PedroHenriqueLinhares.Silva@windriver.com>\nChange-Id: Iba6ec8bf812c9623724c357455a370d79ffd7b60\nSigned-off-by: Pedro Henrique Linhares <PedroHenriqueLinhares.Silva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix cron service on debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait kube-apiserver on kube-rootca-update trustcas\n\nDuring both trust-cas phases (trust-both-cas and trust-new-ca) of the\nkube-rootca-update, the kube-apiserver is restarted in order to trust\nthe new rootcas in place, but it doesn't currently wait for the k8s API\nserver to be properly restarted before completing the command.\nThis way, running the subsequent command, kube-rootca-pods-update,\nwithout giving the right amount of time for the kube-apiserver to be\nproperly restarted causes it to fail and get stalled.\n\nAdding a wait condition at the end of both trust-both-cas and\ntrust-new-ca fixes this behavior by not allowing the next steps to be\nrun until the kube-apiserver is ready.\n\nThe check used is as suggested in in the k8s health checks doc:\nhttps://kubernetes.io/docs/reference/using-api/health-checks/\n\nTest Plan:\n\nPASS: Verify kube-apiserver is reachable immediately after\nkube-rootca-host-update trust-both-cas and trust-new-ca completes\nPASS: Verify kube-rootca-pods-update behaves correctly running\nimmediately after host-rootca-host-update completes\nPASS: Verify kube-rootca-host-update step fails if kube-apiserver fail\nto get online before the timeout (maximum of 180 s)\n\nCloses-Bug: 1950004\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\nChange-Id: Ia15f5e9f46311203f9c4f89ce6b7d18b04356886\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable helm repository and chart upload tool\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart Docker After Changing Proxy Settings\n\nRestart Docker process after changing proxy settings through service\nparameters. There is a potential issue currently where Docker is\nstarted before the changes to proxy settings through service parameter\nis applied. This means on lock/unlock, Docker restarts with old\nproxy settings. This commit fixes that issue.\n\nCloses-Bug: 1838651\n\nChange-Id: I57e527998fdf50c4be38c32ea8d1ee95bc46d3ff\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable/disable vswitch\n\nEnables or disable vswitch agent based on the host labels. If the\nvswitch label is not assigned to the host then vswitch is disabled.\n\nTest plan:\nPASS: Remove vswitch label from host, check if there are no alarms\nand verify if vswitch was disabled.\nPASS: Assign vswitch label from host, check if there are no alarms\nand verify if vswitch is running again.\n\nRegression:\nPASS: Successfully build starlingx and install.\nPASS: Ping a VM with ovs and ovs-dpdk vswitches types.\n\nStory: 2009702\nTask: 44032\nDepends-On: https://review.opendev.org/c/starlingx/config/+/818599\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I77166fc3bf084ed70ef0c2a7c1f04350a0357b9e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Collapse glance into platform in ControllerFS API\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"dcdbsync for containerized openstack services - puppet\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix kubernetes options during upgrade\n\nThe kubernetes upgrade of control-plane was failing due to\nincompatible settings in kubelet_override.yaml. Unless all\noverridden options are specified (some can be k8s version specific),\nthe 'kubeadm upgrade apply' reverts back to the current defaults,\nand subsequent 'kubeadm upgrade node' may fail.\n\nThis issue manifested when --config kubelet_override.yaml was first\nintroduced to deal with 'cgroupDriver: systemd' becoming the upstream\ndefault. We provided this mechanism to override the settings\n(i.e. to cgroupfs instead of systemd).\n\nThe kubelet_override.yaml is currently empty and not required.\nIf we do not specify an override file, the current kubelet config\nsettings are preserved over the upgrade, which is what we want.\n\nThe --kubeconfig option is removed since admin.conf doesn't work\nwith 'kubeadm upgrade node' and default is sufficient.\n\nStory: 2010301\nTask: 46724\n\nTest Plan:\nPASS: Standard: Kubernetes upgrade 1.23.1. to 1.24.4\nPASS: AIO-SX: Kubernetes upgrade 1.23.1. to 1.24.4\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: I0d61f2aee07ec63d18279a3e80fe2663c3dbd48b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubeadm template with registry info\n\nIn commit https://review.opendev.org/#/c/692611/,\nit changes all system images to push under the default registry\nnamespaces. Update the kubeadm template to refer to the default\nk8s registry which is \"k8s.gcr.io\".\n\nWith/without private registries, standby controller and worker\nnodes should pull images from \"registry.local:9001/k8s.gcr.io\".\n\nPartial-Bug: 1846799\nDepends-On: https://review.opendev.org/#/c/692611/1\nChange-Id: I1363ea680a0232682a014e7517687ce925f28f3c\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "VF rate limiting support\n\nThis commit implements puppet part logic to perform\nVF max_tx_rate setting according to the configuration.\n\nStory: 2008470\nTask:  41508\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/770135\nSigned-off-by: Litao Gao <litao.gao@windriver.com>\nChange-Id: Ic599f9ac70430529f31d57a74d0809f7077b98e5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Fix stale data cleanup on the logical volumes\"\n\nThis reverts commit d23ad02929f699f1684d45b1ad1706b09c477372.\n\nReason for revert: This breaks the restore and upgrade (AIO-SX)\n\nChange-Id: I846c752efe311788acaa3eeea2bafd78ad824571\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add mds support in puppet for CephFS.\n\nMds configuration needs to be present on every node that\nhas a ceph monitor in order for CephFS to be available.\n\nChange-Id: Ic4270e401b2c3e5123aecfab21af1e874b733830\nStory: 2008162\nTask: 40908\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix puppet-lint warnings and errors\n\nThis update addresses the following errors and warnings\nfrom puppet-lint, with most corrections done automatically\nusing puppet-lint --fix:\n- 2sp_soft_tabs\n- arrow_alignment\n- arrow_on_right_operand_line\n- double_quoted_strings\n- hard_tabs\n- only_variable_string\n- quoted_booleans\n- star_comments\n- trailing_whitespace\n- variables_not_enclosed\n\nChange-Id: I7a2b0109534dd4715d459635fa33b09e7fd0a6a6\nStory: 2004515\nTask: 28683\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "relocate /www to /var/www\n\nRelocate writable /www to /var/www\n\nStory: 2009101\nTask: 43478\nDepends-on: https://review.opendev.org/c/starlingx/metal/+/810023\nChange-Id: I41269d7f95d3ff68368bdd303bb29a4dcce69137\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet changes for helm and kubernetes\n\nCreate helm manifest.\n\nThe changes to kubernetes.pp are to ensure that the nested dependencies\nare completed before the helm manifest tries to run commands that depend\non docker/kubectl being functional.\n\nStory: 2002876\nTask: 22831\nDepends-On: https://review.openstack.org/587390\n\nChange-Id: Icf7e73047aecc933bf3451b20b6159997dfbea99\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add error parsing on dcorch WSGI pipeline\n\nSince dcorch.api.proxy does not use pecan hooks approach, it is\nrequired to keep the current architecture and add an additional\nmiddleware in the dcorch WSGI pipeline.\nIt was added a \"parser\" in the beginning of the pipeline to parse\nerrors on the pipeline and add the proper \"faultstring\" field to\nbe parsed by the cgts-client.\n\nTest Plan: --os-region-name SystemController load-import\nPASS: Verify proper error when no space available\nPASS: Verify proper load-import when enough space available\n\nStory: 2009285\nTask: 43576\nCloses-Bug: 1945737\nDepends-On: https://review.opendev.org/c/starlingx/distcloud/+/813269\nChange-Id: I35551ecb82993f607d26949f7bf838fa07175245\nSigned-off-by: Adriano Oliveira <adriano.oliveira@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable N3000 FPGA reset if device is present\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Keystone DB sync - update puppet manifest for dcdbsync service\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Add Kata Container support in StarlingX\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Etcd parameters lost when changing kube-apiserver parameters\n\nEtcd parameters are getting lost when changing kube-apiserver\nparameters. This is due to no default values being present. The\nmissing etcd parameters causes kube-apiserver to fail to start up.\nThis commit makes the script for changing kube-apiserver parameters\nkeep any existing etcd parameters in the previous config.\n\nChange-Id: I83eb5426ba72a36a5eed3ecbddcbbacdf38803c5\nCloses-bug: 1914291\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix additional puppet-lint warnings and errors\n\nThis update addresses the following errors and warnings\nfrom puppet-lint:\n- 140chars\n- case_without_default\n- ensure_first_param\n- inherits_across_namespaces\n- parameter_order\n- single_quote_string_with_variables\n- variable_is_lowercase\n- variable_scope\n\nIn the case of variable_is_lowercase, the compute.pp manifest\nhas variables with sizes like 2M in the name. These have been\nleft as-is, with lint:ignore comments for the check, due to\nthe semantics of the name.\n\nFor the 140chars check, certain long lines have been left as-is,\nwith lint:ignore comments, due to long commands being executed.\nThese can be revisited in a future update to try to break up\nthe lines and remove the lint:ignore directives.\n\nChange-Id: I37809bacb43818e0956f9f434c30c48e05017325\nStory: 2004515\nTask: 28685\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove ceph mon restart during upgrade\n\nCurrently we are restarting the monitor to update the ceph configs\nduring the upgrade-activate step.\n\nThe restart operation is failing sometimes for an unknown reason since\nthe monitor is correctly restarted, but its pid is not created,\ncausing SM to assume the monitor is not running and leading to a swact.\nThis behavior was verified in STX 5.0 and is easily reproduced in an\nAIO-DX config. Just keep running \"/etc/init.d/ceph restart mon\" until\nthe following message appears:\n\n=================================================\ncontroller-0:~$ sudo /etc/init.d/ceph restart mon\nPassword:\n=== mon.controller ===\n=== mon.controller ===\nStopping Ceph mon.controller on controller-0...kill  99034...done\n=== mon.controller ===\nStarting Ceph mon.controller on controller-0...\nFailed to start transient scope unit: Unit ceph-mon.scope already exists.\nfailed: 'ulimit -n 32768; TCMALLOC_MAX_TOTAL_THREAD_CACHE_BYTES=134217728  systemd-run --scope --unit=ceph-mon --slice=system-ceph /usr/bin/ceph-mon -i controller --pid-file /var/run/ceph/mon.controller.pid -c /etc/ceph/ceph.conf --cluster ceph '\n=================================================\n\nThis problem was verified on AIO-SX (harder to reproduce) and AIO-DX.\nFor some reason it was not possible to replicate this problem in a 2+2+2\nor 2+2.\n\nThe change made allowed to modify ceph config file without need to\nrestart the monitors.\n\nFor the AIO-SX, it is possible to run ceph commands to disable the\nwarnings that appear without restarting the monitor.\n\nThe mon_host we add to the config file is not used by the monitors,\nsince they depend on the monmap that they create during runtime. For\nmore information about why it is not needed to restart the monitors\nafter updating ceph config file, please refer to\nhttps://docs.ceph.com/en/latest/rados/configuration/mon-config-ref/#consistency\n\nStory: 2009074\nTask: 44073\n\nTesting performed:\n 1) Upgrade AIO-SX\n 2) Upgrade AIO-DX\n\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\nChange-Id: Ie108392f6121d860da67da2af353a20917f45bbd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add Kata Container support in StarlingX\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Support post-bootstrap config of kube-apiserver parameters\n\nAdd a script and puppet class to update the kube-apiserver parameters\nthrough \"kubeadm init phase\" after bootstrap.\nUpdate tox to include pep8, copied from the ansible repo\n\nStory: 2006711\nTask: 38944\n\nChange-Id: If1ee452273887d652d1246f761a547ffb0d45269\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Add ts2phc config support to puppet\n\nThis changes updates the puppet manifests to create and apply ts2phc\nconfigurations on a per instance basis. This change also moves the ptp\nenvironment files and config files to their own directories in order to\navoid clutter in the parent directories.\n\nTEST PLAN\nRegression:\n\nPASS: Fresh install on hardware system. Code is benign until multi\ninstance ptp is enabled in puppet worker manifest.\n\nStory: 2009130\nTask: 44131\n\nDepends-on: https://review.opendev.org/c/starlingx/config/+/820571\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I555e4adcb670e746c312a1c77f1f3828c832d5b3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet configuration to support SSSD sudo\n\nThis commit updates SSSD configuration to support SSSD sudo\ncapabilities for ldap users and groups.\nRemote WAD ldap users as well as local openldap users can be\nconfigured to get \"sudo\" and \"sys_protected\" privileges on\nthe stx platform when connecting using SSH.\nConfiguration updates were done by adding SSSD sudo service\nand supporting parameters in the SSSD configuration file.\nAlso, the \"sudoers\" entry in \"/etc/nsswitch.conf\" has been\nupdated to support SSSD sudo.\n\nTest Plan:\nPASS: Verify SSSD configuration in \"/etc/sssd/sssd.conf\" gets\nupdated with sudo parameters.\nPASS: Verify \"sudoers\" entry in \" /etc/nsswitch.conf\" gets\nupdated to use SSSD service.\nPASS: Create a user with sudo privileges in openldap and verify\nthat the sudo privileges are available in the stx platform\nwhen the user connects with SSH.\nPASS: Create a user with sys_protected privileges in openldap\nand verify that the sys_protected privileges are available in\nthe stx platform when user connects with SSH.\nPASS: Configure a sys_protected group in a remote WAD server and\nverify it has been cached in the stx platform.\nPASS: Add a WAD user to the sys_protected WAD group and verify the\nuser has sys_protected privileges in the stx platform.\nPASS: Configure a sudo rule for a remote WAD user and verify the user\nhas sudo privileges in the stx platform.\nPASS: Verify that a regular WAD user that has no sudo rules defined,\ndoes not have sudo privileges in the stx platform.\n\nStory: 2010589\nTask: 47579\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I449057c512782615d5c708da940d35019f3dbb65\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Call kubeadm when creating the config.toml\n\nModify puppet manifest dependency to now call kubeadm\nwhen creating the /etc/containerd/config.toml file.\n\nThis is done to allow kubeadm network access to retrieve\nthe pause_image.\n\nTest Plan:\n\nPASSED:  Upgrade from 21.05 to 21.12 in the lab\nwas successful.\nPASSED:  Clean install AIO-SX\nPASSED:  AIO-SX k8s upgrade\nPASSED:  AIO-DX k8s upgrade\n\nCloses-Bug: https://bugs.launchpad.net/starlingx/+bug/1964287\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\nChange-Id: If517aee96540deb9f8e88956d3b71e2ddde97b30\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix syntax error in password masking\n\nFixing the syntax error in script file when\nmasking passwords in the puppet logs\n\nPartial-Bug: 1896116\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: Icb20ebbd1d9c4b757af4b42b9e740ede44c0b6b2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add '/etc/pki' item for puppet ensure directory\n\nThe ssl_ca installation is failing for worker nodes because it does not\nfind the /etc/pki folder created already.\n\nThis commit adds /etc/pki individually as an item to a puppet ensure\ndirectory statement. This will make sure that puppet creates this\ndirectory first when it does not exists. If the dir already exists\npuppet will also be satisfied and execute with success.\n\nTest plan:\n\nPASS: Add a ssl_ca certificate with system certificate-install and\n      verify that certificates where added to\n      etc/pki/ca-trust/source/anchors/ca-cert.crt in a compute node.\nPASS: Run a full deploy of a standard lab and verify that compute nodes\n      become unlocked and available.\n\nCloses-Bug: 1999588\n\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nChange-Id: Ib59ab88a9d4d1112e35f98d92aef72cbac01af07\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create class to update the admin firewall in runtime\n\nThis change creates a class to update the admin firewall during\nruntime operations\n\nTest Plan:\n[PASS] in subcloud mode, add/remove static routes in the mgmt network\n[PASS] in subcloud mode, add/remove static routes in the admin network\n\nStory: 2010591\nTask: 48202\n\nChange-Id: I3a4025cb8c6ff8d90ba36b49e2aaa12d0ec7057b\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a sm-api rehome class\n\nThis commit adds a puppet class for re-configuring the sm-api and\nreloading the sm-api service during subcloud rehoming process.\n\nStory: 2008774\nTask: 42355\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I0da0e702f6f7a9da9a858af0e3c2428d14c63d3d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable PTP synchronization on management network for AIO\"",
        "issue_summary": ""
    },
    {
        "commit_message": "docker-token-server scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on docker service documentation\n\nTEST PLAN:\nPASS: AIO-SX: build a new Debian ISO. Install, boostrap and\nperform a host-unlock verifying expected number of threads\ncreated.\n\nStory: 2010087\nTask: 45706\nChange-Id: Ie85f5b4b9805bdd79d8a1e42497b5e848e87f9a4\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Setup puppet-lint for new repo\n\nThis commit reintroduces the zuul jobs for running\npuppet-lint in the new stx-puppet repo after the\nrestructuring work was completed.\n\nChange-Id: I729135c04135ad66fcd1f24a52b9491fda35e1d2\nStory: 2004515\nTask: 36777\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable StarlingX in QEMU/KVM VM with small disk\n\nPhysical filesystems get created at bootstrap time during\nbootstrap puppet manifest apply with the default filesystems'\nsizes defined in drbd.pp and filesystem.pp as only static\nhieradata generated before applying bootstrap puppet manifest\nand the final filesystems' sizes are found in the dynamic\nhieradata.\n\nTo support StarlingX running in Openstack Nova VM (QEMU/KVM\nenvironment) with a tiny root disk size(minimum 60G), the\ndefault filesystems' sizes need to be reduced to be same as\nthe sizes supported for tiny root disk.\n\nDuring ansible bootstrap persist-config, filesystems will be\nextended to larger sizes based on root disk size as needed.\n\nChange-Id: I7e98ba9a1fd71ebfafd448700af313751e17e89e\nStory: 2007858\nTask: 40720\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update deprecated K8S API references of v1beta2 to v1beta3\n\nUpdating just a comment that has apiVersion: kubeadm.k8s.io/v1beta2\nto v1beta3.\n\nTest Plan:\nPASS: k8s upgrade from 1.22.5 to next all available versions.\n\nStory: 2010878\nTask: 48836\n\nChange-Id: Id06a0e73212ddeb5b1817a6f7de286ca37a78538\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "lowlatency runtime manifest updates\n\nupdated existing personality manifests with\n- include platform::grub::kernel_image (grub.pp)\n- include platform::config::file::subfunctions::lowlatency (config.pp)\n\nalso new runtime manifests with the same functionality\n\n- platform::grub::kernel_image::runtime\n  updates the kernel image in kernel.env\n\n- platform::config::file::subfunctions::lowlatency\n  updates /etc/platform/platform.conf 'subfunction=' line\n\nnew args for 'puppet-update-grub-env.py' script\n'--set-kernel-lowlatency' and '--set-kernel-standard'\n\nTest plan:\n\nUsing:\n    /opt/platform/puppet/<version>/hieradata/<ipaddress>.yaml\npuppet config data will be edited manually 'true' <-> 'false'\n    platform::sysctl::params::low_latency\n\n-----------------------------------\nManual puppet runtime manifest test\n-----------------------------------\n\ncat << EOF > /tmp/test_runtime.yaml\nclasses:\n- platform::grub::kernel_image::runtime\n- platform::config::file::subfunctions::lowlatency::runtime\nEOF\n\n/usr/local/bin/puppet-manifest-apply.sh \\\n /opt/platform/puppet/<version>/hieradata/ \\\n <ipaddres> \\\n runtime \\\n /tmp/test_runtime.yaml > /tmp/test_runtime_manifest.log\n\nCheck\n - cat /etc/platform/platform.conf\n - cat /boot/1/kernel.env\n - /usr/local/bin/puppet-update-grub-env.py --list-kernels\n - sudo -u postgres psql -d sysinv\n    -> select id,personality,uuid,subfunctions from i_host\n\nPASS - AIO-SX: iso install and bootstrap successfully\n               aio.pp and ansible_bootstrap.pp puppet manifests\n               are run successfully\nPASS - AIO-SX: change puppet config data in <ip>.yaml\n               run puppet runtime manifests manually\n               and observer platform.conf and kernel.env updates\nPASS - AIO-SX: repeat setting lowlatency and confirm no duplicate\n               entries in platform.conf\n-----------------------------------\n\nTask: 47942\nStory: 2010731\n\nChange-Id: I8e6ccb73829dc315fd6f8955f28fb6f22b57b137\nSigned-off-by: Kyale, eliud <Eliud.Kyale@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Add Westport Channel sysfs commands\n\nThis change adds support in puppet to apply configurations for the new\n'clock' service type which contains ptp-parameters to set the sysfs\nparameters for the Westport Channel NIC.\n\nThese ptp-parameters should be configured at the interface level, for a\nWPC interface owned by a clock service.\n\nPTP Parameters:\nsma1 input/output\nsma2 input/output\nu.fl1 output\nu.fl2 input\nsynce_rclka enabled\nsynce_rclkb enabled\n\nAbsence of a given parameter results in that function being disabled.\n\nCommands must be executed against the base port or 0th port of the NIC.\nie. eth0\n\nTest Plan:\n\nRegression: Single and multi-instance ptp are unaffected\nBuild and install successful.\n\nFunctional: syncE parameters work, runtime manifest works.\n\nStory: 2009130\nTask: 44217\n\nDepends-on: https://review.opendev.org/c/starlingx/config/+/822563\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I35f2b361ba87d52a0bb18df73b8c434e1af03bd4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for bonded interfaces on Debian\n\nSysinv is generating the stanza \"allow-[master] [slave]\" as part of\nthe options of network_config. This is necessary because it does not\nhave support on the puppet-network module. Since this script already\ndoes the parsing to generate the definitive files, an extra loop is\nexecuted to identify files with the stanza and move it to the end.\nThis is necessary to not break the parsing by ifup.\n\nIt was also detected that get_prefix_length was not calculating IPv6\nprefix length, only IPv4. This change corrects this\n\nTest Plan:\nPASS configuration of balanced interfaces with all txhashpolicy\n     values\nPASS configuration of active-standby interfaces with all\n     primary-reselect values\nPASS configuration of addresses and routes on the bond interface\nPASS configuration of VLAN interface on top of bond interface, with\n     static addresses and routes\nPASS all tests executed with host lock/unlock cycle\n\nStory: 2009965\nTask: 45197\nDepends-On: https://review.opendev.org/c/starlingx/config/+/839619\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I5895c371e6e5c63ad3ed89b2551bc1d809a37438\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Use pmon to restart sssd service\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Use memcached as ceilometer caching backend\n\nUpdating ceilometer puppet manifest to use memcached as ceilometer\ncaching backend for resource caching.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: Ia4dfe41672c760488406ee5bbb33ca725e9a5d07\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add puppet class for rook\"",
        "issue_summary": ""
    },
    {
        "commit_message": "N3000 configured by puppet using pf-bb-config\n\npf-bb-config utility is from now on used to configure Intel FPGA N3000\nFEC (accelerator) device. The configuration is based on hard-coded\nvalues in fpga_5gnr_config_vf.cfg file available in the pf-bb-config\npublic repository (https://github.com/intel/pf-bb-config/tree/v21.6).\n\nNotice reset of device is done before configuring via the tool.\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/799693\nDepends-On: https://review.opendev.org/c/starlingx/config/+/799716\nTask: 42785\nStory: 2009036\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I66f82e00b801b0476a7bc8a43d47232d6a930cdc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable cert-mon in all deployment configurations\n\nThis enables cert-mon service to run on controllers in all\ndeployment configurations (AIO, Standard, DC etc)\n\nDepends-on: https://review.opendev.org/#/c/760214/\n\nChange-Id: Ic2f793fe392fca21f0dd8eb55f7b5dee90a9a48b\nStory: 2007361\nTask: 41163\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup cert-alarm config\n\nRemoving unneeded params from the config as part of cleanup\n\nStory: 2008946\nTask: 42851\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: I7655bf29a89dbc9cca19f5c0882453e0074fb8d4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Fix generation of clock-conf.conf\n\nThis change updates the task ordering to ensure that the contents of\nclock-conf.conf are filled in the correct order. A missing parameter in\nthe require field was causing the contents to sometimes appear mixed up.\n\nTests:\n\nPass: Tested clock-conf.conf generation on AIO-SX\n\nStory: 2009130\nTask: 44538\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I5f9ae54d4b48936f732e4829c187d19a0c51c6ee\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom ceilometer gnocchi_resources.yaml file\n\nPuppet updates to add custom changes in gnocchi_resources.yaml\n\nCustom changes:\n1. Add vcpu_util under instance resource type\n2. Add more ipmi metrics under ipmi resource type\n3. Add the definition of vswitch resource type\n4. Change initial timespan for ceilometer-low/ceilometer-low-rate\n   archive policy to 7 days\n\nStory: 2002825\nTask: 22871\n\nChange-Id: Ib6610530a1f8bb7c86fd61ab8da8390a26744add\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure containerd binds to the loopback interface\n\nSet the stream_server_address to bind to the loopback interface with a\nvalue of \"127.0.0.1\" for IPv4 and \"::1\" for IPv6.\n\nWithout setting the stream_server_address in config.toml, containerd was\nbinding to the OAM interface. Under most situations this resulted in\ncontainerd binding to the OAM fixed host address. But in an IPv6\nconfiguration there were occasions where after controller-0 unlock, the\nOAM floating IP would be used. When this happened, swacting away from\ncontroller-0 would move the OAM floating IP to controller-1 and break\naccess to containers residing on controller-0.\n\nThis will explicitly update the containerd configuration to use the IP\naddress of the loopback interface based on the system's network\nconfiguration.\n\nThis also removes any security concerns with containerd binding to the\nOAM interface.\n\nChange-Id: I0f914d738e94b525cf217712675d3b4575817d1d\nDepends-On: https://review.opendev.org/#/c/725394/\nCloses-Bug: #1875891\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Make Multi-Node Failure Avoidance Configurable\n\nThe maintenance system implements a high availability (HA) feature\ndesigned to detect the simultaneous heartbeat failure of a group\nof hosts and avoid failing all those hosts until heartbeat resumes\nor after a set period of time.\n\nThis feature is called Multi-Node Failure Avoidance, aka MNFA, and\ncurrently has the hosts threshold set to 3 and timeout set to 100 secs.\n\nThis update implements enhancements to that existing feature by\nmaking the 'number-of-hosts threshold' and 'timeout period'\ncustomer configurable service parameters.\n\nThe new service parameters are listed under platform:maintenance which\ndisplay with the following command\n\n> system service-parameter-list\n\nmnfa_threshold: This new label and value is added to the puppet\nmanaged /etc/mtc.ini and represents the number of hosts that are\nrequired to fail heartbeat as a group; within the heartbeat\nfailure window (heartbeat_failure_threshold) after which maintenance\nactivates MNFA Mode.\n\nThis update changes the default number of failing hosts from\n3 to 2 while allowing a configurable range from 2 to 100.\n\nmnfa_timeout: This new label and value is added to the puppet\nmanaged /etc/mtc.ini. While MNFA mode is active, it will remain active\nuntil the number of failing hosts drop below the mnfa_threshold or this\ntimer expires. The MNFA mode deactivates on the first occurance of\neither case. Upon deactivation the remaining failed hosts are no\nlonger treated as a failure group but instead are all Gracefully\nRecovered individually. A value of zero imposes no timeout making the\ndeactivation criteria solely host based.\n\nThis update changes the default 100 second timer to 0; no-timeout\nwhile permitting valid a times range from 100 to 86400 secs or 1 day.\n\nDocImpact\nStory: 2003576\nTask: 24903\n\nChange-Id: I2fb737a4cd3c235845b064449949fcada303d6b2\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "config: Convert wrsroot -> sysadmin\n\nThis also changes the group wrs_protected to sys_protected\nto de-brand the user and group names.\n\nDepends-On: I887464a20fc17d66529caea03be2b445156f9426\nChange-Id: I9b08bf502a9dad279966b201999f65d06dbc5774\nStory: 2004716\nTask: 28747\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"cni: use /var/opt/cni\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Boost sm process priority in VBox environment\n\nThere is an instance that sm claimed its main thread ran sluggish\nas some critical timer run behind the scheuled timing.\nThe issue could prevent the sm from scheduling services.\nAs the result, the controller could fail to enable.\n\nThe issue was found only on vbox labs on AIO-SX, the fix is to boost\nsm process priority to nice value -10 from current -2.\n\nCloses-Bug: 1816764\nDepends-On: https://review.openstack.org/638664\nChange-Id: Iafa17b1c47d65cc7394552ea1c8e7a78398e4869\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n(cherry picked from commit a6934ac9d27e0357d0025018077441d989679409)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart containerd after CA certificate is installed\n\ncontainerd doesn't reload system trusted CA bundle after new CA\ncertificates are installed. This will cause pod launching from the\nregistry whose signing CA cert has been installed to fail due to\nimage pull error, because it can't validate the registry's certificate.\n\nThis change updated platform config runtime puppet manifest to restart\ncontainerd to reload the updated trust CA bundle after new CA\ncertificates are installed.\n\nChange-Id: Ifbe2ec1190299fc5b6505347a37d4e4f232993be\nCloses-Bug: 1891377\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set Barbican api to listen on the right IP address\n\nCurrently barbican-api will be listening on IPv4 address after\nbootstrap even for IPv6 labs. This will result in connection to\nbarbican service internal endpoint refused, and unlock controller\nfailed on IPv6 labs.\n\nThis commit updated barbican puppet manifest so that\ngunicorn-config.py get updated to have the right bind IP address\nwhen started.\n\nTest Plan for Debian:\nPASS: package build, image build, installation on IPv6 lab\nPASS: after boostrap, observe barbican-api is listening on mgmt\n      IPv6 address\nPASS: after boostrap, curl to barbicna-api internal endpoint is\n      successful\nPASS: controller unlock successfully\n\nCloses-Bug: 1974045\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I4743df52e50fde7ffc55f909e9c79b7b2fd2bbab\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set ceilometer's endpoint type to internalURL on all types of nodes\n\nBecause the endpoint type for ceilometer is set to publicURL rather\nthan internalURL, ceilometer polling agent is unable to poll measures\nfrom other services with a https configured system. This update is to\nset ceilometer's endpoint type to internalURL through puppet for all\ntypes of nodes.\n\nCloses-Bug: 1790238\n\nChange-Id: I19f0e354a22b089f140ed8e762f3db68f6bc4ddb\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "StarlingX open source release updates\n\nSigned-off-by: Dean Troyer <dtroyer@gmail.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding puppet-usm module\n\nUnified Software Management (USM) needs a puppet module\nto setup its authenticated endpoints, ports, etc..\n\nThe puppet-usm is not explicitly added to the ISO.\nIt gets pulled in through the puppet-manifests dependency.\n\nNote: this follows the same algorithm and code paths that\nare used for setting up patching through puppet.\n\nThe USM ports are:\n API port (private): 5493\n Controller port:    5494\n Agent port:         5495\n API port (auth):    5497\n Admin port (auth):  5498\n\nDefault URLS: (pre bootstrap these are not in keystone)\n Private URL http://127.0.0.1:5497/v1\n Public  URL http://127.0.0.1:15497/v1\n Admin   URL http://127.0.0.1:5497/v1\n\nAfter bootstrap (DC mode) endpoints look like\n SystemController internal  http://192.168.204.2:25497/\n SystemController public    http://10.10.10.2:25497/\n SystemController admin     https://192.168.204.2:25498/\n\n RegionOne internal  http://192.168.204.2:5497\n RegionOne public    http://10.10.10.2:15497\n RegionOne admin     https://192.168.204.2:5498\n\nNote: a sysinv change enables this puppet code and testing\nwas also done with that code.\n\nTest Plan:\n  PASS: Build/bootstrap/unlock AIO-SX\n  PASS: Build/bootstrap/unlock STD (2 controllers)\n\nStory: 2010676\nTask: 48408\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: I263c4ca135ac9b8bf4383b74dd44754c043b7802\n",
        "issue_summary": ""
    },
    {
        "commit_message": "remove reference to deleted exec resource\n\nIn commit 77e0c7c1 we removed an exec resource that called out to an\nobsolete script.  However, we neglected to remove a \"require\"\nmetaparameter which referenced the removed script.  It's unclear how\nthis was missed since the previous change was tested in VirtualBox.\n\nThis causes a puppet error when trying to upgrade K8s:\n\nCould not find resource 'Exec[update kubeadm-config]' in parameter\n'require' (file:\n/usr/share/puppet/modules/platform/manifests/kubernetes.pp, line: 813)\n\nThe fix is to remove the metaparameter.\n\nTEST PLAN:\nPASS: While running the dev branch on AIO-DX, upgrade K8s from 1.21\n      to 1.22.\n      (note, a workaround was required to deal with\n       https://bugs.launchpad.net/starlingx/+bug/2018247)\n\nPartial-Bug: 2017696\nChange-Id: I66c0e88f0f0a3acc3326391263123e60667561cc\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change permission and ownership on dcorch files\n\nChange puppet to set appropriate dcorch ownerships and privileges\nfor /etc/dcorch/api-paste.ini and /etc/dcorch/dcorch.conf\n\nStory: 2002992\nTask: 23006\n\nChange-Id: I5be797de8bb9d8a7e73b9b7888e155f9f103e7fd\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update manifests to remove unused openstack components\n\nCleanup unwanted openstack setup on bare metal.\n\nPreparing the manifests to have the services removed from SM.\n\nBypass setting up openstack services on controller, worker and\nstorage.\n\nCleanup haproxy ports for services that will not be running\non bare metal.\n\nCleanup upgrade, remote logging, postgres, and anything else\nrelated to openstack services that no longer run on bare\nmetal.\n\nRemove all manifests and templates that are no longer being used.\nStrip out any static hiera data that is no longer needed.\n\nStory: 2004764\nTask: 29850\nDepends-On: Ice10fe6da6b34f1d9206f26e112eb555e2088932\nDepends-On: I3c1cc8673be5cf6ab15f9158199bc24fccb44f17\nDepends-On: Ie43cf11ebf1edcf3a8bb357205c4c59d2962b4fa\nChange-Id: I2be8e9ab418835125ff433d06d2930df37534501\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add runtime class for Docker\n\nThis change adds a runtime class for Docker. The runtime class\nrestarts Docker and containerd. It is used to make changes to\nDocker proxy settings without the need for a lock unlock.\n\nChange-Id: Ic39abb9764d5e03e0c6a97813b170c5f2fdb0cd9\nPartial-Bug: 1931593\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add DNS requirement for kubernetes and helm.\n\n`helm init` is being execute before networking and DNS is properly\nconfigured in the controller. A dependency was added to kubernetes\nto setup DNS, helm manifest was updated to depend on kubernetes.\n\nAlso, the `--skip-refresh` flag was added to helm init for second\ncontroller to avoid timeout scenarios on proxy enviroments.\n\nCloses-Bug: 1814968\n\nChange-Id: I65759314b3a861e7fdb428889aa5f5c1c7037661\nSuggested-by: Mingyuan Qi <mingyuan.qi@intel.com>\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Allow custom bash-completion\n\nThis work affects only Debian. This is part of a fix for a bootstrap\nissue.\n\nContents of bash-completion generated at build time vs runtime differ.\nAllow puppet code to generate bash-completion at runtime as on CentOS.\nOstree doesn't allow changes /usr, instead link to\n/etc/bash_completion.d/openstack.\n\nThis is a revert of:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/830614\n\nTests on AIO-SX:\nPASS: build-pkgs, build-image, install\nPASS: bootstrap without ostree unlock goes past the issue\n\nDepends-On: https://review.opendev.org/c/starlingx/upstream/+/844514\nStory: 2009964\nTask: 45531\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I0504e3d61e40a73fcc688b73532caf66b146fe18\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix kubelet '[]string' type casting and python 2.x compatibility\n\n- Add casting for kubelet \"[]string\" type during\n  K8s custom configuration update.\n- Restore python 2.x compatibility\n\nTest Plan:\n  PASS: Kubelet runtime testing\n    1) Add '[]string' type valid parameter with valid value & apply.\n       - Pod updated successfully.\n    2) Modify '[]string' type valid parameter with valid value & apply.\n       - Pod updated successfully\n    3) Modify '[]string' type valid parameter with invalid value & apply.\n       - Pod update failed.\n         Auto recovery process completed successfully.\n    4) Delete latest added parameter & apply.\n       - Pod updated successfully.\n\nCloses-Bug: 2002423\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I5ca032abcd34dc12d4979b42fcfe28c81765f758\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Renaming deprecated options and updating spec requirements\n\n- Renaming idle_timeout to connection_recycle_time since it was\n  deprecated in Stein\n- Explicitly including required packages in the sysinv spec file to fix\n  DC\n\nChange-Id: Ief055d26f3a1eb43b8cf144952a49e7e0f3ff939\nStory: 2004765\nTask: 28883\nDepends-On: https://review.openstack.org/#/c/653086\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Secure OpenLDAP configuration update at host-unlock\n\nA secure OpenLDAP server that can connect over TLS/SSL requires\nSSL certificate configuration.\nThis commit completes the secure OpenLDAP configuration done at\nbootstrap with OpenLDAP schema configuration done at host-unlock.\nThe following OpenLDAP configuration updates will be applied using\npuppet implementation:\n- Copy the TLS/SSL certificate and key from Kubernetes repository to\n\"/etc/openldap/certs\" directory in files \"openldap-cert.crt\" and\n\"openldap-key.key\".\n- Set the owner and group for openldap \".crt\" and \".key\" files.\n- Configure the TLS/SSL certificate and key files in the ldap\nschema file \u201c/etc/openldap/schema/cn=config.ldif\u201d.\n\nTests performed:\nPASS: Check the openldap certificate and key files are correctly\ncreated in \"/etc/openldap/certs\".\nPASS: Check the ownership of the openldap certificate and key files\nis \"ldap:ldap\".\nPASS: System command \"certificate-list\" shows the openldap certificate\nhas been installed.\nPASS: Openldap certificate and key files have been added to schema\nfile \u201c/etc/openldap/schema/cn=config.ldif\u201d.\nPASS: Deletion of openldap secret triggers the creation of a new\nsecret.\nPASS: List all OpenLDAP users\nPASS: Add new OpenLDAP user\n\nStory: 2009834\nTask: 44893\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/836032\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Idb2c6ae0c9d55b048e647a9f623ec2d2f6ae4e99\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove manifest to copy sysinv.conf to drbd storage\n\nsysinv-conductor will copy the file to drbd when it is ready. Removing\npuppet code doing the job which is no long needed.\n\nChange-Id: Ia9a78ec01e6b87d31dbdb4016fd2a7826734f59d\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\nDepends-On: https://review.opendev.org/#/c/691714\nPartial-Bug: 1848355\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add runtime class for kube-apiserver\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Switch to the bootx64.efi boot loader\n\nThis update switches the Debian LAT boot loader\nfrom bootx64-nosig.efi to bootx64.efi in support\nof Secure Boot.\n\nThis change only affects Debian UEFI system node\ninstalls.\n\nTest Plan:\n\nPASS: Verify Debian build and AIO DX install\nPASS: Verify Debian UEFI AIO DX Install\nPASS: Inspect the dnsmasq.conf file after config\n\nStory: 2009968\nTask: 46738\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\nChange-Id: Ib6fd3692304da688e540a2861a990a2ef55a84ed\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Exempt keystone sysinv user from failed auth lockout\"\n\nThis reverts commit 02f086e4f97b409e6f8df2409edc907a5e0d55ea.\n\nThe change break deployment. Will re-work this fix.\n\nPartial-Bug: 1949117\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I4f9ac3542ff38340c7d65204c2df65c2932da74d\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-patching\n\nAdd debian infrastructure for puppet-patching to\ncreate debian packages.\n\nStory: 2009101\nTask: 43303\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I6a9744c077770f3f806f31f524634f6e664f719f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Wait for kube apiserver after apply service parameter\"\n\nThis reverts commit a1b99570ae0fd387cb0fe975d8974dcb4edbf367.\n\nReason for revert: This causes upgrade activation to fail. We're\nworking on an alternative fix, but reverting this immediately to\nunblock current testing activities.\n\nCloses-bug: 1954333\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: Ibf09c83cc4192ed5505ada736d51fabf025865d0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Restore ceph during system restore\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Mask credentials in puppet log files\n\nThis commit masks the credentials used in crictl pull command, logged\nand executed by puppet to pull images from registry. Wrapping the data\ntype of local_registry_auth variable as Sensitive, protects from\nexposing the registry credentials in log files.\n\nTest Plan:\nPASS: Deploy a DX system with the wrong credentials addressed to the\n      $local_registry_auth and observe in the puppet logs from\n      Controller-1, the exec commands are logged with Sensitive\n      [redacted] where it would have the credentials to the registry.\nPASS: Deploy a DX system with the correct credentials addressed to the\n      $local_registry_auth and observe the system successfully being\n      available.\n\nCloses-Bug: 2008726\nSigned-off-by: Manoel Benedito Neto <manoel.beneditoneto@windriver.com>\nChange-Id: I831e65ad948e62c346f56f5e9c7587e4dbdcd29f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integration with latest SR-IOV CNI images\n\nAs part of the ongoing development of the sriov-cni and\nsriov-device-plugin, the DPDK NetworkAttachmentDefinition\nconfiguration options have been deprecated.\n\nPreviously, we used this functionality to have the sriov-cni\nplugin perform the device bind from netdevice (kernel) to\nvfio (userspace), and simply set sriov-device-plugin\ndeviceType configuration parameter to 'netdevice'.\n\nGoing forward, we must add a mechanism for a user to define\nthe deviceType at the interface configuration level.  This\nmeans an SR-IOV enabled device can no longer have a mix of\nnetdevice, vfio chosen by the NeworkAttachmentDefinition.\nThat is, it must be determined by the user beforehand which\ntype of virtual function driver (kernel or DPDK) a device's\nVFs should have.\n\nThis commit includes the cgtsclient, API, DB and puppet\nrelated changes required for a user to set the VF driver type.\n\nIn terms of the cgts-client, the following parameter has been\nadded: --vf-driver.  Example usage for a device intended to\nbe used with a DPDK application is as follows:\n\nsystem host-if-modify -m 1500 -n sriov0 -d ${DATANET} \\\n  -c pci-sriov -N ${NUM_VFS} --vf-driver=vfio ${WORKER_NAME} \\\n  ${INTERFACE_UUID}\n\nIf the user does not specify a vf-driver, the default device\ntype will remain as it is today as 'netdevice'.  The user can\nalso choose to explicitly set the --vf-driver to 'netdevice'\nfor the same effect.  In this case, a check is made to ensure\nthe VF driver has been detected and reported by the sysinv\nagent.\n\nStory: 2005208\nTask: 33485\nCloses-Bug: 1829565\nChange-Id: I8f6f27b79c7fafa03873e71473f7694991142e50\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision cert-alarm service and setup cert-alarm.conf\n\nProvision cert-alarm service on all controllers and\nupdate to initiate and setup /etc/sysinv/cert-alarm.conf\n\nStory: 2008946\nTask: 42851\n\nDepends-on: https://review.opendev.org/c/starlingx/ha/+/801118\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: Ib8b75102aa1fe1e60687415d57c85df24e3b4cd1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "relocate /pxeboot to /var/pxeboot\n\nRelocate writable /pxeboot dir to /var/pxeboot\n\nStory: 2009101\nTask: 44202\n\nTCs will be list https://review.opendev.org/c/starlingx/metal/+/822008.\n\nDepends-on: https://review.opendev.org/c/starlingx/metal/+/822008\n\nChange-Id: I57cdc9e29ba72a58b57c6a90429a15a53d11170d\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian:puppet-manifests: improve puppet-update-grub-env.py\n\n1. Rename read_conf -> read_kernel_params\n2. Correct write_conf variable naming\n3. Rename variable confile with 'boot.env' as BOOT_ENV\n4. Rename variable confile with 'kernel.env' as kernel_env\n5. Improve hugepage logic:\n- It is legal to specify \"hugepages=\" by itself as\nlong as \"default_hugepagesz\" is specified\n- It is not legal if \"hugepages=\" and \"hugepagesz=\" are not pairs\n\n6. Correct pylint consider-using-f-string\n\n...\n$ puppet-update-grub-env.py --add-kernelparams \"hugepages=0\"\nFAIL: default_hugepagesz and hugepagesz is not set\nFAIL: only hugepages is not allowed\n\n$ puppet-update-grub-env.py --add-kernelparams \"hugepagesz=2M\"\nFAIL: hugepagesz and hugepages does not appear as pairs\n\n$ puppet-update-grub-env.py --add-kernelparams \"default_hugepagesz=1G hugepages=0\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=  default_hugepagesz=1G hugepages=0\n\n$ puppet-update-grub-env.py --remove-kernelparams \"default_hugepagesz\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=\n\n$ puppet-update-grub-env.py --add-kernelparams \"hugepagesz=2M hugepages=0\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=  hugepagesz=2M hugepages=0\n\n$ puppet-update-grub-env.py --add-kernelparams \"hugepagesz=1G hugepages=2G\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=  hugepagesz=2M hugepages=0  hugepagesz=1G hugepages=2G\n\n$ puppet-update-grub-env.py --add-kernelparams \"default_hugepagesz=1G\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=  hugepagesz=2M hugepages=0 hugepagesz=1G hugepages=2G  default_hugepagesz=1G\n\n$ puppet-update-grub-env.py --remove-kernelparams \"hugepagesz\"\n$ puppet-update-grub-env.py --list-kernelparams\nIn /boot/efi/EFI/BOOT/boot.env:\nkernel_params=\n\n$ puppet-update-grub-env.py --list-kernels\nAvailable Kernels in /boot/1\n  vmlinuz-5.10.0-6-amd64\n  vmlinuz-5.10.0-6-rt-amd64\n\nIn /boot/1/kernel.env:\nkernel=vmlinuz-5.10.0-6-amd64\nkernel_rollback=vmlinuz-5.10.0-6-amd64\n\n$ puppet-update-grub-env.py --set-kernel vmlinuz-5.10.0-6-rt-amd64\n\n$ puppet-update-grub-env.py --list-kernels\nAvailable Kernels in /boot/1\n  vmlinuz-5.10.0-6-amd64\n  vmlinuz-5.10.0-6-rt-amd64\n\nIn /boot/1/kernel.env:\nkernel=vmlinuz-5.10.0-6-rt-amd64\nkernel_rollback=vmlinuz-5.10.0-6-rt-amd64\n...\n\nTest Plan for Debian:\nPASS: run script as above\n\nStory: 2009965\nTask: 45365\n\nSigned-off-by: Hongxu Jia <hongxu.jia@windriver.com>\nChange-Id: Ia63b9805112addaf1dde9b513603751217e36886\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure /etc/kubernetes/manifests directory exists\n\nEnsure the /etc/kubernetes/manifests directory exists before\nstarting kubelet. This will avoid repeating kubelet logs on\nworker nodes, complaining that the directory does not exist.\n\nAlso removing an unused yum config file for the kubernetes\nrepo.\n\nChange-Id: Id63287481f9fe063f1b8c993d973a4b4517abd81\nStory: 2004520\nTask: 28908\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cannot login to StarlingX as operator\n\nThis change updated \"class platform::ldap::bootstrap\" to \nmake sure ldap user \"operator\" can login on stx-cloud.\n\nTest Plan:\n\nPASS: login as operator.\nPASS: login as sysadmin and su operator.\nPASS: \"sudo su\" to root, as operator(unauthorized).\nPASS: checked shell once logged in as operator.\nPASS: Retrieve operator's info by running \"ldapfinger operator\".\n\nCloses-bug: 1976658\n\nChange-Id: I1b92a92c3b4c16efc52939d54e163782d6b9dc3e\nSigned-off-by: Karla Felix <karla.karolinenogueirafelix@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove annotation before oam if gnp re-apply\n\nWhen service parameter http_port is modified and applied,\nplatform::firewall::runtime is triggered and oam if gnp is re-applied.\nBut the resourceVersion in existing gnp's annotation will require the\nre-apply to provide matching resourceVersion in the yaml file, and will\nfail the re-apply if it doesn't. This update fixes this issue by\nremoving annotation before the gnp is re-apply.\n\nChange-Id: Idc373c206cf2dab5e02d98e11e1c9b18a605dc37\nCloses-Bug: 1873600\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove old root CA certificate from controller-manager.conf\n\nCurrently after kube root CA update complete, the old root CA\ncertificate is still in controller-manager.conf. This update\nadded code to puppet class to remove the old root CA certificate\nfrom the kubeconfig file in update phase trust-new-ca.\n\nTest Plan:\nPASS: Successful kube root CA update\nPASS: Check controller-manager.conf after update complete and\n      the old root CA certificate is removed from it.\n\nCloses-Bug: 1955675\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Id6fe9cac5ad36e1bbb9070791910da983aed9ac2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Disable Max CState limitation\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update dnsmasq config for slow DNS servers\n\nWhen a configured DNS server is taking a long time to respond to\nunknown domains or hosts, registry interactions like push, pull,\nand querying for images through system commands will fail due to\nhostname resolution for registry.local. This is because it attempt\nto resolve registry.local using the A record first, which times out\nsince it is hitting the configured external DNS server. This\nprevents the process from looking up the AAAA record which would\nresolve to the dnsmasq CNAME record. This commit updates the dnsmasq\nconfig to prevent forwarding the local domain to upstream servers.\n\nChange-Id: Ic3cf6aae87f8f2d5c61a24db00a4cb814c20aac6\nCloses-Bug: 1904885\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX reboots after change OAM ip address\n\nOn HW tests, it was detected that openstack-endpoints restart was\nhappening at the same as the service-manager restart, this creating\na conflict that preventing SM services to reach enabled-active.\nThis was provoking the reboot.\n\nThe correction creates openstack::keystone::endpoint::runtime::post\nclass to be executed the post stage and not on the main stage, to\navoid conflict with service-manager\n\nAlso marking platform::network::runtime to be run at the pre stage\nto avoid some encountered apply errors related to the delay of\nhaproxy bringup due to the lack of the IP address on the interface\nas it was only configured later. This way the other restarted\nservices will have the address on the interface as restart happens\n\nTested on AIO-SX, by monitoring manifest apply and validating that\nno reboot happens\n\nCloses-Bug: 1927275\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Ia70a3395753e43b3c1e2c037818c8c23e4ec0fd6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Conditionally deprovision guest-agent service\n\nAfter the Debian migration it was noticed that the guest-agent service\nwas causing issues when enabled (i.e., when stx-openstack is applied)\nand was actually not being used on CentOS for a while.\nThe decision was to completely remove it [1] and puppet was cleaned to\nnot have mentions to this service [2].\n\nPrevious changes work fine for newly installed systems, but if one needs\nto patch or upgrade a system that has this service enabled, puppet needs\nto enforce this deprovision before any sm-db migration/update is done.\n\n[1] https://review.opendev.org/c/starlingx/ha/+/870859\n[2] https://review.opendev.org/c/starlingx/stx-puppet/+/869474\n\nTEST PLAN:\nPASS - build-pkgs -c -p puppet-manifests\nPASS - build-image\nPASS - Bootstrap AIO-SX (virtual)\nPASS - Check puppet.log to see if guest-agent was deprovisioned\n\nStory: 2010317\nTask: 48598\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I66c8733c48d0f87d1394901d427e94d913dbcca8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Changing tiller pod networking settings to improve swact time\n\nBased on investigation by Matt, the tiller-deploy pod was running\nin the cluster network namespace and therefore not inheriting host\nTCP keepalive parameters.\n\nDuring a swact, when the floating IP is taken down, tiller keepalive\nis so large its the kube-apiserver detects the timeout after 15 minutes\n(5 probes * 180 seconds)\n\nThe cluster namespace values are 9 probes at 75 second intervals.\nThe host TCP values are 5 consecutive probes at 1 second intervals.\n\nBy changing the tiller pod to be deployed using the host network,\nit will inherit the host sysctl values and detect much more quickly.\n(10 seconds)\n\nAdding additional override settings during helm init for tiller\nhelm init <params> --override spec.template.spec.hostNetwork=true\n\nThese changes were added to the ansible playbook.\n\nChange-Id: I218e4ef37100950c8ac5a0cb9759d9df50d9e368\nCloses-Bug: 1817941\nPartial-Bug: 1818123\nCo-Authored-By: Matt Peters <Matt.Peters@windriver.com>\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SM cluster_host_ip service\n\nThe floating IP of the cluster-host interface was not transferred\nto the newly active controller after swact.\nThe service cluster-host-ip should be monitored by SM regardless\nwhether the management interface is shared with cluster-host interface.\n\nCloses-Bug: 1824994\n\nChange-Id: Ie2bc9012adf7da1e093ff697eda7ae1165643e8c\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure the firewall in the worker nodes.\n\nThis change adds the capacity to install the worker node required\nfirewall into the calico configuration since kubectl isn't available\nthere. It uses ansible ad-hoc commands to access the controller from\nthe worker and execute the command.\n\nIn all test cases below the iptables/ip6tables content in the worker\nnode was verified\n\nTest Plan:\n[PASS] Install worker node.\n[PASS] Execute lock/unlock in the worker node.\n[PASS] Reinstall worker node.\n\nStory: 2010591\nTask: 48067\n\nChange-Id: I613b4ea710172c2bc7c6408bfa36430cbfe33fa2\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create docker filesystem on compute hosts\n\nCreate docker_lv and cgts_vg on on compute hosts, mounted as\n/var/lib/docker.\nProvisioned similarly to nova-local storage.  With Kubernetes enabled,\ncompute hosts will fail to unlock without this storage provisioned.\n\nStory: 2002839\nTask: 22778\n\nChange-Id: I2df5e995437841c965311b23c8cc23e9207e1dc5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create pmond ceph conf on all storage nodes\n\nCurrently the pmond ceph config file is only\ncreated on hosts that run ceph-mon, which is not\nthe case for all storage nodes.\n\nWe need to configure pmond to watch ceph on all\nstorage nodes so that other ceph processes (like ceph-osd)\nare monitored and restarted when necessary.\n\nTested by installing a Standard with dedicated\nstorage nodes and checking the presence of the\nconfig file. I also killed the ceph-osd process\nand verified that pmond restarted it.\nTested the runtime_osds class by doing a\nsystem host-stor-add on a AIO-SX and verifying that\nthe pmond file was deleted and recreated.\n\nCloses-Bug: #1929584\nSigned-off-by: Isac Souza <IsacSacchi.Souza@windriver.com>\nChange-Id: I8ec7f49ce98cf0cc40f9fe53e992f93ed4b2edaa\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use pmon to restart sssd service\n\nUsing systemctl to directly restart sssd is causing pmond to handle\nthis scenario as a process failure.\nThis commit updates the sssd service restart command in puppet files,\nto replace \"systemctl restart\" with \"pmon-restart\".\n\nTests performed:\n\nPASS: sssd service is successfully started.\nPASS: sssd service status is enabled and active.\nPASS: Kill sssd process multiple times and check if it gets restarted\nsuccessfully every time.\nPASS: Verified ssl_ca install and update with new certificate triggers\nsuccessful sssd restart.\nPASS: Verified sssd service is restarted by pmon and not by systemctl\nwhen a new domain configuration is added.\nPASS: Verify sssd service connects successfully to local openldap server\n\nStory: 2009834\nTask: 47023\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I45faa79471c6d4fa7afbb568451cd49156228d51\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SR-IOV enable for VF type interfaces\n\nThe puppet config for type VF interfaces deliberately has the\nnumber of virtual functions set to None, as they borrow from\ntheir parent SR-IOV interface. That is, it's only necessary to\nset the number of VFs on the parent interface.\n\nA previous commit changed the check on the num_vfs parameter to\nensure it is > 1.  We need to also check that this parameter is\ndefined.\n\nCloses-Bug: #1885173\nChange-Id: I671af0bc16aed3a38d2ebe84b0f6b7195180e97f\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the helm-upload failure on controller-1\n\nThe user \"www\" is used to upload charts by using\nhelm-upload cmd. The root cause for the helm-upload\nfailure is the uid and gid of user \"www\" do not match\nthe uid and gid on controller-0.\n\nCurrently, www is created on controller-0 during ansible\nconfiguration and the uid is set to \"1877\" explicitly.\nOn controller-1, it's created in puppet manifest but\nit doesn't set the uid.\n\nThe user \"www\" should really be added in setup package so\nthat it's created after each node installation and it makes\nsure the uid and gid are consistent on each node.\nThis is done in review https://review.opendev.org/#/c/668034/\n\nHowever, we want to add the uid and gid in puppet as well\nto ensure they are identical on both controllers in case\nthe user is not created during setup rpm installation.\n\nChange-Id: I54035739c15eb0f5254f00f5c22d44925316e81c\nPartial-Bug: 1833603\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure dcmanager user for endpoint_cache\n\nThe following changes are made, in order to remove the\ndependencies to 'admin' user and use 'dcmanager' user to\nauthenticate with services in the subclouds:\n. Add endpoint_cache section to both dcorch and dcmanager\n. Configure dcmanager user in the endpoint_cache section\n. Add dcmanager bootstrap class to configure the dcmanager\n  user on subclouds\n\nPartial-Bug: 1883758\n\nChange-Id: I790592f44d371051c157443836f71e3f00640ab5\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable guest plugin loading in VIM\n\nFollowing the work previously done in [1] and [2] to deactivate\nguest-related services in VIM, since they were no longer being utilized\nand causing coredump issues in the platform, this commit changes the\ndefault value for the `guest_plugin_disable` config variable so\nthat Puppet won't reinforce the guest plugin loading in VIM.\n\nAs reported in [3], loading this plugin while having some of its\nservices deactivated (or functionalities removed) has proven to be\na problem when stx-openstack is applied, as both nova-compute service\nand hypervisor are caught in an enable/disable loop indefinitely after\nthe first host lock/unlock with the application applied.\n\n[1] https://review.opendev.org/c/starlingx/nfv/+/869817\n[2] https://review.opendev.org/c/starlingx/nfv/+/870538\n[3] https://bugs.launchpad.net/starlingx/+bug/2015088\n\nTest Plan (on AIO-SX):\nPASS - Build puppet-nfv package\nPASS - Build and install ISO\nPASS - Upload and apply stx-openstack\nPASS - Verify that the `guest_plugin_disable` configuration variable\n       remains `True` after the application is applied:\n       $ grep 'guest_plugin_disable' /etc/nfv/vim/config.ini\nPASS - Lock and unlock controller-0\nPASS - Verify that both nova-compute service and hypervisor are no\n       longer intermittent after the unlock\n\nCloses-Bug: 2015088\n\nSigned-off-by: Luan Nunes Utimura <LuanNunes.Utimura@windriver.com>\nChange-Id: Iaebc8cc37eabe7b2b685622a5772544b4bce21dc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add minimal config for the sriov device plugin\n\nThis commit adds a minimal configuration for the sriov device plugin.\nIf the config file (/etc/pcidp/config.json) has invalid contents or\nis empty, the plugin remains in a crash loop, generating a large\nnumber of log files. This change ensures that the config file has\nvalid content, thus preventing such an issue.\n\nTest plan\n\nPASS Run Puppet in host with 0 PCI-SRIOV interfaces configured\nPASS Run Puppet in host with 1 PCI-SRIOV interface configured\n\nCloses-Bug: #2002447\n\nSigned-off-by: Lucas Ratusznei Fonseca\n               <lucas.ratuszneifonseca@windriver.com>\nChange-Id: I0ec6e9ebaad7b8ed7981f2f1af7b15195a3bfd43\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add logging configuration to nova-api-proxy\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add separate resolv file for kubelet\n\nThis commit adds a separate resolv file (\"/etc/resolv.conf.k8s\") to be\nused by kubelet, which only contains a public dns server, so should\navoid any loops with coredns.\n\nOnce /etc/resolv.conf is automatically updated with the cluster IP,\n/etc/resolv.conf.k8s should be managed by sysinv/puppet, and contain\nonly the user-specified nameservers.\n\nStory: 2003909\nTask: 27082\nChange-Id: Ie6e676a4248991da60ea84e725507ec19191f874\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Get swift working on containerized openstack\n\nIn order to get swift working on containerized openstack,\nchanges were needed both on platform and application side.\n\nFrom platform side, settings from ceph.conf file were replaced.\nA runtime manifest was added to update ceph.conf after a successful\napplication apply:\n    1. Keystone auth url was updated with keystone openstack url\n    2. 'rgw_keystone_admin_domain' and 'rgw_keystone_project' settings\n    were updated with 'service'.\n\nFrom application side the following changes have been implemented:\n    1. Ceph-rgw chart from openstack-helm-infra repo was included\n    in stx-openstack\n    2. A chart schema for ceph-rgw was added\n    3. An override file was generated\n\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\nStory: 2003909\nTask: 30606\nChange-Id: I01f7cf412264394f4f9bfb31f3c5a5ebd73f49dc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet-etcd module to the puppet manifests\n\nStory: 2002841\nTask: 22784\n\nChange-Id: I92fab74b11155f681448565d53f76d0aad2ff2e7\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add network timeout setting to ldap.conf\n\nNETWORK_TIMEOUT parameter specifies the amount of time to wait when\nconnecting to an LDAP server. If the server fails to respond in the\nspecified amount of time the client aborts the attempt.\n\nIn this commit, by setting the NETWORK_TIMEOUT parameter, we prevent\nlong delays in accessing the ldap server to get user information. The\ndelay can be caused by network connectivity fluctuations.\n\nTest Plan:\nPASS: In a DC system with a DX subcloud managed bootstraped and with\n      in-sync status, remove the mgmt network between both systems and\n      try to login the subcloud system. An ldap error should be raised\n      and the terminal prompt should be available in less than 7sec.\nPASS: In a DC system with a DX subcloud managed bootstraped and with\n      in-sync status, remove the mgmt network between the systems and\n      try to login the subcloud system and observe that ldap error is\n      raised and terminal prompt is available in less than 7sec. Exit\n      the system, add the mgmt network again and then login the\n      subcloud system again. Observe that the login is completed\n      successfully. An ldap error could be raised in less than 3sec due\n      to the network connection being recovered and it is not presented\n      after the network connection remains stable.\nPASS: In a DC system with a DX subcloud managed bootstraped and with\n      in-sync status, remove the mgmt network between the systems. SSH\n      to subcloud system from a machine other than systemcontroller as\n      sysadmin and issue a \"sudo ls\" command. An ldap error should be\n      raised and the terminal prompt should be available in less than\n      7sec.\nPASS: In a DC system with a DX subcloud managed bootstraped and with\n      in-sync status, remove the mgmt network between the systems and\n      then add it again. SSH to subcloud system from systemcontroller\n      as sysadmin via mgmt floating IP and issue a \"sudo ls\" command.\n      Observe that the SSH login to subcloud and \"sudo ls\" commands are\n      completed successfully. An ldap error could be raised in less\n      than 3sec due to the network connection being recovered and it\n      is not presented after the network connection remains stable.\n\nCloses-Bug: 2028368\n\nChange-Id: I7faf690ce87bc13f9e7bf631fab91db5fee8ec22\nSigned-off-by: Manoel Benedito Neto <Manoel.BeneditoNeto@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle N3000 FPGA reset\n\nA recent config commit (6d639fca5d) was introduced that resets any\nIntel N3000 FPGA devices on startup.  After an FPGA reset, it is\npossible that the PCI addresses of the underlying FEC device may\nchange, in addition to the resetting of any configured drivers and\nSR-IOV VF configuration on the FPGA FEC and NIC devices.\n\nTo handle the reset, it is required to do the following:\n\n- Do not allow a user to configure an FEC device before the first\nunlock (to allow the reset to occur).\n\n- Delay the configuration of FEC and NIC devices until the reset\n  has occurred.\n\nDepends-On: https://review.opendev.org/737388\nStory: 2006740\nTask: 39948\n\nChange-Id: I6d1bd988192dca868b8cc972045933ee8ac75e7c\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fixed banner error message\n\nWhen logging, a message would show saying\n\"-sh: The: command not found\"\n\nThis was due to a warning message that was being added\nto /etc/bash_completion.d/openstack when the command\n\"openstack complete\" is executed to fill the file.\n\nAdded a \"-q\" flag to suppress the warning message.\n\nTest Plan:\nPASS normal banner when logging\nPASS file does not contain the warning message\nPASS bootstrap and unlock\n\nCloses-Bug: 1978493\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: Ie935ae2c32e644cd6bc622046319adfb90d6477e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make Ceph storage backend optional\n\nChanges in this commit:\n- create by default SM storage-groups\n- on AIO-DX, configure (but don't enable) by default\n  cephmon-drbd\n- create SM runtime manifest for ceph related services\n\nChange-Id: I95eb1bfa6c1feccb3d7b958900f20787a3f71cd4\nStory: 2007064\nTask: 38592\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reserve platform memory for all configurations\n\nIn this commit, the platform memory is also reserved for\nthe controller nodes in both standard and distributed cloud\nconfigurations. This ensures that platform processes always\nhave sufficient memory to operate optimally.\n\nThe system administrator can use host-memory-modify system\ncommand to increase the platform reserved memory to accomodate\nadditional workload prior to scaling up the system with more\nworker nodes/subclouds.\n\nCloses-Bug: 1883158\nDepends-On: https://review.opendev.org/#/c/748485\nChange-Id: Iebe2bd28a4d7bf34f85ed2b014679b524c2a15c0\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rebase Armada to latest master\n\nRebasing Armada to use the latest docker image tag\n8a1638098f88d92bf799ef4934abe569789b885e-ubuntu_bionic.\n\nChange-Id: Ic48a2e053d0de7dacfd6a07d817947e11dc8d596\nStory: 2006347\nTask: 36105\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Add two new port definitions to mtc.ini for SM communications\n\nIn support of the HA Improvements feature maintenance is required to,\nupon request, send SM a summary of maintenance's heartbeat responsiveness\nduring the last 20 heartbeat periods.\n\nThis update adds the required port assignments to the mtc.ini file\nin support of said communications.\n\nWith this update the mtc.ini file will be updated to contain the\nfollowing entries.\n\n  ; Communication ports between SM and maintenance\n  sm_server_port = 2124 ; port sm receives mtce commands from\n  sm_client_port = 2224 ; port mtce receives sm commands from\n\nChange-Id: I05c022f7e4dcdeaea71bc0020641baa331daae57\nStory: 2003576\nTask: 26837\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Puppet generate ptp configs\n\nThis commit adds the puppet manifests and templates required to generate\nthe ptp config files and start the ptp services.\n\nThe changes here are currently benign, as they are not included in the\nsystem worker manifest at /etc/puppet/manifests/worker.pp\n\nIt is required to merge these changes without activating them in order\nto support further development work.\nA future commit will enable these changes once further development and\ntesting has been completed.\n\nIn order to test these changes, edit /etc/puppet/manifests/worker.pp\nand add:\ninclude ::platform::ptpinstance\n\nTest Plan:\n\nPASS: Build and deploy on hardware lab\nPASS: Configure multiple ptp instances in virtual box and hardware lab\n\nRegression:\n\nPASS: The code in this commit has no effect until a subsequent commit\nupdates the worker manifest. Existing PTP functionality is unchanged at\nthis time.\n\nStory: 2009248\nTask: 43964\n\nDepends-On: https://review.opendev.org/817822\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: Ie7d9f40fcd321577921c6899ef7e36105a0dec8d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"switch to use new control-plane label\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable admin network failover behaviour\n\nA requirement for a subcloud's admin network is that its\nsubnet information be able to be updated at runtime without\nhost lock / unlock.  In an AIO-DX system this can cause\nissues in certain circumstances as the disablement /\nenablement must be done via puppet and is affected\nby the ordering a user performs each action as well as\nthe currently running manifests on each host.\n\nA corresponding SM commit will disable the failover\nbehaviour for the admin network, while still maintaining\nthe alarming.\n\nThis commit eliminates the ifdown/ifup behaviour for the\nadmin network when it is disabled / enabled / updated, as\nit is not needed anymore.\n\nTest plan:\n\n- No uncontrolled swacts while re-configuring admin subnets\n  or reverting to the management subnet (deleting the admin\n  address pool)\n\n- Alarms still generated on interface down / heartbeat loss\n\n- Switching back and forth between admin network / mgmt\n  network via dcmanager.\n\nStory: 2010319\nTask: 47707\n\nChange-Id: I5a5f2919cb5a815c0e6dbf8442458a27500cee14\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion kubernetes to 1.16.2\n\nChange kubeadm config to install kubernetes version 1.16.2\n\nChange-Id: I6d366903dc82c3b0257157a62520f77dc7d52d87\nStory: 2005860\nTask: 37158\nDepends-On: https://review.opendev.org/#/c/689000/\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca host update updateCerts\n\nKubernetes manifest for updateCerts\nThis commit adds 2 classes to help on the k8s update\nroot CA procedure, more specifically on phase updateCerts\nof kube-rootca-host-update, one will deal with master nodes\nwhile the other one with worker nodes.\n- Gets certificate and key pairs from secrets of generated\nk8s resources\n- Changes kube components .conf files to align with the new certs\n- Restart kube-components\n\nStory: 2008675\nTask: 42705\nChange-Id: I15d6590f5d2a78015423debfee57a22f27153d7e\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Wrap IPv6 in square brackets in ceph.conf\"\n\nThis reverts commit aa23a69a9ceb265a7c9ff1cd912fc48e25168d81.\n\nThis had side effects in the format of ceph mgr address and there are\npossible other impacts in the other fields of ceph.conf.\n\nA new commit will be provided to fix this task.\n\nStory: 2009074\nTask: 44044\n\nChange-Id: Id982cd1258b334078dcc17d10027ec70fc5f153c\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Disable resource containers for kube-proxy\"\n\nThis reverts commit f775febf6204d8a6f9a772ea30f47148c3ad6e5e.\n\nKubernetes 1.16 removed the resourceContainers field from that\nconfig entry.\nThis needs to be reverted in order for a kube proxy\nconfiguration to not fail during ansible setup.\n\nChange-Id: I46a194b5d91989c8645bba9264e49253f4a86d02\nStory: 2005860\nTask: 36898\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Install DC adminep cert and DC root ca certificate\n\nThis is to install DC admin endpoint certificate (pem).\nThis also install root CA to trusted CA, so to trust the certificate\nissued directly and indirectly by DC root CA.\n\nStory: 2007347\nTask: 39430\n\nDepends-on: https://review.opendev.org/720273\n\nChange-Id: Ie242c6e833a574ff29562b468fff72352515d22a\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "remove puppet class update_kubeadm_feature_gates\n\nThis change removes puppet class update_kubeadm_feature_gates\nfrom kubernetes.pp.\n\nThe set of changes here,\nhttps://opendev.org/starlingx/integ/commit/a6a5349d025487672fe818aae36a2020a9f9f08c\n(k8s-1.22.5: remove feature-gates),\n\nhttps://opendev.org/starlingx/stx-puppet/commit/1cdfd7828622b88318058ae4b13b629fc1d94be9\n(Add a puppet class to support k8s feature-gate update), and\n\nhttps://opendev.org/starlingx/config/commit/cc3cdbd6474e574a20bc71b35cb6875e359875aa\n(apply feature-gate update during upgrade-activate) were added for\nstx 6.0 to stx 7.0 upgrade (CentOS) for changes in feature-gates with\nrespect to k8s 1.22.\n\nUpdating feature gates as required per k8s version is now handled\nat k8s upgrade in a single script (upgrade-k8s-config) starting\nfrom this change:\nhttps://opendev.org/starlingx/integ/commit/6e7736059ac927860951c876ad2693c03d9bd51b\n(update feature-gates for specific k8s version).\n\nHence, this puppet class is no longer required.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/864429\n\nTest Plan:\nPASS: AIO-SX stx7.0 to stx8.0 platform upgrade successful.\n\nCloses-Bug: 1990880\n\nSigned-off-by: Kaustubh Dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Idde35458bed976e483e825bef5477db085ec124e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Restore ceph during system restore\"\n\nThis reverts commit a03cbf1b678af7939b706d0997624208a4d880a6.\n\nChange-Id: I11c4115f225a65fad8e037711a6164fd5570b3c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update containerd registry.local configuration\"\n\nThis reverts commit 7f921608842190b41e31c1cbea805d2e45ae8436.\n\nChange-Id: I329373fd36d5b77a314f24dfc2d641c97aa4661d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove armada and helm v2\n\nWith the application framework moving to FluxCD,\nArmada is no longer supported and its configuration\nfiles and resources are no longer necessary.\n\nThe same applies to helm v2 (Tiller) with the system\nnow using helm v3.\n\nTest Plan:\nPASS: app operations still work\nPASS: deploy and all system apps uploaded/applied\nPASS: deploy unlocked/enabled/available\nPASS: upgrade sx\nPASS: upgrade dx\nPASS: deploy dc\nPASS: bnr\n\nStory: 2010560\nTask: 47272\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/869094\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I12134e8aa098d455a8519daa07cf7562133a2241\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove img-conversions and gnocchi platform logical volumes\n\nThese two partitions are no longer needed in a k8s deployment.\nBoth of them are now managed by the openstack application.\n\nChange-Id: Id342c3eafc839a268683ff369353cf4a5f23027d\nStory: 2004695\nTask: 30052\nDepends-On: https://review.openstack.org/#/c/639246/\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix duplex system controller-1 fail to boot after unlock\n\nIt is due to controller-1 doesn't have /opt/platform/config folder.\nAnd cause puppet failure due to using non-exist file as source.\nRestrict the code for worker node only, since controller node\nalready has ca cert in the ssl folder.\n\nTest:\nPass simplex/duplex/multi node deployment with vm created.\n\nCloses-Bug: 1860529\nChange-Id: I808ee15e5c78ebead114219d0ec428fb45cc9128\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid unintended ldap configuration in subcloud\n\nLDAP should not be configured in a subcloud as it connects to the\nsystemController's openldap service. The ldapserver_remote variable\nis used to determine whether to configure a local ldap service or\nconnect to a remote one (to the system controller in this case).\n\nTest plan:\n\nPASS: Full build, install and bootstrap on a DC system and\n      one subcloud added.\n      Verify that the ldap directory is not configured in the subcloud,\n      meaning that cn=config.ldif is missing in /etc/ldap/schema.\n      Verify that slapd.conf is still present in /etc/ldap\nPASS: System host-reinstall in a standalone DX environment.\n      Verify local ldap is properly reconfigured at unlock after\n      host-reinstall.\n      Verify that slapd.conf is no longer present in /etc/ldap\nPASS: System host-reinstall in a DX subcloud environment.\n      Verify host-install works and local ldap server is not configured.\n      Verify that slapd.conf is still present in /etc/ldap.\nPASS: Create a ldap user in system controller and verify it's possible\n      to login to the subcloud using that user.\n\nPartial-Bug: 2025663\n\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nChange-Id: I85de8e2ced2490d07823e285608d6e9b1e5e472a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add kubernetes support on second controller\n\nAdding rudimentary support for kubernetes on the second controller.\nSystem pods will be active on both controllers and are not managed\nby SM - they use their own leader election mechanism. Also added\nsupport for AIO-DX.\n\nStory: 2002843\nTask: 22789\n\nChange-Id: If30b1aa1a7dbd8e3316912119fa7f7f10ef9b4e6\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"[PTP dual NIC config] Handle PTP instance removal\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable SR-IOV device plugin restart\n\nIn an AIO system, it is possible for the kube-system pods, including\nthe SR-IOV device plugin to start before the worker manifest finishes\nenabling and binding drivers to network interface VFs.\n\nSince the device plugin does not periodically (re)scan the PCI bus,\nit is required to restart the plugin after completing the SR-IOV\ndriver bind to ensure that the full allocatable set of VFs is\ninventoried.\n\nNote that this can probably be mitigated in the future when the\ndevice plugin is converted to use helm / config map rather than\nhaving puppet write it's /etc/sriovdp/config.json file.\n\nChange-Id: I7972d7a56c2d38884238f7c7818892d0a5b33a0e\nCloses-Bug: #1885229\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change nova instances mount to reflect openstack-helm default\n\nThis changes all references to /etc/nova/instances and mount to reflect\nthe openstack-helm instances_path default of /var/lib/nova/instances.\n\nThe related code in config_controller backup and restore is removed\nsince it is not functionally required anymore.\n\nChange-Id: I7a6c7f17802d7e739aad931bff175ea8d0d8007d\nStory: 2003909\nTask: 27081\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Glance periodic cleanup\n\nAdd glance cleaner periodic script as a cron task\nand create CLI wrapper for it.\n\nChange-Id: I40a70bc5159592ed346be83c17b6bd93c1d881c2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unused upgrade code\n\nRemove upgrade code specific to StX4 -> StX5 upgrades.\n\nStory: 2008966\nTask: 42726\nChange-Id: I5b167aa38081721703eddbe7cccd15e42c04d114\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO System Controller CPU assignment changes\n\nThis changes AIO running DC system controller CPU assignment so that\nall logical cpus spanning all numa nodes are configured as Platform\nfunction.\n\nThis update scopes the change to controller personality.\n\nChange-Id: I9eeac00f92948d9de2edea450754047c0d9a0ce2\nPartial-Bug: 1855920\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create ceilometer resource types in gnocchi\n\n\"ceilometer-upgrade\" needs to run through puppet in order to create\nceilometer resource types in gnocchi as well as vswitch resources if\nthe vswitch type is not ovs.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: I757921f8d73068969f385012998c7fe778e4ad81\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for failure during AIO-SX to AIO-DX migration on standalone system\n\nFix drbd-cephmon mount error by manually remounting monitor DRBD after\nDRBD::Resource creation. Removed patching of Kubernetes Persistent\nVolumes from puppet manifest since Kubelet and kube-api are no longer\navailable during puppet run.\n\nPartial-Bug: 1927224\nSigned-off-by: Pedro Henrique Linhares <PedroHenriqueLinhares.Silva@windriver.com>\nChange-Id: Id5565ac734499b617b470499cfc2aa1ae2972da3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable setup of AODH on bare metal controller for stein\n\nPike AODH cannot be built with stein clients, so it is disabled.\n\nAll bare metal openstack components (except keystone and horizon)\nwill later be disabled.\n\nStory: 2004751\nTask: 28839\nChange-Id: Iaef48dcc205ce52ab01f50eec8f59ea79431f2a2\nDepends-On: Ifa905bea2e95ded72a327f8ff43667c8c5429363\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config sssd on storage node\n\nCurrently sssd is not configured and running on storage nodes so\nldap users can't login to storage nodes. This update makes sssd\nconfigured, and running on storage nodes (with a followup update).\n\nTest Plan:\nPASS: System with storage nodes deployment\nPASS: In storage nodes, verify that the following config file exist:\n      /etc/sssd/sssd.conf\n\nCloses-Bug: 2023399\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I383c101e0f99be93e9da528411c6fa1fd8cde4c6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ntp timeout puppet error\n\nntpd command freezes when it can't get a response\nfrom the servers in the file given to it as\na parameter, triggering a timeout\n\nif a puppet exec causes a timeout, the exec is\nsaid to fail, which breaks system unlock\n\nthis change moves the timeout mechanism\nso that it doesn't cause unlock to fail\n\nTest Plan - Debian:\nPASS: unlock despite giving ntp-modify a broken server\n\nTest Plan - Centos:\nPASS: unlock despite giving ntp-modify a broken server\n\nStory: 2009965\nTask: 45370\n\nCloses-Bug: #1973888\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I0dc6de32407e02b1687578bb10b77b5242e19730\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ssl_ca certificate install for Debian\n\nDebian CA certificate update mechanism is not correct at the moment.\n\nCurrently, it copies ssl_ca certificates to /etc/ssl/certs/ca-cert.crt\nand then runs c_rehash command. That is not correct and has no effect\non debian Trusted CA file which is /etc/ssl/certs/ca-certificates.crt.\n\nThis change adds directory /etc/pki/ca-trust/source/anchors for debian\nand uses it to place ca certificates. Every time a new ssl_ca is added\nit will call 'update-ca-certificates --localcertsdir\n/etc/pki/ca-trust/source/anchors' command. That has the desired effect\nof updating /etc/ssl/certs/ca-certificates.crt.\n\nTest Plan:\n\nPASS: Package build, image build and system install\nPASS: Verify that a system certificate-install is able to place\n      certificates in /etc/pki/ca-trust/source/anchors/ca-cert.crt file\nPASS: Verify that a system certificate-install is able to add\n      certificates to /etc/ssl/certs/ca-certificates.crt file\nPASS: Verify that a system certificate-install is able to install a file\n      with 2 or more certificates and that those certificates are added\n      to /etc/ssl/certs/ca-certificates.crt file\nPASS: Verify that a system certificate-uninstall is able to delete\n      certificates from system certificate-list as well as\n      /etc/ssl/certs/ca-certificates.crt file\n\nStory: 2009968\nTask: 45880\n\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nChange-Id: I02ebd0791fc36423241ad98624009e03ed172040\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding admission plugin post bootstrap\n\nThis commit adds the ability to change the admission plugins of\nkube-apiserver post bootstrap. We need this for pod security plugin.\nStarting pod security plugin without any policies will result in all\npods being denied.\n\nStory: 2007351\nTask: 38897\n\nChange-Id: I3ad3ba91f3084bd2f0054d5d063d2242594997b2\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-sysinv\n\nAdd debian packaging for puppet-sysinv.\n\nStory: 2009101\nTask: 43295\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I1d390c4e54c6b0d250afd3fd3de1851e796667e1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set cinder default_volume_type via service parameters\n\nService Parameter support added for setting cinder.conf parameter\nDEFAULT/default_volume_type.\n\nChanges include:\n - Added service parameter cinder/DEFAULT/default_volume_type with\n   checks to verify that the provided value is a currently defined\n   volume type and multiple values are not provided. The cinder API is\n   queried to get a list of acceptable values.\n - The service parameter is not required to be present. It is optional,\n   but we maintain behavior from past releases which sets the default\n   volume type to 'ceph' if the ceph backend in present.\n - If the ceph backend is present and the service parameter is present,\n   the service parameter takes precedence.\n - The cinder.pp manifest is updated to provide a service_parameter\n   runtime class that applies the cinder.conf changes for SAN backend\n   sections and the DEFAULT section.\n - puppet-cinder is updated to remove the default_volume_type from the\n   cinder::api class. This allows us to set the parameter as part of a\n   targeted runtime class and during the ::openstack::cinder main class.\n   To upstream this we should create cinder::default_volume_type\n   class (like the cinder::backends class) to enable setting this as\n   needed.\n\nChange-Id: I64e61cdc28efd327f34fa74bb2bea645458f6d6e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow k8s upgrades to any release if necessary\n\nThe default behaviour of the \"kubeadm upgrade apply\" command is\nto only allow upgrades to stable kubernetes versions. However,\nfor both testing purposes and for potential critical fixes in\nthe future, it may be necessary to upgrade to a release\ncandidate or other release that kubernetes deems as unstable.\nAdding in the appropriate options when calling the \"kubeadm\nupgrade apply\" command to make this possible.\n\nChange-Id: I164caf495ee3680f549d651b97e7e502b1172c70\nStory: 2006781\nTask: 37578\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Remove legacy services\n\nWhen migrating from old (single instance) PTP configuration to new\n(multi-instance) one, the ptp4l and phc2sys services that were\nprogrammed to run by systemd must be disabled.\n\nTest Plan:\n\nPASS: Services removed after patch applied in the lab.\n\nTask: 44551\nStory: 2009248\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I113d45c933c6f18b62a60858eeb23cc50a02c3fb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Ceph External Backend issues\n\n 1. Fixes the traceback raised by sysinv conductor when reprovisioning\n    external ceph backend using same ceph.conf naming as old backend\n 2. Allows ceph config file to be overwritten in the\n    /opt/platform/config/version/ceph-config directory\n 3. In the original design, a new directory, /opt/extension/ceph,\n    would be used to store external ceph config files. This directory\n    is not actually needed. This commit removes the code in drbd.pp that\n    creates this directory.\n 4. In storage_ceph_external.py, use uuid instead of isystem_uuid.\n\nStory: 2002820\nTask: 22737\n\nChange-Id: Ic9bbfd5859b2ce8a02b6940965db16b78ce854ae\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet to define number of Barbican workers on Debian\n\nOn Debian Barbian api is run by uWSGI. The mechanism to define the\nnumber of workers on CentOS is no longer work. This change updated\nbarbican puppet manifest so the same number of workers can be\ndefined.\n\nTest Plan for Debian:\nPASS: build package, build image.\nPASS: system install, system bootstrap\nPASS: barbian workers decreases to 3 on VBox AIO-SX deployment,\n      (alignd with CentOS)\n\nTest Plan for Debian:\nPASS: system install, boostrap and unlock.\nPASS: barbican workers is the same as without this change, both\n      before and after bootstrap.\n\nStory: 2009101\nTask: 44491\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Id13b31dcdb666b0a046315cf0ace142977fff82a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for Kubernetes 1.24.4\n\nThis removes kubelet option --cni-bin-dir argument since it is only\napplicable to dockershim (which we don't use).\n\nThis flag now fails to be parsed in 1.24 and will cause initial\nconfiguration failure after unlock.\n\nTest-Plan:\nPASS: AIO-SX: Fresh install k8s 1.23.1\nPASS: AIO-SX: Fresh install k8s 1.24.4\n\nStory: 2010301\nTask: 46558\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: I38ce0f62902cd2a3d3d43d2915f54238ce29638c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Adjust eng_workers rules to be used by Scaled Down services\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet class for rook\n\nCreate a new drbd device for rook. For duplex system, device mount to\nfolder /var/lib/ceph/mon-a for mon data sync on two controllers.\n\nStory: 2005527\nTask: 40281\n\nChange-Id: Ic5edca16e2dce905aeb582b0359446bd222e5ad3\nSigned-off-by: Martin, Chen <haochuan.z.chen@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure containerd pause image using kubeadm\n\nThe pause image version depends on Kubernetes version, so it cannot be\npermanently hardcoded. This regenerates the containerd file\n/etc/containerd/config.toml using the kubeadm configured version.\n\nThis yields the following pause images for containerd:\n- Kubernetes 1.18.1, 1.19.13, 1.20.9: registry.local:9001/k8s.gcr.io/pause:3.2\n- Kubernetes 1.21.3: registry.local:9001/k8s.gcr.io/pause:3.4.1\n\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/810521\nStory: 2008972\nTask: 43402\n\nTest Plan: Testing with commits for topic: kubernetes-1.21.3\n\nPASS: Install AIO-DX with kubernetes_version 1.18.1\nPASS: Install AIO-DX with kubernetes_version 1.20.9\nPASS: Install AIO-SX with kubernetes_version 1.21.3\nPASS: Install AIO-DX with kubernetes_version 1.21.3\nPASS: Install Standard with kubernetes_version 1.21.3\nPASS: Kubernetes 1.21.3, verify cpu-manager 'static' policy\n      isolation of Guaranteed resource limit pods\n      verify kubelet cpu-manager logs for pod apply\nPASS: Kubernetes 1.21.3, verify cpu-manager 'static' policy\n      isolation of 'windriver.com/isolcpus' resource limit pods\n      verify kubelet cpu-manager logs for pod apply\nPASS: Kubernetes 1.21.3 Verify platform apps: cert-manager,\nplatorm-integ-apps\nPASS: Kubernetes 1.18.1 Create and delete PersistentVolumeClaim\nPASS: Kubernetes 1.20.9 Create and delete PersistentVolumeClaim\nPASS: Kubernetes 1.21.3 Create and delete PersistentVolumeClaim\nPASS: Apply and remove application <app> and verify <app>\nPASS: Kubernetes 1.18.1 Verify pause image version is 3.2\nPASS: Kubernetes 1.20.9 Verify pause image version is 3.2\nPASS: Kubernetes 1.21.3 Verify pause image version is 3.4.1\nPASS: Kubernetes 1.18.1 Verify cgroupDriver is cgroupfs\nPASS: Kubernetes 1.20.9 Verify cgroupDriver is cgroupfs\nPASS: Kubernetes 1.21.3 Verify cgroupDriver is cgroupfs\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Ica83369932206736940571cca234b10c72e759dc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ceph: explicitly bind ceph-mgr to controller address\n\nceph-mgr has no corresponding sections in ceph.conf\nWhen the service starts it binds and advertise a\nlocal address.\n\nIn the case of #1843082 ceph-mgr on controller-0 binds\nto the floating management IP address [face::5]. When\ncontroller swacts ceph-client API requests are sent\nto [face::5] but there is no service listening on that\nendpoint and host-lock command hangs.\n\nFix: use ceph.conf to explicitly bind ceph-mgr to a\nhost-specific controller address.\n\nChange-Id: I811bfa7410770eb91eb4519cfab3e6febf381e6d\nCloses-bug: 1843082\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update ptp puppet manifest to support Logan Beach NIC\n\nProblem: system ptp-instance-apply does not apply 'clock' configuration\nparameters to Logan Beach NICs.\n\nThe ptpinstance.pp manifest greps for the Westport Channel value of 000e\nin /sys/class/net/<inteface>/device/subsystem_device in order to verify\nthat configuration commands are being applied to the correct NIC type.\n\nIntel Logan Beach NICs use a value of 000f, so the puppet manifest must\nbe updated to accept both values.\n\nTesting:\n\nPass: Applied change to AIO-SX system with both Westport Channel and\nLogan Beach NICs. Configuration settings applied and removed correctly\nfor both NIC types.\n\nStory: 20099952\nTask: 45257\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: Ib7eca59cfbdc6917465b2dff559840443333aedd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Install secondary controller nodes with kubeadm join\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Request runtime configuration in case of empty config info\n\nDuring patch apply tests, it was detected that if all the firewall\npuppet classes are not provided during boot, we need to mark the\nfilesystem with .platform_firewall_config_required in /etc/platform/\nso sysinv-agent can request a runtime execution to conductor. The\naudit operation already looks for this file, this change just adds\nan extra condition.\n\nSince this can happen also in the worker nodes, this logic is added\nthere during script execution. The worker script itself will not\ndeclare error, just creates the flag to execute the runtime config.\n\nIn all test scenarios the validation was done with the verification\nthat the firewall was created after patch application.\n\nTest Plan:\n[PASS] Apply/Remove the firewall feature as a patch in AIO-SX\n[PASS] Apply/Remove the firewall feature as a patch in AIO-DX\n[PASS] Apply/Remove the firewall feature as a patch in Standard\n\nStory: 2010591\nTask: 48461\n\nChange-Id: Id9a22ff11cd347cf7a162662b7d18d9955206411\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX Regression: Memory usage exceed alarms appeared during test run\n\n- Reduce both CPU and memory footprint for AIO simplex by reducing the number of workers across the board.\n- In addition:\n     a. Reduce ceilometer workers to 1 as the traffic generated from max number of VMs in simplex (20) does\n        not warrant more workers than 1. Increase batch timeout to reduce load.\n     b. Change keystone workers factor from 1.5 to 1 which further reduces the number of keystone workers\n        for simplex. The number of requests do not warrrant more workers than other services.\n     c. Reduce the number of nova api metadata workers to half of nova api compute workers for both AIO and\n        standard configs based on LO data.\n  AIO installations, simplex sanity & sanity nightly all passed. Sanity, parallel VM/volume launch timings\n  also improved. Ceilometer messages were cleared timely.\n\nChange-Id: Idfd09d53af834276bc5f8e26853690ae3bf9b139\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: https://review.openstack.org/578134\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Zero Touch Provisioning changes for subcloud configuration\n\n- Cleaning up old RegionOne endpoints during runtime manifest apply\n- Configuring dcdbsync endpoints in subclouds\n\nDepends-On: https://review.opendev.org/#/c/670321/\nChange-Id: I14729b579646aab9acecc8a953513b87b16363d2\nStory: 2004766\nTask: 35756\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new configuration for hbs cluster info\n\nStore 2 new system configurations:\n  sm_client_port, and\n  sm_server_port\nto sm db.\n\nStory: 2003577\nTask: 27727\n\nDepends-On: I1a3dbaec78de591ef0de75ef9cafab48bcbb4dbf\n\nChange-Id: I6c4885de92b311932c6934b5cb9acf1a00657bb2\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "PTP: specify ethernet interfaces in the ptp4l.conf file.\n\nThe ptp4l process will fail in case there are no NICs specified.\nWe need to list all the NICs in the configuration file since\nNIC specification has been removed from command line earlier.\n\nChange-Id: Ib68406a2ed514830674627180c451d274b581f74\nStory: 2002935\nTask: 22923\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix extensions puppet manifest\n\nThe extension classes are not usable because they don't match with the\nfile name. Classes use 'extensions' but file name uses 'extension'.\nThe solution chosen is to rename the 'extension.pp' to 'extensions.pp'\n\nPASS: AIO-SX and AIO-DX bootstrap test\n\nCloses-Bug: 1987103\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: I0a9b2cdb42a1302c0520dbc4706d08b7cb7077c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Fix vim endpoint issue when https is enabled in DC\"\n\nThis reverts commit ee095297f750d400d5013d2a6c8f9f7980b321c1.\n\nReason for revert: There was a side effect on environments \nafter upgrades that caused the creation of wrongly configured\nendpoints. In this scenario, no HTTPS endpoint would be \ncreated for Vim on SystemController, which is worse than \nprevious behavior.\n\nDepends-on: https://review.opendev.org/c/starlingx/config/+/867028\n\nChange-Id: I1da34f647bbc403280f8d2d771b9fb27b39b7357\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update drbd resize operation to run after puppet manifest\n\nThere is a potential race condition in triggering the filesystem\nresize check.  The resize check is triggered on the start of\na controller filesystem drbd resize operation, however, if another\nconfiguration is applied before the resize check may be early,\nin which case the lv would be resized but not drbd.\n\nIn the drbd manifest update to trigger the drbd filesystem resize\ncheck after the lv filesystem  have been resized.\n\nChange-Id: I97038d0cc9d57ab639f85c2282677364b44249c0\nCloses-Bug: 1894003\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix broken build due to %autosetup\n\nChange-Id: I50fbec67ea261dd35fa48b4106009ef665abd009\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Secure OpenLDAP configuration update at host-unlock\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Cloud configuration\n\nCleanup the keystone bootstrap endpoints on the sub-clouds\n\nStory: 2004766\nTask: 30107\n\nChange-Id: I5231dad791202b7c1653aab90932955eed6d0820\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Container pinning on worker nodes and All-in-one servers\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable VIM monitoring of Openstack services for Kubernetes deployment\n\nStory: 2002843\nTask: 22790\n\nChange-Id: I0a2b1c2a3799ab6e5c4a5a78cf60895e22469782\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid dcmanager and dcorch log duplication in openstack.log\n\nThe logs related to dcmanager (orchestrator, audit, etc..) and\ndcorch show up in openstack.log as well. This commit fixes the\nissue by moving the DC logs to local4 log facility.\n\nChange-Id: I7514ad1d009455077f4138757b480a537272839a\nPartial-Bug: 1932334\nDepends-On: https://review.opendev.org/#/c/796959\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"kubelet cpu-manager-policy=none options for application-isolated\"",
        "issue_summary": ""
    },
    {
        "commit_message": "clear yamllint errors under stx-config\n  Listed below are the errors which were fixed as well as the actions\n    [error] trailing spaces (trailing-spaces)\n    --> delete spaces\n    [error] too many blank lines (3 > 2)\n    --> delete blank line\n    [error] too few spaces after comma (commas)\n    --> add space after comma\n    [error] too many spaces inside brackets\n    --> delete extra spaces\n    [error] wrong indentation: expected XX but found XX (indentation)\n    --> delete/add spaces to indente\n    [error] line too long (97 > 80 characters) (line-length)\n    --> change the line max length to 200\n        cut the too long lines to 2 or 3 (by using '|-')\n    [error] duplication of key \"XXX\" in mapping (key-duplicates)\n    --> delete the duplication\n    [warning] missing starting space in comment (comments)\n    --> add blank after '#'\n    [warning] truthy value should be true or false (truthy)\n    --> lower case \"False\"/\"True\" to false/true\n\n  Listed below are test cases done which run one controller and one compute in KVMs\n    Test-Install           ----  success\n    Test_create_instance   ----  success\n\n  Now linters errors under stx-config is clear. Weee!!\n\nRelated commit: https://review.openstack.org/#/c/600473/\n\nStory: 2003360\nTask: 24411\n\nChange-Id: Idc3c9304172be52c5d2fb2cbd862527066b72ecf\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove openstack::keystone::dcmanager::password::runtime\n\nThere is no dcmanager's password-related service configuration in\na subcloud. Therefore, all the services should remain running. This\ncommit removes this class.\nThis commit will go with changes in keystone listener and the\nansible playbook together.\n\nTest:\nPassed - update dcmanager password in a subcloud controller,\nno service reloaded after the change, all the services remain\nactive and no FM alarm was raised after the change.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/865548\nStory: 2010230\nTask: 46876\n\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I57c53e6f8a8b2d5cbd070532530daa1834d21850\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix stale data cleanup on the logical volumes\n\nThe stx-puppet tries to wipe the start and end of some logical\nvolumes to prevent problems, but the command uses the wrong output\nfile resulting in the creation of junk files.\n\nTest Plan:\n- Tested on AIO-SX and AIO-DX, the files were not created.\n\nCloses-bug: 1975851\n\nSigned-off-by: Hugo Brito <hugo.brito@windriver.com>\nChange-Id: I96a39455b7a2611ec53212835198fbf6f2efc11f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create group for ldap users with denied ssh access\n\nLocal OpenLDAP and WAD servers are being used for k8s api and SSH\nauthentication. We need the ability to disallow SSH authentication\nfor selective users. As part of the solution, we create a Linux\ngroup where all ldap users with \"denied ssh access\" will be added.\nThe group will be set for denied ssh access in the sshd configuration.\nThe sshd configuration change is part of a separate commit.\n\nTest Plan:\nPASS: Debian image gets successfully installed in AIO-SX system.\nPASS: Verify the Linux group has been created.\nPASS: Create an openldap user and add to the \"deny ssh access\" group.\nVerify that the user cannot ssh.\nPASS: Create a WAD group with the same name and gidNumber as the\nLinux group for \"deny ssh access\". Create a WAD user in this group.\nValidate that the new WAD user in the \"deny ssh group\" cannot ssh\nto stx platform.\nPASS: Remove the WAD user from the WAD \"deny ssh access\" group.\nValidate that now the user can have ssh access to stx platform.\nPASS: Remove the openldap user from the Linux \"deny ssh access\" group.\nValidate that now the user can have ssh access to stx platform.\n\nStory: 2010589\nTask: 48234\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ib1229f21e207d66d39f8bcdb7acf0533ace527c1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for kube-upgrade-abort\n\nThis change allow us to call a puppet class to update\nthe bindmounts, restore the saved static manifest files, restart\nkubelet and restart etcd during k8s upgrade abort.\n\nThis change is also to solve the warning message\n\"Unrecognized escape sequence\" which comes during kubelet upgrade.\n\nTest plan:\nPass: Abort the k8s upgrade by 'system kube-upgrade-abort' command\nand verify static manifest files are restored, bindmounts are updated,\nkubelet and etcd restarted successfully.\nPass: Verify /etc/fstab content updated successfully after k8s upgrade\nabort.\n\nStory: 2010565\nTask: 47822\n\nChange-Id: If1b1bda88a898bc6360403a839e174fbc0d62008\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sssd service parameters support in puppet\n\nThis commit adds sssd service parameters configuration support\nin puppet. The sssd puppet configuration is updated with the remote\nldap domain parameters.\nRemote ldap domain parameters get configured with default values and\na subset of the parameters that are specific to an ldap server will\nbe added and managed using service parameters mechanism.\nA maximum of 3 remote ldap domains are supported: ldap-domain1,\nldap-domain2, ldap-domain3.\n\nTests performed:\nPASS: Successful install in and AIO-SX system configuration.\nPASS: The remote ldap domain configuration gets populated in\nsssd.conf.\nPASS: sssd service is successfully started.\nPASS: Ldap domain service parameters are added and applied\nsuccessfully.\nPASS: Verify connection to the new ldap server using ldapsearch\nPASS: Veryfy ldap users have been discovered and cached in /etc/passwd\nPASS: Verify SSH connection for a remote AD ldap user.\n\nStory: 2009834\nTask: 46365\nDepends-On: https://review.opendev.org/c/starlingx/config/+/858959\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I2537eaaf56fd9e82a894f60ff512cefbaaf2dd34\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Restore ceph during system restore\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add floating ip for ironic network\n\nThis commit adds the floating ip support if ironic network is\ncreated and an interface is assigned to that network. Ironic\nfloating ip is used for ironic node to access openstack services\nthrough it. It's an HA feature for ironic if 2 controllers are\ndeployed.\n\nStory: 2004760\nTask: 34740\nDepends-On: https://review.opendev.org/669781\nChange-Id: I55681abfee700dcf7036503d1490accc413b84c4\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: change lvm backups location for debian\n\nOn debian, /opt is a link to /var/rootdirs/opt, when puppet tries to\nmount the logical volume backup-lv on /opt/backups during unlock\nreboot, it errors out stating it is already mounted on\n/var/rootdirs/opt/backups.\n\nTest Plan:\n\nCentOS/Debian\nPass: Run ansible\nPass: Controller unlocked/enabled/available\n\nStory: 2009965\nTask: 45415\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I2e316da71cf940e644d2d308c9947d6f7c48a493\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart sysinv API after k8s root CA update\n\nDuring k8s root CA certificate update, the certificates in admin.conf\nhave been updated. Since both sysinv conductor and api cache k8s client\nthat get credentials from admin.conf, both of they need to restart.\n(currently only conductor is restarted)\n\nCloses-Bug: 1943080\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ic92d6e95980b088108b175d0cafa905fda2ffb09\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add docker proxy configuration for kubernetes\n\nCurrent config_controller for containerization pulls kubernetes\nimages from public container registry. This requires controller\nto access internet. If a host network is behind a proxy, there\nis no chance to setup docker proxy configuration during config_\ncontroller, therefore, kubernetes images are not accessible.\n\nDocker proxy configuration questions were added to require users\ninput http/https proxy and no proxy settings. The docker proxy\nconfigurations are added to service_parameter table in sysinv.\n\nhttp-proxy.conf is the proxy info file required by docker daemon,\ngenerated by docker puppet manifest. It consists of the user\ninput docker proxy configuration.\n\nTests:\nAIO-SX: public k8s images accessible\nAIO-DX: public k8s images accessible\nAIO-SX without k8s config: config_controller successfully\n\nStory: 2004710\nTask: 28741\n\nChange-Id: I9d301d105f9fe5e388a29dee03957514b9b44fa7\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add timeout for get_endpoint_certificate\n\nThis commit works around the lack of a proper timeout in the\nssl.get_server_certificate() call. A proper timeout is available in\npython 3.8+ (see https://bugs.python.org/issue31870).\n\nWe work around the lack of timeout by first attempting a basic socket\nconnection to the (host, port) with a short timeout (default: 10s). If\nthat is successful we can continue to fetch the server certificate;\notherwise we abandon the attempt.\n\nTest Plan / Failure Path:\n\nPASS: Verify proper timeout when subcloud is offline/shutdown\nPASS: Verify proper behaviour when subcloud is available\n\nRegression:\nPASS: Verify feature logging\n\nStory: 2008960\nTask: 43545\n\nChange-Id: If0f7c926e136fc776dbc74ed27b767af1af2cf80\nSigned-off-by: Kyle MacLeod <kyle.macleod@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move subcloud audit to separate process\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove sha1 based kex algorithms\n\nThis patch hardened server configuration including removing sha1 based\nkex algorithms from the manifest template that puppet uses to generate\nthe configuration file sshd_config.\n\nIt also removed hardcoded sshd_config and ssh_config from repo, replaced\nthem with patches to openssh that harden both server and client\nconfiguration.\nThis is particularly to address the requirements that the system should\nbe hardened from the very first boot up (before it is configured by\nmanifest apply)\n\nIt also removed old obsolete patch files in openssh directory to avoid\nconfusions.\n\nChange-Id: Ic34bebfd88f46cade3596d920a00311f9aa5980f\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker Registry Can't Deploy On Workers\n\nThe flag marking the registry as \"insecure\" is missing on the computes.\nThis creates certificate issues and fails deployments on computes when\nusing images from the local Docker registry. This commit adds the\n\"insecure\" flag to mark the registry as insecure on the compute nodes.\nThis will go away once proper authentication is implemented for\nDocker registry.\n\nStory: 2004520\nTask: 28312\n\nChange-Id: Ib8d9fad435eda85e1eaebc5fd71b0ff3d60f3dd8\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Pull Armada image in the same step as Tiller\n\nUpdate helm puppet manifest to pull Armada image in the same\nstep as Tiller so it is available before running system\napplication commands. Ensure that Armada-Tiller compatibility test\nis conducted if and when Tiller is upversioned.\n\nTests conducted:\n  - fresh install + config controller (AIOSX)\n  - verify armada image is in local docker repo\n  - verify much more speedy application upload (initial upload)\n\nChange-Id: Ibae3043f52ded8f038066746e0b77edf9ace0388\nStory: 2003908\nTask: 26792\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Sysinv healthy query API request failed\n\nThe healthy query API request triggers sysinv to query the alarm list.\nThe alarm query is attempted via a sysinv database API which is no\nlonger supported. This results in the REST API request failure.\n\nThis update contains the following changes to address the issue:\n1.Add FM catalog info to sysinv puppet class and manifest\n2.Add service catalog to the user request context\n3.Add a FM client interface to communicate with FM API\n4.Update the health query to retrieve the alarm list via FM client\n\nCloses-Bug: # 1789983\n\nChange-Id: I31b256f6de22fe70cba59b08bf927c8b0ac119ee\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch 'starlingx/master' into HEAD\n\nChange-Id: I7041af39932e8552bd8851f09d58c0642cad5fe9\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mask password in puppet\n\nThe puppet logs contained sysadmin password in cleartext.\nThis replaces them with xxxxx at the end of puppet manifest\nexecution.\n\nPartial-Bug: 1896116\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: Ia121c87484964d8e60d2fc5c9a69c335665bc789\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Debian: fix puppet warnings unacceptable location network.pp\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove obsolete puppet-ovs_dpdk\n\nIntegration of Open vSwitch into the configuration framework\nno longer requires the temporary puppet-ovs_dpdk package and\ncan be removed.\n\nChange-Id: I86206e71818ef71cee185df5064694652d53d17c\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Boost sm process priority in VBox environment\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update clients to access secure openldap only\n\nThis change updated openldap client configurations (ldap.conf\nand ldapscripts.conf) so that the clients access to openldap\nservice only by secure port.\n\nThis change also updated ldap puppet module so bootstrap succeeds\nwith the above changes.\n\nTest Plan for Debian:\nPASS: System deployment.\nPASS: Disable openldap insecure service (by modifying /etc/init.d/\n      openldap and restart open-ldap sm service), then test clients\n      access to openldap by:\n      - ldapsearch -x -b 'ou=people,dc=cgcs,dc=local' '(objectclass=*)'\n      - ldapfinger admin\n      - ldapadduser <username> users\n\nStory: 2009834\nTask: 46240\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I204a30fb98e5c93ad871384b066bc87168890203\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust the min_free_kbytes setting way for storage\n\nWe already have the approach to set the sysvar vm_min_free_kbytes value,\nreserving 128MB for every 25GB of system memeory, with also a minimum\namount specified that we won't go below.\nBut we have a customer with a 64GB storage node and their tuning\nexperimentation shows that they need 1GB reserved in order to avoid OOM.\nWe increase the value for storage node and adjust the method to reserve\n256MB for every 16GB of system memory, It tries to keep just\napproximately 1.5% of memory reserved. So this should get the customer\nset at 1GB if they have 64G of total RAM.\n\nTestPlan:\nPass: build-pkgs\nPass: build-iso\nPass: jenkins installation\nConsidering it's difficult to find a storage node to verify if the value\nof min_free_kbytes is expected, I move the same puppet syntax change for\nstorage in sysctl.pp to the controller area, then check the value of\ncontroller node as follows:\n\ncontroller-0:~$ free -g\n              total   used   free   shared   buff/cache   available\nMem:            125     84     35        0            4          35\nSwap:             0      0      0\ncontroller-0:~$ cat /proc/sys/vm/min_free_kbytes\n1835008\n\nWe get the min_free_kbytes value as expected.\n\nCloses-Bug: 1940855\n\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\nSigned-off-by: Zhixiong Chi <zhixiong.chi@windriver.com>\nChange-Id: Ieaa6ea93537ed066c8b764d4b6e5e1ff3965f310\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix path to etcd config file on puppet\n\nPath on CentOS is /etc/etcd/etcd.conf\nbut on Debian it should look for /etc/default/etcd\n\nTest Plan:\nPASS: debian - etcd service running after unlock\nPASS: centos - etcd service running after unlock\n\nStory: 2009965\nTask: 45011\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: Id43fa0bb1a958fc9b6774ca50f3f71e5bef974ed\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Update scratch mount location\n\nThis work should affect only Debian. This is fixes a bootstrap issue.\n\nOstree doesn't allow changes to root mountpoint / at runtime.\nInstead /scratch is a symlink to /var/rootdirs/scratch. Kickstarts\ncorrectly uses /var/rootdirs/scratch. The symlink is automatically\ngenerated.\n\nUpdate puppet code to use /var/rootdirs/scratch.\n\nTests on AIO-SX:\nPASS: build-pkgs, build-image, install\n\nPASS(without ostree unlock): bootstrap goes past the issue\n  due to other issue could not reach and test unlock\nPASS(with ostree unlock): bootstrap & unlock\n  with this change /scratch is still a symlink to /var...., meaning\n  there is nothing in the unlock that tries to overwrite it, making\n  this change safe\n\nSKIP CentOS test because the gate construct is syntax tested here,\nand logic tested in other commits, making just a refactor on CentOS.\n\nStory: 2009964\nTask: 45535\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Id78dfaaa543540bfc2a79eb052dd392fd44b16f1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Store BMC password in Openstack Barbican instead of keyring.\n\nReplacing existing mechanism of storing BMC passwords in SysInv.\nImplementing access to Barbican API in SysInv and using it to write\nthe passwords into a Barbican secrets. Note that a Barbican cannot\nchange the existing password inside its secret, so we need to remove\nthe old secret and create a new one in case of password update.\nAnother thing to mention: SysInv has to create Barbican secrets in\ncontext of \"services\" project in order MTCE can read them later.\n\nChange-Id: I7102a9662f3757c062ab310737f4ba08379d0100\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support sync of services and sysinv id for subcloud\n\nUpdate keystone and sysinv bootstrap manifests to update services\nproject and sysinv user id and associated assignments in keystone\ndatabase on subclouds to match system controller.  This prevents\nsubcloud sysinv keystone tokens from being invalidated during initial\nsubcloud sync causing long delays in subcloud going in sync with system\ncontroller.\n\nChange-Id: I4e0a8efea7d197d6963623f05fc865f47d02f033\nPartial-Bug: 1877419\nPartial-Bug: 1877584\nDepends-On: https://review.opendev.org/#/c/730613\nSigned-off-by: Gerry Kopec <Gerry.Kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet config path location for Debian\n\nDebian kubelet config path is '/etc/default/kubelet'.\n\nTesting:\nAIO-SX\n\nPASS: controller-0 is unlocked and enabled (Debian)\nPASS: controller-0 is unlocked and enabled (Centos)\n\nStory: 2009101\nTask: 44724\nSigned-off-by: Lucas Cavalcante <lucasmedeiros.cavalcante@windriver.com>\nChange-Id: Iaa6e57af4e2fb68fd3fa423d3830a6c4add525e8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian packaging for puppet-nfv\n\nAdd debian packing infrastructure for puppet-nfv\n\nStory: 2009101\nTask: 43307\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: Ic6e940500389b6260944f39326aaf766c61caee8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Bind /var/lib/systemd/coredump/ to /var/log/coredump/\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Removed the platform::etcd::upgrade::runtime class in the puppet\nmanifests git repo. Call to this class no longer exists in sysinv.\n\nTest Plan:\nPASS : Deployed 22.06 Centos release as AIO-DX.\n       Completed the platform upgrade from 22.06 to 22.12 using\n       the ISO generated with the change\n\nStory: 2010445\nTask: 46928\n\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\nChange-Id: I492712aba084f21360b73992974f4c8a5811dd65\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unneeded value\n\nRemoving unneeded dc_keystone value from puppet. This was causing\na failure during upgrade. Cleaning up since it is not required\nfor cert-alarm service.\n\nStory: 2008946\nTask: 42852\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: I93b9c928416ab12049784c860aeddf0eaec572d7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unused puppet modules\n\n* Remove the nova api proxy puppet module.\n* Remove openstack::swift puppet manifest.\n* Refactor openstack::nova::storage as platform::worker::storage.\n  This requires the nova puppet code in sysinv to write to a\n  different hiera target, and creation of /var/lib/nova.\n* Remove puppet modules from spec file for modules that are no\n  longer being used.\n\nStory: 2004764\nTask: 29840\nChange-Id: Ifa0171b06e23fd77d373983d644df3f56ae4e2de\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet-manifests for kubernetes 1.12\n\nThe kubeadm.yaml format has been updated for the new settings.\nkubernetes 1.12 uses coredns rather than kube-dns.\n\nThe service file is simplified and the conf file now\nspecified the kubelet extra args like this:\n\nnodeRegistrationOptions:\n  kubeletExtraArgs:\n    cgroup-driver: \"cgroupfs\"\n    node-status-update-frequency: \"4s\"\n    fail-swap-on: false\n\nStory: 2002843\nTask: 26751\nChange-Id: I1e25e17ce865960950e98e5033ccf1e43b3a8611\nDepends-On: Ib5602a4a57c0e8998430b0774375853cdd2bca01\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add debian package for puppet-dcmanager\n\nAdd packaging infrastructure for puppet-dcmanager\nto build a debian package.\n\nStory: 2009101\nTask: 43316\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I49ff3321ec1675800c0309c738fe0bb3f068cfaa\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Keystone DB sync - add service puppet module\n\nThis update adds the puppet package for keystone DB synchronization\nservice. This puppet package will be used by controller puppet manifest\nto deploy and configure the synchronization service.\n\nStory: 2002842\nTask: 22787\n\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n(cherry picked from commit 51b20e03eaf13407cd30ab0f4066368cbfe8d568)\n\nConflicts:\n\tcentos_pkg_dirs\n\nDepends-On: https://review.opendev.org/#/c/655727\nChange-Id: I7059800daa053eaf975ad7f02200247d77653926\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet.service to be monitored by pmond\n\nUse puppet manifest to setup the following:\n1. create kubelet service override to turn off systemd\n   auto restart\n2. create kubelet pmon conf file to setup pmond\n   to monitor kubelet\n\nStory: 2002843\nTask:  29255\n\nDepends-On I41206c7ea14d79b5d0cbca945e7a6488eda9b7bb\nChange-Id: I94659dd26b664c643270baa2c013f0910a07bf12\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet to config openldap insecure service\n\nThis change updated ldap.pp to support disable/enable local\nopenldap insecure service running on port 389. This is done by a new\nservice parameter called insecure_service under local-openldap\nsection, with valid values \"enabled\" and \"disabled\".\n\nTest Plan:\nPASS: Disable openldap insecure service\n  - Run \"system service-parameter-add identity local-openldap\n    insecure_service=Disabled\" to set the parameter to \"Disabled\"\n  - Run \"system service-parameter-apply identity --section\n    local-openldap\" to apply the parameter.\n  - Run \"ps -ef | grep slapd\", verify slapd is running as:\n    /usr/sbin/slapd -h ldaps:/// -F /etc/ldap/schema/\n  - Run \"netstat -antp | grep slapd\", verify slapd is only listening\n    on secure port 636\n  - Run \"ldapsearch -xH ldap://controller -b \"ou=People,dc=cgcs,\n    dc=local\" -d 1\", verify that it can't contact LDAP server.\n  - Run \"ldapsearch -xH ldaps://controller -b \"ou=People,dc=cgcs,\n    dc=local\" -d 1\", verify that it return all the users.\n\nPASS: Enable openldap insecure service\n  - Run \"system service-parameter-add identity local-openldap\n    insecure_service=Enabled\" to set the parameter to \"Enabled\"\n  - Run \"system service-parameter-apply identity --section\n    local-openldap\" to apply the parameter.\n  - Run \"ps -ef | grep slapd\", verify slapd is running as:\n    /usr/sbin/slapd -h ldap:/// ldaps:/// -F /etc/ldap/schema/\n  - Run \"netstat -antp | grep slapd\", verify slapd is listening\n    on secure port 636, and insecure port 389.\n  - Run \"ldapsearch -xH ldap://controller -b \"ou=People,dc=cgcs,\n    dc=local\" -d 1\", verify that it return all the users.\n  - Run \"ldapsearch -xH ldaps://controller -b \"ou=People,dc=cgcs,\n    dc=local\" -d 1\", verify that it return all the users.\n\nStory: 2010589\nTask: 47453\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I1d64826d5f0d77c4409ed6634e9ec3094c2016c0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable CPU manager static policy for non-openstack worker nodes\n\nFor non-openstack based worker nodes the kubelet cpu-manager\nstatic policy is enabled. The default 'none' policy is retained\nfor openstack based worker nodes and non-worker nodes.\n\nThis enables the complete CPU isolation of:\n- Platform tasks (i.e., systemd tasks configured with CPUAffinity)\n- kubernetes guaranteed pods (Gu)\n- kubernetes besteffort (Be) and burstable (Bu) pods\n\nRefer to following for CPU manager:\nhttps://kubernetes.io/docs/tasks/administer-cluster/cpu-management-policies.\n\nThe platform reserved CPUs and memory are queried from sysinv database\nfor each worker node. Puppet configures the following cpu-manager\noptions specifically with 'static' policy:\n--cpu-manager-policy=static\n--system-reserved-cgroup=/system.slice\n--system-reserved=cpu=<k8s_reserved_cpus>,memory=<k8s_reserved_mem>Mi\n\nThe Allocatable pool of resources is based on the total node capacity\nand subtracting overheads including '--system-reserved' and\n'--kube-reserved'. Specifying kube-reserved is not necessary.\n\nChange-Id: I235c05b82d50bd9e3a8d36b0b076d8374dfb6055\nStory: 2005192\nTask: 29952\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move kubernetes pod network to avoid conflict\n\nMoving the pod network to 172.16.0.0/16. The default subnet is\n192.168.0.0/16, which conflicts with the default management\nnetwork subnet and causes problems for networking between pods\non different hosts.\n\nStory: 2002843\nTask: 22789\n\nChange-Id: I2cedfc86af52999e8755304099e19e66e3b94428\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Workaround for console session timeout terminating user processes\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable PTP synchronization on management network for AIO\n\nInitial design of PTP support in StarlingX required PTP GM\nto be present inside OAM network. As we getting more inquires\nabout possibility to deploy PTP GM inside MGMT network only\nwe are going to enable this possibility. Change required for\nAIO systems only, since standard config do PTP sync over both.\n\nChange-Id: I1873766f66d3c6f871239d3f498ac67c240e664b\nStory: 2006759\nTask: 37292\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for Debian network interface configuration\n\nSince CentOS's sysconfig and Debian's ifupdown have incompatible\nconfiguration file formats, this change separates the interface\nprocessing for each format on individual files, with the common code\nstill part of the main script.\n\nFor Debian the implementation is completely new and for CentOS the\nspecific code was isolated on its respective file.\n\nThis change still does not support Debian static route creation, this\nwill be handled on another task. The test focus was done on physical and\nVLAN interfaces as they are the ones supported on Debian at this\nmoment.\n\nTo support VLAN interfaces with 'vlanXXX' name format it is necessary\nto add the package \"vlan (2.0.5)\" to the bullseye build\n\nTest Plan (both CentOS and Debian):\nPASS: interface configuration on boot from sysinv database\nPASS: interface removal from sysinv database\nPASS: interface modification on sysinv database\nPASS: interface VLAN modification from static to dynamic\nPASS: interface VLAN modification from dynamic to static\nPASS: base physical modification interface with VLAN interface on top\nPASS: verify that the script does not act if no modification on the\n      config exists\nPASS: static route add and deletion on CentOS from sysinv database\n\nStory: 2009101\nTask: 44646\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I1255e9e0f14929efa2bf3dc9f8f8196d515e7d35\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Workaround for console session timeout terminating user processes\n\nThe change https://review.opendev.org/c/starlingx/config-files/+/861633\ncauses an unexpected behavior of systemd, terminating user processes\nin case of session timeout after bootstrap and before unlock. As a\nworkaround, the change\nhttps://review.opendev.org/c/starlingx/config-files/+/866211\nincreases session timeout from 15min to 24h. In order to restore the\ndefault value, after unlock this change decreases back session timeout\nfrom 24h to 15min.\n\nTest Plan:\n[PASS] Install, bootstrap and unlock.\n[PASS] After unlock, verify TMOUT is set back to 900s (15min).\n\nPartial-Bug: 1999049\nDepends-on: https://review.opendev.org/c/starlingx/config-files/+/866211\n\nSigned-off-by: Davi Frossard <dbarrosf@windriver.com>\nChange-Id: I2844df0fa52408b689aa179224b3530b33641bd9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update puppet to define number of Barbican workers on Debian\"\n\nThis reverts commit cd954d5b3fe858b582e34493d841d500207288cd.\n\nDebian barbican will be run by gunicorn at bootstrap and use the same\nconfiguration file as CentOS. This will enable barbican to be managed\nby SM after controller unlock.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap, barbican-api is running with gunicorn\nPASS: controller unlock, barbican-api service state in SM is\n      enabled-active enabled-active\n\nStory: 2009101\nTask: 44715\nDepends-On: https://review.opendev.org/c/starlingx/upstream/+/832838\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I8f4b4e859c1ffd86a845c991e44183c7d7a00acd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding nvidia_vgpu drivers support\n\nOn compute nodes with openstack-compute-node=enabled label,\nthe non-open-source NVIDIA vGPU drivers should, if present,\nbe loaded for commercial scenarios where the non-open-source\ndrivers are built into the StarlingX ISO.\n\nTest plan:\nPASS: Verify that after applying the modification in a host\nWITH openstack-compute-node=enabled label tagged the installation\nscript of nvidia_vgpu drivers (if present) should be triggered\nto be executed.\nPASS: Verify that after applying the modification in a host\nWITHOUT the openstack-compute-node=enabled label tagged the\nuninstall script of nvidia_vgpu drivers (if present) should be\ntriggered to be executed.\n\nStory: 2010090\nTask: 45619\n\nSigned-off-by: Rafael Falcao <rafael.vieirafalcao@windriver.com>\nCo-Authored-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I0db65dc947a82bba44930e3a2d12edcee1ea1a47\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubelet-config custom parameters are missing after k8s upgrade\n\nThe kubernetes.pp class platform::kubernetes::upgrade_first_control_plane\nwhich does 'kubeadm upgrade apply' resulted in versioned kubelet-config\nConfigMap. The pre-upgrade ConfigMap was left behind.\n\nHaving multiple ConfigMap causes 'system kube-config-kubelet' to fail,\nso reconfiguration was broken.\n\nIn historical releases, we had specified '--config\n/etc/kubernetes/kubelet_override.yaml', so the the kubelet garbage\ncollection eviction parameters became incorrect post k8s upgrade,\nwithout a way to reconfigure.\n\nThis update will purge all kubelet-config ConfigMap except the most\nrecent. This occurs immediately following 'kubeadm upgrade apply' step.\n\nTestplan:\nPASS: AIO-SX perform k8s upgrade, run 'system kube-config-kubelet'.\n      Verify only current version kubelet-config ConfigMap exists.\n\nCloses-Bug: 2012975\nChange-Id: I5e34299616690628267c07a744dc9923144e606d\nSigned-off-by: Jim Gauld <James.Gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix puppet warnings auto conversion to int\n\nFix the following warnings:\n- String automatically coerced to numerical value\n\nPuppet is raising this warning on Debian, which makes ansible\nbootstrap to fail.\n\nTest Plan:\n\nCentOS:\nPass: Execute ansible bootstrap\nPass: Controller unlocked/enabled/available\n\nDebian:\nPass: Execute ansible bootstrap\n\nStory: 2009101\nTask: 44613\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I89a4979d0814805e3be487b6a7a42a6dca41c907\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet bucket cache dir\n\nEvery puppet apply generates some caches of files\nin /var/cache/puppet/clientbucket and the script is\ncleaning another directory\n/var/lib/puppet/clientbucket. This updates the cache path.\n\nThe vardir setting in puppet.conf is removed in\nhttps://review.opendev.org/c/starlingx/integ/+/830542\nthis configuration sets the cache dir\nWithout that, the puppet stores the cache under\n/var/cache/puppet/clientbucket.\n\nTest Plan:\nPASS: Ensure the cache directory is removed\n      after the puppet apply (AIO-SX)\n\nCloses-Bug: 2034932\nChange-Id: If564d00bc09030d0543669a11a646fcf502bf65b\nSigned-off-by: Lucas Borges <lucas.borges@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet: enforce OVS init/config order\n\nDuring debugging of a separate, unrelated issue, it was found that\nthere were instances of ports being added to OVS bridges after\nthe dpdk-init config option was passed to OVS.\n\nAlthough there doesn't seem to be an actual execution error here,\nit seems proper to ensure that the dpdk-init happens before DPDK\nenabled ports are added.\n\nChange-Id: Ib42d1404682fcbd1e98841e15302f1b86c98fcc4\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix ssl_ca certificate install for Debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Refactor ldaps enabling for OpenLDAP\n\nOpenLDAP does not need using ldaps protocol for secure OpenLDAP\nunless the OpenLDAP certificate gets created.\nThis commit enables ldaps only when the OpenLDAP certificate creation\ngets detected. The enablement is done using puppet configuration applied\nusing runtime manifest.\n\nTests performed:\nPASS: Check slapd daemon status after system installall without\nany openldap and it should not have ldaps enabled.\nPASS: Create openldap certificate and secret and verify it was\ncreated successfully.\nPASS: Trigger openldap installation by CertMon by removing the\nopenldap secret.\nPASS: System command \"certificate-list\" shows the openldap\ncertificate has been installed.\nPASS: Verify that ldaps has been enable and port 636 was opened after\nopenldap certificate was installed.\nPASS: Openldap certificate and key files have been added to schema\nfile \u201c/etc/openldap/schema/cn=config.ldif\u201d.\nPASS: Deletion of openldap secret triggers the creation of a new\nsecret.\nPASS: Add new OpenLDAP user\nPASS: List all OpenLDAP users\n\nStory: 2009834\nTask: 45170\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/839241\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I04187e7f841ed8412d3ef4c52bc8067874e655f6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup ceilometer from bare metal code\n\nCeilometer is being setup through helm charts in containers\nso the references to ceilometer in bare metal can be cleaned up.\n\n - Removing the sysinv puppet code for ceilometer\n - Removing the bare metal ceilometer pipeline upgrade script\n - Cleaning up unused variables from templates\n\nStory: 2004764\nTask: 33690\nChange-Id: I2efe7aed7a4570121c1376c132e157c6f47e9f29\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix resource lookup for ovs\n\nOn change ae635b5b80fcb61c429a6fc17961a9f3bf614964, the vswitch_class\nwas changed to ovs_dpdk, but the resources created by sysinv at [1]\nare at the platform::vswitch::ovs:: lookup. This mismatch is failing\nlookup and the bridges for the underlying datanetworks aren't being\ncreated when puppet runs. As a result, the neutron-ovs-agent pods are\nfailing with CrashLoopBackoff. This commit fixes it by reverting the\nresources to the correct lookup path on hiera.\n\n[1] https://opendev.org/starlingx/config/src/commit/ece13f740847f3bcc7470cc7ec8c1896dd61f014/sysinv/sysinv/sysinv/sysinv/puppet/ovs.py#L108\n\nTEST PLAN\nPASS ovs-dpdk: Clean install of the Starlingx ISO verified that the\n     br-phy* bridges were created for the underlying datanetworks\n     using ovs-vsctl on the host\nPASS ovs-dpdk: Installation of stx-openstack is successful\nPASS ovs-dpdk: Created project networks and instances\nPASS ovs: Clean install of the Starlingx ISO\nPASS ovs: Installation of stx-openstack is successful and the\n     openvswitchd and ovs-agent pods are running OK\nPASS ovs: Created project networks and instances\n\nCloses-Bug: #1958073\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I53e16df5403fa7c7f82b8e67e3e5d18a2103d599\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add support for kube-upgrade-abort\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow uploading an in-use volume to image using force option\n\nAs by default, cinder does not allow uploading an in-use volume\nto image, enable that in the cinder puppet manifest.\n\nChange-Id: I067c23ae896fa7de921e8e8bb67430aac7f9cab8\nCloses-Bug: 1795652\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet to ignore hugepages\n\nBy default, kubernetes assumes any hugepages on the host are\navailable for it to use, but it has the limitation that it can\nonly handle a single hugepage size per host.  This makes it less\nuseful for us, since we want to give vswitch 1GB pages but prefer\n2MB pages for OpenStack VMs.\n\nFor now, the workaround is to tell kubernetes to ignore hugepages.\n\nThis also fixes up kubeadm.yaml.erb to use the new format for\nkubernetes 1.12.\nChange-Id: I0917781db4f1961d433399e0a9799f3a6253ca11\nStory: 2003909\nTask:  27085\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create class to update the mgmt firewall in runtime\n\nThis change creates the new class to update the management network\nfirewall in runtime. The class is meant to be applied by\nsysinv-conductor when the route config is updated in system controller\nhosts.\n\nTest plan:\n\nSetup: Distributed Cloud with AIO-DX as system controller.\n\n[PASS] Add route in a management interface, check that the\n       corresponding network is present in the system controller's\n\t   firewall.\n[PASS] Remove previously created route, check that the corresponding\n       network is no longer present in the system controller's\n\t   firewall.\n\nStory: 2010591\nTask: 48174\nSigned-off-by: Lucas Ratusznei Fonseca <lucas.ratuszneifonseca@windriver.com>\nChange-Id: I08fa9e2807f0c734c716c28c1996588167ee9d58\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enabling Ceph MDS as part of adding Ceph at runtime\n\nA metadata server is assigned to every node that has a monitor.\n\nRestructure the metadataserver class to ensure that the metadata server:\n - is started after the Ceph monitor and the Ceph manager on controllers\n - is started after the Ceph monitor on a worker assigned a monitor\n\nIf the metadata server is started prior to the monitor, it will not\nstart properly.\n\nFuture optimization may be to create a MDS SM service on the\ncontrollers, but based on current testing, it seems unnecessary.\n\nTested:\n - Adding Ceph pre-controller-0 unlock\n   - AIO-SX, AIO-DX, Standard 2+2, Storage 2+2+2\n - Adding Ceph at runtime after installed nodes are fully provisioned.\n   - AIO-SX, AIO-DX, Standard 2+2\n - For all the above configs also added storage tiers and confirmed\n   proper functionality\n - NOTE: No Ceph runtime option for labs with storage node\n   configuration.\n\nChange-Id: I27b53b55738d0aec70db6a9e4004c920029869fa\nCloses-Bug: #1919276\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add method for creating LVs using backed up size\n\nDuring optimized restore the LVs were being created with default\nvalues, e.g. docker-lv 20G.  However, when the system was backed up\ndocker-lv would have been >30G.\n\nOn certain systems this results in a failure when the LV\nis resized after unlock, which appears to be HW specific.\nOn a system with more than 20G of images a failure is\nguaranteed without this change.\n\nThis change now has the LVs use a value from hierdata if available\ndefaulting back to original values.\n\nTEST PLAN\nPASS: Install and bootstrap is successful (AIO-SX, AIO-DX)\nPASS: Legacy restore in successful (AIO-SX)\nPASS: Optimized restore in successful (AIO-SX)\nPASS: Upgrade from 22.06 (AIO-SX)\n\nCloses-Bug: 1999535\nSigned-off-by: Joshua Kraitberg <joshua.kraitberg@windriver.com>\nChange-Id: Ib41d2728b2945013ccf629d6f36dc4a425261d6f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use valid client option for DHCPv6\n\nThe option dhcp6.domain-name-servers do not exist on dhclient.conf\nrules. The correct parameter is dhcp6.name-servers.\n\nThe resulting error messages were leading to an invalid diagnosis\nfor the associated launchpad\n\nRelated-bug: 1934676\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I8562ccbd1e1a8368726fc40fce6b644342adf95f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Permission change of /etc/apparmor.d directory\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Support for ceph.conf cleanup during upgrade activation\n\nDuring an upgrade, we specifically set msgr v1 addressing for any new\nNautilus monitors while we still have a mixed Mimic/Nautilus cluster.\n\nAfter all monitors are running Nautilus, we enable msgr v2 and all\nmonitors start to use that protocol for communication.\n\nFinally we now clean up the ceph.conf configuration and restart the\nmonitors during the upgrade activation step.\n\nIntroduce platform::ceph::upgrade::runtime class to align ceph.conf with\nwhat a fresh installation would produce and restart the ceph monitor.\n\nDuring upgrade of AIO-SX, the B&R will restore the old ceph config file.\nThe old config file misses instructions to clear ceph alarms and it\nwill also have a mon_addr which is unused starting from Nautilus release.\nChanges are made to ceph.conf specifically to AIO-SX to fix the alarms\nand clean mon_addr.\n\nTesting performed:\n- Upgrade of 2+2+2\n- Upgrade of AIO-DX\n- Upgrade of AIO-SX\n- Fresh install of AIO-SX\n- Fresh install of AIO-DX\n- Fresh install of 2+2\n\nStory: 2009074\nTask: 43969\n\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\nChange-Id: I5b112b1ec460b4af49722b890ba1d2b4c784f39f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove puppet SM calls for obsoleted services\n\nThe SM database had several services removed.\nThis change removes the calls to disable and deprovision those\nservices that no longer exist.\n\nStory: 2004764\nTask: 30247\nChange-Id: I8834803b5ebbd5f41af9af7fab3f225da4cecb99\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Don't fail if pods restart timeout during root CA update\n\nDuring k8s root CA update, deployments, daemonsets and statefulsets\nare rollout restarted in order for the pods deployed by them to take\nthe new root CA certificate. It is observed that some statefulsets\nmay take longer than the time limit (10 minutes) to complete the\nrollout restart, causing puppet manifests apply timeout and fail\nthe update.\n\nThis change updated the puppet restart code so that it check the\nrollout restart status periodically for a limited time (8 mins),\ngenerate a \"ATTENTION\" log in puppet.log for any of the deloyments,\ndaemonsets or statefulsets that don't complete restart in the time\nlimit. After the time limit, the puppet apply returns successfully\nso that the root CA update continues.\n\nThis solution is a balance between \"let the root CA update continue\nand finish\" and \"minimize service impact by restarting applications\"\n\nTest Plan:\nPASS: Successful root CA update with all sets complete restart in\n      allocated timeout.\nPASS: Successful root CA update with some sets don't complete restart\n      in allocated timeout. Logs generated in puppet.log.\n\nCloses-Bug: 1954303\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ie2589701a9ba234928e06d659e58db5412486303\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add customer-specified certificates for kubernetes\n\nWe need the ability to update the Kubernetes ApiServer RootCA at\nansible-bootstrap-time. This includes the ability of being able to\nspecify the apiServerCertSANs such that user can specify additional\nDNS:<FQDN> and/or IP Records for the auto-generated\napiServerCertificate.\n\nThis adds support for storing the apiServerCertSANs in the sysinv\ndatabase and modifies the puppet manifest to support user supplied SAN\nrecords.\n\nPartial-Bug: 1837079\nChange-Id: I4d23828b31ced55d55b1c6932d0cfd6b59727288\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet module tox.ini files for puppet-lint\n\nWhen running \"tox -e puppetlint\" manually, the tox.ini will\ninstall puppet-lint via gem, but does not automatically install\nthe json module upon which puppet-lint depends.\n\nThis commit adds json to the gem install command.\n\nChange-Id: Ib8b6133395bf76748a8bcac0cb7bd718a89d6d5a\nStory: 2004515\nTask: 28704\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a puppet rehome manifest\n\nThis commit adds a subcloud_rehome manifest, this manifest is to\nre-configure the keystone authentication passwords of related services\nand reload these services.\n\nTested with apply this manifest after the keystone authentication\npasswords migrated in secure static hiera data. The passwords in\nservices' configuration files are modified and the related services\nare reloaded after the apply.\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/795111\nStory: 2008774\nTask: 42581\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: I93902da0939f5b6857e58f9fd6ada6a9d5c1a3ab\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ntpd losing sync after some days\n\nThe default ntpd configuration enables network interfaces scanning and\nthis is causing ntpd to lose sync after about 2 days and 9 to 10 hours.\n\nThis fix disables ntpd interface scanning by adding the -U 0 option.\n\nNote: this was detected on CentOS and both CentOS and Debian will have\nadd the same option to maintain consistency.\n\nTest Plan:\nPASSED: Debian: check that ntpd -U 0 configuration is applied\nPASSED: Debian: wait for more than 5 days and check that ntp sync is still working\n\nCloses-Bug: 2017697\n\nChange-Id: I1c2727b71d71bf03966c834c470bd225e2a95c81\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change group ownership to \"sys_protected\"\n\nThis commit changes the group ownership from \"root\" to 'sys_protected'\nfor selective stx platform files and directories to support access\nprivileges for OpenLDAP/WAD users.\nThis commit only addresses the puppet configuration for changing\nthe group ownership.\nAdditional commits in other repos will complete the security\nconfiguration for access privileges for ldap users.\n\nTest Plan:\nPASS: Verify iso is installed without errors.\nPASS: Verify the group ownereship change was applied correctly\nfor file \"/etc/platform/openrc\" so is part of the \"sys_protected\"\ngroup.\nPASS: Verify that an openldap user that is part of the \"sys_protected\"\ngroup can execute command: \"source /etc/platform/openrc\".\n\nStory: 2010589\nTask: 47812\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I7b63801fd6447c53af4d213e02b4ed482d9e04f7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add bmc access method as service parameter\n\nThis update modifies mtce puppet inservice manifest\nto add and update mtc.ini with a new bmc_access_method\nconfig option.\n\nTest Plan:\n\nPASS: Verify service parameter change and handling.\nPASS: Verify puppet Tox tests pass\n\nChange-Id: Idcb86d1324bed8d428415c049fbc9c6df0dca650\nStory: 2005861\nTask: 36668\nDepends-on: https://review.opendev.org/#/c/682736/\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Open vSwitch integration with host and configuration framework\n\nIntegrates the latest Open vSwitch with DPDK into the host management\nand configuration framework and configures the default system\nvswitch type to be ovs-dpdk.\n\nChange-Id: If7ef2975e4b90ce84d170051f332f778a867a873\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Revert Patch of puppet-manifest-apply.sh\"\n\nThis reverts commit a1784deca9d30848f05d2ca53e66cf832d54b0da.\n\nReason for revert:\nThe white list created to ignore only for VM, however,\nthe ignored warning was also seen in real server.\nThis needs to be more extensively tested in different\ntypes of server.\n\nStory: 2010757\nTask: 48644\n\nChange-Id: I979b4269d0e8f68b5ea0c8471b14e666a437730d\nSigned-off-by: Lucas Borges <lucas.borges@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update barbican to listen on mgmt floating IP address\n\nOn Debian barbican is set to run by uWSGI by default so its puppet\nmodule doesn't update gunicorn-config.py. But stx is running\nbarbican by gunicorn.\n\nThis change updated barbican puppet manifests so it will update the\nlistening IP address in gunicorn-config.py for barbican service.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap, barbican-api is running with gunicorn\nPASS: controller unlock, barbican-api service state in SM is\n      enabled-active enabled-active\nPASS: \"openstack secret list\" works properly\n\nStory: 2009101\nTask: 44726\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: If725b3249c36938c16caa7d1e45657875e60ba44\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rework upgrade/split etcd CA\n\nWith https://review.opendev.org/c/starlingx/stx-puppet/+/821473 the\norder changed to restart etcd with the new certs before updating the\nkube-apiserver to use the new certs. Unfortunately updating the\nkube-apiserver requires calls to kubectl. These calls fail as soon the\netcd server starts using the new certs. This change worked on SX\nupgrades as the apiserver was already configured to point to\n/etc/etcd/ca.crt during the upgrade playbook.\n\nUpgrading the etcd ca should work something like this:\nCopy current (kubernetes) ca /etc/etcd/ca.crt\nPoint kube-apiserver to /etc/etcd/ca.crt\nRestart kube-apiserver\nUpdate the etcd certs\nRestart the etcd server\nRestart the kube-apiserver\n\nIn the short term, however we will just go back to the original behavior\nof updating the kube-apiserver to point to /etc/etcd/ca.crt at which\npoint the apiserver will remain offline until the etcd server is\nrestarted with the new certs.\n\nCloses-Bug: 1954488\nChange-Id: I7347467ac806dc523f33073e875edcba0f213005\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix keystone fails to start during unlock for Debian\n\nOn Debian puppet manifests is expecting keystone's service name\nto be \"keystone\" instead of \"openstack-keystone\". This change\nfixed the issue in relevant puppet files.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap, keystone is running by systemd\nPASS: controller unlock, keystone is running by SM\nPASS: \"openstack endpoint list\" return correct list\n\nTest Plan for CentOS:\nPASS: system bootstrap, keystone is running by systemd\nPASS: controller unlock, keystone is running by SM\nPASS: \"openstack endpoint list\" return correct list\n\nStory: 2009101\nTask: 44783\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I1411ae7d81815b6de42048c648ee8824ac6dc709\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add code that erases routes file prior to its content generation.\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Config platform service admin endpoints to https for DC\n\nWith this update https is enabled for platform services' admin endpoints\nfor System Controller and subclouds when the first controller is\nunlocked.\n\nThe services with admin endpoints enabled are:\n- fm\n- patching\n- vim\n- smapi\n- barbican\n- keystone\n- sysinv\n- dcdbsync\n- dcmanager\n\nChange-Id: I45b3c541cdb6191dad6d3e2b3e9cf8a3398b3a1b\nStory: 2007347\nTask: 38891\nDepends-On: https://review.opendev.org/#/c/720224/\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove comments in keystone::upgrade class\n\nThe TODO comments in keystone::upgrade class no longer applies.\nThis update removed them.\n\nChange-Id: Id9f7b39c15db1f73428d4f23d93ef3e3b4ad50f5\nPartial-Bug: 1886064\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing pci-irq-affinity from platform pp files\n\nThis code is being removed as part of an effort to move the\npci-irq-affinity agent into a openstack application container, instead\nof a platform service.\n\nTEST PLAN:\nPASS: Successfully build a platform ISO\nPASS: Install the built ISO on an AIO-SX system\nPASS: Verify that the pci-irq-affinity-agent.service is NOT activated\nafter system startup\nPASS: Verify that there are no active alarms\n\nStory: 2009299\nTask: 43653\nDepends-On: https://review.opendev.org/c/starlingx/config/+/814216\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: Icf3cabe76e6b4849bf630cce09345f4c4245f84d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add configuration for containerized keystone to VIM\n\nAdding configuration to the VIM for containerized keystone. The\nVIM will now support two keystone instances:\n- platform: bare metal keystone used to authenticate with\n  platform services (e.g. sysinv, patching)\n- openstack: containerized keystone used to authenticate with\n  openstack services (e.g. nova, neutron, cinder)\n\nFor now, the same configuration will be used for both, as we\nstill only deploy with the baremetal keystone.\n\nStory: 2002876\nTask: 26872\n\nChange-Id: If4bd46a4c14cc65978774001cb2887e5d3e3607b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Single puppet for AIO controllers\"",
        "issue_summary": ""
    },
    {
        "commit_message": "B&R: Remove a dependency already defined in another part of the code\n\nThis dependency does not allow us to configure ceph's DRBD at\nruntime. The dependency between ceph-mon DRBD and ceph class is\nalready defined in ::platform::ceph::monitor.\n\nChange-Id: Iabc1237410770eb12324519cfab3e6febf381e6a\nStory: 2004761\nTask: 36594\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update postgres config for Debian\n\nThe checkpoint_segments config parameter was deprecated in Postgres9.5.\nIt has been replaced by min_wal_size and max_wal_size. This commit\nupdates postgres puppet manifest to reflect the change to enable initial\nunlock for system controller as well as standard system in Debian.\n\nTest Plan:\n  - Verify successful bring up of the system controller in CentOS.\n  - Verify successful unlock of controller-0 of the system controller\n    in Debian.\n    Note: at this point, support of duplex system in Debian is not\n          available.\n\nCloses-Bug: 1983598\nChange-Id: Ie277728372393fff259c131227e3cf9f2a7fe42a\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reconfigure VIM after application install\n\nWhen an application is successfully installed with armada,\nreconfigure the VIM so that it can manage the newly\ninstalled application (if necessary). This is done by\ndoing a runtime application of the VIM's puppet\nmanifest.\n\nChange-Id: Id43f633d0571fa328410fcf8392a172abadf0e4f\nStory: 2003910\nTask: 27852\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Kubelet clusterDNS parameter updating\n\nIf the Kubelet clusterDNS parameter is not defined at bootstrap,\nduring service-parameter-apply, the parameter is reset to its\nIPv4 default value (10.96.0.10).\n\nTest Plan:\n  PASS: Bootstrap a Debian AIO-SX with IPv4.\n  PASS: Run service-parameter-apply command.\n  PASS: Verify that clusterDNS parameter has not change.\n  PASS: Bootstrap a Debian AIO-SX with IPv6.\n  PASS: Run service-parameter-apply command.\n  PASS: Verify that clusterDNS parameter has not change.\n  PASS: Add, apply and verify invalid parameter test case.\n  PASS: Add, apply and verify invalid value test case.\n  PASS: Add, apply and verify casting error test case.\n\nCloses-Bug: 2015119\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Ic15eb49d0deff05e72620e55b35b4c6b7c17c616\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable upstream Cinder volume backup/restore capabilities\n\nTo workaround an upstream bug in rbd code, we need to create an\nempty file /etc/ceph/ceph.client.None.keyring in order to do cinder\nbackup and restore. This file is created in cinder manifest when\nceph backend is enabled.\n\nStory: 2003115\nTask: 26797\n\nChange-Id: I43388d5e1be2e37e32e88cce718034dbf58f53fc\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Fix typo in python3-fmclient\n\nClient package fmclient should be python3-fmclient and not\npython-fmclient.\n\nStory: 2009101\nTask: 43311\n\nSigned-off-by: Chuck Short <charles.short@windriver.com>\nChange-Id: I7ed39adf9ac0342bcae1e6fa3517eac337a5640a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rotate k8s certificate automatically\n\nBy default, k8s cluster certificates generated by kubeadm have 1\nyear expiration. After certificates expired, k8s will not rotate\nthem automatically.\n\nThis commit checks the cert expiration date every day and rotates\nthem automatically if they expires within 90 days. After cert\nrenewed, all the k8s master component configurations will be updated.\n\nAn alarm will be sent to fm to notify the administrator to\nreboot the controllers or renew the certs manually if the automatic\nprocess fails.\n\nChange-Id: I383120b8904857bcf09ad6ca999900ce8eda9b95\nCloses-Bug: 1838659\nDepends-On: https://review.opendev.org/#/c/696224/\nDepends-On: https://review.opendev.org/#/c/698624/\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Update the kubernetes bind mounts based on the desired versions\"\n\nThis reverts commit 8218da9391fc7b02b75d554f192e62d9a2018c35.\n\nThe commit being reverted assumes that the /usr/local/kubernetes directory\nand its subdirectories exist, but that won't be the case until Jim Gauld's\nKubernetes repackaging commit is merged.  So revert this for now.\n\nStory: 2008972\nTask: 42880\nChange-Id: I4665a42d9b9743f677aa4f7784a8b10060f49f2e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv-conductor and sysinv-agent audit intervals into sysinv.conf\n\nCurrently, the periodic interval is defined by a configuration variable\ncalled 'audit_interval'. This integer variable is used for all periodic\ntasks and its default value is set to 60 seconds.\n\nThe purpose of the whole story is to split this periodic interval into\nsingular intervals so that each periodic task has its own appropriate\nunique time interval. Therefore, each periodic task will only be\nexecuted at the time when it actually needs to run (further\nimplementation already scheduled).\n\nThis commit adds (via puppet) all the necessary periodic task interval\nvariables into /etc/sysinv/sysinv.conf.\n\nNote: this change is related to the task 45616.\n\nTEST PLAN:\nPASS: AIO-SX: manually replaced these files into a Debian installation\nand no crashes happened.\nPASS: rebuild the whole system with the modification with no crashes.\nPASS: AIO-SX: verify if the sysinv conductor and agent audits (periodic\ntasks) are being called.\nPASS: follow the sysinv logs seeking for errors. No error was found.\nPASS: changed the periodicity of some audits (just for test purposes)\nand the periodicity was followed.\n\nStory: 2010087\nTask: 45711\n\nSigned-off-by: Bruno Costa <bruno.costa@windriver.com>\nChange-Id: I4e45698af6d175e5581a07ac7cbf90039efc7cc7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set starlingx-realtime profile for lowlatency workers\n\nStory: 2009886\nTask: 45505\n\nTest plan:\n    Boot lowlatency worker and check if profile was set to\n    starlingx-realtime with tuned-adm active command.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I564c5b6e336b26380aac1949079d477a393d8294\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Do not abort the network script if the loopback is unconfigured.\n\nThis protection was added on change:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/752081\n\nBut it is deemed unnecessary as it is possible to set the loopback to\nclass none. On bootstrap, the loopback is set to the class platform\nand received by the mgmt cluster-host networks. This initial setup\ncan then be modified, in duplex installations, by moving the networks\nto physical interfaces and leaving the loopback as class none (but\nthe operator can leave it as class=platform).\n\nWith the loopback class set to none, the puppet-network module will\nnot generate the file /var/run/network-scripts.puppet/ifcfg-lo, which\nwill result in the AIO manifest applying error.\n\nThere are already several validations on unlock to prevent invalid\nconfigurations (e.g., one cannot unlock if the mgmt network is not\nanchored on a platform interface). To add this validation to this\ninternal script is just preventing the execution without actually\nprotecting the system.\n\nOn the tests below the management and cluster-host network were moved\nto the physical interfaces.\n\nTest Plan:\nPASS  Set interface loopback to class none and unlock\n\nNo side effects were detected.\n\nCloses-bug: 1973614\n\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I17f4070667e2dabca2cedc059cb0609cee444092\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create k8s-coredump token for standard upgrade\n\nTasks to create k8s-coredump token using shell\nscript create-k8s-account.sh and copy created token\nto upgrade config dir (/opt/platform/config/SW_VERSION)\nto allow worker node to make a copy for itself on the\ntoken path (/etc/k8s-coredump-conf.json) through the\nworker_config script.\n\nTest Plan:\nPASS: Install and bootstrap system\nPASS: Install standard 22.06, upgrade to 22.12\n  and verify if token is created correctly on\n  all nodes.\nPASS: Install AIO-DX 22.06, upgrade to 22.12\n  and verify if token is created correctly on\n  all nodes.\n\nRegression:\n\nPASS: After bootstrap, create and crash a pod with\n      annotations configured and verify if coredump\n      is generated on pod namespace on each node.\nPASS: After bootstrap, crash a non k8s application\n      and verify that the coredump is generated as\n      previously (by systemd-coredump) on each node.\n\nDepends-On: https://review.opendev.org/c/starlingx/utilities/+/864115\nDepends-On: https://review.opendev.org/c/starlingx/config/+/864114\nCloses-bug: 1996054\nChange-Id: Ia5b00963302dd67d763cf86af694bf6c7a2e4bd1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix \"loss of redundancy\" alarm in SX subcloud\n\nService group distributed-cloud-services loss of redundancy alarm\nis raised in AIO-SX subclouds. This is due to the redundancy model\nexpects 1 standby member but no standby members available.\n\nThis update changes the distributed-cloud-service redundancy model\nto no standby member in AIO-DX subclouds\n\nChange-Id: I72eee6218b0b233f630f913c50b9554cd772e43c\nCloses-Bug:1846415\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Disable kvm-timer-advance\n\nThis feature requires libvirt, which\nis not currently included in the debian version.\n\nTest Plan - Debian:\nPASS bootstrap, unlock\nPASS no puppet mention of kvm-timer-advance\n\nTest Plan - Centos\nPASS bootstrap, unlock\nPASS logs for kvm-timer-advance unchanged\n\nStory: 2009965\nTask: 45350\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: I22c544ad450356ac6c47d8bc343eb2ca20991965\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce collectd write_threads from 5 to 1\n\nStarlingX currently uses collectd version 5.8.1\nwith 5 write threads. This version of collectd is\nseen to coredump in its network plugin 1-2 times\nout of 100 process restarts. This means that\nevery time a node is rebooted there is a 1-2 %\nchance it will coredump.\n\nThe opensource collectd version 5.12.0 includes\nthe following change which addresses a race\ncondition by implementing a mutex pthread lock\naround the sendto network call to prevent the\nrace condition and avoid the coredump.\n\nhttps://github.com/collectd/collectd/commit\n/c44c159065daf8bc7ab6c03287f281d317b1d5fd\n\nStarlingX is not yet prepared to migrate to this\nnew version. Instead and until then this update\nreduces number of write_threads to 1, as\nrecommended by the collectd update author, until\nStarlingX successfully integrates a version of\ncollectd -ge 5.12.0\n\nTest Plan:\n\nPASS: Verify no collectd coredumps in over 5000\n      process restarts across multiple servers\n\nRegression:\n\nPASS: Verify collectd logging\nPASS: Verify collectd sampling\nPASS: Verify alarming and degrade handling\n\nCloses-Bug: 1872979\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\nChange-Id: Ie9297f596d30c2754142a5237608ebb227898ecb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace cinder B&R with upstream implementation\n\nUpdate Cinder's backup path to /opt/backups\n\nChange-Id: I3d4793bb79ab088737fc253e581ec0394d994ee3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Correct ldapscripts template path in ldapscripts.conf\n\nldapscripts templates have been relocated to /etc/ldapscripts,\nbut the path to these templates still point to\n/usr/local/etc/ldapscripts. This will cause some attributes are\nnot setup properly for newly created ldap users. A symptom is\nthat when the newly created ldap user tries to login, there is\nno prompt asking the user to change its password.\n\nTest Plan for Debian and CentOS:\nPASS: system installation, bootstrap and unlock\nPASS: new ldap user login by ssh, observe it is prompted to change\n      password.\nPASS: new ldap user login by console, observe it is prompted to\n      change password.\nPASS: su to new ldap user from sysadmin, observe it is prompted to\n      change password.\n\nCloses-Bug: 1973073\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I5328dc4d068785caeff6402542cd4a9bd70aea1f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup stale data on the logical volume\n\nWipe 10MB at the beginning and at the end of each LV in cgts-vg\nimmediately after we create and extend them to cleanup the stale\ndata that could lead to the failure of lvm/filesystem\npuppet resource.\n\nCloses-Bug: 1883825\nChange-Id: I727b1cb02d74a4208a6c9593819b8513c1071fea\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "dcorch for containerized openstack services - puppet\n\nThis update added runtime classes to dcorch and sm puppet module that\nwill be called by sysinv after stx-openstack is successfully applied,\nto reconfig dcorch so that it will orchestrate containerized\nstx-openstack services.\n\nChange-Id: Ic2c273f44e53ebda94f6b82b0fcc7c7da1c13c4d\nStory: 2004766\nTask: 36157\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ETCD Integration and Management\n\n- create and run etcd manifest as part of config_controller --kubernetes\n- etcd bootstrapped to drbd-cgcs fs\n- configure SM to manage the service on active controller\n- allow ETCD to log data using forward-journald tool Journald forwards\n  these etcd logs to /var/log/kern.log\n\nStory: 2002841\nTask: 22784\n\nStory: 2002843\nTask: 22789\n\nChange-Id: I5d4444133ee7143ce2b7953c6f328651e3b1baa6\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "In DC setup update firewall with the routes\n\nThe tests in DC labs intended to bringup up to 1000 subclouds showed\nproblems to create all routes when it was necessary to add the\nfirewall update in the same puppet manifest apply that handled\nplatform::network::routes::runtime, generating an ever growing queue\nthat generated timeout during subcloud creation by DC manager.\n\nThis change adds the firewall classes to be run from inside\nplatform::network::routes::runtime to allow both the route\nconfiguration and the firewall update\n\nTest PLan:\n[PASS] In a SysCtrl, add/remove a single route (via CLI/sysinv-API)\n        if in a controller, verify route and firewall update\n[PASS] In a SysCtrl, add/remove a single route (via CLI/sysinv-API)\n        if in a worker, verify only route update is executed\n[PASS] In a SysCtrl, add/remove 50 routes (via CLI/sysinv-API)\n        using the parallel bash command:\n     seq 1 50|parallel --jobs 25 --eta '\\\n     system host-route-add 1 mgmt0 51.{}.{}.0 24 192.168.0.1 1 && \\\n     system host-route-add 2 mgmt0 51.{}.{}.0 24 192.168.0.1 1;'\n[PASS] In a SysCtrl, add a subcloud AIO-SX and validate route and\n        firewall update\n[PASS] Install a subcloud and check the SysCtrl network is installed\n        as a route and in the mgmt firewall\n\nCloses-Bug: 2033919\n\nChange-Id: Ic5bf9bc84b8c583a39d8c91b72caef4d84240123\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SR-IOV runtime manifest apply\n\nWhen an SR-IOV interface is configured, the platform's\nnetwork runtime manifest is applied in order to apply the virtual\nfunction (VF) config and restart the interface.  This results in\nsysinv being able to determine and populate the puppet hieradata\nwith the virtual function PCI addresses.\n\nA side effect of the network manifest apply is that potentially\nall platform interfaces may be brought down/up if it is determined\nthat their configuration has changed.  This will likely be the case\nfor a system which configures SR-IOV interfaces before initial\nunlock.\n\nA few issues have been encountered because of this, with some\nservices not behaving well when the interface they are communicating\nover suddenly goes down.\n\nThis commit makes the SR-IOV VF configuration much more targeted\nso that only the operation of setting the desired number of VFs\nis performed.\n\nCloses-Bug: #1868584\n\nChange-Id: Ic867fccae89fe8bc9173598c3c84c94ba2d7511f\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure SM to monitor cluster-host-ip\n\nChanged to use the new cluster-host-ip service in SM instead of\ncinder-ip.\nIf cluster-host interface is shared with the management\ninterface, the cluster host ip and interface would not be monitored.\n\nStory: 2004273\nTask: 28962\nDepends-On: https://review.openstack.org/#/c/650980/\nChange-Id: I773ab2240d4b165dee5738cf0f957e631da67a1d\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix vim endpoint issue when https is enabled in DC\n\nFixed a issue for Distributed Cloud where a new endpoint was being\ncreated for vim instead of updated, mantaining the old http openstack\nkeystone endpoint in SystemController.\n\nTest Plan:\nPASS: On a DC environment, list endpoints for OpenStack. Enable https.\n      Wait for puppet to apply the changes( might take a few minutes).\n      Observe that vim's public endpoint for SystemController\n      successfully changes from http to https, and no other public\n      http endpoint for vim is mantained for SystemController region.\nPASS: After running above test, disable https. Wait for puppet to\n      apply the changes. Observe that vim's public endpoint for\n      SystemController successfully changes from https to http, and\n      no other public https endpoint for vim is\n      mantained for SystemController region.\nPASS: On a DC environment, list endpoints for OpenStack. Obtain\n      keystone token from Identity API. Use it to make requests for vim\n      newly created endpoints (admin and internal). The behavior should\n      be consistent with StarlingX API reference for NFV VIM.\n\nCloses-Bug: 1995951\nChange-Id: I425e802c6c13f8e791579d7ce88c9c9bb2b13864\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support for FPGA FEC devices\n\nThis commit introduces puppet support for forward error correction\n(FEC) devices that are enabled on an Intel N3000 FPGA device.\n\nThe FEC device is intended to be used with a DPDK application,\nwith the device itself being bound to the igb_uio driver. As\nsuch, support has been added for enabling a number of SR-IOV\nvirtual functions on the PF and binding both the PF and VF to\na supported driver.\n\nStory: 2006740\nTask: 39948\n\nDepends-On: https://review.opendev.org/733724\nChange-Id: If85f9ac93c3d8c2418c7128f2d3ef5fd4a4509fd\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart sssd service on ssl_ca install\n\nThe installation of WAD CAs is not taking effect because the sssd\nservice is not getting restarted after the certificate is installed.\n\nThis commit adds the restart of the sssd service to\nplatform::config::certs::ssl_ca, which is the puppet class that gets\nexecuted when a new ssl_ca certificate gets installed.\n\nTest plan:\n\nPASS: Add a ssl_ca certificate with system certificate-install and\n      verify that the sssd service gets restarted in sequence.\nPASS: Uninstall a ssl_ca certificate with system certificate-uninstall\n      and verify that the sssd service gets restarted in sequence.\nPASS: In a DC environment verify that ssl_ca updates from the system\n      controller get pushed to the subcloud and that the sssd service\n      will then get restarted in the subcloud as well.\n\nCloses-Bug: 1997881\n\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nChange-Id: If1eace8849f752022bd58af47de12771e893590f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove worker remote firewall scripts\n\nThe implementation for worker firewall avoided using local kubectl\ncommands. This required access to the keyring for remote ansible\nad-hoc commands and leaves the /opt/platform/.config mounted on the\nworker.\n\nUse kubectl command with /etc/kubernetes/kubelet.conf instead, so we\ncan refrain from mounting /opt/platform/.config\n\nSince all firewall data is generated in the host's hierada file, the\nworker node needs to be able to access the calico firewall resources.\nTo achieve that a ClusterRole and ClusterRoleBinding are added, via\nthe controller node, allowing access to only the necessary resources.\n\nTest Plan:\n[PASS] Install a standard setup and validate the worker node firewall\n        configuration\n[PASS] Execute a DOR test in the cluster and check if the worker nodes\n        install the firewall GNP and HE\n[PASS] Execute worker node lock/unlock and check if the worker nodes\n        install the firewall GNP and HE\n\nCloses-Bug: 2038550\n\nChange-Id: Icf31b513427120fe81c53be21b8d8a81a8e323f8\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Serialize updates to global_filter in the AIO manifest\n\nRight now, looking at the aio manifest:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/780600/15/puppet-manifests/src/manifests/aio.pp\nthere are 3 classes that update\nin parallel the lvm global_filter:\n- include ::platform::lvm::controller\n- include ::platform::worker::storage\n- include ::platform::lvm::compute\nAnd this generates some errors.\n\nWe fix this by adding dependencies between the above classes\nin order to update the global_filter in a serial mode.\n\nCloses-Bug: 1927762\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\nChange-Id: If6971e520454cdef41138b2f29998c036d8307ff\n",
        "issue_summary": ""
    },
    {
        "commit_message": "etcd scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on etcd service documentation\n\nTEST PLAN:\nPASS: AIO-SX: build a new Debian ISO. Install, boostrap and\nperform a host-unlock verifying expected number of threads\ncreated.\n\nPASS: AIO: SX|DX: ran pod nodal scale limit ensuring the 110 pods\nlimit per node\n\nStory: 2010087\nTask: 45708\nChange-Id: I37d739185d1c29131d3c5c6424b27728d879fa27\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Mask credentials in puppet log files\"\n\nThis reverts commit be6c690370cd6454f2c01e1b9d9ae7f644b02feb.\n\nReason for revert: This change causes controller-1 unlock to fail during\ninstallation.\n\nChange-Id: Ice586e0fbc51490b0d6c6780ce740673652807b7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "k8s: Make sure PMON will not start native libvirtd\n\nUpdate the PMON libvirtd configuration file to ignore the service if k8s\nis enabled.\n\nUnder no circumstances should we allow PMON to monitor and (re)start\nnative libvirtd if the --kubernetes option is enabled. libvirtd will be\na containerized service and only enabled via helm/armada.\n\nChange-Id: Iace3e51184787c74bfe681f69293fe26f9655d7d\nStory: 2002876\nTask: 26168\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Revert \"Add Kata Container support in StarlingX\"\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Pull system images from local registry\n\nIn commit https://review.opendev.org/686057, system images\nare pushed to local registry at Ansible bootstrap time. This\ncommit updates to pull images from local registry for standby\ncontroller and worker nodes.\n\nTests(AIO-DX, Standard):\n  system images are pulled from local registry for standby\n  controller and worker nodes\n\nStory: 2006274\nTask: 36876\nDepends-On: https://review.opendev.org/686057\nChange-Id: I8d32218185f8499a530d91382f37cee8ea3b3c7b\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable horizon on subcloud controllers\n\nThis fixes Horizon issues seen on subclouds when navigating to another\nsubcloud.\n\nStory: 2002857\nTask: 22806\n\nChange-Id: I3ba271c13ea6a5d7908614960ba077b2def14d18\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Creates a LDAP client runtime class\n\nThis commit creates a wrapper class platform::ldap::client::runtime to\nupdate the LDAP client in runtime.\n\nTested with apply this class in runtime to update the LDAP server URI.\n\nChange-Id: Ia3e40617c9e628deeca839734bd3a3b41431f336\nStory: 2008774\nTask: 42248\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable upload of load files\n\nIn this commit, scratch directory default size, group ownership\nand permissions are changed to 16G, sys_protected and 775\nrespectively to allow saving of large temp files in this\ndirectory by dcorch-sysinv-api-proxy and sysinv-api during the\nupload of large files such as iso image. In addition, haproxy\nconfig for these web apps is also updated to prevent connection\ndrop during this long running operation.\n\nStory: 2007403\nTask: 39838\nChange-Id: Ib36049c2410e41a5ed67d19fa0d539c306117de5\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes Cluster Network Configuration\n\nThe Kubernetes cluster network is introduced and configurable.\nThe cluster-host interface can be configured on any interface of the\nhost and is defaulted to the management interface if it is not\nspecified.\nThe infrastructure network is no longer used in kubernetes config.\nSM and MTCE are setup to monitor the cluster-host if kubernetes is\nenabled.\nNova live migration ip is set to use the cluster-host ip.\n\nTests Performed:\nContainerized setup:\nAIO-SX: mgmt and cluster-host shared loopback interface\nAIO-DX: mgmt and cluster-host shared an interface\nAIO-DX: mgmt and cluster-host on different interface\nStandard 2+2+2: mgmt and cluster-host shared an interface\nStandard 2+2+2: mgmt and cluster-host on different interface\nFor each of the setup, launch VM and connect to VM console\n\nNon-containerized deployments\nAIO-SX sanity\nAIO-DX sanity\nStandard 2+2 sanity\n\nStory: 2004273\nTask: 27826\n\nChange-Id: If6b918665131f01bc62687fbdc7978c5c103e3b7\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ldapsearch require sudo\n\nCurrently ldapsearch with non-root user will query openldap on\nthe insecure port (389), ldapsearch with \"-H ldaps://<domain>\"\nwill fail. This is because when non-root user runs ldapsearch,\nit will look for a user specific configuration file (rather\nthan the system wide one at /etc/ldap/ldap.conf), and if there\nis no one, it will use internal default.\n\nThis change added a ldap configuration file for sysadmin.\n\nTest Plan:\nPASS: system deployment\nPASS: On AIO-SX system, query openldap users as sysadmin by\n      ldapsearch -xH ldaps://controller -b \"ou=People,\n      dc=cgcs,dc=local\"\n      Verify the query complete successfully.\nPASS: On AIO-SX system, query openldap users as sysadmin by\n      ldapsearch -x -b \"ou=People,dc=cgcs,dc=local -d 1\"\n      Verify the query is on secure port (636) and complete\n      successfully.\nPASS: On DC subcloud, query openldap users as sysadmin by\n      ldapsearch -xH ldaps://<system controller mgmt IP>\n      -b \"ou=People,dc=cgcs,dc=local\"\n      Verify the query complete successfully.\nPASS: On DC subcloud, query openldap users as sysadmin by\n      ldapsearch -x -b \"ou=People,dc=cgcs,dc=local -d 1\"\n      Verify the query is on secure port (636) and complete\n      successfully.\n\nCloses-Bug: 1993734\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I25e49235cfc743fc2938f973cf0cc4b3859a4d49\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove dcorch-snmp\n\ndcorch-snmp process/service is being removed from distributed cloud.\nRemove associated puppet config.\n\nChange-Id: I5691648887e2302eeda0b5e853a72df52ae0ba72\nStory: 2007267\nTask: 39190\nDepends-On: https://review.opendev.org/#/c/715765\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change the default value of sysinv-api bind host\n\nThe default sysinv-api bind host value was changed from\n\"0.0.0.0\" to \"::\" to support both IPV4 and IPV6.\n\nChange-Id: I072cda6df02f49a94d94871a9f19800f106f49dc\nCloses-Bug: 1833459\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow subcloud to use central-cloud's local registry\n\nUpdate the dnsmasq config with the following change which allows\nthe subcloud to use central-cloud's local registry via the OAM\ninterface\n\n - Add a CNAME record on central cloud which indicates the\n   'registry.central' is the 'controller'\n - Add 'registry.central' domain to return the system controller\n   OAM IP address on subcloud\n - Add docker registry and token server ports to OAM Firewall\n - Add docker registry and token server entries in HAPROXY with\n   passthrough configuration\n - Add 'registry.central' and the OAM IP into the docker registry\n   certificate SAN\n - Configure the docker auth token realm URL using the public URL\n   encoded address\n\nTest cases:\nNon-DC:\n1. AIO-Simplex: auto-install and provisioning\n2. AIO-Duplex: auto-install and provisioning\n3. Enable https and verify the haproxy configuration\n4. Verify docker login to registry.local\nDC:\n1. System controller installation and configuration\n2. AIO-Simplex subcloud bootstrapping without http proxy\n3. AIO-Duplex subcloud bootstrapping with http proxy and the\n   docker registry override using the registry.central\n4. Standard system (controller + worker) bootstrapping with the\n   docker registry override using the registry.central\n5. On subcloud controller, pull an image from the registry.central\n   via the OAM interface, it also verifies the firewall change\n6. On subcloud worker node, pull an image from the registy.central\n7. Install a custom certificate during system controller bootstrap\n   and verified the subcloud bootstrapping using the\n   registry.central\n8. Install a new certificate in the central cloud\n   system certificate-install -m docker_registry <path to cert>\n   Install the customer_ca on the subclouds as a trusted ca\n   system certificate-install -m ssl_ca ca-cert.pem\n   Verified docker login to the registry.central\n\nDepends-On: https://review.opendev.org/#/c/690084/\nChange-Id: I22f88183200a5b16a62773efba520b19e3ebe725\nCloses-Bug: 1846799\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add proxyconfig class for containerd\n\nThis change adds a proxyconfig class for containerd. Containerd keeps\nits own proxy config. This proxy config needs to be changed in\naddition to the docker proxy config when we change the proxy config\nas a whole. The containerd proxyconfig class is used by the docker\nruntime class when changing the proxy config without the need for\na node lock unlock.\n\nChange-Id: I7b08f04ffa7b20beffa77e02188d6df3fe7809b9\nPartial-Bug: 1931593\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust who gets admin privs in kubernetes\n\nWe want to give sysinv and wrsroot \"admin\" access in kubernetes.\nAccordingly, the permissions on the auto-generated\n/etc/kubernetes/admin.conf file need to be adjusted, and the KUBECONFIG\nenvironment variable needs to be set to point to the system-wide admin\nconfig.  (To simplify things, we will set this env variable for anyone\nwho can read the admin config file.)\n\nChange-Id: I9085fd1840d99674e515436f435d6f94617b42c7\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002876\nTask: 22831\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Fix logrotate for barbican\n\n- in Debian, barbican-api is replaced by barbican-common\n- updated custom logrotate overwritten before unlock\n\nTest Plan:\nPASSED: build packages and image\nPASSED: test logrotate -d /etc/logrotate.conf after loading the image\nPASSED: test logrotate -d /etc/logrotate.conf after bootstrap\nPASSED: test logrotate -d /etc/logrotate.conf after unlock\nPASSED: test correct unlock (system host-list, alarm-list, application-list)\nPASSED: tested logrotate -d on CentOs after install, bootstrap and unlock\n\n\nStory: 2010036\nTask: 43352\n\nSigned-off-by: Andrei Suciu <andrei.suciu@windriver.com>\nChange-Id: I51387b000f91b28e01ad1b8723e53c089b1e7433\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable helm repository and chart upload tool\n\nThere's a lot going on here but conceptually we're just enabling a\nlocal helm repo along with a helper script to install helm charts into\nthe repo.\n\nThe first item is to configure lighttpd to serve up helm charts as\nstatic information (so no proxying) at http://127.0.0.1/helm_charts\".\nThis is fairly straightforward, but the files are served out of\n/www which isn't a replicated filesystem and which is owned by the www\nuser.\n\nThe helm puppet manifest is modified to create the \"helm_charts\"\ndirectory for the webserver, to generate the initial index file,\nand to tell helm to add the new repo for the \"wrsroot\" user.  The\nvarious commands are run as specific users with specific environment\nvariables, this is key to making everything work as planned.\n\nTo allow the wrsroot user to upload charts into /www the helm-upload\nscript will re-run itself as the www user.  /etc/sudoers.d is modified\nto allow this without asking for a password.  The upload script will\ncopy the specified charts in to /www/pages/helm_charts, and will then\nregenerate the index.yaml file. The upload script will then try to\nsync the files over to the other node.  To enable this without\nprompting for a password we modify /etc/rsyncd.conf to allow\npasswordless syncing into /www/helm_charts.\n\nIn a future commit we'll need to sync charts with the other\ncontroller when booting up, and also configure the local starlingx\nhelm repo on the second controller.\n\nChange-Id: I37755ab7eedd070c27218862f936877949e378e8\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002876\nTask: 22831\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure radosgw and ceph-rgw as optional services\n\nradosgw is a now an optional platform service which is provisioned via a\nsystem service parameter. To align with this optionality, the ceph-rgw\nchart which is used to enable the containerized swift endpoints also\nbecomes optional.\n\nChanges include:\n- Update the stx-openstack application disabled_charts setting in the\n  application metadata.yaml to include the ceph-rgw chart. This sets the\n  initial chart state to disabled.\n- Optimize ceph.pp puppet manifests to provide two runtime classes: one\n  for setting up the platform radosgw configuration which will set the\n  haproxy configuration and the other for updating the keystone\n  information in the ceph configuration based on if the ceph-rgw chart\n  is enabled.\n- Update the sm.pp manifest to dynamically provision/deprovision the\n  radosgw based on if it's enabled in the service parameters\n- Rename the SWIFT service parameters to RADOSGW as this is the platform\n  service being enabled.\n- Restructure ceph.py/ceph.pp to generate and use hieradata such that\n  _revert_cephrgw_config() and _update_cephrgw_config() can be combined\n  into a single function for runtime updates.\n\nChange-Id: Id8d5c6b1159881d44810fc3622990456f1e54e75\nDepends-On: If284f622ceac48c4ffd74e7022fdd390971d0fd8\nPartial-Bug: #1833738\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "postgres scale down\n\nPlatform services configuration were changed in order to consume\nminimal resources by limiting number of threads/workers to the\nminimum value based on postgres service documentation\n\nTEST PLAN:\nPASS: build a new Debian ISO.\nPASS: AIO: SX|DX|DX+: Install, bootstrap and perform a host-unlock\nverifying expected number of autovacuum workers.\nPASS: STD: Install, bootstrap and perform a host-unlock verifying\nexpected number of autovacuum workers.\nPASS: Single-core for scale-down testing.\nPASS: Increased cores for scale-up testing.\nPASS: Set system-parameters and verify that postgres runtime applied\nit.\nPASS: Remove system-parameters and verify that its values were set\nto default.\n\nStory: 2010087\nTask: 45703\nChange-Id: I313ff764fbd56469a7f7d43198b6afc5d1003f87\nSigned-off-by: Thiago Antonio Miranda <tmarques@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make collectd startup dependent on networking Anchor\n\nStarting collectd too early in the manifest apply is seen\nto occasionally fail due to a dependency configuration on\nhostname resolution in FQDNLookup not being complete.\n\nThis is fixed by making collectd startup have a hard\ndependency on platform::networking by-way of a manifest\nrequire Anchor.\n\nAs well, to handle the DOR case when controller manifest\nis not executed, this update also ensures that collectd\nand influxdb services are enabled in its manifest base\nclass so these processes are auto started by init.\n\nSince influxdb is a controller only service it is removed\nfrom non controller load types.\n\nThis issue is fixed by the following multi-git changes.\n\nstx-metal:\n   Filter influxdb out of storage and compute only loads.\n   No real inter git merge dependency\n\nstx-integ:\n   Add startup Before=pmond dependency\n\nstx-config: This Update.\n   Move collectd config and startup to manifest apply post stage\n   Move influxdb config and startup to manifest apply post stage\n\nTest Plan:\nPASS: Build iso\nPASS: Verify install storage system and collectd startup\nPASS: Verify influxdb and extensions excluded in non-controller loads\nPASS: Verify collectd starts properly on all nodes (CC,DOR,UNLOCK)\nPASS: Verify influxdb starts properly on controller nodes (CC,DOR,UNLOCK)\nPASS: Verify collectd pmond process monitoring and recovery\nPASS: Verify influxdb pmond process monitoring and recovery\nPASS: Verify collectd statistics storage and fetch to/from influxdb\nPASS: Verify Install AIO DX and verify collectd and influxdb startup\nPASS: Verify Storage system DOR\nPASS: Verify AIO DX DOR\n\nChange-Id: Idff6382d835289f5986e98e3b4ee6e9c7a960287\nCloses-Bug: 1797909\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Use pg_createcluster to set up postgresql\n\nPostgresql behaves differently on Debian compared to\nCentos 7, it uses a pg_createcluster script to wrap\nthe postgresql commands such as initdb in order\nto manage the postgresql database.\n\nIn Centos 7 we just use the initdb command run as the postgres\nuser in order to create the database.\n\nHere we detect if we are using either Centos or Debian and do\nthe appropriate setup for the respective distro.\n\nAlso in this commit we enable IPV6 for postgresql as well.\n\nTest Plan\nPASS Build puppet-manifests package\nPASS Build ISO\nPASS Unlock system\nPASS Build Centos ISO\nPASS bootstrap Centos 7\n\nStory: 2009101\nTask: 43317\n\nDepends-On: https://review.opendev.org/c/starlingx/utilities/+/840497\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: Iba0ef50610e703b3caf044024a21609a1a713096\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubelet system overrides on unlock\n\nAdd logic to the platform::kubernetes::configuration method\nto generate the kubelet's systemd override file. This\nchange ensures the file is generated every time a host is\nunlocked. This facilitates delivery of systemd service changes\nvia patches to existing installs.\n\nThis change is needed by bug 2027810 to ensure that the\norphan volume cleanup script is executed as part of the systemd\nExecStartPre kubelet service override.\n\nThis bug is an update for the this reverted commit:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/895364\n\nTest Plan:\n\nPass:  - Update the kube-stx-override.conf.erb file\n       - Lock the AIO-SX host\n       - Unlock the AIO-SX host\n       - Verify that kube-stx-override.conf has been updated\n       - Verify AIO-SX fresh install\n       - Verify Standard Duplex lock/unlock and\n         verify that kube-stx-override.conf has been updated\n       - Verify Standard Duplex Install\n\nPartial-Bug: 2027810\nChange-Id: I4e47bce634c21396acb2e5f1540cac0be3ed34ec\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update etcd status monitor with expected timeout\n\nDuring full drbd sync, it is possible that the responses to server\nexceed the default 1 second etcd monitor timeout. This commit\nupdates the etcd status monitor call timeout to 5 seconds.\n\nThe etcd status monitor is updated to allow for a expected response\ntime so it does not trigger repeated audit mismatch which can lead\nto uncontrolled swact.\n\nTest Plan:\n\nPASS: Installation, bootstrap and deployment\nPASS: Verify platform upgrade no etcd monitor failures incl drbd sync\nPASS: Check etcd timeout values in logs (hw and vm below 2 secs)\n\nChange-Id: I974c8933224915e5878d4d0572a06f4c9c405daa\nCloses-Bug: 1946120\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Single puppet for AIO controllers\n\nThis change includes:\n1. create aio.pp for AIO controller nodes\n2. execute aio.pp for nodes with subfunctions of 'controller,worker'\n3. remove sriov device plugin restart code as now kubelet starts\n   after related config are applied.\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/784761\nChange-Id: I54b90a76454c6c545bf2891b81225bbf2ba15b03\nPartial-Bug: 1918139\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kdump config remove intel eth drivers from ramdisk\n\nProblem:\nOn a kernel crash, such as the watchdog timer firing, kexec\ntries booting the crash recovery kernel in order to capture\na vmcore so that the issue can be debugged. This normally\nsucceeds unless the platform has ice network hardware. Why?\nBecause the crash recovery kernel has only a small amount of\nmemory set aside for it, and the ice driver allocates enough\nmemory to cause memory exhaustion.  This causes the crash\nrecovery kernel's startup to fail, leading to complete platform\nhang.  In order to break out of the hang, one needs to manually\ndo a hardware reset or power cycle.\n\nSolution:\nChange kdump.conf to leave the ice driver module out of the\ninitramfs that is used by the crash recovery kernel.  In\nfact, leave all of the intel ethernet drivers out since they\nare not needed and increase the risk of memory exhaustion.\nUpon changing kdump.conf, the kdump service is restarted to\nregenerate the initramfs.\n\nVerification:\nInstall, check the kdump.conf file and unpack the initramfs file\nmaking sure that those modules are gone.  Check controller,\nworker, and storage node types.  Reboot node, make sure things\nbehave as expected ie. no extra kdump.conf mangling and no\nunexpected kdump service restarts.\nAlso crash a node with intel ethernet hardware on it and make\nsure it comes back up with a vmcore left in /var/log/crash.\n\nChange-Id: I9112f722cee8e199d94393bca887d3bb9bb89b39\nCloses-Bug: 1923879\nSigned-off-by: Jim Somerville <Jim.Somerville@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable VIM plugins for Kubernetes deployment\n\nDo not load vim plugins and disable vim audits instead of\njust disabling the endpoints as was previously done in\nChange 599741.  Leave setting of (new) Nova and (pre-existing)\nNeutron endpoint disabled flags for infrastructure host services usage.\n\nStory: 2002876\nTask: 26573\n\nChange-Id: Id3af829562e5765b99dbab23d913d65a4e6ec4a7\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix up puppet dependencies for firewall rules\n\nEnsure that the custom firewall chains are present before trying to flush\nthem.  This requires that we remove what we believe is an unnecessary\ndepencency between the custom firewall chains/rules and the normal\npuppet-configured firewall chains/rules.\n\nChange-Id: I939c6fecbf4b4fa3d4821025efd96d715f06eb1b\nStory: 2002843\nTask: 22791\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Optimized platform restore puppet manifest\n\nProvide a manifest to be applied during platform restore.\nThese are intended as the minimal puppet operations prior\nto unlock, for a platform restore.\n\nA new ansible restore playbook will be added that makes\nuse of this manifest.\n\nTest Plan:\n  Debian: AIO-SX - restore\n\nStory: 2010117\nTask: 45801\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: Id2e2e0e0714786d2dcaa15280c14a0d1031a43d7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix WAD user cannot access k8s API by oidc\n\nCurrently when oidc-auth-apps is applied and oidc service\nparameters are applied, kube-apiserver's oidc_issuer_url points\nto cluster host floating IP instead of the OAM floating IP. This\ncauses mis-match of oidc issuer that kube-apiserver is configured\nand the actual oidc issuer's IP address. User can no longer access\nk8s API even with a valid token.\n\nThe issue is introduced by a sed substitution in\nkube-apiserver-change-params.erb where it replaces all the OAM IPs\nwith kube-apisever's advertise address, including oidc-issuer-url.\nThis fixed it by excluding oidc-issuer-url from the substitution.\n\nTest Plan for CentOS and Debian:\nPASS: oidc service parameters apply, helm overrides update and\n      oidc-auth-apps apply\nPASS: run oidc-auth cli to get a token\nPASS: use the token to access k8s API by kubectl\n\nCloses-Bug: 1971500\nCloses-Bug: 1979006\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I19d434c6322b4423d2e5b1732ff8af3f486b73f2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Temporarily disable iptables restore during puppet\n\nDocker and kubernetes add rules to iptables, which can end up\npersisted in /etc/sysconfig/iptables by calls to iptables-save.\nWhen the puppet manifest is applied during node initialization,\nkubernetes is not yet running, and any related iptables rules\nwill fail.\n\nThis update disables the restoration of iptables rules from\nprevious boots, to ensure the puppet manifest does not fail\nto apply due to invalid rules. However, this means that in\na DOR scenario (Dead Office Recovery, where both controllers\nwill be intializing at the same time), the firewall rules\nwill not get reapplied.\n\nFirewall management will be moved to Calico under story 2005066,\nat which point this code will be removed.\n\nChange-Id: I43369dba34e6859088af3794de25a68571c7154c\nCloses-Bug: 1815124\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add crashdump template and parameter handling\n\nThis commit aims to handle the new platform crashdump service\nparameters in order to create a crash-dump-manager configuration\nfile.\n\nThis file will be located in /etc/default/crash-dump-manager, and\nwill be used as an EnvironmentFile for the crashDumpMgr service, in\norder to set the new parameters.\n\nTest Plan:\n\nPASS: TC1\n      add new parameters in the service-parameter table\n      with valid value\n      --> parameter added in service-parameter table\n      --> crash-dump-manager updated with new values\n\nPASS: TC2\n      modify new parameters in the service-parameter table\n      with valid value\n      --> service-parameter table updated with new value\n      --> crash-dump-manager updated with new value\n\nPASS: TC3\n      delete new parameters from the service-parameter table\n      --> parameter deleted from service-parameter table\n      --> crash-dump-manager updated with default value\n\nPASS: TC4\n      add/modify new parameters in the service-parameter table\n      with no value\n      --> msg: \"The service parameter value is mandatory\"\n      --> parameter not added/modified in service-parameter table\n      --> crash-dump-manager not updated\n\nPASS: TC5\n      a)add/modify max_files in the service-parameter table\n      with wrong format\n      --> msg: \"Parameter 'max_files' must be an integer value.\"\n      --> parameter not added/modified in service-parameter table\n      b)add/modify the other parameters in the service-parameter\n      table with wrong format\n      --> msg: \"Parameter <value> must be written in human readable\n      format\"\n      --> parameter not added/modified in service-parameter table\n\nPASS: TC6\n      reboot host with new parameters configured\n      --> service-parameter table keeps new parameters value\n      --> crash-dump-manager keep configured values\n\nPASS: ISO installation\n\nStory: 2010893\nTask: 48766\n\n\nSigned-off-by: Enzo Candotti <enzo.candotti@windriver.com>\nChange-Id: Ia02e73462802c7831331bed6dec98a6b1cb37020\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove tiller docker image in helm manifest\n\nPreviously the tiller image was included in the build and the helm\nmanifest loaded that image. The tiller image is no longer included in\nthe build. Without the tiller image present the helm manifest fails\nduring config_controller.\n\nThis changes the helm manifest to pull the docker image from its\nexternal home.\n\nChange-Id: If6ea726c0439e3a5e88fb7218c26b702a5f1122c\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2003491\nTask: 24768\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable resource containers for kube-proxy\n\nThis disables resource containers for kube-proxy since that feature\nis not needed and creates subsequent issues when the cpu manager\nstatic policy is enabled.\n\nWe would see see a flood of cgroup device and cpuset related error\nlogs when the cpu manager tries to update cpusets for the nested\ncgroup. We would also see that kube-proxy could not update its cpuset\nto the DefaultCPUSet as intended. With resource containers disabled,\nan unneeded directory level in the cgroup hierarchy is removed.\n\nThe same issues with resource containers are reported here:\nhttps://github.com/kubernetes/kubernetes/issues/66614\nhttps://github.com/kubernetes/kubernetes/issues/54967\nhttps://github.com/kubernetes/kubernetes/issues/17619\nhttps://github.com/kubernetes-sigs/kubespray/issues/3518\n\nNote that specifying the --resource-container option is deprecated,\nand the setting defaults to \"/kube-proxy\" when empty string is\nprovided. Configuring the value to \"/\" effectively disables this\nfeature, where kube-proxy will just log a non-fatal error message.\n\nChange-Id: Id73303afb9b5aa8fa628cc17e03f3457787cfa22\nStory: 2005192\nTask: 33484\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix platform::kubernetes::worker::upgrade_kubelet\n\nInadvertent variable placement broke the puppet parser for runtime\nmanifest execution of platform::kubernetes::worker::upgrade_kubelet.\nMove the variable to top of the class an re-establish the proper exec\ndependencies.\n\nTest Plan:\nPASS - Modify the manifest on a failed worker node and confirm\n       that the upgrade completes\n\nSigned-off-by: Robert Church <robert.church@windriver.com>\nCloses-Bug: #2000043\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/868059\nChange-Id: I014a086e71189673e8516b3d7db3257556c4bdb9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Delete SNMP Host-Based entries.\n\nDelete entries related with SNMP Host-Based.\n\nStory: 2008132\nTask: 41323\nSigned-off-by: Nicolas Alvarez <nicolas.alvarez@windriver.com>\nDepends-On: https://review.opendev.org/766094\n\nChange-Id: I2c4a89fd7c4bac9895311787663a6d693600b090\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add missing etcd ca.key file during upgrade\n\nWhen a DX system is upgraded from 20.06 to 21.05, the etcd\nca.key file is missing on controller-1. This change updated\nthe upgrade runtime class in etcd.pp to copy the ca.key file\nto /etc/etcd directory.\n\nCloses-Bug: 1940661\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Id91aa61261f653797bb63cc03648ecf97ae72d40\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Maintain sm-api in haproxy runtime on all controllers\n\nThe sm-api configuration in /etc/haproxy/haproxy.cfg will be lost in an\nAIOSX setting after enabling https and installing a new certificate,\nin this case, haproxy is expected to reload. This commit modifies the\nhaproxy runtime monitor the sm-api for all roles rather than the dc\nroles.\n\nTest:\n1. Install a fresh AIOSX\n2. system modify --https_enabled true\n   system certificate-install aiosx.pem\n3. Check the sm-api public endpoint with:\n     curl -vi https://10.10.10.2:7777.\n   Connected to the endpoint and get the cert info.\n4. Check the sm-api configuration by:\n     grep -e 7777 -e sm-api /etc/haproxy/haproxy.cfg.\n   Configuration about public/internal endpoints of sm-api are in this\nfile.\n\nCloses-Bug: 1893235\nChange-Id: Ia47c83df705f1143a5a6ec0cdbf9772f1dbd4283\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart phc2sys service in temporary PTP failure\n\nIt has been observed that temporary, intermittent failures in the PTP\nresources supported by some NICs can provoke the phc2sys service to be\nfinished with exit code = 255 (actually -1, unsigned). While upstream\nlinuxptp already managed the EBUSY reply from driver (see this change:\nhttps://review.opendev.org/c/starlingx/integ/+/851437), sometimes the\nreturned error from driver may be different (like EFAULT seen in the\nlogs of the corresponding Launchpad bug).\nWhat this change does is to make the phc2sys service more resilient to\nsuch intermittent, temporary failures in the lower layers. The\nconfiguration of service is changed to allow restarting of the service\nwith such error code (255) AND after some short sleep period to allow\nthe underlying cause to go away. In case of a deterministic failure\n(e.g. a bad service configuration), consecutive failures in the time\nwindow will still make systemd to dismiss restarting after few attempts.\n\nTest Plan:\nPASS: Restart of phc2sys after getting error code = 255;\nPASS: Dismiss of restart for a bad configuration.\n\nCloses-Bug: 1993584\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I033168940ddd2d43127d0e725d6839b6986f5e36\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable PTP synchronization on management network for AIO\n\nInitial design of PTP support in StarlingX required PTP GM\nto be present inside OAM network. As we getting more inquires\nabout possibility to deploy PTP GM inside MGMT network only\nwe are going to enable this possibility. Change required for\nAIO systems only, since standard config do PTP sync over both.\n\nChange-Id: I848ab4e1e97edeb12fbc84b842052a2887fc89e0\nStory: 2006759\nTask: 37292\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update ACC200 template config\n\nTEST STATUS:\n\n- PASS: Build packages.\n- PASS: Apply configuration using host-device-modify on STX for ACC200.\n\nStory: 2010864\nTask: 48643\n\nChange-Id: Id3afa607700064ce59674201ab722d6c3d9b20c8\nSigned-off-by: Nidhi Shivashankara Belur <nidhi.shivashankara.belur@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Local Docker Registry non-ha noauth\n\nDeploy local docker registry on controller as a process (not container).\nDocker registry starts up through systemd automatically. For now\nit is not managed through SM, no authentication and uses our self-signed\ncertificate. It listens on 0.0.0.0, which will change to\nproper mgmt floating address with SM integration.\n\nStory: 2002840\nTask: 22781\n\nChange-Id: I19423b0f91a456c2dc7bb3c5c2d60540355bf9b0\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet for Debian keystone module\n\nIn order to provide compatability with the Debian keystone module\n17.4.0 vs Centos 11.3.0, the keystone manifest is updated to\nhandle Centos and Debian keystone module.\n\nTest Plan:\nPASSED Debian: bootstrap and verify keystone endpoints, users, roles\nPASSED Debian: verify keystone runtime manifest\nPASSED Install and Deploy Centos DC System Controller\nPASSED Install and Deploy Centos DC Subcloud\n\nStory: 2009101\nTask: 44354\nSigned-off-by: John Kung <john.kung@windriver.com>\nChange-Id: Icfe3fd29f2a2e1bc427d69d77532b288a31ca497\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Debian: puppet-manifests: do not call grubby to edit grub.cfg\"",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Specify the path for pg_ctl\n\nDetect the path for pg_ctl for which distro we are\nusing. On Debian, pg_ctl is located on\n/usr/lib/postgresql/13/bin/pg_ctl. On Centos,\npg_ctl is located on /usr/bin/pg_ctl.\n\nTest Plan\nPASS Build puppet-manifests package\nPASS Build ISO\nPASS Unlock system\nPASS Build Centos ISO\nPASS bootstrap Centos 7\n\nStory: 2009101\nTask: 43317\n\nDepends-On: https://review.opendev.org/c/starlingx/utilities/+/840497\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I0d6a89e279a3779afd74b276c6221f0009d85582\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Update NO_PROXY for docker\n\nThis work enables IPv6 with docker proxies and docker no_proxy\ndeployments.\n\nOn Debian we use a newer version 20.10 of docker vs 18.09 on CentOS.\nWe require to use no square brackets IPv6 notation for NO_PROXY\nvariable.\nSame behavior was observed for containerd in the past[1].\n[1]: https://review.opendev.org/c/starlingx/stx-puppet/+/704679\n\nTesting on Debian hit unlock issues before reaching this code.\nTesting unlock on IPv6 barely started, there may be more issues\nuntil this code in reached.\nCode is composed of an osfamily check used in other places, and\nno_proxy alteration logic copied from containerd.pp. Both are already\nvalidated separately in other places. Logic itself will keep the same\nbehavior that was tested during bootstrap[2]. For the above reasons I\npropose letting this merge without a code coverage test (without\nwaiting for fixes in other areas).\n[2]: https://review.opendev.org/c/starlingx/ansible-playbooks/+/838665\n\nSkip CentOS tests because logic on CentOS was not changed, overall logic\nwas split based on osfamily which is validated in other places.\n\nStory: 2009964\nTask: 45113\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Ieead3b0de49d2d1074662dab6cfa0558c76ba8ff\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add flag to ensure PF is up before SR-IOV set up\n\nAs part of the integration of the bnxt_en driver, it was discovered that\nit requires a PF to be administratively up before any VFs can be\nconfigured. Currently the system tries to write to the VF file straight\naway, without checking the interface state beforehand.\n\nThis change modifies the puppet that enables SR-IOV, adding a config\nflag to it that when enabled will try to to ensure a port is\nadministratively up before trying to write to the VF file.\n\nTESTS:\nThe tests below were run on a host with a BCM57504 NIC\n- Installation is successful\n- VFs can be created successfully through system commands\n- VFs do not throw any errors when set up\n- VFs are set up correctly after a lock/unlock\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/836958\n\nStory: 2009915\nTask: 45013\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: Iea001ea04fc199043e941b4c65b6c84f6a679451\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Etcd RBAC enabling code against the V2 API backend\n\nThe use of Etcd API V2 is not supported.  The kubernetes resources\nintended to be protected by Etcd RBAC are stored in the data-store\nbacking the Etcd V3 API.  These backend data-stores are independent.\nRBAC enabled through V2 API does not affect the data-store backing V3\nAPI.\n\nClean up the RBAC enabling code against V2 API.\n\nTest plan:\nAIO-SX:\n    bootstrap, confirm omitted RBAC configration: PASS\n    BnR, confirm omitted RBAC configration: PASS\n    upgrade, confirm omitted RBAC configuration: PASS\n\nAIO-DX:\n    upgrade, confirm removed RBAC configuration: PASS\n\nPartial-Bug: 1949219\n\nChange-Id: I8c18b4f5e6247d2c23e068b24eab390c7a3fab5f\nSigned-off-by: Michel Thebeau <Michel.Thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase haproxy timeout for patching\n\nSome patching operations can take a significant amount of time.\nThus, in this commit the haproxy timeouts for\npatching-restapi-admin-internal and patching-restapi-internal\nare updated to be 600s.\n\nChange-Id: I1b73793c2963be2d1e40634ed6f85d747c6d6985\nStory: 2007267\nTask: 41944\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove debug flag in puppet apply command\n\nBased on the goal of the story 2010802 [1], this review removes\nthe debug flag from the puppet apply command in order to reduce\nthe manifest time execution. Tests showed a time reduction of around\n5%.\n\nTest plan\nPASSED: AIO-SX fresh install with puppet debug mode disabled, and\n\tpresenting no debug entries in puppet logs.\nPASSED: Enabling puppet debug mode editing puppet.conf, and confirm\n        this configuration kept permanent after lock/unlock. Under\n        [main] section in puppet.conf file, add this line to enable\n        debug mode:\n        log_level = debug\n\n[1] https://storyboard.openstack.org/#!/story/2010802\n\nStory: 2010802\nTask: 48272\n\nChange-Id: Ie41c079f3768876356714fc992549840d68609ad\nSigned-off-by: Samuel Toledo <samuel.presatoledo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add dynamic provisioning for the Mtce guestAgent\n\nUse SM's dynamic provisioning infrastructure to\nmanage the guest-agent service.\n\nStart guestAgent when stx-openstack application is enabled\nStop  guestAgent when stx-openstack application is removed\n\nTest Plan:\nPASS: Verify system install\nPASS: verify guestAgent logs\nPASS: Verify stx-openstack application apply starts guestAgent on active controller\nPASS: Verify guestAgent is started and runs properly on active controller\nPASS: Verify guestAgent does not run on inactive controller\nPASS: Verify guestAgent switches controllers over a Swact (and back)\nCOND: Verify stx-openstack application remove stops active guestAgent\n\nChange-Id: I5d4d53fc0180d96662a949fd006c3d7eeb746544\nCloses-Bug: 1829911\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reprovision SM services on duplex\n\nUpdate SM provisioning for duplex to reprovision services\nif needed. The default configuration in SM is duplex services,\nand a simplex node will reprovision these to be simplex. In\norder to support SX to DX migration, these services will also\nbe reprovisioned on duplex to ensure the configuration\nis correct.\n\nStory: 2008587\nTask: 41743\n\nChange-Id: Ifb61a6046c680d0dee7c76660397c6fe8c2cbe73\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify _audit_device_image_update interval\n\nThis method verifies the timeout of the update process of the images,\nand the minimum timeout available inside the code is defined in the\nfw_update_small_timeout variable. This variable is not changed by any\nother process and its value is set to 300 seconds.\n\nAfter a research, we noticed that the appropriate time interval\nfor this audit is to be executed between 300 seconds interval.\n\nThis commit is a continuation of the study started at task 45711.\n\nTEST PLAN:\nPASS: AIO-SX: manually replaced these files into a Debian installation\nand no crashes happened.\nPASS: rebuild the whole system with the modification with no crashes.\nPASS: AIO-SX: verify that the audit is being called during the period.\nPASS: follow the sysinv logs seeking for errors. No error was found.\nPASS: guarantee that all audits are being called by the periodic tasks.\n\nStory: 2010087\nTask: 45777\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/848329\nSigned-off-by: Bruno Costa <bruno.costa@windriver.com>\nChange-Id: I50d19f9b6b930b2d6b587eb811cd6e6ed33bce2f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Exempt keystone admin user from auth faillockout\n\nkeystone is configured to lock the user account if it fails\n5 consecutive authentication attempts. But this can also be used\nby DoS type of attack. This commit introduced a keystone user option\npuppet class that will be called during keystone bootstrap to exclude\nadmin user from the faillockout rule.\n\nThe keystone user option class uses a custom scripts that makes a PATCH\nREST API call to keystone to update admin user's\n'ignore_lockout_failure_attempts' option to exempt it from the\nfail lockout rule.\n\nChange-Id: Ie01476a98e1157d2fac44ea4f137e611d6f5ff04\nDepends-On: https://review.opendev.org/#/c/730834/\nCloses-Bug: 1877179\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the image download failure on IPv6 system\n\n\"crictl pull\" failed to pull images on IPv6 system with\nproxy setting since Containerd doesn't work with the\nNO_PROXY environment variable that has IPv6 addresses\nwith square brackets. This commit updates to strip out\nthe square brackets from NO_PROXY environment variable.\n\nChange-Id: I6bb5ad0379f576f66d77a90dfdca94f5e0f28f0c\nCloses-Bug: 1859835\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove swift endpoints from baremetal\n\nSwift endpoints were being setup through the puppet manifest\nplatform::ceph::rgw::keystone::auth\n\nThis change removes that manifest as well as references to it\nand any hiera data setup that pertains to it.\n\nStory: 2004764\nTask: 30412\nChange-Id: Ic7e10eff04677dcd0380557767147b7103f073ad\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow user specified registries for config_controller\n\nCurrently docker images were pulled from public registries during\nconfig_controller. For some users, the connection to the public\ndocker registry may be slow such that installing the containerized\nservices images may timeout or the system simply does not have\naccess to the public internet.\n\nThis change allows users to specify alternative public/private\nregistries to replace k8s.gcr.io, gcr.io, quay.io and docker.io.\nInsecure registry is supported if all default registries were\nreplaced by one unified registry. It lowers the complexity for\nthose who build his own registry without internet access.\n\nDocker doesn't support ipv6 addr as registry name, instead\nhostname or domain name in ipv6 network is allowed.\n\nTest:\nAIO-SX/AIO-DX/Standard(2+2):\n  Alternative public registry (ipv4/domain) with proxy\n    - config_controller pass\n  Private registry (ipv4/ipv6/domain) without internet\n    - config_controller pass\n  Default registry with/without proxy\n    - config_controller pass\n\nStory: 2004711\nTask: 28742\n\nChange-Id: I4fee3f4e0637863b9b5ef4ef556082ac75f62a1d\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n(cherry picked from commit 611a68a96ab915dc4e97d39dffa5c379bbffef3d)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle labeled interfaces correctly on Debian and CentOS\n\nIt was detected that labeled interfaces (like lo:5) need to be passed\nwith label to ifup/ifdown script on Debian, in contrary to CentOS.\n\nOn StarlingX the labeled interfaces are used to add interfaces on the\nloopback interface, with the platform class usually (mgmt, cluster).\n\nThis change specializes a function get_search_ifname() to provide\nthe correct interface name to be added on the upDown array\n\nTest Plan:\nPASS  in Debian, configuration of labeled interfaces (on loopback)\nPASS  in Debian, modification of labeled interfaces (on loopback)\nPASS  in CentOS, configure mgmt and cluster outside loopback and\n      execute lock/unlock, interfaces correctly configured\nPASS  in CentOS, configure mgmt and cluster on the loopback and\n      execute lock/unlock, interfaces correctly configured\n\nStory: 2009101\nTask: 44722\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I90afbf7e2bbcfceb590ebe3eda0915d8ad05e72f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create docker-lv in the automatically created ctgs-vg volume group\n\nThis commit creates docker-lv in the automatically created cgts-vg\nvolume group on the worker nodes if kubernetes is configured. It\nalso supports cgts-vg expansion.\n\nThis commit also increases docker-lv size to 30G for all the hosts.\n\nStory: 2004520\nTask: 28663\nDepends-On: https://review.openstack.org/628053\nChange-Id: I9b53421318883d0e951d64d0be91e146d14e5d7b\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet classes for kubernetes upgrades\n\nAdding the puppet classes that will be used to upgrade the\nkubernetes control plane and kubelet components.\n\nChange-Id: Ia19dc1118594d5c618d69a2aecd25aaf42b420f3\nStory: 2006781\nTask: 37578\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable sssd service on worker node\n\nThis change enabled sssd service on work node.\n\nTest Plan on Debian:\nPASS: After worker node is unlocked, verify that sssd service\n      is running.\nPASS: Verify worker node is in healthy states:\n      unlocked       | enabled     | available\nPASS: Verify there are no alarms related to sssd service for\n      worker nodes.\nPASS: Add a ldap user, and ssh to worker node by the newly added\n      ldap user.\n\nCloses-Bug: 1988328\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Icd76e0bd97c97c1eb146af280a96d04a59945ef7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "story: 2006559\n\"small cleanup required by OBS badness check - exec rights on non executable\"\n\nChange-Id: I5c0cb6b2cd1083ea6b9b86077dee6a55408bf52a\nSigned-off-by: Dominig ar Foll Intel Open Source <dominig.arfoll@fridu.net>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove pm-qos class from compute manifest\n\nStory: 2009886\nTask: 44648\n\nTest plan:\nPASS: Reboot the host and check that the compute manifest was\n      successfully triggered.\nPASS: Verify that pm_qos_resume_latency_us for every host CPU core\n      has its default value 0.\nPASS: System host lock/unlock with BIOS settings modifications.\nPASS: Verify CPU Cores c-state switching after changing tuned profile.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ib247e1e96a7fd5d291a55b2907a93b660f4cc9c7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph uprev v13.2.2 Mimic\n\n* ceph: update crushmap for ceph mimic\n\n* puppet-ceph: remove ceph jewel rest-api configuration\n\n    ceph-rest-api is implemented in ceph-mgr on ceph mimic/v13.2.2 version.\n    Remove the configuration which is for ceph-v10.2.6/ceph-rest-api\n\n* puppet-ceph: enable mgr-restful-plugin\n\n    ceph configuration is under puppet control. ceph-mgr/restful\n    plugin is going to be started in mgr-restful-plugin script.\n\n    output log when starting mgr-restful-plugin\n    output log in puppet log to know the execute commands.\n\n* puppet-ceph: pass osdid to ceph::osd when creating resources\n\n    ceph::osd needs to be created with the same OSD ID that's\n    already present in sysinv database.\n\n* puppet-ceph: update ceph.conf with osd device path\n\n* puppet-ceph: fix aio-dx unlock issue caused by ceph-mon\n\n* puppet-ceph: ensure radosgw systemd service is not started\n\n    Make sure radosgw service is not accidentally\n    started by systemd.\n\n* puppet-sm: provision mgr-restful-plugin\n\n    After mgr-restful-plugin is enabled by ceph.pp, SM will\n    monitor mgr-restful-plugin status and contor its status.\n\n* sysinv-common: ceph use status instead of overall_status\n\n    'overall_status' is deprecated in Ceph Mimic. Use 'status' instead.\n\n* sysinv-common: ceph incorrect parsing of osd_crush_tree output\n\n    len(body) is used to iterate osd crush tree which is not\n    correct because the crush tree dictionary is stored in\n    body['output']\n\n* sysinv-common: ceph refactor crushmap_tiers_add\n\n    Refactor crushmap_tiers_add() to always check/create missing\n    ceph tiers and corresponding crush rules. This is currently\n    gated by tier.status == constants.SB_TIER_STATUS_DEFINED\n\n* sysinv-conductor: remove api/v0.1 from ceph api endpoint\n\n    \"restapi base url\"(ceph.conf) is removed from ceph Mimic\n    version. remove the base url now.\n\n* sysinv-conductor: ceph convert pool quota None to zero\n\n    On non-kubernetes setup kube_pool_gib is None which\n    raises an exception when trying to do integer\n    arithmetic.\n\n* sysinv-conductor: remove unused update_ceph_services\n\n    update_ceph_services() is triggering application of\n    runtime manifests but that's no longer supported on\n    stx/containers.\n\n    Removing dead/unused code.\n\n* helm: rbd-provisioner setup kube-rbd pool\n\n    Ceph Mimic no longer supports \"ceph osd pool set <pool-name>\n    crush_rule <ruleset>\" with a numeric ruleset value. Crush\n    rule name should be used instead.\n\n    Starting with Ceph Luminous pools require application tags\n    to be configured with: \"ceph osd pool application enable\n    <pool-name> <app-name> \" otherwise ceph health warning is\n    reported.\n\n    Enable \"rbd\" application on \"kube-rbd\" pool.\n\n* sysinv-helm: remove custom ceph_config_helper_image\n\n    Remove custom ceph config helper image needed to adapt\n    upstream helm charts to using Ceph Jewel release. Because\n    we're using Ceph Mimic this helper image is no longer\n    needed.\n\n* sysinv-helm: ceph use rule name instead of id\n\n    Ceph osd pool crush_rule is set by name. (Jewel release\n    used numerical value for crush ruleset)\n\nStory: 2003605\nTask: 24932\n\nSigned-off-by: Changcheng Liu <changcheng.liu@intel.com>\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nSigned-off-by: Dehao Shang <dehao.shang@intel.com>\nSigned-off-by: Yong Hu <yong.hu@intel.com>\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n\nDepends-On: Ibfbecf0a8beb38009b9d7192ca9455a841402040\nChange-Id: Ia322e5468026842d86e738ece82afd803dec315c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Device image repository\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"kubelet scale down\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Setup cert-mon.conf\n\nThis change is to create /etc/sysinv/cert-mon.conf for cert-mon.\nThe cert-mon.conf will have auth info for local cloud on a subcloud.\nThe conf file will have both auth info for local and subcloud if it\nis on a systemcontroller.\n\nStory: 2007347\nTask: 40373\n\nChange-Id: Ibb217753782ce0dd922d9e5568dd14ea929190ae\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Delete orphaned volumes on reboot\n\nAfter a forced reboot, kubelet fails to clean up orphaned\nvolume files and directories. These orphaned volumes\npersist because the directories still hold files, a situation\nthat would typically be resolved during a normal flow\nbut instead is caused by the forced reboot.\n\nThe volume directories are tied to the pods' unique identifiers.\nSince none of the pods are running after the reboot, the associated\nvolume directories and files can be safely removed.\n\nThe work in this commit will eventually be superseded by\nhttps://github.com/kubernetes/enhancements/issues/3756.\n\nTest Plan:\n\nPASS:\n- Build an iso and install an aio-sx system and verify\nthat the cleanup script is installed and the kubelet service\nis running with\nExecStarPre=/usr/local/bin/kubelet-cleanup-orphaned-volumes.sh.\n\nPASS:\n- Reboot the system with active pods that\ncontain files in their volumes directories and\nverify that all volume directories and their files under\n/var/lib/kubelet/pods/ are deleted after reboot.\n\nPASS:\n- Verify that explictly restarting the kubelet service does\nnot attempt to delete kubelet volume directories.\n\nPASS:\n- Verify volume-subpaths directories and files are cleaned up\nafter reboot.\n\nCloses-Bug: 2027810\n\nChange-Id: Ie7e637c4d5e79ec08d33bd80dade35890b711548\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Update kubelet system overrides on unlock\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "OAM IP change needs double lock/unlock controllers for IPV6 system\n\nAdded IPv6 address fields on the list used to detect if the interface\nhave changed on apply_network_config.sh. Without it was only copying\nthe interface config file from /var/run/network-scripts.puppet/ to\n/etc/sysconfig/network-scripts/ which explains why it was working\non the second reboot.\n\nTested on:\nAIO-DX\nAIO-SX\n\nCloses-Bug: 1895555\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I25e60a04b4aec38c254ff3e3a7b2f0d80ce5daaf\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore containerized platform using Ansible restore_platform playbook\n\nThis commit is to support platform restore for AIO-SX using\nrestore_platform playbook:\n 1. During AIO-SX restore, the restored ceph crushmap is loaded through\n    puppet.\n 2. Bypass vim when unlocking controller-0 for the first time.\n 3. When unlocking controller-0 for the first time, app_reapply is\n    skipped for stx-openstack application.\n 4. After controller-0 is unlocked, ceph backend task is set to None.\n\nChange-Id: I36d27b162334e5a2f0371793243f2301b5fec1eb\nStory: 2004761\nTask: 33645\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    }
]