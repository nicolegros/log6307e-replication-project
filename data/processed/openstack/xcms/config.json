[
    {
        "commit_message": "Merge \"Set nova override to enable numa live migration\" into f/stein",
        "issue_summary": ""
    },
    {
        "commit_message": "AppFwk: Recover apply from helm operation in progress\n\nIt is observed that when a helm release is in pending state, another\nhelm release can't be started by FluxCD. FluxCD will not try to\ndo steps to apply the newer helm release, but will just error.\n\nThis prevents us from applying a new helm release over a release with\npods stuck in Pending state (just an example).\n\nWhen the specific message for helm operation in progress is detected,\nattempt to recover by moving the older releases to failed state.\nMove inspired by [1].\nTo do so, patch the helm secret for the specific release.\nAs an optimization, trigger the FluxCD HelmRelease reconciliation right\nafter.\nOne future optimization we can do is run an audit to delete the helm\nreleases for which metadata status is a pending operation, but release\ndata is failed (resource that we patched in this commit).\n\nRefactor HelmRelease resource reconciliation trigger, smaller size.\n\nThere are upstream references related to this bug, see [2] and [3].\n\nTests on Debian AIO-SX:\nPASS: unlocked enabled available\nPASS: platform-integ-apps applied\nafter reproducing error:\nPASS: inspect sysinv logs, see recovery is attemped\nPASS: inspect fluxcd logs, see that HelmRelease reconciliation is\ntriggered part of recovery\n\n[1]: https://github.com/porter-dev/porter/pull/1685/files\n[2]: https://github.com/helm/helm/issues/8987\n[3]: https://github.com/helm/helm/issues/4558\nCloses-Bug: 1997368\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I36116ce8d298cc97194062b75db64541661ce84d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Manage remotelogging.conf with a template\n\nRemotelogging.pp uses sed expressions and file_line to change\nremotelogging.conf. Templates is a better way to manage the file.\nThis commit changes the remotelogging.conf to be managed by\npuppet template.\n\nChange-Id: I2e8ef30acdd3200d8d2a4adf4f396c4f2cc21a2a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes firewall rule addition\n\nAdd firewall rule to allow compute hosts to have external http/https\naccess through the controllers.\n\nStory: 2002843\nTask: 27031\nChange-Id: I35b31d590f67b7fed223c0db0058c064de006387\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Use bonded interface name in ptp4l configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Config updates for stx3.0 upgrades\n\nUpdate controllerconfig to remove non-platform openstack components\nand fix db barbican migration.\nCreate RPC call to allow to touch /etc/platform/.upgrade_controller_1\nRemove not needed upgrade-scripts.\nObsolete software version related fixes.\n\nStory: 2007403\nTask: 39086\nTask: 39087\nTask: 39182\nTask: 39183\nTask: 39226\n\nChange-Id: I28e746f3d267c322f59402beaf25c271138a124d\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart Docker After Changing Proxy Settings\n\nRestart Docker process after changing proxy settings through service\nparameters. There is a potential issue currently where Docker is\nstarted before the changes to proxy settings through service parameter\nis applied. This means on lock/unlock, Docker restarts with old\nproxy settings. This commit fixes that issue.\n\nCloses-Bug: 1838651\n\nChange-Id: I57e527998fdf50c4be38c32ea8d1ee95bc46d3ff\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP] Generate hieradata to set currentUtcOffsetValid\n\nA node running as a GM needs to be able to set the currentUtcOffsetValid\nflag in ptp announce messages.\n\nThis change allows a user to set a ptp instance parameter:\ncurrentUtcOffsetValid=1\n\nThis will put the required pmc command in the instance hieradata so that\nthe puppet manifest can configure the ptp4l process to set the flag.\n\nRemoving the currentUtcOffsetValid parameter and re-applying the ptp\nconfig un-sets this flag.\n\nA subsequent change to the ptpinstance puppet manifest will be submitted\nto apply this setting.\n\nTests:\n\nPass: Build and install on AIO-SX\nPass: Validate that parameter is set and removed correctly, check\nthat the flag is present in Announce messages\nPass: Validate that the system TAI clock has the correct offset\nfrom CLOCK_REALTIME\n\nStory: 2010033\nTask: 45379\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: Iaabf6188ddd047697476bf0dc1672c11a0e248a8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Config support for nohz_full on standard workers\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch 'starlingx/master' into HEAD\n\nChange-Id: I395646683f437ef151b67eeb919e2c28c5fab55d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding a trusted CA certificate in ansible\n\nSome parts of the ansible playbook may require installing a trusted CA\ncert on the system. For example specifying a docker registry using a\nself signed cert.\n\nThis change will allow the ansible playbook to call the system\ncertificate-install command during initial config.\n\nChange-Id: Ic094837388b0fb644d647e693314dd3abaab1266\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nPartial-Bug: 1831946\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use upgraded kubelet on unlock after kubelet upgrade\n\nWhen unlocking after kubelet upgrade, there is a problem here:\nhttps://opendev.org/starlingx/config/src/commit/c784e1ca9a8bd82e86f889b7f621d2363b1393af/sysinv/sysinv/sysinv/sysinv/puppet/kubernetes.py#L383\nthe kube_host_upgrade status is no longer equal to\nKUBE_HOST_UPGRADING_KUBELET and the kubelet version is taken from\nthe DB which is the old one.\nThe kubelet value from the DB is updated when the k8s upgrade is\ncomplete. (i.e after doing: system kube-upgrade-complete)\n\nTo fix this we added a new state to kube_host_upgrade.status\ndefined as kubernetes.KUBE_HOST_UPGRADED_KUBELET. This state will\nindicate that the kubelet was upgraded for a certain host.\n\nWhen we complete the upgrade (i.e system kube-upgrade-complete)\nthe per-host kube_host_upgrade.status values will be set to None\nso that they're blank in prep for the next k8s upgrade.\n\nCloses-Bug: 1943690\nChange-Id: Ifdb5c51649831deed76ab9a5370cd293f8a5784a\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: SR-IOV device plugin config file mount\n\nThis commit fixes a bug that may occur on the second node of an\nAIO-DX system if the sriovdp=enabled label has been applied after\ninitial install but before first unlock.\n\nIn this case, the device plugin may start launching before the\nworker manifest has populated the config file.  Since the pod\nattempts to mount the config file and it is not present, it gets\ncreated as a directory.\n\nThe fix simply sets the hostPath type for the config file to 'File'\n\nCloses-Bug: #1831124\nChange-Id: Ie55a0cb80dcee81a81059118ebef6c8c01cb6996\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add dynamic provisioning for the Mtce guestAgent\n\nUse SM's dynamic provisioning infrastructure to\nmanage the guest-agent service.\n\nStart guestAgent when stx-openstack application is enabled\nStop  guestAgent when stx-openstack application is removed\n\nTest Plan:\nPASS: Verify system install\nPASS: verify guestAgent logs\nPASS: Verify stx-openstack application apply starts guestAgent on active controller\nPASS: Verify guestAgent is started and runs properly on active controller\nPASS: Verify guestAgent does not run on inactive controller\nPASS: Verify guestAgent switches controllers over a Swact (and back)\nCOND: Verify stx-openstack application remove stops active guestAgent\n\nChange-Id: I5d4d53fc0180d96662a949fd006c3d7eeb746544\nCloses-Bug: 1829911\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Firewall: enable IGMP for mgmt and cluster-host networks\n\nDepending on the IGMP switch configuration between the nodes, IGMP\nquery and notification packets need to be exchanged. If the firewall\ndrops IGMP packets, the querier will not receive the IGMP report packets\nand as a result multicast packets will not be forwarded by the switch.\nSince hbs uses multicast, the controllers will not to able to sync\ncorrectly.\n\nThis fix adds both ingress and egress rules to allow IGMP packets on\nmanagement and cluster-host networks.\n\nTest Plan\n[PASS] check globalnetworkpolicies IGMP rules for mgmt and cluster-host\n[PASS] on each controller, check with tcpdump that it's receiving IGMP\n      replies and sending IGMP reports\n[PASS] on each controller, check with tcpdump that it's receiving hbs\n       multicast packets from both controllers\n[PASS] check with kubectl that controllers are in sync\n\nStory: 2010591\nTask: 48271\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: Idaca99a1cf774854fd340cce7f52758f053503e6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow user specified registries for config_controller\n\nCurrently docker images were pulled from public registries during\nconfig_controller. For some users, the connection to the public\ndocker registry may be slow such that installing the containerized\nservices images may timeout or the system simply does not have\naccess to the public internet.\n\nThis change allows users to specify alternative public/private\nregistries to replace k8s.gcr.io, gcr.io, quay.io and docker.io.\nInsecure registry is supported if all default registries were\nreplaced by one unified registry. It lowers the complexity for\nthose who build his own registry without internet access.\n\nDocker doesn't support ipv6 addr as registry name, instead\nhostname or domain name in ipv6 network is allowed.\n\nTest:\nAIO-SX/AIO-DX/Standard(2+2):\n  Alternative public registry (ipv4/domain) with proxy\n    - config_controller pass\n  Private registry (ipv4/ipv6/domain) without internet\n    - config_controller pass\n  Default registry with/without proxy\n    - config_controller pass\n\nStory: 2004711\nTask: 28742\n\nChange-Id: I4fee3f4e0637863b9b5ef4ef556082ac75f62a1d\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n(cherry picked from commit 611a68a96ab915dc4e97d39dffa5c379bbffef3d)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add logging configuration to nova-api-proxy\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace k8S API references of v1beta3 to v1beta2\n\nAbort operation is failing when execute the 'kube-upgrade-abort'\nsystem command during k8s upgrade from 1.21.8 to 1.22.5 after\nupgrading the control plane.\n\nThe kubeadm-config ClusterConfiguration is updated with k8s API\nreference 'kubeadm.k8s.io/v1beta3' during K8s upgrade from 1.21.8 to\n1.22.5. The 'kubeadm.k8s.io/v1beta3' only supports from K8s 1.22.x.\nThis should revert back to 'kubeadm.k8s.io/v1beta2' during the\nabort operation.\n\nThis change replaces k8s API references of v1beta3 to v1beta2\nwhen abort during k8s upgrade from 1.21.8 to 1.22.5.\n\nTEST PLAN:\nPASS: Fresh install ISO as AIO-SX, perform k8s upgrade from 1.21 to\n1.22 and check by running 'system kube-upgrade-abort' command after\nupgrading control plane from k8s 1.21.8 to 1.22.5 and verify upgrade\naborted successfully.\n\nCloses-Bug: 2038341\n\nChange-Id: Ibeafe4a15e88cc211a747e90b05ef652aa3b168b\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add separate resolv file for kubelet\n\nThis commit adds a separate resolv file (\"/etc/resolv.conf.k8s\") to be\nused by kubelet, which only contains a public dns server, so should\navoid any loops with coredns.\n\nOnce /etc/resolv.conf is automatically updated with the cluster IP,\n/etc/resolv.conf.k8s should be managed by sysinv/puppet, and contain\nonly the user-specified nameservers.\n\nStory: 2003909\nTask: 27082\nChange-Id: Ie6e676a4248991da60ea84e725507ec19191f874\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Kubernetes upgrades support (continued)\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add certificate_renew api\n\nThe api trigger sysinv to get and verify specified certificate to renew.\nCurrently, admin-endpoint-cert is the only certificate type that is\nsupported.\n\nAlthough the caller may have the certificate data ready, but currently\nthere is no way to pass data directly from sysinv api to puppet manifest\nconfig.\nThe design is to let the sysinv get certificate data from k8s secret,\nwhere it is stored.\n\nStory: 2007347\nTask: 39960\n\nDepends-on: https://review.opendev.org/#/c/733660/\n\nChange-Id: Ia971bd7da86f2fdb2770fac2f0b9eb4bbae50ea9\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Provide helm chart for containerized Barbican service\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Cloud configuration\n\nCleanup the keystone bootstrap endpoints on the sub-clouds\n\nStory: 2004766\nTask: 30107\n\nChange-Id: I5231dad791202b7c1653aab90932955eed6d0820\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add MGMT interface presence checks in firewall config generation code\n\nThis change adds code that checks if a management interface exists\nbefore generating the corresponding firewall configurations for it.\nThis covers corner case when admin network address pool is deleted\n(which triggers get_host_config) as runtime manifest must run on this\ncondition. The problem would not happen if mgmt/cluster-host were\nassigned to non-virtual interface before the admin addrpool deletion,\nbut this commit will at least ensure that an exception won't happen.\nTwo additional unit tests were included to cover the cases.\n\nTest plan\n\nThe changes are covered by the added unit tests.\n\nCloses-Bug: #2028302\n\nChange-Id: Id3f926258f7527aaf9490f563c33476eb40901da\nSigned-off-by: Lucas Ratusznei Fonseca <lucas.ratuszneifonseca@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add notices on Intel authored files.\n\nStory: 2005265\nTask: 30083\n\nChange-Id: Ibcae6539747beb9d641e7d5eef4c4ff7574a8b13\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix unable to create vm with GPU/Crypto passthrough devices\n\nclass_id should not be included passthrough_whitelist for helm\noverrides and nova.conf\n\nVerified both QAT and GPU passthrough VM created successfully\n\nCloses-Bug: #1824831\nChange-Id: Ie045e4dfb3ffde58dedfc99311a1073fb3b8dee3\nSigned-off-by: zhipengl <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move the image specification to the armada manifest\n\nThis commit updates to move the image specification from\noverrides generation to armada manifest and get the download\nimage list from both overrides files and armada manifest.\n\nStory: 2005350\nTask: 30312\nChange-Id: Iea17a516c53cce4a0baaef684aa3c6cf6b3eff28\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix tox pep8 errors of type E722 in sysinv\n\nRemove the skip clause for E722.\nFix the offending errors. This should not affect the logic of the code.\n\nE722: \"Do not use bare except\".\n\nThe aim here is to be as specific as possible with the exceptions\nwhile still catching all the exceptions we would previously expect.\n\nStory: 2002888\nTask: 23161\n\nChange-Id: I41bc36a74f997fc25dd2192e85b8867e26011c96\nSigned-off-by: Mathieu Robinson <mathieu.robinson@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Eliminate references to old cert manager versions\n\nThis commit removes references to old cert manager in sysinv.\nThe old references are no longer supported with the new version of\ncert manager in the fluxcd application tarball.\n\nTest Cases:\n\nPASS: Ensure new issuer and certificates are created in cert manager\n      when updating the system's kubernetes root ca certificate.\n\nChange-Id: I379a30491ed2754534fbb0ac376db56a734b23aa\nStory: 2009837\nTask: 45105\nDepends-on: https://review.opendev.org/c/starlingx/ansible-playbooks/+/838591\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove AODH and Gnocchi service parameters\n\nRemoves the aodh service parameter alarm_history_time_to_live\nRemoves references to aodh and gnocchi from puppet and upgrade code.\nRemoves old gnocchi references from remote logging.\n\nStory: 2004764\nTask: 30537\nChange-Id: I3a03dd4a2afd47f1cc3f677f02d348eabf11a653\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Stein: Remove ceilometer transformer support\n\nIn Stein transformer support was removed from master as data\ntransformation is no longer the responsibility of Ceilometer. This\nupdates the pipeline configuration in the armada manifest to align with\nwhat is expected upstream.\n\nChange-Id: Ia4fc58ef0d99ce07fc23cb9bc7eafce95489988a\nStory: 2004751\nTask: 28895\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cert Manager not upgraded in certain upgrade paths\n\nCert Manager is excluded in 65-k8s-app-upgrade.sh for\nupgrade from 21.12 to 22.12, but should be included for 22.06\nto 22.12 upgrade. This is because the dedicated cert manager upgrade\nscript 64-upgrade-cert-manager.sh handles the 21.12 to 22.12\nupgrade, and does not run for the 22.06 to 22.12 upgrade.\n\nTest Cases:\n\nPASS: Perform platform upgrade on a single node system. Ensure\n      cert-manager is running the new version after upgrade-activate\n\nCloses-Bug: 1999801\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\nChange-Id: Ib77c6f84900c00697654035585f4888e2525a40c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update puppet ceilometer upgrade dependency on service identity\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph for standard: System Inventory CLI, API, DB\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1, 2 node and Standard configurations.\n\nThis commit enables CEPH on a standard configuration without dedicated\nstorage nodes by allowing users to add the 3rd Ceph monitor to a worker\nnode. It implements the functional part of this feature.\n\nDetails:\n* Improve Ceph Monitor CLI to allow adding and deleting Ceph monitors\n* Refactor Ceph Monitor API handling code;\n* Add status and task DB column for ceph_mon table;\n* Apply puppet manifests when a Ceph monitor is added through CLI or API\n  at runtime on all nodes;\n* Monitor manifest application status and report back puppet apply\n  status on controllers;\n* Delete monitor when worker is deleted;\n* Add monitor for storage nodes;\n* Minimal semantics.\n\nChange-Id: Ie316bb611a006bbbc92ac22c52c3973cc9f15109\nCo-Authored-By: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 28723\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add bond option primary_reselect\n\nThis update is to allow the option primary_reselect configurable for\naggregated ethernet interface. The option is to prevent reverting\nbetween the primary slave and other slaves.\n\nStory: 2008706\nTask: 42057\n\nChange-Id: Icacc0bd2d5e42bf2e5db1505fd676c628dbe3ed1\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Uprev the SR-IOV device plugin to the latest version\n\nThis is intended primarily to pick up support for SR-IOV\naccelerators.\n\nThere is a subtle config file change required by the latest\nSR-IOV device plugin in which the 'isRdma' field is moved\nto a selector.\n\nThis would only affect containers using Mellanox SR-IOV\nVFs with DPDK.\n\nUnit tests for sriovdp configuration have also been added\n\nTesting has been performed as follows:\n\nSystem Types:\n    AIO-SX, Standard\nCluster network types:\n    IPv4, IPv6\nNIC types:\n    82599ES 10-Gigabit [10fb],\n    MT27710 Family [ConnectX-4 Lx] [1015],\n    X710 for 10GbE [1572]\nIPAM types:\n    host-local,\n    calico,\n    dhcp,\n    static\nConnectivity between pods:\n    DPDK,\n    netdevice\n\nDepends-On: https://review.opendev.org/730695\nStory: 2006740\nTask: 39609\nChange-Id: I4e41b06b03e80f3203053e26c30af313c98fcb01\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update panko api configuration in Armada manifest\n\nPanko API is not actually working due to the default api configuration\ndoesn't work with stein Panko. This commit updates the Armada manifest\nto override it.\n\nChange-Id: Ic75a92bd95ab6a7300f9ac7c2562d3ff07a2ef6a\nCloses-Bug: 1836636\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Optimize the installation of ceph-pools-audit\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Helm Cinder support multiple Ceph backends\n\nCurrenty sysinv generates overrides only for default and backup\nCeph pools. Adding a new Ceph storage backend does not make it\navailable to stx-openstack application.\n\nIterate all Ceph storage backend and create corresponding\nCeph pool overrides which are then used by Cinder Helm\nchart to setup Cinder configuration and pool access.\n\nChange-Id: I2ca84406238e6c7462709822b303e25176fb9c8a\nDepends-On: I29c7d3ed118f4a6726f2ea887a165f256bc32fd5\nStory: 2003909\nTask: 30351\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial framework and unit tests for puppet plugins\n\nIntroduces base classes and utilities for setting up the system\nin specific configurations that are suitable for testing different\ndifferent system and host configurations.\n\nThe base classes are used by a new set of Puppet plugin unit\ntests to improve the test coverage of the puppet plugins.\n\nAdditional unit tests will be required to test specific features\nof each plugin that is domain specific or based on a specific\ndeployment configuration.\n\nAlso includes a required change for Python 3 compatibility to\npermit py35 tox tests to pass.\n\nChange-Id: Id4aa51ce1a8b66987d6f74a8994f989800243b61\nStory: 2005939\nTask: 35947\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enabling simultaneous platform and containerized horizon access\n\nRenaming the session and CSRF cookies on the containerized\nhorizon so they don't conflict with platform horizon\n\nChange-Id: I24eaa5f0563baa148bfaef24325af89f177dc0b0\nStory: 2004520\nTask: 28259\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Change the way of disabling ovs container\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove ceph-mon port from URL\n\nChanged _format_ceph_mon_address to just use the ip_address for Ceph\nmonitors. This is necessary to enable msgr2.\n\nTest plan:\n\nPASS: Install on AIO-SX, AIO-DX, Standard and Storage configs\nsuccessfully and without alarms (fm alarm-list) or ceph warnings\n(ceph -s)\nPASS: platform-integ-apps is applied successfully\n\nStory: 2009074\nTask: 43466\n\nSigned-off-by: Delfino Curado <delfinogomes.curadofilho@windriver.com>\nChange-Id: I3b2e4bf937f6d2ed47c279935020232eaf0ee88d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable ipv6 autoconf\n\nThis commit disables ipv6 autoconf for all interfaces.\nThis is necessary in order to prevent invalid routes from setting the\ndefault route on worker nodes, which will cause them to not go ready.\n\nCloses-bug: 1844192\nChange-Id: I1f397b1b050854a83b37b75085f0ded80716be0a\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move nova static configs to Armada manifest\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart kubelet after hugepage allocation\n\nOn AIO systems, kubelet is launched prior to the application\nof the worker puppet manifest. However, in some cases, the\nhugepage allocation is occurring as part of this manifest\napplication, and kubelet does not have these hugepages in\nits availability.\n\nTo address this, the kubernetes manifest is updated to define\na refresh dependency against the hugepage allocation on AIO,\nin order to restart kubelet if needed.\n\nChange-Id: I3289b83fb5bf93553b786694a153be84a97ebe8d\nCloses-Bug: 1830927\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configurable Host HTTP/HTTPS Port Binding\n\nIn order to avoid conflicts with containerized services\nbinding to standard HTTP (80) / HTTPS (443) port numbers,\nthe default port numbers are changed to 8080 and 8443.\nFurthermore, CLI commands are provided to allow binding\nto alternate port numbers.\n\nList of changes:\n. Add service parameters for HTTP and HTTPS port\n. Configure the lighttpd ports via puppet and use port\n  8008 for platform horizon\n. Add http port to platform.conf for the config scripts\n. Support helm repo URL update\n. Add helm-toolkit plugin for location override\n. Override Armada manifest location\n. Add installer base URL option to pxeboot-update\n  script\n. Add a patching run time class to restart patch-agent\n  when the port config is changed\n. Add a semantic check to block port config when a\n  patching operation is in progress or a host is not\n  in unlocked/enabled state\n\nCLI commands for viewing and updating port numbers are:\nsystem service-parameter-list --service http\nsystem service-parameter-modify lighttpd port http=8090\nsystem service-parameter-apply  lighttpd\n\nTests Performed:\nNon-containerized deployment installation and sanity\nAIO-DX: Sanity and Nightly automated test suite\n2+2 System: Sanity and Nightly automated test suite\n2+4+6 System: Sanity and Nightly automated test suite\n\nKubernetes deployment on VBox:\nAIO-SX: application apply and launch instance\nAIO-DX: application apply and launch instance\n2+2 System: application apply and launch instance\n\nHTTP/HTTPS port configuration\nEnable/Disable https\n\nStory: 2004642\nTask: 28592\n\nChange-Id: I65029e0c15aaf626acb56ab71e7bbde64c7e76a8\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial kubernetes config on compute\n\nSupport the deployment of kubernetes on compute hosts. If the\n\"--kubernetes\" option was given for the config_controller command,\nkubernetes will be configured on all compute hosts.\n\nUse a config file when calling kubeadm init, instead of passing\ncommand line parameters.\n\nChange-Id: I43cadd8311280a3e7fd64d637991b4dc046a21ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set cinder default_volume_type via service parameters\n\nService Parameter support added for setting cinder.conf parameter\nDEFAULT/default_volume_type.\n\nChanges include:\n - Added service parameter cinder/DEFAULT/default_volume_type with\n   checks to verify that the provided value is a currently defined\n   volume type and multiple values are not provided. The cinder API is\n   queried to get a list of acceptable values.\n - The service parameter is not required to be present. It is optional,\n   but we maintain behavior from past releases which sets the default\n   volume type to 'ceph' if the ceph backend in present.\n - If the ceph backend is present and the service parameter is present,\n   the service parameter takes precedence.\n - The cinder.pp manifest is updated to provide a service_parameter\n   runtime class that applies the cinder.conf changes for SAN backend\n   sections and the DEFAULT section.\n - puppet-cinder is updated to remove the default_volume_type from the\n   cinder::api class. This allows us to set the parameter as part of a\n   targeted runtime class and during the ::openstack::cinder main class.\n   To upstream this we should create cinder::default_volume_type\n   class (like the cinder::backends class) to enable setting this as\n   needed.\n\nChange-Id: I64e61cdc28efd327f34fa74bb2bea645458f6d6e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Nova Helm Chart Override Generation\n\nThis commit adds stx-nova's required helm chart overrides to sysinv.\nThese are based on nova.conf options previously created by puppet nova\non the controllers and computes.\n\nSome notes on general overrides:\n- filter_scheduler/enabled_filters: same as sysinv/puppet/nova except\n    drop RamFilter and CoreFilter to align with upstream nova change.\n    Also don't include AggregateProviderNetworkFilter until we've got\n    a little further in integration and can test it out first.\n- DEFAULT/instances_path: openstack-helm nova effectively defaults this\n    to /var/lib/nova/instances.  To avoid openstack-helm customization,\n    we'll adopt this location as well therefore no need to set this\n    option.\n- upgrade_levels: openstack-helm sets this to compute=auto.  We need to\n    reset to None or else it interferes with stx-nova extension that\n    disables various nova commands if an upgrade is in progress.\n- libvirt/virt_type: set based on sysinv api, is_virtual().  If true\n    then qemu, else kvm.  The puppet code supports virtual kvm as well\n    but since that depends on local host information, we currently\n    can't do it on the active controller.  As this feature is not\n    productized, we'll leave it out for now.  Would need sysinv work to\n    pull this into the db.\n\nPer host overrides:\n- DEFAULT/vcpu_pin_set: cpus with VM function\n- DEFAULT/shared_pcpu_map: cpus with SHARED function\n- DEFAULT/my_ip: ip address of host: infra if configured otherwise mgmt\n- DEFAULT/compute_*_pages: per NUMA page configuration for various\n    (vm_4K, vswitch_1G, vswitch_2M) memory page sizes.  This allows us\n    to remove /etc/nova/compute_extend.conf and avoid an openstack-helm\n    customization to access the file into the container.\n- DEFAULT/concurrent_disk_operations: based on local storage\n    configuration (default 2)\n- libvirt/live_migration_inbound_addr: set to <hostname>-infra\n- libvirt/images_type: based on local storage (default or rbd, lvm not\n    support in containerized stx)\n- libvirt/images_rbd_pool: set if remote storage - default to ephemeral\n    unless external ceph\n- libvirt/images_rbd_ceph_conf: set if remote storage - default to\n    /etc/ceph/ceph.conf unless external ceph\n- vnc/vncserver_listen: depending on ipv4 or ipv6 set to 0.0.0.0 or ::0\n\nOpenstack-Helm overrides:\n- disable cron jobs cell setup (which discovers new hosts) and service\n  cleaner (which deletes down nova compute services) as these functions\n  are handled by sysinv/vim in starlingx\n- update endpoint config to use keyring passwords for nova, placement,\n  neutron and ironic\n\nStory: 2003909\nTask: 27081\nChange-Id: If56de05bc52d518be1cff824383fdb4f67b05313\nCo-Authored-By: Robert Church <robert.church@windriver.com>\nCo-Authored-By: Chris Friesen <chris.friesen@windriver.com>\nSigned-off-by: Gerry Kopec <Gerry.Kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reconfigure VIM after application install\n\nWhen an application is successfully installed with armada,\nreconfigure the VIM so that it can manage the newly\ninstalled application (if necessary). This is done by\ndoing a runtime application of the VIM's puppet\nmanifest.\n\nChange-Id: Id43f633d0571fa328410fcf8392a172abadf0e4f\nStory: 2003910\nTask: 27852\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move gnocchi and ceilometer static configs\n\nMove all gnocchi and ceilometer static configurations from the\noverrides to the Armada manifest.\n\nThis is being done so we have a consistent way of managing\ncontainerized openstack configurations. Static configurations will\nbe located in the Armada manifest and dynamic configuration will be\nlocated in the overrides files.\n\nStory: 2003909\nTask: 29535\n\nChange-Id: Ieab861cb1751146b70f722e70b8f89d81c0ed9a5\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix application-apply of stx-openstack on simplex\n\nThe application-apply of the stx-openstack application on\nsimplex configurations has been failing since the barbican\nchart was added to the application. The failure was due\nto lost node status messages from the kubelet to the\nkube-apiserver, which causes the node to be marked\nNotReady and endpoints to be removed.\n\nThe root cause is the kubernetes bug here:\nhttps://github.com/kubernetes/kubernetes/issues/74412\n\nIn short, the addition of the barbican chart added enough\nnew secrets/configmaps that the kubelet hit the limit of\nhttp2-max-streams-per-connection. As done upstream, the\nfix is to change the following kubelet config:\nconfigMapAndSecretChangeDetectionStrategy (from Watch to\nCache).\n\nChange-Id: Ic816a91984c4fb82546e4f43b5c83061222c7d05\nCloses-bug: 1820928\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow subcloud to use central-cloud's local registry\n\nAdd the following to setup the environment which allows the subcloud\nto use central-cloud's local registry via the OAM interface\n\n - controller_config:\n   copy registry.central certificate from the shared directory to\n   docker certificate directory\n\n - worker_config:\n   copy registry.central certificate from the shared directory to\n   docker certificate directory\n\n - sysinv:\n   Add a new network type for system controller OAM network\n   Retrieve the system controller's OAM floating IP address\n   from DB and populate the hiera record for dnsmasq\n   Add a public URL encoded address for haproxy\n\nDepends-On: https://review.opendev.org/#/c/690082/\nChange-Id: Ibbc7f0ed84679a3ced3a9fee712bd1da5865f213\nPartial-Bug: 1846799\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust the ceph mon IP for simplex k8s installs\n\nFor simplex installs, the loopback interface is assigned the host's mgmt\naddresses. The ceph monitor address for a host is the host's mgmt\naddress. A k8s pod that needs to access the external ceph cluster\nrequires the ceph monitor IP to be accessible from within the cluster.\n\nBecause the pod would use the host's mgmt address (i.e. a loopback\naddress), the ceph/rbd client within the pod will fail to communicate to\nthe monitor.\n\nMove the ceph monitor to the OAM address so that it is accessible from\npods within the k8s cluster.\n\nChange-Id: I551dc33c51c1ed42d2e558b303d67618609c6d56\nStory: 2002844\nTask: 26877\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Standby controller in reboot loop after modifying the partition size\n\nThe root cause of this issue is that when the newly standby controller\nis coming up, the partition manifest calls \"sm-unmanage / sm-manage\"\nfor drbd-cinder service. However at this time /var/run/sm.db is not\navailable yet which causes \"sm-unmanage / sm-manage\" to fail.\n\nThis commit adds a check in the partition puppet file that only\nif the system is up \"sm-unmanage\" and \"sm-manage\" will be called.\n\nChange-Id: I1869f024579350265684f2ee3bb5e3e74e6427cb\nCloses-bug: 1809009\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix in-service re-sizing of docker-lv\n\ndocker-lv is an XFS file system. Add support for re-sizing XFS\nfilesystems by using blkid to query the file system type and call\nxfs_growfs for XFS filesystems. Maintain the current behavior by calling\nresize2fs for all non-XFS file systems.\n\nChange-Id: If5de15d232c66e99f7f5c752d96ef92674dafb1d\nStory: 2002876\nTask: 26864\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add replica and anti-affinity settings\n\nAdd anti-affinity settings to openstack pods. Add replication to\nnovncproxy, aodh, panko and rbd_provisioner services.\n\nChange-Id: I8091a54cab98ff295eba6e7dd6fa76827d149b5f\nStory: 2004520\nTask: 29418\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove sriov_vfs/reported # of VFs from hieradata\n\nThe original fix of https://bugs.launchpad.net/starlingx/+bug/1931458\nmade the parameter 'num_vfs' of hieradata to be used solely to retain\nthe user configuration and added a new parameter 'sriov_vfs' to store\nthe value of actual number of VFs reported from device by sysinv. It was\ndone in this way to avoid the report overwriting the user configuration\nin race conditions.\nHowever, it was noticed during patch removal procedures that once the\nhieradata had this parameter added by later FEC configuration, after the\npatch was removed the parser started to claim about the unknown parame-\nter 'sriov_vfs'.\nSince that parameter was added just to keep the reported number of VFs\nstored in hieradata (like before when used the 'num_vfs' parameter) this\nchange removes such \"debugging\" parameter to avoid patch removal issues.\n\nCloses-Bug: #1931458\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: Ib37d3b29ec029b98ab12017be8af8e5698d2a5c8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Collapse glance into platform in ControllerFS API\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle N3000 FPGA reset\n\nA recent commit (6d639fca5d) was introduced that resets any Intel\nN3000 FPGA devices on startup.  After an FPGA reset, it is possible\nthat the PCI addresses of the underlying FEC device may change, in\naddition to the resetting of any configured drivers and SR-IOV VF\nconfiguration on the FPGA FEC and NIC devices.\n\nTo handle the reset, it is required to do the following:\n\n- Do not allow a user to configure an FEC device before the first\nunlock (to allow the reset to occur).\n\n- Delay the configuration of FEC and NIC devices until the reset\n  has occurred.\n\nStory: 2006740\nTask: 39947\n\nChange-Id: I6ef8225cce5bf2d4f0ded2e20b6375504a05e587\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove support for helmv2 database migration\n\nThis change removes the helmv2 database migration from the upgrade\nprocess. It aims to equalize the upgrade behavior across simplex and\nmultinode loads.\n\nThe helmv2 database migration was removed from simplex upgrades on this\ncommit: https://opendev.org/starlingx/ansible-playbooks/commit/a6d51ad9bb854fe14a130e9e2e36fe09ec67947b\n\nIn addition to that, the references to the helmv2 database need to be\nremoved from controllerconfig and sysinv in order to fully remove its\nsupport and prevent it from being migrated on multinode scenarios.\n\nThis will only have effect for upgrades from stx-9 onwards as\nthe code changed is executed during the upgrade-start phase.\n\nTest Plan:\nPASS: build-pkgs && build-image\nPASS: Check if AIO-SX fresh install was not affected\nPASS: Check if AIO-DX fresh install was not affected\n\nStory: 48480\nTask: 2010560\nChange-Id: I45568ddc05d6f8f1450bac752b9cb79e0fab5f79\nSigned-off-by: Igor Soares <Igor.PiresSoares@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add cert-alarm service\n\nThis is a new service being added to alarm expiring certificates.\nThe service will run on all active controllers.\n\nInitial commit is just the skeleton structure. Tested by installing\nan ISO image and new service comes up under 'smc service-list'.\n\nStory: 2008946\nTask: 42852\n\nDepends-on: https://review.opendev.org/c/starlingx/ha/+/801118\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/801117\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: I8ee12db6903bd2d29230e4adf9f1823b3d4655ee\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix k8s firewall blocks docker proxy port\n\nAllow docker proxy port(s) in k8s firewall. It unblocks worker\nnode to access proxy via controller. As a result, worker node can\nsuccessfully pull k8s/calico images through proxy.\n\nDuplex: docker proxy port correctly added in iptables SNAT rule\n2+2: docker proxy port correctly added in iptables SNAT rule\n2+2 without proxy: pass, no regression issue\n\nCloses-Bug: #1817723\nChange-Id: I7a8093a1fdce0089e5d0a9483a5c58184d1e213e\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Decouple Fault Management from stx-config\"",
        "issue_summary": ""
    },
    {
        "commit_message": "k8s upgrade networking before first controller\n\nWhen upgrading kubernetes we want to upgrade the containerized\nnetworking components first before upgrading the first controller\nto the newer version of kubernetes.\n\nThe main reason for this is that newer versions of the containerized\nnetworking components are tested with older versions of kubernetes,\nbut when new versions of kubernetes come out they are not tested\nwith older versions of the containerized networking components.\n\nBy upgrading the containerized networking components first we stay\non the tested combinations as much as possible.\n\nThe new ordering will be to download the docker images, then\nupgrade networking, then the first controller, then the second\ncontroller, then upgrade kubelet on each node.\n\nStory: 2008972\nTask: 43063\nChange-Id: Ia8121e0a23d570d4060a4b9fa715c1891c558268\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set the correct memcached server in puppet ceilometer\n\nThe existing memcached server address configured in puppet ceilometer\ncannot be recognized by memcached in an ipv6 system, this causes the\nfailure of caching ceilometer resource metadata.\nThis update is to correct the format of memcached server configured in\nceilometer puppet for ipv6 system.\n\nCloses-Bug: 1790662\n\nChange-Id: Icfdcb688cb0740d10c5d970e53564680e75058e9\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "create config for sm-api\n\n1. create smapi service endpoint, credential\n2. create sm-api.conf for sm-api configuration\n3. configure haproxy, so sm-api binds to mgmt fixed ip, with haproxy:\n    mgmt fixed ip -> mgmt floating ip -> oam floating ip\n\nStory: 2002827\nTask: 22744\n\nChange-Id: I743f6b0f09c06325d3c9dc6e11902420882e7931\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove stale alarms in k8s apps upgrade script\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update rbd-provisioner replicas based on installed controllers\n\nCurrently the number of rbd-provisioner replicas is driven by the\nstx-openstack application's 'openstack-control-plane' labels.\n\nOn systems where this label has not been applied to the controllers,\nthis will result in zero provisioners being installed.\n\nBreak the dependency on the stx-openstack app and set the number of\nreplicas based on the number of installed controllers as the\nrbd-provisioner node selector will install in k8s masters (i.e.\ncontrollers).\n\nAlso update the provisioner's storage-init pod to align with the same\nnode selection criteria as the rbd-provisioner pod.\n\nChange-Id: Ida180fd12a4923c8cdd5bccf25a1a1e2af4f8a90\nCloses-Bug: #1830290\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce dynamic loading of puppet plugins\n\nThis commit refactors puppet plugin handling, changing it so that\npuppet plugins are loaded dynamically through stevedore, rather than\nstatically from a hard-coded list.\n\nThis enables the dynamic loading of third-party puppet plugins, with\nstevedore loading all puppet plugins from the\nsystemconfig.puppet_plugins namespace, sorted by plugin name in\nsetup.cfg.  The intent is that these plugin names will include a\nnumerical prefix (e.g. 001_) to allow controlling the plugin order.\n\nThese puppet plugins should be subclasses of the class\nsysinv.puppet.base:BasePuppet, and override the appropriate methods as\nrequired.\n\nExisting puppet plugins will be moved to use this approach in a\nsubsequent commit.\n\nStory: 2003194\nTask: 23350\nChange-Id: I24294ca9cb87dcee75d1cfb419f96e12806783ce\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix run_docker_login DNS lookup to handle misconfigured nameservers\n\nA customer added a non-existant nameserver and it resulted in an edge case\nthat broke the previous code.  (dig returned 9 even though it found an\nAAAA record for the name.)\n\nIt looks like we're going to need to bite the bullet and explicitly issue\nseparate requests for IPv4 and IPv6.\n\nPartial-Bug: 1886121\nChange-Id: I8d653a82a2aee0a86af587f6392277974c9f1fef\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Sysinv. Cleanup import statements for pep8\n\nconcurrency is now set to 5 in .testr.conf\nunit tests are no longer bandit checked\nUnused imports are now excluded.\nNote: storage_backend uses eval to dynamically invoke certain calls,\nso those imports are flagged noqa\n\nChange-Id: I6b0027072d18e1295798fa9ae355175772be8962\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integration with latest SR-IOV CNI images\n\nAs part of the ongoing development of the sriov-cni and\nsriov-device-plugin, the DPDK NetworkAttachmentDefinition\nconfiguration options have been deprecated.\n\nPreviously, we used this functionality to have the sriov-cni\nplugin perform the device bind from netdevice (kernel) to\nvfio (userspace), and simply set sriov-device-plugin\ndeviceType configuration parameter to 'netdevice'.\n\nGoing forward, we must add a mechanism for a user to define\nthe deviceType at the interface configuration level.  This\nmeans an SR-IOV enabled device can no longer have a mix of\nnetdevice, vfio chosen by the NeworkAttachmentDefinition.\nThat is, it must be determined by the user beforehand which\ntype of virtual function driver (kernel or DPDK) a device's\nVFs should have.\n\nThis commit includes the cgtsclient, API, DB and puppet\nrelated changes required for a user to set the VF driver type.\n\nIn terms of the cgts-client, the following parameter has been\nadded: --vf-driver.  Example usage for a device intended to\nbe used with a DPDK application is as follows:\n\nsystem host-if-modify -m 1500 -n sriov0 -d ${DATANET} \\\n  -c pci-sriov -N ${NUM_VFS} --vf-driver=vfio ${WORKER_NAME} \\\n  ${INTERFACE_UUID}\n\nIf the user does not specify a vf-driver, the default device\ntype will remain as it is today as 'netdevice'.  The user can\nalso choose to explicitly set the --vf-driver to 'netdevice'\nfor the same effect.  In this case, a check is made to ensure\nthe VF driver has been detected and reported by the sysinv\nagent.\n\nStory: 2005208\nTask: 33485\nCloses-Bug: 1829565\nChange-Id: I8f6f27b79c7fafa03873e71473f7694991142e50\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "remove flag fault_management_pod_disabled\n\n\"fault_management_pod_disabled\" is a provisional flag using to\nstop vim raising alarms/logs to containerized fm. It should be\nremoved when containerized fault management is ready.\n\nDepends-On: https://review.opendev.org/#/c/642925/\nChange-Id: Id4c2035c255203944ba92b1db055b3b674a5fa97\nStory: 2004008\nTask: 36294\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Constants and common function for rook-ceph application\n\nStory: 2005527\nTask: 39071\n\nChange-Id: I1ee4f67325af69cf9f5722597e387aec6b624618\nSigned-off-by: Martin, Chen <haochuan.z.chen@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove img-conversions and gnocchi platform logical volumes\n\nThese two partitions are no longer needed in a k8s deployment.\nBoth of them are now managed by the openstack application.\n\nChange-Id: Id342c3eafc839a268683ff369353cf4a5f23027d\nStory: 2004695\nTask: 30052\nDepends-On: https://review.openstack.org/#/c/639246/\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable all non-essential openstack services in a kubernetes config\n\nAll openstack services except keystone has been disabled when the initial\nsystem is configured using the --kubernetes option. This includes openstack\nservices running on the controller as well as the ones running on\ncompute nodes.\nSeveral unlock semantic checks for compute nodes including the requirement to\nprovision data interfaces prior to unlock have also been removed in the\nkubernetes configuration\n\nChange-Id: I555a62ac621d26217928d2522eb631fe9bb1f906\nStory: 2002876\nTask : 26168\nSigned-off-by: Shoaib Nasir <shoaib.nasir@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "py3: Fix base64 usage\n\nb64encode and b64decode returns a str in Python2 and a\nbytes in Python3. This is a problem when using http/url/rest\nlibraries. Runtime errors are raised. Mixing str and bytes when\nformatting a text might introduce an unwanted \"b\" for bytes, which can\nlead to potential issues when sent over the network.\n\nTo keep compatibility use oslo_serialization to force the\nreturn type to str.\nThere is one place where base64 urlsafe version is specifically used to\nsend and receive(Rest API for application upload).\n\nOne of the tests is that platform-integ-app applies which exercises part\nof the changes.\nCert-mon and DC part will be exercied when DC is available on f/centos8\nbranch.\n\nStory: 2006796\nTask: 42797\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: I48b1c6c80363458945c6bc1a9cf7e16c743a7bd6\n(cherry picked from commit 8a7c4b15c7203e4410f100a1dc01f165ddaf0f18)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Changes from new data model\n\nBecause of redesign of PTP data model done in:\nhttps://review.opendev.org/c/starlingx/config/+/819391 and extended by\nhttps://review.opendev.org/c/starlingx/config/+/820519 and\nhttps://review.opendev.org/c/starlingx/config/+/820961\nthe API and related code had to be changed in order to support the\nnew relationships among tables, the updated workflow of configuration\nand so on.\nSome unnecessary code was removed for bridge tables that don't need it.\n\nTest Plan:\n\nPASS: New and updated test cases for the PTP configuration workflow.\nPASS: Fresh install with commands being executed to populate tables.\n\nRegression:\n\nPASS: All unchanged test cases related to PTP.\n\nStory: 2009248\nTask: 44208\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: Ib1fa0a044bfc1a4573084f32d8993f4d4cc2539c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker Registry Keystone Authentication\n\nThis commit adds functionality for Docker registry to authenticate\nusing Keystone.\n\nFirst, this commit contains puppet changes which are required to\nmanage the new token server required for Keystone authentication.\n\nSecond, with proper authentication now implemented, we are removing\nthe \"insecure\" flag for the controller registry in the \"daemon.json\"\nfile in \"/etc/docker\".\n\nWith the \"insecure\" flag removed, Docker will start complaining about\ncertificate issues. This commit also includes generation of default\ncertificates suitable for use by Docker registry as well as a sysinv\ncommand \"system certificate-install -m docker_registry\" to update the\ncertificate.\n\nDocker registry token server works only with PKCS1 style keys while we\nwould like to use PKCS8 keys by default. This is why our default\ncertificate and installed certificate create both a PKCS1 style key as\nwell as a PKCS8 style key. The keys are installed to\n\"/etc/ssl/private/\" as registry-cert.crt, registry-cert.key, and\nregistry-cert-pkcs1.key.\n\nStory: 2002840\nTask: 22783\nDepends-On: https://review.openstack.org/#/c/626354/\n\nChange-Id: I0127bd5f10f3950739678929b92eb1b77e2119db\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch 'starlingx/master' into HEAD\n\nChange-Id: I7041af39932e8552bd8851f09d58c0642cad5fe9\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Fix failure on multiple clock instances\n\nThis review corrects an issue where hieradata generation would fail if\nthere are multiple 'clock' type instances configured. The fault was\nbeing caused by altering the ptp_instances list while iterating through\nit. This change now instead creates a new list called\nptp_instance_configs to hold the non-clock type instances.\n\nTests:\n\nPASS: AIO-SX, deploy networking.py and test creation of multiple ptp4l, phc2sys,\nts2phc and clock instances.\n\nPASS: Test removal of instances.\n\nStory: 2009130\nTask: 44745\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I5e953a11771d224d92ae5b5f2a7a62e69a1c6a15\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SR-IOV runtime manifest apply\n\nWhen an SR-IOV interface is configured, the platform's\nnetwork runtime manifest is applied in order to apply the virtual\nfunction (VF) config and restart the interface.  This results in\nsysinv being able to determine and populate the puppet hieradata\nwith the virtual function PCI addresses.\n\nA side effect of the network manifest apply is that potentially\nall platform interfaces may be brought down/up if it is determined\nthat their configuration has changed.  This will likely be the case\nfor a system which configures SR-IOV interfaces before initial\nunlock.\n\nA few issues have been encountered because of this, with some\nservices not behaving well when the interface they are communicating\nover suddenly goes down.\n\nThis commit makes the SR-IOV VF configuration much more targeted\nso that only the operation of setting the desired number of VFs\nis performed.\n\nCloses-Bug: #1868584\nDepends-On: https://review.opendev.org/715669\nChange-Id: Ie162380d3732eb1b6e9c553362fe68cbc313ae2b\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move kubernetes pod network to avoid conflict\n\nMoving the pod network to 172.16.0.0/16. The default subnet is\n192.168.0.0/16, which conflicts with the default management\nnetwork subnet and causes problems for networking between pods\non different hosts.\n\nStory: 2002843\nTask: 22789\n\nChange-Id: I2cedfc86af52999e8755304099e19e66e3b94428\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Change SM Port scope to handle AIO config.\n\nThe mtc.ini file is updated a second time in AIO config.\nDue to the scope of the SM ports being for controller only\nand no defaults we see the sm port assignments missing in\nAIO configs.\n\nThis update defaults the SM port numbers and changes the scope\nof the parameters so that they get set on all node types for\nall system types.\n\nTesting included provisioning an AIO system.\n\nChange-Id: Ib53921c4b59a9e67ed136a03504bdf0775de6dff\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix large number of nginx worker issue\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Tiller upgrade prep\n\nThis commit spawns a new greenthread inside the _start() routing of\nthe conductor. This thread calls the new _upgrade_downgrade_tiller()\nmethod which checks if the tiller image version has changed and if so\nupgrade/downgrade the image. If there is an issue with downloading or\nupdating the new image, the code sleeps for 5 minutes and try again.\n\nRemoves references of the armada image name in sysinv.conf. Image\nversions will be stored in sysinv/common/image_versions.py.\n\nStory: 2006590\nTask: 36725\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\nChange-Id: I3b3037fef25d2b37c98c4dd7e82b405b41a45a23\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add replica and anti-affinity to rbd-provisioner\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Container pinning on worker nodes and All-in-one servers\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Keystone DB sync - update puppet manifest for dcdbsync service\n\nThis commit adds dcorch dbsync sysinv puppet plugin. It also updates\ncontroller manifest to deploy and configure the service, and sm\nmanifest to manage the service. With this commit, dbsync service will\nbe deployed, configured, and started after config_controller.\n\nStory: 2002842\nTask: 22787\n\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n(cherry picked from commit 047eda8ea5c91ac3b71e61737b6cbd239457d117)\n\nConflicts:\n\tpuppet-manifests/centos/build_srpm.data\n\tpuppet-manifests/src/modules/openstack/templates/keystone-policy.json.erb\n\tpuppet-manifests/src/modules/platform/manifests/sm.pp\n\tsysinv/sysinv/sysinv/setup.cfg\n\nDepends-On: https://review.opendev.org/#/c/655903\nDepends-On: https://review.opendev.org/#/c/655757\nChange-Id: I3e361d6751f22ace3600206289dabb8c9d174661\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable HSTS mode on haproxy\n\nEnable HTTP Strict Transport Security (HSTS) mode on haproxy.\nAdd HSTS header to responses whenever ssl is enabled on haproxy ports,\nwith max-age to match lighttpd responses on port 443.\n\nChange-Id: If8603979ab488ed12caf2d81e0f5f70703dd8821\nSigned-off-by: Michel Thebeau <michel.thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet: Fix AIO SX cinder disk replacement\n\nCinder's DRBD is left in \"Inconsistent\" state when a disk\nreplacement is attempted on AIO SX.\n\nThe fix enables DRBD cinder volumes reconfiguration in two cases:\n1) At initial configuration,\n2) When disk is replaced.\n\nA disk replacement is triggered from sysinv by removing\nthe checkpoint file behind is_node_cinder_lvm.\n\nOn SX we have to wait for disk wipe confirmation before\nupdating DB otherwise user may unlock host without wipe\nand operation won't be retried leading to major, possibly\nunrecoverable, problems with cinder-volumes disk.\nIf DB was not updated, operation will be retried on reboot\nensuring that the disk is indeed wiped.\n\nChange-Id: Ia3391b2437d309c71bb525b8167ac55d727b3ab2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove k8s versions older than 1.21\n\nk8s versions older than 1.21 are no longer required. This change removes k8s older versions - 1.18.1, 1.19.13 and 1.20.9\n\nTest-plan: Debian\nPASS: system kube-version-list doesn't show the old versions - 1.18.1, 1.19.13 and 1.20.9\n\nStory: 2010301\nTask: 46416\n\nSigned-off-by: rsivanan <rameshkumar.sivanandam@windriver.com>\nChange-Id: Ia1dc4b105e091e83f3bcf8a5038f40ff4c29a7c1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update hostname for cluster-host\n\nReplaced the parameter for host infra in /etc/hosts with\ncluster-host\n\nStory: 2004273\nTask: 29472\nDepends-On: https://review.opendev.org/#/c/652713/\nChange-Id: I3e017f19fb4e2913e4db0a1933062470063351e8\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update SR-IOV CNI images to StarlingX versions\n\nThis commit updates the SR-IOV CNI and device plugin images to point\nto StarlingX generated stable images rather than those from the\n(previous) nfvpe repo.\n\nThis change allows us more control over the specific version of these\nprojects that will be used in StarlingX.\n\nStory: 2005208\nTask: 33485\nDepends-On: https://review.opendev.org/#/c/661757\nChange-Id: I764c2ef01c24f5e8d29be8eca7e3682752315efc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable nohz_full in a virtual env\n\nIn VirtualBox, after unlock, SM has all of its services\nin 'initial' state.\n\nThe reason for this is that SM will not proceed unless\nit detects there are no timer delays.\n\nThis is particularly noticable for AIO-SX.\n\nBy disabling nohz_full in virtual box, the timers are\nnot delayed and SM is able to start up its services\nmore quickly (5 seconds).  Othwerwise SM initialization\non a 4 core system can range from 10 minutes to 10 hours.\n\nTest Plan:\n  Build/Bootstrap/Unlock Debian AIO-SX on virtualbox.\n\nCloses-Bug: 1890323\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: I94226721d2ccd83a8b0caac09d1c745d4c908ae4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create DataNetworks modelling in System Configuration\n\nIntroduce the DataNetwork api, client, model to allow modelling of the\nphysical data network, with the following attributes:\n   datanetwork_name\n   mtu\n   datanetwork_type (flat, vlan, vxlan)\n   VxLAN specific attributes\n      - port_number\n      - multicast_group\n      - ttl\n      - mode ('dynamic' default, or 'static')\n\nThe system data network may then be assigned to interface.\n\nThis is part of the Story to \"Move neutron provider network modelling\nto system configuration\".\n\nThe interface api is currently made compatible with current usage to\nallow specifying datanetwork (formerly providernetwork).\n\nThe following new CLI commands and corresponding api are exposed:\n    datanetwork-add     Add a datanetwork.\n    datanetwork-delete  Delete a datanetwork.\n    datanetwork-list    List datanetworks.\n    datanetwork-modify  Modify a datanetwork.\n    datanetwork-show    Show datanetwork details.\n    interface-datanetwork-assign\n                       Assign a datanetwork to an interface.\n    interface-datanetwork-list\n                       List datanetwork interfaces.\n    interface-datanetwork-remove\n                       Remove an assigned datanetwork from an interface.\n    interface-datanetwork-show\n                       Show interface datanetwork details.\n\n'system datanetwork-add' must be run where\n    'neutron providernetwork-create'.\n\nTests Performed:\n    AIO Sanity\n    Sanity 2-controller, 2-compute\n    Sanity Storage lab\n    Interface Profile create and apply\n    Containers deployment\n\nChange-Id: I630f90768647dbb414a60978bf8f8f641496afd5\nStory: 2004455\nTask: 28324\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Dynamically load existing puppet plugins\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Duration and subject args to generate-rootca API\n\nSysinv api and conductor changes to allow new k8s rootca generation\nto have its duration and subject configurable by the user on the\nprocedure to update k8s rootCA.\nAddition of optional subject and duration arguments that will allow\nthe user to specify parameters to be set in the subject and/or\nduration field of the new k8s root CA. This modification will\nsupport, for now, the parameters below\n- Organization (O)\n- OrganizationalUnit (OU)\n- Country (C)\n- State/Province (ST)\n- Common Name (CN)\nfor the subject argument and the duration should be specified as\nISO 8601 date only format (YYYY-MM-DD).\n\nStory: 2008675\nTask: 42985\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\nChange-Id: Iefd348c7693baaccd3a04a5bb7a9ddbb68b446a2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add missing PTP parameter boundary_clock_jbod\n\nWhen PTP instances are configured to run in hardware mode, through the\nparameter time_stamping=hardware, another parameter must be added\nautomatically, boundary_clock_jbod=1, otherwise the ptp4l service fails\nto start when the instance is used with multiple NICs.\n\nTest plan:\n\nPASS: ptp4l service starts successfully when running a single PTP\n      instance with two NICs\n\nStory: 2009248\nTask: 44602\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: Id998fc807dc0802cdb85deb858cac821a651a2af\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph for standard: Puppet functional changes\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1, 2 node and Standard configurations.\n\nThis commit enables CEPH on a standard configuration without dedicated\nstorage by allowing users to add the 3rd Ceph monitor to a worker node.\nIt implements the puppet functional part that enables ceph to work on\na standard deployment.\n\nDetails:\n* Update ceph.conf with the new monitor by removing unused ones\n* Reserve space on any worker for ceph-mon-lv, this will make sure\n  that user is able to configure a ceph-mon at any time without the\n  need to extend platform-vg.\n* In System Inventory make sure the correct IP addresses are\n  passed to the puppet yaml's.\n\nChange-Id: I7b8a01a7f2cf18f20e3509c2416f038580b4a071\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 28723\nDepends-On: https://review.openstack.org/629166/\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure /etc/kubernetes/manifests directory exists\n\nEnsure the /etc/kubernetes/manifests directory exists before\nstarting kubelet. This will avoid repeating kubelet logs on\nworker nodes, complaining that the directory does not exist.\n\nAlso removing an unused yum config file for the kubernetes\nrepo.\n\nChange-Id: Id63287481f9fe063f1b8c993d973a4b4517abd81\nStory: 2004520\nTask: 28908\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "use new kubeadm version when uploading certs\n\nWe've seen a case in the current dev branch where during a K8s upgrade\nfrom 1.21 to 1.22 something causes the ClusterConfiguration in the\nkubeadm-config configmap to be stored with the v1beta3 version.  This\nversion is not understood by the 1.21 version of kubeadm, so it causes\nproblems when we try to upgrade the second controller node to K8s 1.22.\n\nTo fix it, we need to ensure that when we upload certs during a K8s\nupgrade we use the version of kubeadm that we are upgrading to for\nthe operation.\n\nIt seems that this call is sensitive to the kubeadm version (while\nsome others aren't) because we're passing in the complete kubeadm\nconfig file and so it needs to parse the ClusterConfiguration version.\n\nTEST PLAN:\nPASS: Upgrade AIO-DX lab from K8s 1.21 to 1.22\nPASS: Clean install of AIO-DX lab with change manually applied\n      before initial run of ansible playbook.\n\nCloses-Bug: 2018247\n\nChange-Id: Ie6ecf3f33335bd2cc09d028c776f92d2d302b110\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Mtce: Make Heartbeat Failure Action Configurable\"",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: update python-kubernetes function calls\n\nOn Debian, a newer version of python-kubernetes is used, and it has\nsome function definitions changes, mainly, for some functions,\nthe argument 'body' is no longer a positional argument, these have\nbeen updated to work on both OS's.\n\nTest Plan:\nCentOS/Debian\nPASS: Controller unlocked/enabled/available\nPASS: System application upload/apply/remove/delete\n\nCloses-Bug: 1976010\n\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: I1c055e970996ff90a7a09d1b07ae718110a4fa8d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix return format of vcpu pin set\n\nThis update prevents mangling of the calculated vcpu pin set string\nvalue, when it gets processed by Puppet compute manifest, to set the\nvalue for nova.conf vcpu_pin_set.\n\nThe mangling occurs when a single core \"VMs\" function is configured.\nFor example, if the string value resulting from database reading is\n'7,15', it ends up as '715' in nova.conf. This could result in\nVM fails to launch.\n\nThis update prevents mangling of the calculated string value, by\nwrapping it in quotes.\n\nStory: 2002872\nTask: 22824\n\nChange-Id: Ia6559fdf2a4bd01c1d169a40e70d1374062f8d0d\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set dc adminep cert and root ca cert to secure system config\n\nExtract admin endpoint cert and key pair from cert-manager to secure\nsystem config, for puppet to pick up and install.\nThe cert and key are used to by haproxy to provide ssl termination\non admin endpoints.\n\nPerformed tests:\nInstall DC, unlocked system controller 0 and 1\nUnlocked SX subcloud controller 0.\n\nStory: 2007347\nTask: 39429\n\nDepends-on: https://review.opendev.org/#/c/720270\nDepends-on: https://review.opendev.org/#/c/720224\n\nChange-Id: Idb302fffe2b4c4ae36a901377d5089a91d26a3ba\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Verify docker registry certificate with system trusted CAs\n\nThe issue was caused by sysinv verifying the registry certificate with\nonly itself. This works with the self-signed certificate installed by\nthe system but not if the user installs a new certificate.\n\nThis commit now checks the registry certificate against system trusted\nCAs in addition to against itself. This ensures system registry\ncommands work with both the self-signed certificates and certificates\ninstalled by the user that are signed by an actual CA.\n\nException handling has also been improved so that sysinv can detect an\nexception thrown while communicating with the registry. This is now\nlogged and returned to the user as opposed to hanging the sysinv\nregistry commands.\n\nCloses-Bug: 1863624\n\nChange-Id: I1170e296d5037716f2f800eede32e15861d038ce\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding version check support to application-upload\n\nThis update adds support for an application version_check plugin,\nwhich is called during the system application-upload command as\na validation step. This verifies that the application being loaded\nis supported by the current application plugin code.\n\nChange-Id: I9b854ff5d74065812cde90a6531e1be21fc73adb\nCloses-Bug: 1833425\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set kubelet certificate rotation to 1 month\n\nUse the experimental-cluster-signing-duration parameter to set the\nkubelet certificate to expire after 1 month. Kubelet certificate\nrotation is enabled by default.\n\nCloses-Bug: 1834685\nChange-Id: Ie5b91a86c1a1b536e51719dad99be0cc89d65722\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Relocated some packages to repo 'helm-charts'\n\nList of relocated subdirectories:\n\nkubernetes/helm-charts/node-feature-discovery\n\nStory: 2006166\nTask: 35687\nDepends-On: I665dc7fabbfffc798ad57843eb74dca16e7647a3\nChange-Id: I72c29dc72468f5e4898d19356d5d38d7e6dc1e79\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unused puppet plugins from sysinv\n\nnova, neutron, swift and heat are not installed on bare metal\nand do not need to be configured through puppet plugins.\n\nThe storage hiera data being calculated in the nova plugin has been\nmoved to the storage puppet plugin.\n\nChange-Id: Icb1cf333292e17230f871b5227bde9e2ca8ad287\nStory: 2004515\nTask: 36183\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "adjust oidc-auth-apps upgrade logic\n\noidc-auth-apps in 21.12 is from a different provider and not compatible\nwith the application in 22.06 and 22.12.\n\nThe upgrade from 22.06 to 22.12 is handled by 65-k8s-app-upgrade.sh.\nUpgrade from 21.12 is handled by another script.\n\nTest Plan:\nPASS - Build master branch\nPASS - Unit test logic of conditions with variables for cert-manager and\n       oidc-auth-apps, 21.12, 22.06, 22.12\nPASS - manually apply the change for 21.12 to 22.12 upgrade\nPASS - manually apply the change for 22.06 to 22.12 upgrade\n\nStory: 2009303\nTask: 47367\n\nChange-Id: I189e1e42f55013ab357f55a17459c6c02becb1f7\nSigned-off-by: Michel Thebeau <michel.thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix the global_index policy settings for containerized heat\" into f/stein",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate openrc file in /etc/platform\n\nCreate the platform openrc file in /etc/platform, while\nleaving existing /etc/nova/openrc file alone for now.\nNew platform/client.pp file is created and most of the\ncontents of openstack/client.pp moved there.\nopenstack/client.pp can be removed once kubernetes is the\ndefault.\n\nChange-Id: Ib6de59da6dfc9f34a24054405b6cda30d0b74ac1\nStory: 2002876\nTask: 27499\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add code to handle Kubernetes validating webhooks\n\nThis commit will add new functions to list and delete\n'ValidatingWebhookConfiguration' objects using the Kubernetes api.\n\nPartial-Bug: 1923185\nChange-Id: I648e940f8104307e111213afd511f8fca19e39ab\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create SYSTEM_CONFIG in sysinv.common.platform_firewall\n\nAs part of story 2010591 the hard-coded values for L4 ports in\npuppet were moved to sysinv.common.constants and exported there to\n\"system.yaml\".\n\nBut the bootstrap runs prior to this file availability, hence the\nport definitions are not available, and barbican failed during the\nsubcloud bootstrap.\n\nTo avoid that we are exporting all L4 ports that were exported to\nsystem.yaml to the runtime.yaml file by accessing SYSTEM_CONFIG\nduring bootstrap.\n\nTest Plan:\n[PASS] AIO-DX standalone install/unlock/enable\n[PASS] AIO-DX system controller install/unlock/enable\n[PASS] AIO-SX subcloud install/unlock/enable\n\nCloses-Bug: 2025361\n\n\nChange-Id: Ieca1d6dd764622ec575fc29b73cc167cae968a5e\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"change fm-rest-api helm endpoint service type to 'faultmanagement'\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix mellanox device detection on vf interfaces\n\nThe is_a_mellanox_device() method would not correctly identify a VF type\ninterface as a Mellanox as it only checked the primary interface,\nwithout checking the lower interfaces the primary one used.\n\nThis change fixes this. Now VF type interfaces will be checked\nrecursively until the interface tied to the actual device ports is\nlocated.\n\nTESTS:\n- Installed on a host using a Mellanox CX5 card\n- Set the interface using a port of the CX5 to pci-sriov class\n- Created a vf type interface using the previously mentioned pci-sriov\n- Created two datanetworks and assigned each interface to one\n- Confirmed that the 'isRdma' flag is now correctly appended to the\n  datanetwork resources in /etc/pcidp/config.json both for the pci-sriov\n  interface as well as the vf interface\n- The same steps were reproduced in an Intel X710 NIC to validate that\n  the is_a_mellanox_device() method is not yielding false positives. The\n  isRdma flag was not appended for this, as expected\n\nCloses-Bug: 1973361\n\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: I232d4e7fa62b8f4200328edf66f81bbb996966d0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Container pinning on worker nodes and All-in-one servers\n\nThis story will pin the infrastructure and openstack pods to the\nplatform cores for worker nodes and All-in-one servers.\n\nThis configures systemd system.conf parameter\nCPUAffinity=<platform_cpus> by generating\n/etc/systemd/system.conf.d/platform-cpuaffinity.conf .\nAll services launch tasks with the appropriate cpu affinity.\n\nThis creates the cgroup called 'k8s-infra' for the following subset\nof controllers ('cpuacct', 'cpuset', 'cpu', 'memory', 'systemd').\nThis configures custom cpuset.cpus (i.e., cpuset) and cpuset.mems\n(i.e., nodeset) based on sysinv platform configurable cores. This is\ngenerated by puppet using sysinv host cpu information and is stored\nto the hieradata variables:\n- platform::kubernetes::params::k8s_cpuset\n- platform::kubernetes::params::k8s_nodeset\n\nThis creates the cgroup called 'machine.slice' for the controller\n'cpuset' and sets cpuset.cpus and cpuset.mems to the parent values.\nThis prevents VMs from inheriting those settings from libvirt.\n\nNote: systemd automatically mounts cgroups and all available\nresource controllers, so the new puppet code does not need to do\nthat.\n\nKubelet is now launched with --cgroup-root /k8s-infra by configuring\nkubeadm.yaml with the option: cgroupRoot: \"/k8s-infra\" .\n\nFor openstack based worker nodes including AIO\n(i.e., host-label openstack-compute-node=enabled):\n- the k8s cpuset and nodeset include the assigned platform cores\n\nFor non-openstack based worker nodes including AIO:\n- the k8s cpuset and nodeset include all cpus except the assigned\n  platform cores. This will be refined in a later update since\n  we need isolate cpusets of k8s infrastructure from other pods.\n\nThe cpuset topology can be viewed with the following:\n sudo systemd-cgls cpuset\n\nThe task cpu affinity can be verified with the following:\n ps-sched.sh\n\nThe dynamic affining of platform tasks during start-up is disabled,\nthat code requires cleanup, and likely no longer required\nsince we are using systemd CPUAffinity and cgroups.\n\nThis includes a few small fixes to enable testing of this feature:\n- facter platform_res_mem was updated to not require 'memtop', since\n  that depends on existance of numa nodes. This was failing on QEMU\n  environment when the host does not have Numa nodes. This occurs\n  when there is no CPU topology specified.\n- cpumap_functions.sh updated parameter defaults so that calling\n  bash scripts may enable 'set -u' undefined variable checking.\n- the generation of platform_cpu_list did not have all threads.\n- the cpulist-to-ranges inline code was incorrect; in certain\n  senarios the rstrip(',') would take out the wrong commas.\n\nStory: 2004762\nTask: 28879\n\nChange-Id: I6fd21bac59fc2d408132905b88710da48aa8d928\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Correct handling of kube-ignore-isol-cpus=disabled label\n\nThis aligns the label checking kube-ignore-isol-cpus=<value>\nwith the existing puppet behaviour.\n- kube-ignore-isol-cpus=enabled will ignore the isolcpus feature\n- any other value will not ignore the isolcpus feature\n\nTest Plan:\nPASS: Verify kube-ignore-isol-cpus=enabled after unlock the file\n      /etc/kubernetes/ignore_isolcpus exists\nPASS: Verify kube-ignore-isol-cpus=disabled after unlock the file\n      file /etc/kubernetes/ignore_isolcpus is not present\n\nCloses-Bug: 1993199\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: I2ccfa98fffbdf6b4f45ad27e04ae0f3a937b13ae\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add sysinv upgrades support for Kubernetes 1.25.3\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove neutronclient calls from sysinv\n\nThe code was invoking neutronclient methods such as bind, unbind\nand list providernets which do not exist.\n\nNone of the neutronclient calls from within sysinv are used and\ntherefore all have been removed from the codebase.\n\nThis ends up removing the following methods\n-    def bind_interface\n-    def _get_neutronclient\n-    def get_providernetworksdict\n-    def iinterface_get_providernets\n-    def neutron_bind_interface\n-    def neutron_extension_list\n-    def _neutron_host_extension_supported\n-    def _neutron_providernet_extension_supported\n-    def neutron_unbind_interface\n-    def unbind_interface\n-    def _update_shared_interface_neutron_bindings\n\nAs well as unused calls in puppet/ovs\n-    def _get_neutron_config\n-    def _get_providernet_type\n-    def _is_vxlan_providernet\n\nAnd these previously skipped tests in test_interface\n-    def test_create_neutron_bind_failed\n-    def test_patch_neutron_bind_failed\n\nChange-Id: I1c81a3a7964c1581edf78b336c55e23bce4782cc\nStory: 2004515\nTask: 36298\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Include instance in ptp4l logs\n\nThis commit adds the instance name for ptp4l and phc2sys\nin the user.log\n\nThis update also adds \"-R 2 -u 600\" to phc2sys default command line\noptions. The -R 2 flag sets the update rate for the subordinate clock\nto once every two seconds, and -u 600 causes phc2sys to log summary\nstatistics once every 600 seconds. Both of these parameters are defaults\nfrom single instance ptp and required to maintain similar behaviour.\n\nTest Plan:\nPass: Ensure that ptp4l and phc2sys service start and instance name\n      is printed with each log\n\nStory: 2009248\nTask: 44524\n\nChange-Id: I5e06222f72f70e78ebab63d4ad89c0073fe90842\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Change rpc_response_max_timeout default to 60 seconds\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix device plugin port handling for pci-passthrough\n\nWhile generating the SR-IOV device plugin configuration data,\nit is necessary to get the underlying port information.\nFor SR-IOV ports there is special handling required to deal\nwith the case of a 'VF' subinterface.  For PCI-Passthrough,\nthe port can and should be accessed directly.\n\nCloses-Bug: 1856587\n\nCo-Authored-By: Steven Webster <steven.webster@windriver.com>\n\nChange-Id: I70f315669776a591e23e69c6653098e720815b99\nSigned-off-by: Thomas Gao <Thomas.Gao@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix sanity issue during controller unlock\n\nA recent commit merged without rebasing to a new method signature\n https://review.opendev.org/#/c/657383/\n\nThis impacts the ability to do a host-unlock in certain\nscenarios.\n\nChange-Id: Ia5d71689c79762f7fcdcd0734c205f73e983cdf0\nCloses-Bug: 1832237\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable ceph process recovery after config done\n\nAfter DOR some storage hosts are not starting \"Host Services\" and\n/etc/services.d/storage/ceph.sh is not executed. Because of this\n/var/run/.ceph_started flag file is not created. The flag file\nwas added to prevent ceph_pmon_wrapper.sh (pmon.d recovery) from\nstarting ceph processes before the configuration is applied.\n\nCeph initialization relied on \"Host Services\" to start ceph\nservices and also create /var/run/.ceph_started. After this step\nceph_pmon_wrapper.sh would be allowed to restart services if\nthey were not available.\n\nInstead of debugging why \"Host Services\" are sometimes not started\nwe enable ceph service recovery after ceph is configure by creating\nthe flag file in \"post\" stage.\n\nChange-Id: I20e036d28340635d768dfbfcdabe876f3cf10344\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Optional https for containerized openstack\n\nThe certificate for openstack services are installed and stored\nunder /etc/ssl/private/openstack. The endpoint tls parameters are\nconfigured by the helm overrides.\n\nTests performed:\nAIO-SX: application apply, reapply and launch instance\nAIO-DX: application apply, reapply and launch instance\nStandard system: application apply, reapply and launch instance\nPause and Resume instance. Ensure that no audit error is seen.\n\nStory: 2004433\nTask: 28096\n\nChange-Id: Ib81f9541ebf116dee817e0b55f31866ed0d283f0\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move horizon static configs to Armada manifest\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Updates overrides for telemetry services\n\nA few updates:\n - Add the image override for gnocchi resources cleaner job.\n - Fix the image override for panko db sync.\n - Fix the ceilometer configuration overrides in armada manifests.\n\nChange-Id: I8f18cc334b5c1aa7a8a0f1f35590b16ce96bf6b2\nStory: 2003909\nTask: 27083\nDepends-On: https://review.openstack.org/618889\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Relocated some packages to repo 'monitor-armada-app'\n\nList of relocated subdirectories:\n\nkubernetes/applications/stx-monitor/stx-monitor-helm\n\nStory: 2006166\nTask: 35687\nDepends-On: I665dc7fabbfffc798ad57843eb74dca16e7647a3\nChange-Id: I378470d0d383f93ab2443e6f56d7edcce7753c9c\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: I11bc7a44f8d16be64460b20138cabb3f5f4123cc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "dcdbsync for containerized openstack services - config\n\nThis update contains changes to sysinv to deploy and config the\ndcdbsync instance for containerized openstack services, including:\n\n- Updated sysinv dcdbsync puppet plugin to retrieve information from\n  helm for the dcdbsync runtime puppet to generate configuration file.\n- Update sysinv conductor to provision/deprovision the openstack\n  dcdbsync service.\n\nThe overall procedure is, during stx-openstack app application,\ndcdbsync identities will be created in containerized keystone. After\nstx-openstack is successfully applied the dcdbsync runtime puppet is\ncalled to generate the configuration file for openstack dcdbsync\ninstance with some information retrieved from helm (particularly\nkeystone passwords). Finally sm runtime is called to bring up the\ndcdbsync service into running. When stx-openstack app is removed,\nopenstack dcdbsync instance will be cleanup with configuration file\nremoved and service deprovisioned and stopped.\n\nChange-Id: I367576eefdd3eb5e4482a95aba8ca34dd968487a\nStory: 2004766\nTask: 36104\nDepends-On: https://review.opendev.org/#/c/682154/\nDepends-On: https://review.opendev.org/#/c/682155/\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integrate openstack clients helm chart in armada\n\nAdd sysinv override support for openstack clients helm chart.\n\nChange-Id: I58a5d511cf54dacc018bfb88848899b92a774087\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\nDepends-on: I4dea49301fd778db9a9ddf900a752831bd455fda\nStory: 2005312\nTask: 30558\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Patch Tiller deployment to ensure self-recovery\n\nOn node startup, there appears to be a race condition between when\nkubelet sees a pod and when kubelet sees a service. Due to this race,\nrequired environment variable are missing to allow tiller to function\nproperly.\n\nSee the comment at\nhttps://github.com/kubernetes/kubernetes/blob/v1.18.1/pkg/kubelet/kubelet_pods.go#L566\n\nThis change patches the tiller deployment to make sure the four classes\nof environment variables are present prior to starting tiller. If any\nclass of variables are not present in the environment, then exit. This\nwill recreate the pod and will populate the correct environment for\ntiller to function.\n\nSince the upgrade to v1.18.1, this has been seen in simplex and duplex\ncontroller configurations.\n\nReview https://review.opendev.org/#/c/699307/ will cover patching during\ninitial provisioning via ansible. This change will check that tiller is\npatched every time the conductor starts as part of the tiller upgrade\nlogic. This will cover scenarios where tiller is manually removed from\nthe cluster and reinstalled via helm.\n\nThis change should be reverted once StarlingX moves to helm v3.\n\nAlso removed dead code: get_k8s_secret()\n\nChange-Id: Icd199ec1b1e10840094c0eae59d53838f32ffd6f\nCloses-Bug: #1856078\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Constants and common function for rook-ceph application\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Import subprocess from eventlet.green package\n\nThe python kubernetes client requires a newer version of eventlet.\nHowever, newer versions of eventlet have an issue with the subprocess\nmodule, which requires subprocess to be imported from eventlet.green\ninstead of being imported directly. See:\nhttps://github.com/eventlet/eventlet/issues/413\n\nTo allow eventlet to be upversioned (from 0.18.4 to 0.24.1), the\nsubprocess imports are being changed for code that runs with\neventlet.\n\nChange-Id: Idf221c5c1fa542fbe2d9231dff441ec9289a93f1\nStory: 2006781\nTask: 37583\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Stardandize makefiles for puppet-modules-wrs\n\nThe puppet-modules-wrs is formed by several subcomponents, in all\nof them the same changes were applied:\n\n  - Create a makefile with a install target.\n  - Remove license file from build_srpm.data as is not needed.\n  - Update target in specfile\n  - Change autosetup to setup in specfile, this was bug in the spec\n    files.\n\nChange-Id: I960b092292222fdb58380422889022d68d748c37\nStory: 2004043\nTask: 27552\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle \"updating\" and \"recovering\" app update states during\nupgrade activation\n\nDuring simplex subcloud upgrade, if the initial upgrade\nactivation request fails, dcmanager orchestrator re-tries the\nactivation by sending another request (current logic is to\nretry up to 10 times). On the second upgrade activation\nrequest, sysinv skips the oidc-auth-apps reapply as the\napp is in 'updating' state and proceeds to completing the\nremaining steps of the activation sequence. As a result,\nupgrade activation completes while platform apps were either\nin the incorrect version or incorrect state.\n\nThis commit resolves the issue by skipping only for \"uploaded\"\nand \"applied\" states during upgrade activation.\n\nChange-Id: I4b0aa4897e83a47ccdcf58c37232301f3668de32\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\nStory: 2008055\nTask: 42246\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix kubernetes k8s-infra cpuset.cpus mangled values\n\nThe platform kubernetes cgroup configured value for cpuset.cpus\n(i.e., /sys/fs/cgroup/cpuset/k8s-infra/cpuset.cpus) is sometimes\nincorrect.  The cpulist values are correct in hierdata, but are\nmangled when used by puppet.  Solution is to wrap the values in\nquotes, like we do for various other parameters.\n\nThis bug was introduced by this code:\n https://review.openstack.org/#/c/648511/\n\nChange-Id: Ic49090502242cc1f59dd09afad0db46cc9e399c2\nCloses-Bug: 1824563\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Zero Touch Provisioning changes for subcloud configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding makefile for puppet-manifests\n\nChange-Id: I67159e6454819c5d1c80f7ee965658991ddedaed\nStory: 2004043\nTask: 27549\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow gpu-pf to take multiple GPU models\n\nThis update allows configuring gpu-pf service parameter to accept a\nsemicolon-delimited list of devices, similar to the 'user' service\nparameter.\n\nChange-Id: I25e8df144b754615e5b6b46870e604d0e5a7dbd7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable kubernetes SCTPSupport feature\n\nThe feature gate for sctp support in apiserver was added in\nkubernetes 1.12 but is disabled by default.  This commit enables it.\n\nInformation about SCTP is here:\nhttps://kubernetes.io/docs/concepts/services-networking/service/#sctp\n\nThe centos version of netcat can be used to validate the feature.\nA Dockerfile for building a centos netcat is provided.\n\nTested by:\n\nkubectl run --generator=run-pod/v1 --image netcat:v1.0.0 \\\n    listen-sctp -it --rm -- --sctp -l -p 9000\n\n(get IP of the listener pod)\nkubectl run --generator=run-pod/v1 --image netcat:v1.0.0 \\\n   test-sctp -it --rm -- --sctp <listener pod IP> 9000\n\nChange-Id: I9642e485cb9c30f6b1272c00ec1046b9c98211ac\nStory: 2006472\nTask: 36403\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add ironic network type\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet manifests missing networking dependencies\n\nDuring initial unlock of the controller, we see memcached thrashing\non startup for several minutes. In addition, NTP date setting hangs\nfor a couple of minutes before failing. Both cases are due to the\nservices being launched in the puppet manifest before the networking\nconfiguration is done, and both need networking configured to run\nsuccessfully.\n\nThis update adds a dependency against networking configuration for\nboth memcached and NTP setup in the manifests. For NTP on the\ncontroller, the dependency is added against DNS configuration, which\nin turn is dependent on networking config. This ensures DNS config\nis also complete before attempting NTP setup, which may use\nhostnames for NTP servers.\n\nCloses-Bug: 1830805\nChange-Id: I8f9f612e3aad3ad71a511d0d5415e2a05acbc0c1\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement Pci Interrupt Affinity Agent\n\nCreate an agent which runs on each worker node to do pci interrupt\naffinity work.\nIn this patch, it will add related puppet file to get configurations\nfrom helm data.\n\nBelow test done and pass, see detailed test spec in story link.\n1) deployment test with/without openstack application\n2) Periodic audit pci irq affinity\n3) Remove VM without sriov pci port\n4) Remove VM with sriov pci port\n5) Add VM without sriov pci port\n6) Add VM with sriov pci port\n7) Add VM without pci_irq_affinity_mask\n8) Add VM without cpu policy set\n9) VM resize test\n10) Remove one pci port for VM\n11) config file apply\n\nStory: 2004600\nTask: 28850\n\nChange-Id: I798180800284feea4a694ff7c20b12dd24dda958\nSigned-off-by: zhipengl <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move ceph to use mgmt IP on AIO-SX\n\nThis update removes the temporary hook that configured CEPH\nto use the OAM IP for the monitor on AIO-SX. It will now\nuse the management IP, as in AIO-DX and standard configurations.\n\nStory: 2004520\nTask: 29120\nChange-Id: I00ae5c317dc9df95d4fe7117b93611f4a402520e\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set neutron tests to disabled.\n\nThis commit disabled neutron tests when launching containerized\nopenstack.  This is necessary because of the segment allocation\nin starlingx not being compatible with those tests.\nThis can be enabled once starlingx cuts over to using openstack\nimages build off of master.\n\nStory: 2004520\nTask: 28780\nChange-Id: Iebefb1486ac07ba5fb3c030124f729d5dbabefab\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Generate ptp hieradata\n\nThis commit takes the data in the ptp instance, interface and parameters\ntables and converts it into the required hieradata for puppet\nconsumption.\n\nThe generalized structure of the hieradata is:\n\nplatform::ptp::instances[\n    instance{\n        global_parameters {}\n        interfaces[\n            interface{\n                interface_parameters{}\n                port_names[]\n            }\n    ]\n]\n\nNote that other than adding fields to the system hieradata, this commit\ndoes not change any system functionality and all existing ptp operations\nstill behave as normal. A future commit will be required to cut over\nfrom the existing ptp hieradata to this hieradata.\n\nHieradata can be generated for testing via:\nsysinv-puppet create-host-config\n\nOutput is located at:\n/opt/platform/puppet/<release>/hieradata/<node_ip>.yaml\n\nTest Plan:\n\nCurrently, puppet PTP does not appear to have proper unit test coverage\nbecause the test controllers are configured by default for NTP. Enabling\nPTP currently breaks several NTP test cases, although this code does\npass testing when PTP is enabled.\n\nWe will consider improving the puppet PTP unit test coverage at a later\ntime.\n\nPASS: Build and deploy on hardware lab\nPASS: Configure multiple ptp instances in virtual environment and\nhardware environment\n\nRegression:\n\nPASS: The code in this commit is benign until the dependent review\nmerges and the platform worker manifest is updated to apply the new ptp\nconfiguration.\n\nStory: 2009248\nTask: 43963\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: Icab8dcb8196e47c4a438f78bc466ede4195273c4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Application update support\n\nA new command \"system application-update\" is introduced in this\ncommit to support updating an applied application to a new version\nwith a new versioned app tarfile.\n\nThe application update leverages the existing application upload\nworkflow to first validating/uploading the new app tarfile, then\ninvokes Armada apply or rollback to deploy the charts for the new\nversioned application. If the version has ever applied before,\nArmada rollback will be performed, otherwise, Armada apply will be\nperformed.\n\nAfter apply/rollback to the new version is done, the files for the\nold application version will be cleaned up as well as the releases\nwhich are not in the new application version. Once the update is\ncompleted successfully, the status will be set to \"applied\" so that\nuser can continue applying app with user overrides.\n\nIf there has any failure during updating, application recover will be\ntriggered to recover the app to the old version. If application recover\nfails, the application status will be populated to \"apply-failed\" so\nthat user can re-apply app.\n\nIn order to use Armada rollback, a new sysinv table \"kube_app_releases\"\nis created to record deployed helm releases versions. After each app\napply, if any helm release version changed, the corresponding release\nneeds to be updated in sysinv db as well.\n\nThe application overrides have been changed to tie to a specific\napplication in commit https://review.opendev.org/#/c/660498/. Therefore,\nthe user overrides is preserved when updating.\n\nNote: On the AIO-SX, always use Armada apply even it was applied issue\n      on AIO-SX(replicas is 1) to leverage rollback, Armada/helm\n      rollback --wait does not wait for pods to be ready before it\n      returns.\n      Related helm issue,\n      https://github.com/helm/helm/issues/4210\n      https://github.com/helm/helm/issues/2006\n\nTests conducted(AIO-SX, DX, Standard):\n  - functional tests (both stx-openstack and simple custom app)\n    - upload stx-openstack-1.0-13-centos-stable-latest tarfile\n      which uses latest docker images\n    - apply stx-openstack\n    - update to stx-openstack-1.0-13-centos-stable-versioned\n      which uses versioned docker images\n    - update back to stx-openstack-1.0-13-centos-stable-latest\n    - update to a version that has less/more charts compared to\n      the old version\n    - remove stx-openstack\n    - delete stx-openstack\n  - failure tests\n    - application-update rejected\n      (app not found, update to a same version,\n       operation not permitted etc...)\n    - application-update fails that trigger recover\n      - upload failure\n        ie. invalid tarfile, manifest file validation failed ...\n      - apply/rollback failure\n        ie. download images failure, Armada apply/rollback fails\n\nChange-Id: I4e094427e673639e2bdafd8c476b897b7b4327a3\nStory: 2005350\nTask: 33568\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move ttys_dcd configuration from agent to puppet runtime manifest\n\nThe ttys_dcd flag is currently being configured by sysinv agent audit.\nThe API updates the database but it is not instantly configured, it\nmust wait for an audit iteration. This change modifies this behavior\nby running a puppet runtime manifest [1] from the API.\n\n[1] https://review.opendev.org/c/starlingx/stx-puppet/+/845174\n\nCloses-Bug: 1978009\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/845174\n\nTest plan:\nPASS: Bootstrap AIO-SX, host unlock and verify system alarms.\nPASS: Set the flag via host-update and check if the serial console\n      was really configured.\nPASS: Unset the flag and also verify serial console.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ia3ef2a5e96905c3cd770601d1e78af368bf54a95\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes custom configuration support: runtime.\n\nThis changes allow users for global customization\nof kubelet and control plane components during\nruntime process.\n\n* Validations have been relaxed to enable creation of\n  new sections in kubernetes service through service-parameter.\n  e.i.: kube_apiserver, kube_scheduler, kube_controllerManager,\n        kubelet.\n\n* Validations have been relaxed to enable creation of\n  new parameters in kubernetes service through service-parameter.\n\n* Upgrade script has been added in order to migrate the parameters\n  (oidc_issuer_url, oidc_client_id, oidc_username_claim,\n  oidc_groups_claim) to (oidc-issuer-url, oidc-client-id,\n  oidc-username-claim, oidc-groups-claim)\n\nTest Plan:\n* Fresh Install: AIO-SX, Standard.\n* B&R and Upgrade: AIO-SX, Standard.\n* Create, modify, delete supported parameters and verify changes.\n* Add and apply not supported parameters and verify kube-apiserver auto\n  restore process.\n* Validate launch example Pods, for both simplex and duplex systems.\n\nStory: 2009766\nTask: 44378\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/827760\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: I8e1311a78bf9e1419d76d4d19777a847a53e82f4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Multus support for IPv6 service endpoint\n\nThe K8s service host in the Multus kubeconfig file is currently\nnot wrapped with [brackets] in the case an IPv6 cluster service\nendpoint has been configured.\n\nThis causes issues for Multus when it attemps to get (curl) for\nthe address.\n\nThis fix ensures the IPv6 address is properly formatted for use\nby Multus.\n\nCloses-Bug: 1836972\n\nChange-Id: I803edfb86a70d232d6015a7bb130da0756a56458\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable N3000 FPGA reset if device is present\n\nAs part of the switch to the singular aio manifest, the reset of the\nN3000 FPGA is no longer being performed at boot by the fpga agent.\nRather, it is now initiated on demand by the puppet manifest if an\nN3000 device is configured for SR-IOV.  This can cause a problem on\nthe first configuration of the device as the PCI address of the FEC\ndevice changes after reset.  That is, on first configuration, a user\nwill be modifying the device based on a PCI address that will not\nexist after the device is reset.  This will cause the subsequent\nenablement of SR-IOV VFs and binding to respective PF/VF drivers\nby the puppet manifest to fail.\n\nThis commit fixes the issue (with the corresponding stx/stx-puppet\nchange) by allowing all enabled accelerated FED devices to be\nrecorded in hieradata so that the N3000 can be restarted if it is\ndetected.\n\nThe device will only be SR_IOV configured user requested number\nof VFs is different than what is present on the system.\nIn other words, if the device has not been configured,\nthe requested VFs will be 0, matching what is\npresent on the system (and puppet will do nothing).\n\nCloses-Bug: #1931128\nChange-Id: Id30590fdabbeb3d5dfa6a618a406b41f0a31d872\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change default k8s version to 1.21.8\n\nThe next minimum version supported for\nkubernetes will be 1.21.8.\nThis commit changes the default kubernetes\nversion from 1.18.1 to 1.21.8.\n\nDeployed on AIO-SX and AIO-DX and the services\nare started successfully and all the pods running.\n\nStory: 2009859\nTask: 44501\nChange-Id: I8f110fbc7651523c5f1684b617a06793fee5607e\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Expose the Hyper-Threading (HT) processor feature\n\nThis commit implements a method to verify if the Hyper-Threading (HT)\nfeature is enabled on host. This method will be used in Task 45621 to\ncompute the eng_workers parameter.\n\nTEST PLAN:\nPASS: AIO-SX: create and deploy CentOS installation ISO successfully\non host with HT enabled.\nPASS: AIO-SX: check if the correct qty of threads (in this case only\none) was configured on base services.\n\nPASS: AIO-SX: create and deploy CentOS installation ISO successfully\non host with HT disabled.\nPASS: AIO-SX: check if the correct qty of threads (2) was configured\non base services.\n\nPASS: AIO-SX: change the number of dedicated platform cores using the\nCLI and verify the change was effective and reflected in the services.\n\nStory: 2010087\nTask: 46179\n\nSigned-off-by: Reynaldo P Gomes <reynaldo.patronegomes@windriver.com>\nChange-Id: I95cf3d21316307001f42053ba0105c2bd3416fcc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"remove flag fault_management_pod_disabled\"\n\nThis reverts commit 13ef70035b3be4dc07887de44e37c867f51105a2.\n\nfeature FM containerization is delayed to stx 4.0. Switch the\nopenstack alarms reported to fm in platform instead of fm in\ncontainers\n\nDepends-On: https://review.opendev.org/#/c/690472/\nChange-Id: I7312602c7c9d217de60f38d2ba7e486bef35d888\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add retry during k8s api server down\n\nDuring k8s api server is down, some CLI fails because of\nretry max retries exceeded in urllib3 (Retry 3 times and\n0 interval time).\n\nThe fix is to add retry in sysinv if it receives max\nretries exceeded exception, so that CLI will not fail\n(It will be executed after api server is back to running).\n\nTest Plan:\nPASS: Confirm there is no ERROR message of periodic_task\n      in /var/log/sysinv.log during api server down.\nPASS: Run the following CLIs during api server down.\n      Confirm no ERROR message is observed in /var/log\n      sysing.log and CLIs is executed properly when\n      api server is back to running.\n      - system service-parameter-apply kubernetes\n      - system host-unlock controller-0\n      - system kube-host-upgrade-list\n      - system kube-cluster-list\n      - system kube-version-list\nPASS: No error in fresh install (SX/DX)\n\nStory: 2009766\nTask: 46887\n\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\nChange-Id: Ie2f34e20b1602f48679185be5ba7dc7f5ddf545d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Python 3 compatibility: convert ConfigParser to configparser.\n\nStory: 2003433\nTask: 26331\n\nChange-Id: I3a094c794861b23ccaee78aa92857ec7188a3fca\nSigned-off-by: zhangyangyang <zhangyangyang@unionpay.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix failure in puppet cinder when having multiple CEPH backends\n\nMove file resource to a place where it's called only once and\nnot for every backend.\n\nChange-Id: I0d9be2f1f3b1b63796c16793527c5fc77fa8d156\nStory: 2002844\nTask: 27613\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix configuration failure when reinstalling worker node\n\nWhen doing a system host-reinstall, the unlock of the worker would\nfail with an error in the puppet logs.\n\nThis is because reinstall results in there not being any kubernetes\nconfiguration, and therefore a kubernetes join is expected, however\nthe hieradata with that information was only being provided on an\ninitial creation of the node.\n\nThe fix was to always provide the token and command for the\nkubernetes join command.\n\nThis fixes a host reinstall through sysinv.\n(lock / reinstall / unlock)\n\nAn unsupported reinstall through a network boot (F12) will\ntypically fail since the token expires after 24 hours.\nHowever that scenario can be remedied by a lock/unlock.\n\nChange-Id: Idea9f1e4b8f98203260ec0b6af7ae29c34579b86\nFixes-Bug: 1823396\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Populate flat networks in ml2 configuration\n\n'flat_networks' should be configured to specify which physical network\ncan be used as flat network. This patch is to populate'flat_network'\nbased on sysinv.\n\nChange-Id: I2cec1e1234976b9d73ce4be74527a5bcbb7bc5eb\nCloses-bug: #1821150\nSigned-off-by: chengli3 <cheng1.li@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add variables for snmp in fm.conf\n\nSnmp trap client needs the following three variables\nto connect to snmp trap server.\n- trap_server_ip\n- trap_server_port\n- snmp_enabled\nThis commit is to update sysinv puppet hieradata with\nthe value of snmp_enabled based on whether the snmp\napp is applied.\ntrap_server_ip and trap_server_port are fixed.\nsnmp_enabled takes 1(True)/0(False) depends on snmp\narmada app is applied or not (1 when applied).\n\nChange-Id: I76f9ef3e9ca6a98c0cd37a72f7aaccd10353b26b\nStory: 2008132\nTask: 41205\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Workaround for cleaning up MatchNodeSelector pods after host reboot\n\nAdded a K8sPodOperator class to look for and remove Failed pods with a\nMatchNodeSelector reason.\n\nMatchNodeSelector pods related to applications will not be removed by\nK8S automatically. These pods may block subsequent application applies\nas tiller expects these pods to be in a non failed state.\n\nA check for this condition is added in two locations:\n- to the _k8s_application_audit() which is run immediately on\n  sysinv-conductor startup and runs every minute. This runs 4 times in a\n  5 minute window at startup on a simplex install. This should catch all\n  cases unless there is a delay accessing the k8s API that lasts longer\n  than 5 minutes at startup.\n- to the application-apply path. This would cover any case that occurs\n  after the initial 5 minute conductor startup OR any occurance on a\n  non-simplex installation (so far only observed on AIO-SX)\n\nNOTE: This commit will be reverted once a proper upstream k8S fix is\nprovided.\n\nRelated upstream bugs:\n- https://github.com/kubernetes/kubernetes/issues/80745\n- https://github.com/kubernetes/kubernetes/issues/85334\n\nThe following PR was tested and fixed this issue but has not landed\nupstream in a new k8s release:\n- https://github.com/kubernetes/kubernetes/pull/80976\n\nChange-Id: Ia5418794a44e7821933e8335d5c5db25b58a739f\nCloses-Bug: #1849688\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure sssd for subcloud to access central openldap\n\nThis change updated sssd and ldap sysinv puppet plugin to generate\nproper hieradata for puppet to create sssd configuration and\nopenldap clients' configuration (ldap.conf, ldapscripts.conf) for\nsubcloud. With these configuration, sssd and openldap clients on\nsubcloud can access secure openldap running on System Controller.\n\nTest Plan:\nPASS: DC system controller and subcloud deployment.\nPASS: On subcloud, verify openldap users are accessible by\n      ldapsearch -xH ldaps://<System Controller mgmt floating IP>\n      -b \"ou=People,dc=cgcs,dc=local\"\nPASS: On subcloud, verify openldap users are accessible by\n      ldapfinger\nPASS: On subcloud, verify default openldap users (admin, operator)\n      can login on console.\nPASS: On subcloud, verify openldap users are cached by:\n      getent passwd <openldap username>\nPASS: On system controller, create new openldap user, verify the new\n      user can login to subcloud on console and by ssh.\nPASS: On system controller, verify openldap users are cached by:\n      getent passwd <openldap username>\nPASS: AIO-SX deploymnet, verify bootstrap and unlock succeeds.\nPASS: AIO-SX system lock/unlock, verify system boots up into normal\n      condition, and openldap functions as expected.\n\nStory: 2009834\nTask: 46600\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/861782\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I831aef7896bf16d67cef9dee7d4590c393fd1792\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create hugepage mountpoints where openstack-helm expects it.\n\nBy default, libvirt and openstack-helm expect the hugepage mountpoints to be\nunder /dev, while we currently use mountpoints under /mnt.\n\nTo get containerized libvirt working, add a set of mountpoints under /dev.\nLater on we can switch our existing code over to use the new mountpoints\nand remove the mounts under /mnt.\n\nJust to make things interesting, the libvirt helm chart also expects the\ndefault hugepage size (2M in our case) to be mounted at /dev/hugepages, so\nwe add another mountpoint for that pagesize.  Ideally we'd upstream a helm\nchart change to auto-detect the mountpoint, at which time we could remove\nthis hack.\n\nChange-Id: I88baa169dd357e73295aa32f4044da35e3a7fd6a\nStory: 2003909\nTask: 27081\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Store puppet config in context\n\nThis commit stores current host config in puppet\ncontext to facilitate access between modules. This\nwould allow the subsequent modules to obtain the\nexisting resources and extend/override them.\n\nStory: 2004628\nTask: 28557\n\nChange-Id: I2c30829093572359388d016f5008d6906a61f651\nSigned-off-by: eric zhang <eric.zhang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable keystone caching\n\nSince memcached is installed on the system, we should\nalso enable keystone caching with memcached.\n\nChange-Id: Ibd5135bfc753336f8e70e1e419aba0488837935e\nCloses-bug: 1854196\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Handle kubernetes reserved memory NoneType exception\n\nThe calculation for platform reserved memory is now part of kubernetes\nconfiguration of CPU manager static policy. That code must handle numa\nnodes with no platform reserved memory (i.e., value of None).\n\nOn a standard configuration, we were getting the following exception:\nsystem host-unlock controller-1\nunsupported operand type(s) for +=: 'int' and 'NoneType'\n\nThis update fixes the bug introduced by:\nhttps://opendev.org/starlingx/config/commit/5b4ae7503780873552648746f3c9885eb5741014\n\nCloses-Bug: https://bugs.launchpad.net/starlingx/+bug/1828430\n\nChange-Id: I8d277eb1513c40f8f4689f698f8a4932f01017a0\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unused variables passed to platform/ceph.pp\n\nSince ceph.pp from stx-puppet is not using the variables\nfloating_mon_ip, mon_0_ip, mon_1_ip and mon_2_ip anymore,\nthey should be removed from sysinv/puppet/ceph.py\n\nStory: 2009074\nTask: 44047\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/818921\nSigned-off-by: Felipe Sanches Zanoni <Felipe.SanchesZanoni@windriver.com>\nChange-Id: I7e208d6d2854ac8075a4a4428859521359b7c6ec\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Distributed Cloud configuration\n\nThe following changes are required to enable system\ncontroller and sub cloud configuration in a distributed\ncloud environment:\n\n* Remove references to os-keystone-region-name as the\nopenstack patches that support it, have been removed.\n* Change the iptables rule for the NAT entry, to only\napply, if the selected outgoing interface is the\nOAM interface.\n* Configure keystone endpoints, before configuring\nopenrc on subclouds\n* Remove all openstack services, and users from the region\nconfig and update the tox\n* Disable nova, cinder and neutron api proxy\n\nOnly tested distributed cloud configuration as multi-region\nconfiguration is not supported in the current release.\n\nStory: 2004766\nTask: 30017\n\nChange-Id: I5c43e2112f34225aa9e23ff777c5333ae77efcdc\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sssd service parameters for ldap domains\n\nThis commit adds sysinv service parameters configuration for sssd\nsupport of remote ldap domains. Remote ldap domains get configured\nwith default configuration. A subset of the domain parameters\nthat are specific to the ldap server will to be added using\nservice parameters mechanism.\nA maximum of 3 AD remote ldap domains are allowed: ldap-domain1,\nldap-domain2, ldap-domain3.\nValidation methods are implemented for the service parameters.\nParameter Validation will be enabled in the next code drop.\nIn this commit service parameters are applied to only controllers.\nWorker and Storage node personalities will be added in a subsequent\ncommit.\n\nTests performed:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The default remote ldap domain configuration gets populated in\nsssd.conf.\nPASS: sssd service is successfully started.\nPASS: Remote ldap domain service parameters are added and applied at\nruntime.\nPASS: Verify connection to the new ldap server using ldapsearch.\nPASS: Verify ldap users have been discovered and cached in /etc/passwd\nPASS: Verify remote ssh connection for an AD ldap user.\n\nStory: 2009834\nTask: 46364\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I28df5059acd0a5e4a9f4368eb3cc8b0544d36333\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support for NTP/PTP coexistence\n\nThe NTP/PTP selection will now be done per host. NTP will the default\nselection.\n\nThis commit;\n\n-Removes the enabled flag NTP and PTP API. Updates the CLI commands\nand the database.\n\n-Adds the parameter clock_synchronization to the host API. Valid\nvalues are \u2018ntp\u2019 and \u2018ptp\u2019. Updates the host CLI commands and the\ndatabase.\n\n-Updates puppet to set NTP/PTP per host .\n\n-Updates the RestAPI documentation.\n\nStory: 2006499\nTask: 36464\n\nChange-Id: I37bbb30a014301f8786cb02e35f0a1bd39d2f4aa\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable StarlingX in QEMU/KVM VM\n\nA new boolean type of service parameter \"virtual_system\" is added to\nbe used to configure system running in Openstack Nova VM (QEMU/KVM\nenvironmement). This parameter will be populated at bootstrap time\nif it sets to true. A puppet hieradata gets generated to be used to\ndetermine virtual StarlingX during puppet manifest apply.\n\nStory: 2007858\nTask: 40723\nDepends-On: https://review.opendev.org/#/c/747483/\nChange-Id: I97f2a2addb39e342c7e0e523bc297fea2448175b\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv upgrades support for Kubernetes 1.26.1\n\nThis adds sysinv upgrades support for Kubernetes 1.25.3 to 1.26.1\n\nTest-plan: Debian\nPASS: system kube-version-list shows\n      v1.26.1 available\n\nStory: 2010368\nTask: 47667\n\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\nChange-Id: Ia8d7bfab558659efc385433154f44c3c4b0c763b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update the default image tags in the manifest\n\nThis commit is to update the default image tags in armada manifest\nto master-centos-stable-latest.\n\nChange-Id: Ic31e16bf4c5e1a414295d3175ff89a097aef8db9\nStory: 2005350\nTask: 30312\nDepends-On: https://review.openstack.org/#/c/650178/\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Local Docker Registry non-ha noauth\n\nDeploy local docker registry on controller as a process (not container).\nDocker registry starts up through systemd automatically. For now\nit is not managed through SM, no authentication and uses our self-signed\ncertificate. It listens on 0.0.0.0, which will change to\nproper mgmt floating address with SM integration.\n\nStory: 2002840\nTask: 22781\n\nChange-Id: I19423b0f91a456c2dc7bb3c5c2d60540355bf9b0\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Store BMC password in Openstack Barbican instead of keyring.\n\nReplacing existing mechanism of storing BMC passwords in SysInv.\nImplementing access to Barbican API in SysInv and using it to write\nthe passwords into a Barbican secrets. Note that a Barbican cannot\nchange the existing password inside its secret, so we need to remove\nthe old secret and create a new one in case of password update.\nAnother thing to mention: SysInv has to create Barbican secrets in\ncontext of \"services\" project in order MTCE can read them later.\n\nChange-Id: I7102a9662f3757c062ab310737f4ba08379d0100\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "A bug in swift containerization was breaking provisioning\n\nA method that swift containerization was invoking had been renamed,\nbut the code was not updated when it was rebased.  This broke\nthe provisioning stage, even when swift was not being used.\n\nChange-Id: Ia987174adfa78f6cc92eab96cf72483836750c53\nCloses-Bug: #1832025\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Don't delete nova-ks-endpoint job in nova chart\n\nThe nova chart cleans up nova endpoints during nova chart upgrade,\nthis causes nova-api service to fail to restart. The cleanup for\nnova endpoints should only be done in the nova api proxy chart\nbecause they are created by the nova api proxy chart.\nThis commit updates the armada manifests to remove the deletion\njob for nova-ks-endpoints in the nova chart.\n\nStory: 2004520\nTask: 28485\n\nChange-Id: Ieea8aaf12eded2e66608012939770505628b6c12\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update default hugepage size in grub\n\nOnly a single huge page size is supported now, the default\nhugepagesz in the grub config is updated based on the page size\nallocated. The 1G huge pages setting was updated only when the\nvswitch huge pages were changed, which is now updated when 1G\nhuge pages are allocated.\n\nStory: 2006295\nTask: 36006\n\nChange-Id: Ic8026bdc77131acaafe1cbaa63285ee892c29301\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase tolerance for declaring neutron agents down\n\nThe neutron server listens for heartbeats from the various\nneutron agents running on worker nodes. The agents send\nthis heartbeat every 30s, but use a synchronous RPC, which\ncan take up to 60s to time out if the rabbitmq server\ndisappears (e.g. when a controller host is powered down\nunexpectedly). The default timeout is 75s, so if two of\nthese async RPC messages time out in a row (due to rabbitmq\nserver issues related to a controller power down or swact),\nthe neutron agent will be declared down incorrectly. This\ncauses the VIM to migrate instances away from the worker\nnode, which we want to avoid.\n\nTo make this more tolerant of temporary failures in the\nrabbitmq server, I am increasing the timeout (agent_down_time)\nto 150s.\n\nChange-Id: Iecd1a7d1034bc8c98853ba279336c26dc7bc3fe9\nCloses-Bug: 1817935\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set proper permissions on docker filesystem\n\nThe puppet manifests are currently setting the file permissions\nfor the docker filesystem (/var/lib/docker) to 750. However,\ndocker changes the permissions to 711. The result of this is that\nwhenever the puppet manifests are applied, the permissions are\nchanged, which has a cascading effect, causing docker to be\nrestarted and all running pods to be stopped. In the AIO-SX,\nthis happens when the compute manifests are applied, resulting\nin all pods being torn down while kubernetes is in the middle\nof trying to start them. This is bad.\n\nThe solution is to update puppet to set the permissions for\nthe docker filesystem to 711. That way, puppet will not\nchange the permissions or restart docker.\n\nChange-Id: I0a7ca6f21947841afe4ca3a8ba6b4f49e58d5e8a\nStory: 2004520\nTask: 28573\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure ceph mon info on 2nd region compute host\n\ncompute hosts go to reboot loop after configuring nova_local\nwith remote backing. The reboot was due to nova go enabled test\nfailed. Because the ceph monitor info was not configured in\nceph.conf on the compute node, nova-compute process failed to\nstart due to error connecting to the cluster.\n\nThis update configured the ceph mon info on the compute hosts in a\nsecondary region when the cinder is configured as a shared service\nand the region has ceph backend configured. The ceph mon info is\nretrieved from the primary.\n\nChange-Id: Ie37fa1126f30bae5318377c8e1d75acc8fa04be1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Relocated some packages to repo 'stx-puppet'\n\nList of relocated subdirectories:\n\npuppet-manifests\npuppet-modules-wrs/puppet-dcdbsync\npuppet-modules-wrs/puppet-dcmanager\npuppet-modules-wrs/puppet-dcorch\npuppet-modules-wrs/puppet-fm\npuppet-modules-wrs/puppet-mtce\npuppet-modules-wrs/puppet-nfv\npuppet-modules-wrs/puppet-patching\npuppet-modules-wrs/puppet-smapi\npuppet-modules-wrs/puppet-sshd\npuppet-modules-wrs/puppet-sysinv\n\nStory: 2006166\nTask: 35687\nDepends-On: I665dc7fabbfffc798ad57843eb74dca16e7647a3\nChange-Id: Ibc468b9d97d6dbc7ac09652dcd979c0e68a85672\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: I00f54876e7872cf0d3e4f5e8f986cb7e3b23c86f\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "More updates for stx-openstack armada manifests\n\nA few updates:\n - Enable yamllint on the application manifests\n - Fix truthy warnings from the linter\n - Fix indentation issue with the horizon conf section and the\n   ceilometer db_sync section which invalidates the yaml formatting.\n - Disable the openstack-telemetry chart group as this will not work due\n   to dependencies on panko which hasn't been fully integrated yet.\n\nNOTE: Problems highlighted by yamllint in the manifests may not\nnecessarily be real issues as these are not actually guaranteed to be\nstandards-compliant YAML files until after they have been run through\nthe pre-processor (i.e. armada). The goal of using yamllint here is to\ncatch gross structural errors but any other errors may need to be\nevaluated on a case-by-case basis and excluded from the linter after\nvalidation with armada.\n\nChange-Id: Ic604e61e0d6354d56a687c6876cd8d83cae75afc\nStory: 2004005\nTask: 27801\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move DNS requirement into kubernetes::master\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add OpenID connect params to kubeadm\n\nThis commit modifies the kubeadm template to support OpenID connect\nparams.\n\nDepends-On: https://review.opendev.org/671259\n\nStory: 2006235\nTask: 35836\n\nChange-Id: I38f736aa68f9c0031ed697cdf17cd28ed08cadf6\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update k8s application upgrade script for corner case\n\nThe upgrade script may report the application update incorrectly\nbecause there is a window when querying the application version\nand status during update.\n\nIn the case that the application update to the new version is\nfailed, the query for the app version is made before the\napplication recovery is triggered, and the query for the app\nstatus is made after the application is recovered to the previous\nversion, the script gets incorrect information and reports the\napplication is updated successfully.\n\nUpdate the application query in one request to eliminate this\npossiblity.\n\nChange-Id: Icbf173214de591861c21841e22359ad981453e84\nStory: 2008055\nTask: 42246\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enabling simultaneous platform and containerized horizon access\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom cinder policy.json\n\nEnable consistency groups:\n\n    Volumes can be assigned to consistency groups to ensure that snapshots\n    of all volumes in the group are taken at the same point in time.\n    Therefore everyone should benefit from them.\n\n    Based on description at:\n    http://docs.openstack.org/admin-guide/blockstorage-consistency-groups.html\n\nCinder extensions authorization policy\n\n  Add authorization policy for StarlingX extensions:\n  1. volume_extension:snapshot_export_attributes\n  2. volume_extension:snapshot_backup_status_attribute\n\nStory: 2003117\nTask: 23236\nRelated-To: https://github.com/starlingx-staging/stx-cinder/pull/2\n\nChange-Id: I5b1b8025f65d9b8c7209d97ccc19db93ab97693f\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update nova overrides to enable affinity weigher\n\nAffinity weigher is required to support soft-anti-affinity and\nsoft-affinity server group policies in nova.  Set to a relatively high\nmulitplier of 20 to ensure that this criteria predominates the host\nselection.\n\nAdjust other weigher multipliers accordingly:\nio_ops: remove override to let it use default value of -1.  Old -5\n        setting was related to discontinued stx-nova patch in previous\n        stx release.\ncpu & build_failure: disable similar to ram, disk & pci.\n\nAlso enable shuffle_best_same_weighed_hosts to randomize host selection\nwhere weights are equal across multiple hosts.\n\nChange-Id: I28f92a7c703d1b78d5cab93418359ce164e61066\nCloses-Bug: 1834255\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config scale: improve route config scalability\n\nAs runtime puppet manifests apply can take significant time to complete,\nwhen there are multiple runtime puppet manifest apply required,\nthe time required to enqueue and handle the manifests apply\ncan overwhelm the runtime config handling in larger DC system.\n\nIn order to handle this more efficiently, the runtime config system is\nupdated to allow for filter on whether a certain runtime class is\nunder apply and queue for its completion accordingly.\nDuplicate config are discarded, since the config will be\ngenerated with the latest hieradata.\n\nThe route api semantic checks factor out the non-critical\nregion checks to allow better concurrent processing.\nThe config applied update is made more efficient by also including\nthe config status update when requested.\n\nTest Plan:\nPASSED bootstrap and deploy SystemControllers\nPASSED stress test create multiple routes on multiple hosts\nPASSED verify created routes against ip route\nPASSED check alarms config out of date\nPASSED DC scaling add and manage large number of subclouds\n\nCloses-Bug: 1964267\nSigned-off-by: John Kung <john.kung@windriver.com>\nChange-Id: I9d6cf49a8a2b266c74aa1635010a11ca26e839b9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove neutron service parameters\n\nNeutron is now containerized, so this cleans up\nsysinv for most of the unused neutron code.\n\nRemoves all neutron service parameters.\nRemoves unwanted references to service parameters in\nthe helm overrides.\nRemoves neutron DB references from upgrades.\nRemoves unused validators, utility functions and constants.\n\nChange-Id: I36d31eebe9978a515a9c68d821f1b80e94cabc5e\nStory: 2004764\nTask: 30948\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubernetes config for 1.15 features.\n\nUpgrading from kubernetes 1.13.5 to 1.15.0 meant the config\nneeded to be updated to handle whatever was deprecated or dropped\nin 1.14 and 1.15.\n\n1) Removed \"ConfigMapAndSecretChangeDetectionStrategy = Watch\"\nreported by https://github.com/kubernetes/kubernetes/issues/74412\nbecause this was a golang deficiency, and is fixed by the newer\nversion of golang.\n\n2) Enforced the kubernetes 1.15.3 version\n\n3) Updated v1alpha3 to v1beta2, since alpha3 was dropped in 1.14\nchanged fields for beta1 and beta2 are mentioned in these docs:\nhttps://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta1\nhttps://godoc.org/k8s.io/kubernetes/cmd/kubeadm/app/apis/kubeadm/v1beta2\n\n4) cgroup validation checking now includes the pids subfolder.\n\n5) Update ceph-config-helper to v1.15 kubernetes compatable\nThis means that the stx-openstack version check needed to be increased\n\nChange-Id: Ibe3d5960c5dee1d217d01fbb56c785581dd1b42c\nStory: 2005860\nTask: 35841\nDepends-On: https://review.opendev.org/#/c/671150\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement Active-Active Heartbeat as HA Improvement\n\nThis update removes hbsAgent configuration from SM now\nthat it is no longer an SM managed/monitored process.\n\nStory: 2003576\nTask: 24907\n\nDepends-On: https://review.openstack.org/#/c/617835\nChange-Id: Ifceb92b5e82c45e1ac42068d11675006f2586169\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set primary interface of active backup bond interface\n\nThe standby controller would potentially fail to boot while\nattempting to PXE-boot when configured with a management LAG.\n\nThis commit determines the interface with the lowest slave MAC\naddress in an active_standby LAG configuration and assigns it\nas the primary interface.\n\nStory: 2002865\nTask: 22814\n\nChange-Id: I73f03cb9cb2fd632a1e64b4e7744e3be067318a4\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: Duplicate puppet resource for SR-IOV VF driver\n\nThis commit fixes a bug which can be seen if more than one interface\nis configured with the same SR-IOV VF driver.\n\nIn this case a duplicate puppet resource error will occur after host\nunlock.\n\nCloses-Bug: #1831077\nChange-Id: I7eeedfdbba62e1a0c71ce367bd717fdafb44ca63\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Istio app not upgraded during platform upgrade\n\nThis commit is to include the istio application in the upgrade\nscript 65-k8s-upgrade.sh.\n\nTest Cases:\nPass: Run application update\n\nCloses-Bug: 1999820\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: I98f3fbd020ca71261e5977d4993b36a97d2ecb57\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure radosgw and ceph-rgw as optional services\n\nradosgw is a now an optional platform service which is provisioned via a\nsystem service parameter. To align with this optionality, the ceph-rgw\nchart which is used to enable the containerized swift endpoints also\nbecomes optional.\n\nChanges include:\n- Update the stx-openstack application disabled_charts setting in the\n  application metadata.yaml to include the ceph-rgw chart. This sets the\n  initial chart state to disabled.\n- Optimize ceph.pp puppet manifests to provide two runtime classes: one\n  for setting up the platform radosgw configuration which will set the\n  haproxy configuration and the other for updating the keystone\n  information in the ceph configuration based on if the ceph-rgw chart\n  is enabled.\n- Update the sm.pp manifest to dynamically provision/deprovision the\n  radosgw based on if it's enabled in the service parameters\n- Rename the SWIFT service parameters to RADOSGW as this is the platform\n  service being enabled.\n- Restructure ceph.py/ceph.pp to generate and use hieradata such that\n  _revert_cephrgw_config() and _update_cephrgw_config() can be combined\n  into a single function for runtime updates.\n\nChange-Id: Id8d5c6b1159881d44810fc3622990456f1e54e75\nDepends-On: If284f622ceac48c4ffd74e7022fdd390971d0fd8\nPartial-Bug: #1833738\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "containerized fm public endpoint can not be accessed\n\nhttp://fm.openstack.svc.cluster.local:80 can not be accessed\nThe ingress service is missing in helm chart\n\nCloses-Bug: 1832155\n\nChange-Id: I61ea514d3092e1e3fedcd8ca8001a178d65282a3\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca host update trustBothCAs phase\n\nThis update added the basic of kubernetes rootca host\nupdate phase trustBothCAs REST API.\n\n- pre-checking before perform the operation\n- Set sysinv-conductor and sysinv-agent to apply runtime\npuppet manifest for new configuration of kubernetes components\non the host that was indicated through CLI (to be added\non further development)\n- puppet plugin adjustment to apply the configuration\nrequired in this phase\n- state update after the operation\n- tox unit tests\n\nStory: 2008675\nTask: 42407\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/788946\nChange-Id: Ie75b63aad31f683fee89928e95b8b9c030c84d0b\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable nova service token\n\nDependent patch has added nova service token capability to nova helm\nchart but is defaulted to disabled.  Enable it via override.\n\nStory: 2003909\nTask: 34734\nDepends-On: https://review.opendev.org/#/c/667583\nChange-Id: I82260b8f0fe196308844990e9523e85ed065bafd\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Periodic message loss between VIM and Openstack pods\n\nThe requests to Openstack services hang/fail sometimes\ndue to message loss when connecting to internal service\nendpoints. This issue was observed before and fixed in\ncommit https://review.opendev.org/#/c/683818/ by setting\nnet.ipv4.tcp_tw_reuse to 0, however, it's still being\nseen on recent STX loads.\n\nIt has been tested and proved that requests go through\ningress pod do not have the issue.\n\nUpdate the default keystone auth endpoint to public url\nin sysinv so VIM and pci-irq-affinity-agent can be\nconfigured to talk to keystone using public urls.\nAslo update the requests from VIM to nova to go through\ningress as well.\n\nChange-Id: Ib5a49ede44f76c649cd64ed027a4d8eb559a61fe\nPartial-Bug: 1880777\nDepends-On: https://review.opendev.org/750055\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update stx-openstack armada manifests\n\nThis refreshes the existing manifest to match the tested configuration\nof the currently supported containerized services.\n\nIn addition, add an alternative manifest that has tests disabled.\n\nChange-Id: I30cf20fd52e94310d9b927b491407282e5f0f315\nStory: 2004005\nTask: 27801\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: set method to manual if data interface has no address\n\nIt was detected that data interfaces were not up after host unlock.\nThis was caused by the usage of static configuration in\n/etc/network/interfaces.d/ifcfg-[interface name] without a static\naddress set on the same config.\n\nOn Debian the interface config file should set the address method to\nmanual if no static address is required.\n\nTest Plan (Debian only):\nPASS  data interface UP after unlock without static addresses\nPASS  data interface UP after unlock with static addresses\n\nCloses-Bug: 1983361\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I285e9cbefec1cf888acbbd19569d8fa5d54e9a04\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve robustness of root CA cert update polling\n\ncert-manager's way of creating new secrets is:\n1. create a k8s secret resource with missing data\n2. populate the missing data after its creation\n\nThus, just checking that secret exists isn't enough when its data is\nthen consumed.\n\nIn order to improve this behavior, this work is:\n- Updating `get_cert_secret` method to check for the secret content and\n  specifically look for the TLS certificate as well\n- Reducing the secret polling interval and increasing its timeout\n- Handling the secret certificates unpacking in a try-catch block\n\nTest Plan:\n\nPASS: Verify kube-rootca-update-generate-cert command properly waits for\nthe secret to be populated in a:\n  - normal condition\n  - throttling condition\n  - condition without polling interval\nPASS: Verify that if the secret fails to create within the timeout\nrange, the proper error will be shown and the user is able to retry\n\nCloses-Bug: 1945331\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\nChange-Id: I06438d5824cc2383953a23fc31d95c399d86fc1a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Defining _request_timeout value\n\nThis commit set an timeout of 30s to read_namespaced_secret.\nSetting it to 30s allow the system to retry at least three times,\nwhat would set the total time of the operation to 3x the timeout\nset.\n\nTest Plan:\n\nPASS: Build an iso, and boot a system with the changes.\nPASS: Benchmark test to set the more reasonable value for the timeout.\n\nCloses-Bug: 2026759\n\nSigned-off-by: Karla Felix <karla.karolinenogueirafelix@windriver.com>\nChange-Id: I1295e93e816faff30a02084acafbb2d9ac6d944d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix calls in sysinv to non-existent methods and constants\n\nThis review enables the E1101 no-member pylint error check and\nprovides fixes for all the places that were broken.\nThere have already been several bugs raised and fixed for code that\nwould have been caught if this error check had been enabled.\n\nFiltered files:\n - The sqlalchemy 'Table' class confuses pylint and has been\nadded to the ignored-classes list along with any\nsqlalchemy Enums declared in the migration scripts.\n\nRemoved:\n - testpci was an old test script and has been removed.\n\n - sysinv_deploy_helper was an old helper script that was unused\nand would have raised runtime errors if invoked.\n - test_sysinv_deploy_helper.py mocked everything in\nsysinv_deploy_helper so was removed with it.\n\nFixed:\n - tox should have been pointing at python-cephclient in stx-integ\nrather than a completely different codebase on pypi.\n\n - impl_zmq / zmq_receiver / matchmaker_redis were removed since\nonly impl_kombu is used by sysinv, and those files are unused\npre-oslo code.\n\n - configure_osd_pools was never being called and had been partially\nremoved. Now the methods calling the non-existent method are removed\nas well. (conductor/ceph, conductor/manager, conductor/rpcapi\n\n - v1/base.py is an abstract class that requires all\nof its subclasses to initialize a 'fields' attribute.\n\n - v1/certificate v1/storage_ceph_external.py and v1/license were\nreferencing a non-existent 'value' attribute when trying to get\na string representation of the exception.\n\n - v1/collection has an accessor for _type which is a required field\non all subclasses.\n\n - v1/lldp_tlv had an invalid check.  The class is never instantiated\nwith a from_ihosts field, so that check would always raise an exception.\n\n - v1/service_parameter was raising an exception that did not exist.\n\n - v1/storage.py was not handling a patch with a for_tierid\n\n - v1/user.py; exception.KeyError does not exist.\n(it is exceptions.KeyError) however exceptions is a default\nimported module so does not need to be explicitly declared.\n\n - v1/utils.py needed to accomodate the renaming of swift to radosgw\nconstants as part of changeid: Id8d5c6b1159881d44810fc3622990456f1e54e75\n\n  - objects/* Just about every DB object declaration defines its fields\nusing a dynamic constructor in the base class, so any use of one of\nthose fields to access the id/uuid during the save routine needed to\nhave this no-member check suppressed.\n\n - helm/base  LABEL_COMPUTE does not exist.\nIt needs to be LABEL_COMPUTE_LABEL\n\n - helm/openstack and helm/elastic require all of their subclasses to\ndeclare a CHART property however did not enforce themselves as\nabstract.\n\n - puppet/ceph was calling an internal method with the wrong spelling.\nit is unlikely those methods are being called and can likely be removed.\n\n - puppet/ovs was referencing a stale constant. The method that had\nthis typo does not look to be used and can likely be removed.\n\n - conductor/ceph: constructing a wrong exception\n\n - conductor/manager: Fixed spelling of method:\nreport_external_config_failure.\nRemoved a call to a non-existent ceph method for a non-existent ceph\nservice param.\n\n - conductor/openstack: fixed typo in name of get keystone client method\n\n - common/exceptions There were exceptions being created that had never\nbeen declared in this file so they have been added.\nThis includes: AddressPoolNotFoundByID, NTPNotFound\n\n - common/periodictask had a metaclass defined in an unusual way that\nthe subclass was unable to tell that it inherited some attributes\n\n - common/policy uses a metaclass to define a variable that confuses\npylint\n\n - common/setup needed to reference the right module for email\nMessageError\n\n - service_parameter - _rpm_pkg_is_installed was no longer needed since\nthe checking for lefthandclient and 3parclient code was removed from\nsysinv.\n\n - sqlalchemy/api had several typos for classes defined in the db model.\nThere were places that would check isinstance against an internal\ntablename value, rather than the python class.\n\n - sqlalchemy/session uses a attribute system that confuses pylint.\n\nChange-Id: If075893067b28b4fb4252ffd12ecef018e890b95\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove obsolete puppet-ovs_dpdk\n\nIntegration of Open vSwitch into the configuration framework\nno longer requires the temporary puppet-ovs_dpdk package and\ncan be removed.\n\nChange-Id: I86206e71818ef71cee185df5064694652d53d17c\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes upgrades support (continued)\n\nContinuing the implementation of kubernetes upgrades. Changes\ninclude:\n- Pre-pull control plane images on both controllers as part of\n  the \"system kube-upgrade-start\". This is necessary, because the\n  upgrade of the first control plane with \"kubeadm upgrade\"\n  creates pods on both masters to download the control plane\n  images. These pods cannot download images from authenticated\n  registries, so we must pre-pull them.\n- Add a new \"system kube-upgrade-complete\" command to set the\n  upgrade state to complete (after checking that all the\n  required components have been upgraded).\n- Add a --force option to the \"system kube-host-upgrade\" command\n  to allow a kubelet to be re-upgraded even if it is reporting\n  that it is running the new version. This could be necessary\n  to handle some error scenarios.\n\nChange-Id: If7d047ed49725d810407b22ccd5eca90a7658189\nDepends-On: https://review.opendev.org/#/c/697185\nStory: 2006781\nTask: 37579\nTask: 37581\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix sssd IPv6 address detection in DC system\n\nIPv6 address family configuration used by sssd to perform DNS\nlookups, does not work for DC system nodes.\nThis commit is fixing how the IPv6 address family is detected.\n\nTests performed:\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd ldap domain service parameters are added and applied at\nruntime in \"/etc/sssd/sssd.conf\".\nPASS: sssd service is successfully started.\nPASS: Verify DNS lookup works successfully for hosts with IPv6 as\nwell as IPv4 in AIO-SX and DC system configurations.\n\nStory: 2009834\nTask: 46775\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I1c2af38e4372dbcc83e0f1519a8533e0c9cffccb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Initial framework and unit tests for puppet plugins\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add helm chart for node feature discovery\n\nThis packages up the upstream \"node feature discovery\" project[1] into\na helm chart and includes it in the ISO.  The expectation is that it's\nthere if end-users want to use it, but it will not be installed by\ndefault.\n\nRather than make a new RPM, the helm chart has been added to the\nexisting stx-platform-helm package.  Unlike the other charts in that\npackage, for now it will be included in the load (to make it available\nright away). Once the helm charts from that application are properly\ninstalled on system installation then we can consider removing the node\nfeature discovery helm chart from the filesystem as it will be available\nfrom the local helm repo.\n\nThere are two primary files describing Kubernetes resources.  They both\noriginally came from version 0.3.0 of the upstream project but one of\nthem needed to be renamed to work with \"helm package\" which restricts\nthe allowable filename suffixes.\n\nThe two upstream files have been modified to support helm overrides.\nThis also required adding a template for the namespace, if a custom one\nis specified.\n\n[1] https://github.com/kubernetes-sigs/node-feature-discovery/\n\nChange-Id: I6e7c8a629994ad4da3834cbefccb94cd01259cc5\nStory: 2005193\nTask: 29954\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename max_cpu_frequency and max_cpu_default ihost attributes\n\nRename max_cpu_frequency to max_cpu_mhz_configured\nRename max_cpu_default   to max_cpu_mhz_allowed\nRename constants related to max_cpu_mhz feature\n\nReason: Improve readability\n\nTest plan:\n  Bootstrap\n  Verify max_cpu_mhz_allowed is set\n  Set max_cpu_mhz_configured from CLI\n  Set max_cpu_mhz_configured from GUI\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I49a4a304f6e5c20f3ce2c0f26b1ce54a807967b5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unused puppet modules\n\n* Remove the nova api proxy puppet module.\n* Remove openstack::swift puppet manifest.\n* Refactor openstack::nova::storage as platform::worker::storage.\n  This requires the nova puppet code in sysinv to write to a\n  different hiera target, and creation of /var/lib/nova.\n* Remove puppet modules from spec file for modules that are no\n  longer being used.\n\nStory: 2004764\nTask: 29840\nChange-Id: Ifa0171b06e23fd77d373983d644df3f56ae4e2de\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update TLS/SSL certificate parameter for sssd\n\nTo establish TLS/SSL connection to multiple AD ldap servers,\nthe SSSD service requires that the CA certificates of the\nremote ldap domains to be configured in parameter\n\"ldap_tls_cacert\" of the SSSD configuration file\n\"/etc/sssd/sssd.conf\".\nFor the CA certificates of the remote ldap domains to be\ntrusted they need to be installed in the stx system using\ncommand: \"system certificate-install --mode ssl_ca <cacertfile>\".\nThe certificate installation makes then necessary that the\nTLS/SSL certificate parameter \"ldap_tls_cacert\" to point to\nthe stx platform supported trusted ssl CA certificate file,\n\"/etc/ssl/certs/ca-certificates.crt\". This commit is making this\nupdate.\n\nTests performed:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: SSSD service is successfully started.\nPASS: Verify TLS/SSL connection to two different AD ldap servers\nusing certificate validation option.\nPASS: Verify ldap users have been discovered and cached in\n\"/etc/passwd\".\nPASS: Remote ssh user login to an AD ldap server is successful.\n\nStory: 2009834\nTask: 46571\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I6c1521943c8f4eea865955e125ef4398c757d91e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use fully qualified names for WAD users/groups\n\nWAD users and groups discovered by SSSD and imported in the stx\nplatform have been configured to get Linux IDs. When there are\nusers or groups with the same name in multiple WAD domains they\nneed to be unequivocally identified by stx platform NSS, using\nthe full name format \"user_name@domain_name\".\nThis commit sets the sssd attribute \"use_fully_qualified_names\" to\n\"true\", the default value being \"false\". The setting ensures that\nuser's full login name, \"user_name@domain_name\" gets reported to NSS.\nSo, with this change, SSSD discovered users and groups would get\nfully qualified names on stx platform. All requests pertaining a\nWAD domain user or group must use the format \"name@domain\", for\nexample \"getent passwd user1@wad.domain1.com\".\nThis commit also removes 2 WAD domain attributes that are obsolete.\n\nTest Plan:\nPASS: Debian image gets successfully installed in AIO-SX system.\nPASS: Configure SSSD to connect to 2 WAD domains, \"wad.domain1.com\"\nand \"wad.domain2.com\".\nPASS: Create 2 users with the same name \"test-user\", one in\nwad.domain1 and the other in wad.domain2. Check using \"getent passwd\"\ncommand that SSSD has cached the users with the fully qualified\nname: \"getent passwd test-user@wad.domain1.com\" and \"getent passwd\ntest-user@wad.domain2.com\".\nPASS: Check that \"getent passwd test-user\" or \"getent passwd|grep\ntest-user\" does not find the users.\nPASS: Verify ssh works using the fully qualified names for the users.\nPASS: Verify that 2 groups with the same name, \"test-group\", created\none in wad.domain1 and the other in wad.domain2 follow the same rules\nas users with the same names.\nPASS: Add test-user from wad.domain1 to the test-group in the same\ndomain and verify membership. Verify that test-user in wad.domain2 does\nnot belong to \"test-group\" in wad.domain1.\n\nStory: 2010589\nTask: 48270\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I34388e2f1389cb39a6d258b126572e6a72308b40\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow configuration of isolcpus\n\nAllow a mixture of floating and pinned workloads by allowing the\napplication cpu's to be split between isolated and non-isolated\n\nCPUs specified as isolated will be added to the isolcpu set in the grub\nconfig. Lowlatency worker nodes will no longer have all application CPUs\nin the isolcpu set.\n\nKubernetes reserves CPUs in a block, not by numa node or range of CPUs.\nDue to this we must restrict the Isolated CPUs to a contiguous block\nstarting on numa 0 (after the platform cores).\n\nAdditional work will be required to support isolcpus with vswitch or the\nopenstack application.\n\nChange-Id: Ia849967e086bb1dadf27020e400a223c4c7cae5f\nStory: 2006565\nTask: 36664\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable enumerate for local openldap domain\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable raise/get/clear NFV alarm to container fm-rest-api\n\nadd puppet parameters and write to nfv config file to\ndisable raise/get/clear NFV alarm to container fm-rest-api service\n\nStory: 2004008\nTask: 33573\nDepends-On: https://review.opendev.org/#/c/658972/\nChange-Id: I3ab37fe476ad083b5c8acca2684973eec30b8005\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove optionality of kubernetes from manifests\n\nAny place where the kubernetes::params::enabled flag\nwas checked, it is always considered to be true.\n\nThis leads to some manifest code never being invoked\nso a subsequent commit will clean up those code blocks.\n\nThe openstack manifests are not included in this change\nbecause most of those will be removed in a later commit.\n\nStory: 2004764\nTask: 29821\nChange-Id: Id47c69d6da2d243c607bcb3db0836073321e4146\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable default StorageClass support in the rbd-provisioner\n\nAdd rbd-provisioner chart support for specifying a specific storage\nclass as the default system storage class.\n\nThis allows chart releases to make persistent volume claims without\nspecifying a specific StorageClass.\n\nChange-Id: I74d4f39432734df7cdaba22590ed0e4b6949839f\nStory: 2005424\nTask: 31009\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Populate barbican region_name during bootstrap\n\nDuring DC System Controller deployment, the ansible script\nintermittently fails during the barbican credential creation\non ansible re-play. Even in the re-play case, it is a random\nfailure depending on the order of the endpoints in the service\ncatalog.\n\nThe reason for this to happen is that, during the initial play, the\nbarbican secrets are created prior to initial system configuration\npopulation so endpoints for SystemController region are not created.\nBarbican will use the RegionOne keystone endpoint. But after initial\nplay finished, endpoints for SystemController region are created thus\nthere are two keystone endpoints (RegionOne and SystemController).\n\nWith two region keystone endpoints during re-play, Barbican may pickup\nSystemController region keystone endpoint during credential creation.\nYet the service for SystemController region (dcorch identity proxy) has\nnot started, causing the credential creation to fail.\n\nThe fix is to explicitly configure Barbican region_name to RegionOne\nduring bootstrap so re-play will use RegionOne keystone endpoint. Then\nupdate Barbican region_name after service endpoints reconfiguration to\nmake region_name consistent with keystone service catalog, so requests\nto Barbican will always succeed.\n\nChange-Id: I7afda2806aad6437f746ca8ff39adee2d29571cf\nCloses-Bug: 1859726\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing puppet-lint failures in zuul\n\npuppetlint zuul jobs are timing out.\nThe problem is that zuul-cloner is being used, which is deprecated.\nThis fix removes the zuul-cloner code from the pre job.\n\nChange-Id: Ib34b5b226c7cc5ace8917e513a901596b39b8f8e\nCloses-Bug: 1834350\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Stein: Update ceilometer overrides\n\nThis commit includes the following ceilometer overrides to\nalign with the ceilometer docker image based on master branch.\n\n- Remove the usage of the elimated configuration options\n- Remove the definitions of the elimated transformed metrics in\n  polling/gnocchi_resources yamls as the transformer was removed\n  from ceilometer master\n- gnocchi: remove the usage of the elimated filter http_proxy_to_wsgi\n- Add overrides for meter_definitions_dirs option to prevent loading\n  duplicated meter definitions\n\nChange-Id: Iad1548864bc053b657074de66a99ae6342c5188d\nStory: 2004751\nTask: 28965\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rebase Armada to latest master\n\nRebasing Armada to use the latest docker image tag\n8a1638098f88d92bf799ef4934abe569789b885e-ubuntu_bionic.\n\nChange-Id: Ic48a2e053d0de7dacfd6a07d817947e11dc8d596\nStory: 2006347\nTask: 36105\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change permission and ownership on dcorch files\n\nChange puppet to set appropriate dcorch ownerships and privileges\nfor /etc/dcorch/api-paste.ini and /etc/dcorch/dcorch.conf\n\nStory: 2002992\nTask: 23006\n\nChange-Id: I5be797de8bb9d8a7e73b9b7888e155f9f103e7fd\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet support for authenticated registries\n\nThis commit supports to pull images from alternative authenticated\nregistries that configured at Ansible bootstrap to bring up k8s pods\nat puppet time.\n\nAt bootstrap time, barbican secrets are created to store credentials\nfor accessing registry and alternative registries info are stored in\nservice parameter. At puppet time, the barbican sercret is retrieved\nto get the credentials in order to pre-pull k8s images that required\nby kubeadm to bring up static pods(ie..kube-controller-manager,\nkube-apiserver, kube-scheduler..).\n\nThe images for dynamic pods(kube-multus, kube-sriov-cni, calico..) and\ntiller are not needed to pre-pull, imagePullSecrets is added in their\npod spec to pass credentials to kubelet. This is done in Ansible\nbootstrap https://review.opendev.org/#/c/679136/\n\nThis commit also updates to pull Armada image before creating Armada\ncontainer if Armada image is not available in docker cache.\n\nTests(AIO-SX, AIO-DX, Standard):\n - All types of system are installed successfully\n - Verified all k8s/gcr/docker images are downloaded from\n   authenticated registry on controller-1 and worker nodes\n - Verified images from authenticated registries are used\n   by k8s static/dynamic pods on controller-1 and worker nodes\n - Swact to controller-1, lock/unlock controller-0. Verified\n   that tiller image is downloaded from authenticated registry\n   and tiller pod is created on controller-1\n - Swact to controller-1, apply application. Verified that\n   Armada image is downloaded from authenticated registry and\n   Armada container is created.\n\nChange-Id: Iaabef0f5d8a6a4640dcfde93a8c0449948f4a59f\nDepends-On: https://review.opendev.org/679335\nStory: 2006274\nTask: 36379\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix two coredns pod in simplex system\n\nThere are 2 coredns pod in default. For simplex system, use kubectl\nscale cmd to set the replicas to be 1.\n\nTest:\nPass simplex and duplex deploy test, and coredns pod is 1 for simplex\nand 2 for duplex. affinity and nodeselector setting for duplex is kept.\n\nCloses-Bug: 1822880\n\nChange-Id: I18f6cb9039bf86ffcd94f36fa5348ff274cc482d\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"debian: Remove sleep in network interface pre-up\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Updating nfv_proxy_public_url\n\nTo override nfv public url accordingly to OAM_IP\nwe need to add this data update on hieradata, to\nonly then apply it into corresponding manifests.\n\nTest Plan:\nConverges with the ones referred on\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/816523\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/816523\nPartial-Bug: #1949620\nChange-Id: I14f3e18778442fedb495ceff7b48e25a9ca3694a\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create HELM chart for nova-api-proxy\n\nNew helm chart created for nova-api-proxy\nNew module added to helm overrides to configure nova-api-proxy.conf\nTurned of yamllint for helm charts, openstack helm charts are yaml\nfiles but not proper yaml syntax\n\nStory: 2004007\nTask: 26953\n\nChange-Id: Ic45d6cb801e142ddd7fc7da1638ba0e65cbacc22\nSigned-off-by: Lachlan Plant <lachlan.plant@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add docker proxy configuration for kubernetes\n\nCurrent config_controller for containerization pulls kubernetes\nimages from public container registry. This requires controller\nto access internet. If a host network is behind a proxy, there\nis no chance to setup docker proxy configuration during config_\ncontroller, therefore, kubernetes images are not accessible.\n\nDocker proxy configuration questions were added to require users\ninput http/https proxy and no proxy settings. The docker proxy\nconfigurations are added to service_parameter table in sysinv.\n\nhttp-proxy.conf is the proxy info file required by docker daemon,\ngenerated by docker puppet manifest. It consists of the user\ninput docker proxy configuration.\n\nTests:\nAIO-SX: public k8s images accessible\nAIO-DX: public k8s images accessible\nAIO-SX without k8s config: config_controller successfully\n\nStory: 2004710\nTask: 28741\n\nChange-Id: Ie273ad77338cdec496c5d05bf3e05baa83166626\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implementation of PTP support in SysInv and Puppet\n\nPrecision Time Protocol (PTP) support is added to StarlingX.\nController Nodes act as a Boundary Clocks and synchronize its clock to a\nGrand Master clock via OAM interface. Serve as a time source to other nodes.\nCompute/Storage Nodes are Slave Clocks (Ordinary Clocks) and synchronize\nits clock to a Controller Nodes via Management interface.\nAPI is provided to enable and configure PTP as follows:\n\"system ptp-modify --enabled=<true/false>\" is there to turn it on/off.\nNote that NTP must be disabled first before turning PTP service on.\n\"system ptp-modify --mode=<hardware/software/legacy>\" selects time stamping.\nHardware timestamping is the default option and achieves best time syncing.\n\"system ptp-modify --transport=<l2,udp>\" switches between IEEE 802.3 or UDP\nnetwork transport for PTP messaging. L2 is the default transport.\n\"system ptp-modify --mechanism=<e2e,p2p>\" sets the PTP delay mechanism.\nOptions: default delay request-response (E2E) mechanism and peer delay (P2P).\n\"system ptp-show\" displays the current status of PTP service.\n\nChange-Id: I6bb6162903c70a49b55f4fc02b44e5ca8a66d5a5\nStory: 2002935\nTask: 22923\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-manifests: validate cpu list before setting latencies\n\nDo not attempt to set wakeup latency unless the list of CPU instances is\nnon-empty.  If either the low or high wakeup list is empty then there is\nno need to attempt to run the script.  Running the script with an empty\nlist results in a manifest apply errors and fails the node\ninitialization.\n\nStory: 2004357\nTask: 27957\n\nChange-Id: I89f19388d131b6c377020c55f5b13960738e350d\nSigned-off-by: Allain Legacy <allain.legacy@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Containerization, support 2 keystones in sysinv\n\nSupport bare metal and pod based keystone in sysinv.  The existing\nkeystone_authtoken section of sysinv.conf remains and is used for\nplatform service authentication, while openstack service authentication\nparameters are moved to a new openstack_keystone_authtoken section.\nAdmin credentials are used in the new openstack_keystone_authtoken\nsection and the region name parameters are also moved to this new\nsection.\n\nChange-Id: I7a53dd5a2dc52213e0f1e0cc748649a33f0f9f40\nStory: 2002876\nTask: 26926\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"k8s upgrade networking before first controller\"",
        "issue_summary": ""
    },
    {
        "commit_message": "/etc/ceph/ceph.client.None.keyring not created on standby controller\n\nThis commit ensures that file /etc/ceph/ceph.client.None.keyring is\ncreated on both controllers after ceph backend is added.\n\nChange-Id: I49c7b540caca18bada7166c9e7fb2f4b3475a5d3\nCloses-Bug: 1810440\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Boost sm process priority in VBox environment\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Using general naming for app openstack\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Nova prefix from constants\n\nIn this commit, removed NOVA prefix from the constants as this is a\nhistorical artifact tracing back to an openstack-only solution.\n\nTEST PLAN:\n\nPASS: bootstrap is success\n\nStory: 2010604\nTask: 48427\n\nChange-Id: I59c35ce4866a39c61d39700cd812158100074cef\nSigned-off-by: Md Irshad Sheikh <mdirshad.sheikh@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Clamp kubernetes at 1.12.3 during init phase\n\nRather than pulling the latest upstream stable version,\nthis enforces a known version of 1.12.3\nThis was required after 1.13 was released Dec 3 and broke\nfunctionality.\n\nStory: 2004520\nTask: 28311\nChange-Id: Ia870483d523098cf1597085c3111ca71ea0b8b56\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Install secondary controller nodes with kubeadm join\n\nKubeadm init is no longer supported for installing secondary nodes in an\nHA kubernetes cluster. kubeadm join with the --controller-plane option\nshould be used.\n\nChange-Id: I57d2d01335739fb3dce5a9c4cd749b99eafbf5ee\nPartial-Bug: 1846829\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "host-label validation via kubernetes-client\n\nThe host label key and value are changed to be stored in\nseparate fields in the database. A unique constraint\nbetween the host and the label key is added.\nThe validation of the label key and value is performed in the\nkubernetes client api instead of replicating the checking\nin the host-label api. The error message from the kubernetes\nclient api is passed to the host-label api.\n\nStory: 2002845\nTask: 24936\n\nChange-Id: I7e318d5e58602d33652d49452e35d99322565148\n",
        "issue_summary": ""
    },
    {
        "commit_message": "k8s: Make sure PMON will not start native libvirtd\n\nUpdate the PMON libvirtd configuration file to ignore the service if k8s\nis enabled.\n\nUnder no circumstances should we allow PMON to monitor and (re)start\nnative libvirtd if the --kubernetes option is enabled. libvirtd will be\na containerized service and only enabled via helm/armada.\n\nChange-Id: Iace3e51184787c74bfe681f69293fe26f9655d7d\nStory: 2002876\nTask: 26168\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "handle oidc-auth-apps during upgrade\n\nAfter upgrade the oidc-auth-apps application is still at 22.06 release\nversion. oidc-auth-apps is excluded from 65-k8s-app-upgrade.sh for\nupgrade from 21.12 to 22.12.  But it should be run for 22.06 to 22.12\nupgrade.\n\nCloses-bug: 1999093\n\nTest-plan\nPASS: unit test, manually tested\nPASS: AIO-SX upgrade 22.06 to 22.12, apply oidc-auth-apps\n\nChange-Id: Ib108951da3f216ca5a2eb1dd6d36a2bd098bc79a\nSigned-off-by: Michel Thebeau <Michel.Thebeau@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide an API to control enabling/disabling application charts\n\nExtend the helm_charts API to support an enable attribute. This\nattribute is set on application upload and stored in the existing\nsystem_overrides element of the helm_overrides table.\n\nChanges include\n- Add application metadata support for disabling charts on application\n  upload.\n- Add the system helm-chart-attribute-modify command to allow enabling\n  and disabling charts from the command-line. This removes the current\n  implementation of adding a faux label via the system host-label-assign\n  command to enable and disable charts.\n- Add a --long option to helm-override-list to enable easy viewing of\n  what charts are enabled for a given application\n- Enhance the ArmadaManifestOperator to make this a base class for\n  application specific operator classes. Introduce classes for the\n  stx-openstack and platform-integ-apps manifests with specific\n  knowledge of the charts and chart groups within each class.\n- Use stevedore to load the application specific manifest operators.\n  This will allow future packaging of manifest operators with new\n  application tarballs.\n- Move the helm chart definition from the common/constants.py to\n  helm/common.py. This limits helm/armada specific data leakage outside\n  of the helm directory, which we may carve out of sysinv in the future.\n- Clean up the code related to the faux labels: LABEL_IRONIC,\n  LABEL_BARBICAN, and LABEL_TELEMETRY\n- Rework the manifest update code in the plugins to include checks for\n  if the chart for a given application has been disabled.\n\nChange-Id: If284f622ceac48c4ffd74e7022fdd390971d0fd8\nCloses-Bug: #1833746\nDepends-On: I418f0fe4978946a44e512c3025817fb27216c078\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Provision dbmon for AIO-DX and DC systemcontroller\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Aodh and Panko to the armada manifests\n\nAodh and panko charts are added to the openstack-telemetry chart group,\nbut openstack-telemetry group still needs to be temporarily disabled\nas gnocchi requires ceph storage which is not supported in 2 nodes\nconfiugration yet.\n\nIn the meantime, user will need to manually enable openstack-telemetry\nin the armada-manifest chart groups.\n\nChange-Id: Ia8f4ad7ddbe85a54b6774d3df1666d3fc858c8ca\nDepends-On: https://review.openstack.org/#/c/618006/\nStory: 2003909\nTask: 27083\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust agent to handle Broadcom NIC corner cases\n\nWhile testing a load installed in a host with the Broadcom BCM57504 NIC\nit was identified that interfaces were not displaying the correct speed\nwhen queried through ethtool, reason being that for this specific NIC\nthey may take a little while to be properly operational. It was also\nnoticed that SR-IOV interfaces can only be set up after the\ncorresponding PF is up.\n\nThis change ensures that Broadcom interfaces are operational before\nprobing for their line rates. It also adds a flag to be passed to puppet\nthat ensures that VFs are set up only after the conrresponding PF is\nadministratively up. It adds 25Gbps as a valid port speed and ensures\nthat \"ip link set up\" and \"ip link set down\" commands are properly\nwaited for.\n\nTESTS:\n- Installed on a host with a BCM57504 NIC successfully\n- Interface speed is displayed correctly when checked with ethtool\n- VFs can be created successfully through system commands\n\nStory: 2009915\nTask: 45007\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: I2519114a3deb9bd51a35ab1ded628df095f0dc1b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "update multi-node charts to use strict anti-affinity\n\nCurrently there are a number of charts which specify \"preferred\"\nanti-affinity by default.  This is problematic since a lock/unlock\nof a controller node will move all of those pods onto the other\ncontroller where they will remain even after the original node\nis back online.\n\nSwitching the pods to use \"required\" anti-affinity will ensure that\nwe don't put duplicate pods on the same controller.\n\nStory: 2004520\nTask: 28623\nChange-Id: I07841373ccf23131c24454a153aff7358366c626\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow optional use of a cgts-vg/instances-lv fs\n\nTo support long running patch-able systems that don't require a\nreinstall, the entire root disk will be allocated to cgts-vg as part of\ninstallation.\n\nIn this context, to support existing single disk worker installs, add\nsupport for a 'cgts-vg/instances-lv' filesystem. This maintains the\nexisting support for 'a nova-local/instances-lv' filesystem which can be\nused for larger multi-disk installs.\n\nUpdates:\n- Semantic check update to require that a 'nova-local/instances-lv' OR a\n  'cgts-vg/instances-lv' must be configured ONLY if a host with a worker\n  sub-function has an openstack compute label.\n- Semantic check update to ensure that only one of\n  'nova-local/instances-lv' or 'cgts-vg/instances-lv' can be enabled at\n  one time.\n- Semantic check update to require the host to be locked in order to\n  change the configuration for the 'nova-local/instances-lv' or the\n  'cgts-vg/instances-lv' as they share a common mount point.\n- Add support for an optional 'instances' filesystem. This is the second\n  optional filesystem along with 'image-conversion'. Both are\n  openstack specific.\n- Enable the 'instances' filesystem changes to be 'staged' when the host\n  is locked. This will allow marking one of 'nova-local/instances-lv'\n  or 'cgts-vg/instances-lv' as enabled and the other disabled to take\n  effect at unlock.\n- Remove the semantic check to require the openstack application to be\n  uploaded before allowing the 'image-conversion' filesystem to be\n  enabled.\n- Add a common utility function is_filesystem_enabled() to determine if\n  the optional filesystems are enabled.\n- Add storage puppet plugin support for 'instances' filesystem\n- Cleanup some dead code related to the cinder-volumes volume group and\n  DRBD filesystem\n\nTest Plan:\nPASS - Install AIO-SX, bootstrap, unlock\nPASS - Install 2+2+2, bootstrap, unlock\nPASS - AIO/worker: Add instances-lv before unlock\nPASS - AIO/worker: Lock, remove instances-lv, unlock\nPASS - AIO/worker: Lock, add nova-local, unlock\nPASS - AIO/worker: Lock, remove nova-local, add instances-lv, unlock\nPASS - AIO/worker: Lock, remove instances-lv, add nova-local, unlock\nPASS - AIO/worker: Lock, remove nova-local, unlock, lock, add openstack\n       label, ensure instances is required\n\nChange-Id: I79c43efa38bd5fb452c178b4e872519f55452340\nStory: 2010444\nTask: 46982\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/866532\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create the admin network in sysinv / DB.\n\nThe current restrictions for network reconfiguration\npost-install is problematic for correcting or updating\nnetwork configuration for Subcloud deployments or\nsupporting Subcloud rehoming procedures.\n\nThe proposed solution is to decouple the Distributed\nCloud networking operations from the management network\nby introducing a new admin network type that will be\nused for the addressing and routing between the central\nSystem Controller and the Subcloud.\n\nTest Plan: Debian\nPASS: - system network-add\n      - system network-delete\n      - system addrpool-add\n      - system addrpool-modify\n      - system interface-nework-assign\n      - system host-addr-list controller-0\n      - system interface-network-assign controller-1 (AIO-DX)\n\nStory: 2010319\nTask: 46688\n\nSigned-off-by: Mayank Patel <mayank.patel@windriver.com>\nChange-Id: I1e7cb782e683daeb847e4855aeb3922a7655b2e9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix 'print' issue for Python 2/3 compatible code.\n\nand remove 'H233  Python 3.x incompatible use of print operator'\npep8/flake8 ignore case in cgts-client and sysinv tox setup\n\nenable flake8 hacking and ignore some case and fix it later for\nthose ignore case.\n\nStory: 2003433\nTask: 24629\n\nChange-Id: I0dfc4c17681dd9b0042a4277b7956d270eb73495\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add PTP monitoring to collectd\n\nThis update adds Precision Time Protocol (PTP) monitoring\nto the current list of inhouse developed collectd plugins.\n\nRefer to the ptp.py header for a description of the monitoring\nservice algorithm and inline comments for detailed behavior.\n\nTest Plan: see depends update commit message\n\nDepends-On: https://review.openstack.org/#/c/647524\nChange-Id: I46ebcb91e80a617853c298a03b1f733e0c33afb8\nStory: 2002823\nTask: 29492\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove stx branding from containerized horizon\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix certificate-key to 64 characters\n\nUpdate get_secure_static_config() to fix the\nkubernetes::kubeadm::certificate-key,  to the 64 characters\nexpected by kubernetes.\n\nChange-Id: I366e6eb1dc4e764425ef2a82a493db47a080f49a\nCloses-bug: 1876755\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable domain service parameters validation and delete\n\nThis commit  enables ldap domain service parameters validation.\nAll parameters values are checked using validation functions.\nAll the mandatory parameters are checked to be present and if\nat least one is missing the domain configuration is not applied.\nDeletion of the domain_name service parameter for a certain\ndomain removes the full domain configuration from sssd.conf.\nService parameters are applied to controller nodes as well as\nworker and storage node personalities.\n\nTests performed:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: Add/modify/delete service parameters works as expected.\nPASS: sssd service is successfully started.\nPASS: Remote ldap domain service parameters are added and applied at\nruntime.\nPASS: Verify connection to the new ldap server using ldapsearch.\nPASS: Verify ldap users have been discovered and cached in /etc/passwd.\nPASS: Successful remote ssh to STX server using an AD ldap server user.\n\nStory: 2009834\nTask: 46534\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ie026e5cecb00e0a13a12fb2550f206662eaedf7a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix sssd IPv6 address detection in DC system\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Backup control-plane during k8s network upgrade\n\nKubernetes upgrade abort is supported for AIO-SX starting stx 9.0.\nKube version N control-plane components: etcd and static\nmanifest pods at /etc/kubernetes/manifests need to be backed up\nto a secured location which can then be restored during abort.\n\nThis change adds methods to sysinv to backup etcd data and\ncontrol-plane static pods i.e. kube-apiserver, kube-scheduler,\nkube-controller-manager to a secured location before k8s upgrade\nnetworking puppet manifest is run.\n\nWe could do this backup either during kube-upgrade-start or\njust before upgrading control-plane of the first master. But\ndoing it before the start of kube-upgrade-networking allows us to\nnot miss any changes done to pods (effectively etcd) by the user to\ninclude to the backup while kube-upgrade-download-images is running\n(which might take significant time) and to omit changes made to\npods by running kube-upgrade-networking.\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/881895\n(There is no direct dependency of the core logic of the code but\none of the unit test case fails without this change)\n\nTest Plan:\nAIO-SX:\nPASS: Perform k8s upgrade 1.23.1 -> 1.24.4. Manually check if the\n      backup is created at /opt/backups after kube-upgrade-networking\n      is run. Kubernetes upgrade succeeds.\nPASS: Re-run of system kube-upgrade-networking succeeds if ansible\n      playbook for upgrade networking fails at first run.\n\nNotes:\n1. kube-upgrade-networking may fail during control-plane backup\noperation or ansible playbook run. We clean up any partially created\nbackup if it fails during backing up control-plane.\nIf ansible playbook fails, user may re-run kube-upgrade-networking\nor abort the upgrade. Second test case above addresses the re-run\nof kube-upgrade-networking. Aborting the upgrade is followed by\nkube-upgrade-delete which cleans up the created backup.\nThis change https://review.opendev.org/c/starlingx/config/+/878715\ntakes care of that.\n2. A test case that tests failure of method\nremove_kube_control_plane_backup is omitted as it is failing\nbecause of some unknown tox related error. A task will be created\nto keep track of it and tackle in future.\n\nStory: 2010565\nTask: 47735\n\nSigned-off-by: kaustubh dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Ibac4797b4655cbf57301ed0fae0f880d28dd8ec5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph uprev v13.2.2 Mimic\n\n* ceph: update crushmap for ceph mimic\n\n* puppet-ceph: remove ceph jewel rest-api configuration\n\n    ceph-rest-api is implemented in ceph-mgr on ceph mimic/v13.2.2 version.\n    Remove the configuration which is for ceph-v10.2.6/ceph-rest-api\n\n* puppet-ceph: enable mgr-restful-plugin\n\n    ceph configuration is under puppet control. ceph-mgr/restful\n    plugin is going to be started in mgr-restful-plugin script.\n\n    output log when starting mgr-restful-plugin\n    output log in puppet log to know the execute commands.\n\n* puppet-ceph: pass osdid to ceph::osd when creating resources\n\n    ceph::osd needs to be created with the same OSD ID that's\n    already present in sysinv database.\n\n* puppet-ceph: update ceph.conf with osd device path\n\n* puppet-ceph: fix aio-dx unlock issue caused by ceph-mon\n\n* puppet-ceph: ensure radosgw systemd service is not started\n\n    Make sure radosgw service is not accidentally\n    started by systemd.\n\n* puppet-sm: provision mgr-restful-plugin\n\n    After mgr-restful-plugin is enabled by ceph.pp, SM will\n    monitor mgr-restful-plugin status and contor its status.\n\n* sysinv-common: ceph use status instead of overall_status\n\n    'overall_status' is deprecated in Ceph Mimic. Use 'status' instead.\n\n* sysinv-common: ceph incorrect parsing of osd_crush_tree output\n\n    len(body) is used to iterate osd crush tree which is not\n    correct because the crush tree dictionary is stored in\n    body['output']\n\n* sysinv-common: ceph refactor crushmap_tiers_add\n\n    Refactor crushmap_tiers_add() to always check/create missing\n    ceph tiers and corresponding crush rules. This is currently\n    gated by tier.status == constants.SB_TIER_STATUS_DEFINED\n\n* sysinv-conductor: remove api/v0.1 from ceph api endpoint\n\n    \"restapi base url\"(ceph.conf) is removed from ceph Mimic\n    version. remove the base url now.\n\n* sysinv-conductor: ceph convert pool quota None to zero\n\n    On non-kubernetes setup kube_pool_gib is None which\n    raises an exception when trying to do integer\n    arithmetic.\n\n* sysinv-conductor: remove unused update_ceph_services\n\n    update_ceph_services() is triggering application of\n    runtime manifests but that's no longer supported on\n    stx/containers.\n\n    Removing dead/unused code.\n\n* helm: rbd-provisioner setup kube-rbd pool\n\n    Ceph Mimic no longer supports \"ceph osd pool set <pool-name>\n    crush_rule <ruleset>\" with a numeric ruleset value. Crush\n    rule name should be used instead.\n\n    Starting with Ceph Luminous pools require application tags\n    to be configured with: \"ceph osd pool application enable\n    <pool-name> <app-name> \" otherwise ceph health warning is\n    reported.\n\n    Enable \"rbd\" application on \"kube-rbd\" pool.\n\n* sysinv-helm: remove custom ceph_config_helper_image\n\n    Remove custom ceph config helper image needed to adapt\n    upstream helm charts to using Ceph Jewel release. Because\n    we're using Ceph Mimic this helper image is no longer\n    needed.\n\n* sysinv-helm: ceph use rule name instead of id\n\n    Ceph osd pool crush_rule is set by name. (Jewel release\n    used numerical value for crush ruleset)\n\nStory: 2003605\nTask: 24932\n\nSigned-off-by: Changcheng Liu <changcheng.liu@intel.com>\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nSigned-off-by: Dehao Shang <dehao.shang@intel.com>\nSigned-off-by: Yong Hu <yong.hu@intel.com>\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n\nDepends-On: Ibfbecf0a8beb38009b9d7192ca9455a841402040\nChange-Id: Ia322e5468026842d86e738ece82afd803dec315c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller image to v2.12.1\n\nThis commit upversions tiller to v2.12.1, to align\nwith helm upversioning.\n\nStory: 2004520\nTask: 28776\nChange-Id: I16955a9fc6edfbb60f31fc941b3ff6d7ccc2342c\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Suppress lldp frames on virtual interfaces\n\nvirtual interfaces like cali*, docker* is used by container/kubernetes.\nWe need to suppress lldp frames on these interfaces.\n\nChange-Id: I38e29c4d691cd4be30954136d7e1a43b0f61c925\nCloses-bug: #1815804\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Make rbd-provisioner installation more deterministic\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Detect BONDING_OPTS when applying network config\n\nThis commit adds BONDING_OPTS to the list of attributes to check for\nchanges when applying network config.\n\nThis commit also adds BONDING_OPTS as a special case inside of\nnormalized_cfg_attr_value.  This is necessary becase The BONDING_OPTS\nattribute contains '=' characters, so is not correctly parsed by\nsplitting on '=' as done for other attributes.  Because this is only\nbeing used to check for changes to BONDING_OPTS, rather than actually\nusing the returned value, this will return the whole line for\nBONDING_OPTS.\n\nCloses-Bug: 1789444\nChange-Id: I01d1ef2bc80093d41fe95b68e4abdc309b574d47\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Renaming deprecated options and updating spec requirements\n\n- Renaming idle_timeout to connection_recycle_time since it was\n  deprecated in Stein\n- Explicitly including required packages in the sysinv spec file to fix\n  DC\n\nChange-Id: Ief055d26f3a1eb43b8cf144952a49e7e0f3ff939\nStory: 2004765\nTask: 28883\nDepends-On: https://review.openstack.org/#/c/653086\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Neutron Network Rebalancing on DHCP Agents\n\nSet network_auto_schedule to false so as not to conflict\nwith new dhcp network rebalancing which occurs on host state\nchanges.\n\nStory: 2003857\nTask: 30279\n\nChange-Id: Id7597300cf668d7cd49213b0c799407d04c93f7b\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove maintenance of two manifest files\n\nmanifest-no-tests.yaml and manifest.yaml and identical except for the\n\"test: enabled\" value. We currently only use \u201cfalse\u201d. The manifest fails\nto apply when test enabled is set to true. This issue is being tracked\nwith https://bugs.launchpad.net/starlingx/+bug/1819021. Once the issue is\nresolved with test enabled a system parameter should control setting this\nconfig to true/false.\n\nStory: 2003909\nTask: 29878\n\nChange-Id: Iae3450e8285b775350ab05350cbe4cf420e6e4ef\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove some firewall rules\n\n* Remove those firewalls rules managed by puppet for exposing platform\n  services, because we have used Calico to create some rules to do the\n  same thing.\n* Remove system firewall-rule-related commands and controllers.\n\nPassed tests:\n* Fresh build\n* Deployment(simplex, duplex, multi-node)\n* System-level tests\n  * firewall-rule-xxx commands was removed as expected.\n  * puppet firewall rules have been removed as expected.\n  * manually check iptable rules.\n  * use the utility of uc to test exposed tcp ports and a few\n    non-exposed tcp ports again.\n  * create vms\n\nStory: 2005066\nTask: 29864\n\nDepends-On: https://review.openstack.org/#/c/649217\nChange-Id: Ie5df744598c75d45d21ce6585f31f6d8f1809f04\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Collectd+InfluxDb-RMON Replacement(ALL METRICS) P1\n\nThis update introduces two new open source services to the Titanium\nCloud.\n\nThe first is 'collectd' which is a plugin based resource monitoring\nengine intended to obsolete the existing rmond process.\nThe second service is 'influxdb' which is a light weight time series\ndatabase intended to store sample data.\n\nCollectd and influxdb are configured through puppet and are started by\nmanifest.\n\nCollectd runs on all hosts while influxdb only runs on the controllers,.\nColectd periodically monitors platform cpu, memory and filesystem\nresources in terms of percentage used value. The value sample for each\nmonitored resource for each audit cycle is forwarded to the active\ncontroller for storage in the 'influxdb' database.\n\nThis update develops several collectd 'support' plugins for managing\nthresholds, alarms, and host degrade. Additionally, this update\nimplements home-grown plugins for platform cpu and memory monitoring\nand combines the static and dynamic filesystem resource monitoring in\nrmond into a single filesystem plugin based on collectd's stock 'df'\nplugin.\n\nCollectd's network plugin is configured to forward samples to the active\ncontroller while influxdb that only runs on the controllers are\nconfigured to listen for collectd samples and then store them in its\ndatabase.\n\nChange-Id: I797f01ca09df3a7e8236153e4f0cb1f90be4c9b5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Support kubernetes 1.21 removal of namespace API export parameter\"",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Generate WPC sysfs hieradata\n\nProcess the ptp-parameters for the clock service type and return the\nrequired hieradata for puppet to apply the NIC configuration commands.\n\nAdds the new function _generate_clock_port_dict() which handles\nthe formatting of the clock interface hieradata.\n\nThis function also determines the 0th port of the target NIC\n(base_port) which is required to run the commands against.\n\nThis change also includes a fix to prevent single instance ptp from\nbeing enabled when a user configures multi-instance ptp.\n\nTest Plan:\nRegression: Pass\nFull build and install, single instance ptp unaffected. Multi-instance\nptp is configurable, syncE is configurable.\n\nUnit tests: Pending completion of task 44186\n\nStory: 2009130\nTask: 44218\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I01fd65585d02b6fcd2a42d6ae55414b4baa22475\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca update start\n\nModifications for new k8s-rootca-update-start API\n\n- For the beginning of our feature we've developed an API\nto be responsible to start our procedure in the system and\nregister it in db.\n- Addition of constants describing the possible states to be\npresented during the execution of kube-rootca-update procedure\n- Adding check to kube_upgrade API for assurance of no\nroot CA update in progress before upgrade starts\n- Enhanced health checking to include kube-rootca-update\nspecific checking\n- Tox unit tests\n\nStory: 2008675\nTask: 42405\nDepends-on: https://review.opendev.org/c/starlingx/fault/+/788943\nChange-Id: I59ebf977303c13f9c9c97276bb379ef125bdcfc7\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker runtime integration.\n\nProvision 10G logical volume in cgts_vg for\ndocker usage. puppet changes to configure and start docker if\n--kubernetes config_controller option specified.\n\nChange-Id: I6820025e34564283981798a53ad2f3d42162e804\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Import subprocess from eventlet.green package\n\nThe python kubernetes client requires a newer version of eventlet.\nHowever, newer versions of eventlet have an issue with the subprocess\nmodule, which requires subprocess to be imported from eventlet.green\ninstead of being imported directly. See:\nhttps://github.com/eventlet/eventlet/issues/413\n\nTo allow eventlet to be upversioned (from 0.18.4 to 0.24.1), the\nsubprocess imports are being changed.\n\nChange-Id: I884e8e539864f26b3593e9c15a29bbd099c94453\nStory: 2006781\nTask: 37583\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix bonding interface sysconfig pre-up params\n\nAn issue was noted when attempting to use a bonded interface on\na management or cluster-host network without an upper VLAN\ninterface.  The problem turned out to be the following pre-up\ncommand in the sysconfig file associated with the bond:\n\n/sbin/modprobe bonding; echo +%s > /sys/class/net/bonding_masters\n\nThe code which programs this command was added in 2019 to fix bug\n(bug 1836969)\n\nhttps://opendev.org/starlingx/config/commit/d0ad539f831d9aef7a7d7d653ff0537f47264852\n\nHowever, it is noted that today, this command will fail as the bonded\ninterface is already created.  Trying to add it to the\nbonding_masters list will fail, leaving the interface in a 'down'\nstate.\n\nThe reason this code was added was to be able to disable DAD in\na duplex-direct system, where the duplicate address detection\nwould not complete until both hosts were powered on and\ninitialized.\n\nThis commit ensures that:\n\n1. The interface is only added to the bonding_masters\n   in a duplex-direct system (in order to be able to\n   disable DAD before the interface comes up)\n2. In the case of a duplex-direct system, if the\n   interface is already added to the bonding_masters,\n   it won't be added again.\n\nNote:\n\nThe underlying ifup upstream code already accounts for\nthe situation that an interface has been added to the\nbonding_masters list, so it is safe for us to explicitly\nadd it in a pre-up directive in the case that DAD must\nbe disabled.\n\nTesting:\n\n1. Ensure the bonding interface (without VLAN) comes up\n2. Ensure in a duplex-direct system that the accept_dad is\n   able to be set (regression test bug 1836969)\n\nChange-Id: I4f712bbbbfa75adfcccbb737df60109db2fef1ee\nCloses-Bug: 1981765\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix interface name for sysctl cmd in ifcfg file\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update interface sorting to handle pci ifaces last\n\nBecause configuring sriov interfaces trigger a reapply of the puppet\nmanifest, they should only be done after the management interface, so\nthat there is no loss of connectivity when updating the management\nnetwork, if the address is not added to the new management interface\nwhen runtime manifest is applied for puppet.\n\nCloses-bug: 1844690\nChange-Id: I8a500fdb25c28e6238902f6d231cea26c3335d33\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"fix two coredns pod in simplex system\"\n\nThis reverts commit 38da2aaa372a12059c40ed3f362f31a5a2955e6e.\n\nThis commit has broken installations. The failure happens\nafter installing the first controller and unlocking it.\nNone of the SM managed services will start due to a\nfailure applying the puppet manifest.\n\nChange-Id: I65bd3dac79e6788d6708d5f22be1bef1cbff3fbd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make rbd-provisioner installation more deterministic\n\nThis commit will provide more predictable behavior with regards to the\nplatform-integ-apps app and specifically the rbd-provisioner that it\ninstalls.\n\n - Add an additional apply check for the platform-integ-apps app. The\n   check will required a healthy ceph cluster before applying (and\n   installing the rbd-provisioner).\n\n - Add an application apply check to define and check for inter-app\n   dependencies. For the stx-openstack app, reject the application apply\n   if the platform-integ-apps has not been successfully applied. This\n   locks out the app from being applied since the rbd provisioner is not\n   available.\n\n - Update the rbd provisioner pre-install checks to add a timeout when\n   attempting to access the pool. This check will block if OSDs are not\n   installed in the cluster and will eventually cause the job exec\n   deadline to be reached. This should not be a failure as the\n   provisioner has been setup correctly at the point of the check and\n   will perform correctly once OSDs are added.\n\nChange-Id: I1e11358fc613b3d1e58a749897ac25f199c8aad4\nStory: 2005424\nTask: 33456\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Root CA cert monitoring and starts up audit\n\nThis change add feature to monitor admin endpoint root CA\ncertificate, and audit when cert-mon service starts up.\nThis feature only runs on system controllers.\n\nWhen root CA certificate is renewed, cert-mon deletes intermediate\nCA certificate secret of all subclouds. The cert-manager will\nrecreate them.\nThe recreation of subcloud intermediate certificate secert triggers\nsubcloud intermediate update, then triggers subcloud endpoint\ncertificate update. The admin endpoint certificate is also update\non systemcontroller when the root CA certificate is renewed.\n\nPassed TCs:\n1. Root CA renew->admin endpoint cert (system controller),\n   intermediate CA cert and admin endpoint cert (subcloud)\n2. Root CA renew when subcloud is offline/not reachable\n\nStory: 2007347\nTask: 40624\n\nDepends-on: https://review.opendev.org/#/c/748562\n\nChange-Id: I058fb5b6e088320703ac11022d859af8255cedf4\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support Single huge page size for openstack worker node\n\nKubernetes only supports a single huge page size per worker\nnode. Prior to kubernetes 1.15, the huge page feature could\nbe disabled via a feature gate. In kubernetes 1.15, the\nfeature gate has been removed so huge page support is always\non in k8s.\n\nThis update removes the conditional disabling of the hugepage\nfeature and enforces the provisioning of a single page size\nper worker.\n\nWhen vswitch type is set to ovs-dpdk or avs, the application\nhuge pages size goes with the vswitch huge pages size.\n\nThis update also changes the auto-provisioning of VM huge\npages to 1G as there is no auto-provisioning in virtual\nenvironment.\n\nStory: 2006295\nTask: 36006\n\nChange-Id: I84d4959b420584fdcdf8a8664a6f4855c08ec989\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing linters errors E010, E011, E020, E041,E043, E003, E001,E042\n\n    Listed below are the errors which were fixed as well as the actions\n    taken to fix them:\n    E010: do not on the same line as for\n    --> let do and for in the same line\n    E011: then not on the same line as if or elif\n    --> let then and if or elif in the same line\n    E020: Function declaration not in format ^function name {$\n    --> fix the format to suit ^function name {$\n    E041: Usage of $[ for arithmetic is deprecated for $((\n    --> fix from $[ to $((\n    E043: arithmetic compound has inconsistent return semantics\n    --> do not use +=, ++, -=, --; use value=value+?  instead.\n    E001: check that lines do not end with trailing whitespace\n    --> delete trailing whitespace\n    E003: ensure all indents are a multiple of 4 spaces\n    --> add/delete spaces\n    E042: local declaration hides errors\n    --> let declaration and assignment in two lines.\n\n    Listed below are test cases done which run one controller\n    and one compute in KVMs\n    Test-Install      ----  success\n\nRelated: https://review.openstack.org/#/c/600663/\n         https://review.openstack.org/#/c/601221/\n\nStory: 2003360\nTask: 26213\n\nChange-Id: I3ece37db3a326ea58bd344f43beefcbbbd4f0ad4\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Changing tiller pod networking settings to improve swact time\n\nBased on investigation by Matt, the tiller-deploy pod was running\nin the cluster network namespace and therefore not inheriting host\nTCP keepalive parameters.\n\nDuring a swact, when the floating IP is taken down, tiller keepalive\nis so large its the kube-apiserver detects the timeout after 15 minutes\n(5 probes * 180 seconds)\n\nThe cluster namespace values are 9 probes at 75 second intervals.\nThe host TCP values are 5 consecutive probes at 1 second intervals.\n\nBy changing the tiller pod to be deployed using the host network,\nit will inherit the host sysctl values and detect much more quickly.\n(10 seconds)\n\nAdding additional override settings during helm init for tiller\nhelm init <params> --override spec.template.spec.hostNetwork=true\n\nThese changes were added to the ansible playbook.\n\nChange-Id: I218e4ef37100950c8ac5a0cb9759d9df50d9e368\nCloses-Bug: 1817941\nPartial-Bug: 1818123\nCo-Authored-By: Matt Peters <Matt.Peters@windriver.com>\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion armada image\n\nUpversion armada image from existing\naf8a9ffd0873c2fbc915794e235dbd357f2adab1\nto\ndd2e56c473549fd16f94212b553ed58c48d1f51b-ubuntu_bionic\n\nThe specific image was chosen because it contained upstream\narmada commit df68a90e057c2e1e3427d6b8497b437c8a4c3b7e, which\nis a fix for keystone kubernetes auth. The ubuntu bionic image\nwas chosen because the old image was an ubuntu bionic based image.\n\nTesting done by applying stx-openstack on standard, simplex,\nand duplex systems.\n\nStory: 2005860\nTask: 33693\n\nChange-Id: Ifd8a66d46e2dfd47ca7c5ab9807076ef43e67027\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support adding a trusted CA certificate\n\nWe currently don't support adding a trusted CA certificate. This might\nbe required to connect to a docker registry using a self signed\ncertificate.\n\nThis change extends the certificate-install system command with the\nssl_ca mode. The certificate will be installed on all nodes via a\nruntime puppet manifest.\n\nChange-Id: I126ff67ed4682879e6ca11710503a316bd97ddf7\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nPartial-Bug: 1831946\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fernet key synchronization\n\nThis update contains the following changes for Distributed\nCloud Fernet Key Synching & Management:\n\n1.Disable key rotation cron job for distributed cloud\n2.Add a fernet key repo config option in puppet sysinv\n3.Add fernet repo sysinv APIs for create/update/retrieve keys\n4.Add a fernet operator to create/update/retrieve the keys\n\nStory: 2002842\nTask: 22786\n\nChange-Id: Ia14caeef067fa481e3a4159c1658289250632779\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix word and statement errors in comments\n\nfix some typos in comments, such as the duplicated word 'the the'.\n\nChange-Id: I28ffde825fd95186bc3a0bd077dea7c20287fc1f\nStory: 2004164\nTask: 27641\nSigned-off-by: zhangkunpeng <zhang.kunpeng@99cloud.net>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Cloud keystone scalability\n\nCurrently the RegionOne keystone and sysinv endpoints created at\nbootstrap remain after controller manifest fully applied. This patch\ncleanup these 6 endpoints from keystone by removing them once subcloud\nregion endpoints are created.\n\nStory: 2002842\nTask: 22785\nDepends-On: https://review.openstack.org/587415\n\nChange-Id: I1d7c57eef80336c08779bbfc1497cb219955aad9\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Protection from invalid label values.\n\nIn api/controllers/v1/label.py added a guard to prevent\nand null being used for a new label value or updating a\nlabel value.  The kubeapi protects against invalid label\nregex, but this check goes a step further to prevent the\npossibility of a null value in the body payload of the API\npost.  Previously, a null could be entered into the database.\n\nEnhance protection of sysinv/puppet/kubernetes.py\nfunction _get_host_label_config such that there are\nchecks for NoneType before string manipulation occurs.\nThis prevents this section of code from breaking if the\ndata base is missing or has a label with a null value.\n\nTest Plan:\n1. PASS: Full AIO-SX install.\n2. PASS: Verify the system does not allow a null value\n   to be entered when adding a new label.\n3. PASS: Verify the system does not allow a null value\n   to be entered when updating an existing label.\n4. PASS: Delete all labels, and verify that hieradata for\n   host configuration is generated properly. Verify that\n   the \"host_labels\" puppet parameter has an empty list:\n   [].\n\nCloses-Bug: 2032572\nChange-Id: I7040155616aa63986d0c37ba967a207b5c31addf\nSigned-off-by: Joshua Reed <joshua.reed@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "FIX: module rename issue for Python 2/3 compatible code\n\nimport six.moves to fix rename of urllib, urllib and httplib\n\nStory: 2003433\nTask: 28481\n\nChange-Id: Ib37e69f09e77a6ed5167d54bb1602448023d622c\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable upstream Cinder volume backup/restore capabilities\n\nModify StarlingX system B&R procedure to align with upstream Cinder volume\nbackup/restore capabilities.\n\nTune settings to allow multiple cinder backups/restores to run in parallel.\nThe upstream cinder backup/restore algorithm is RAM dependent. The default\nbackup chunk size was about 2GB meaning running even a few backups in parallel\nwould quickly run out of RAM. The new backup chunk size is set below 500MB.\n\nStory: 2003115\nTask: 26393\n\nDepends-On: Ic28661e52a3c6742840e4575741b95c2058eadb9\nChange-Id: Ie71a2c90d89c3023fb8d043e1a26d80c43779133\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure VIM to use pod based OpenStack services\n\nWhen kubernetes is configured and the OpenStack application has\nbeen installed, the VIM will be configured to access the OpenStack\nservices running in pods (keystone, nova, rabbitmq, etc...).\n\nIn order to support this, some extensions were done to the sysinv\nhelm code to allow parts of the OpenStack application\nconfiguration to be retrieved (e.g. endpoint info). Changes\nwere also required to dnsmasq configuration to get resolution of\npod based names (e.g. keystone.openstack.svc.cluster.local)\nworking properly.\n\nThis commit is just the first step and has limitations. There is\nno trigger to reconfigure the VIM after the OpenStack application\nhas been installed - a controller lock/unlock is required.\n\nStory: 2003910\nTask: 27852\n\nChange-Id: I1c6dcdecd1365104457009196bbcf06b19c95489\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix armada stuck at processing osh-openstack-ceph-rgw chart\n\nThe issue occur when do swact && lock/unlock standby controller.\nAfter swact && lock/unlock standby controller, the pod created for\njob doesn't exist any more. So there is no pod for ceph_rgw.\nWhile armada assumes there is at least 1 pod exist in default, and\nwill wait for the pod to be up and ready. For chart without pod, we\nneed explicitly declare the resources that need to be waited for in\narmada schema. This declare will override the default wait list in\narmada.\nChange the timeout value to 300s, which should be enough for the 3\njob to be ready.\n\nCloses-Bug: 1833609\n\nChange-Id: I5339406cf914cd54f45b3de5df7ff213e8845bfc\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove mon_host msgr v1 setting on upgrade activate\n\nDuring an upgrade, we specifically set msgr v1 addressing for any new\nNautilus monitors while we still have a mixed Mimic/Nautilus cluster.\n\nAfter all monitors are running Nautilus, we enable msgr v2 and all\nmonitors start to use that protocol for communication.\n\nFinally we now clean up the ceph.conf configuration and restart the\nmonitors during the upgrade activation step. This will align ceph.conf\nwith what a fresh installation would produce.\n\nTesting performed:\n- Upgrade of 2+2+2\n- Upgrade of AIO-DX\n- Upgrade of AIO-SX\n- Fresh install of AIO-SX\n- Fresh install of AIO-DX\n- Fresh install of 2+2\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/817859\nDepends-on: https://review.opendev.org/c/starlingx/config/+/817795\nStory: 2009074\nTask: 43968\n\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\nChange-Id: I3b100280f5a92885c567251b9e7d9d0270bf18bc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change rpc_response_max_timeout default to 60 seconds\n\nIn stx.1.0, stx-neutron hard-coded the rpc_response_max_timeout value\nto 60 seconds. With the migration to containers and upstream neutron,\nthe default is now set to 600 seconds. To align with the previous\nstarlingx behavior, the rpc_response_max_timeout set to 60 seconds\nby the system through a neutron helm override.\n\nChange-Id: Ibf0f591ac9cb05dac09add37b3c31f6f5b66446d\nCloses-Bug: #1836413\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "PTP: specify ethernet interfaces in the ptp4l.conf file.\n\nThe ptp4l process will fail in case there are no NICs specified.\nWe need to list all the NICs in the configuration file since\nNIC specification has been removed from command line earlier.\n\nChange-Id: Ib68406a2ed514830674627180c451d274b581f74\nStory: 2002935\nTask: 22923\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH support for 2 node configuration\n\nIn order to enable Openstack's helm charts on StarlingX we need\na distributed persistent storage for Kubernetes that leverages\nour existing configurations.\n\nChanges made:\n- allow CEPH to be configured on a 2 node configuration\n  with a single floating monitor.\n- floating monitor is managed by SM.\n- the CEPH monitor filesystem is DRBD replicated between\n  the two controller nodes\n- add ceph crushmap for two node setup; both controllers are\n  in the same group and redundancy is created between the\n  two nodes\n- only replication 2 is supported\n\nChange-Id: Ic97b9fafa752a40befe395be2cafd3096010cc5b\nCo-Authored-By: Stefan Dinescu <stefan.dinescu@windriver.com>\nDepends-On: I8f9ea4798070e08171ad73da39821bc20b7af231\nStory: 2002844\nTask: 26878\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ignore error on k8s taint removal from puppet\n\nThere are cases where the kubernetes taint is not present on,\nor has already been removed from, a newly configured standby\ncontroller. This causes the taint removal command run by the\npuppet manifest to fail. This failure can be safely ignored,\nso the command is updated by this commit to always return\nsuccess.\n\nChange-Id: Icdb55738e052c65a28e44582e345038b0de83c37\nCloses-Bug: 1815795\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable resource containers for kube-proxy\n\nThis disables resource containers for kube-proxy since that feature\nis not needed and creates subsequent issues when the cpu manager\nstatic policy is enabled.\n\nWe would see see a flood of cgroup device and cpuset related error\nlogs when the cpu manager tries to update cpusets for the nested\ncgroup. We would also see that kube-proxy could not update its cpuset\nto the DefaultCPUSet as intended. With resource containers disabled,\nan unneeded directory level in the cgroup hierarchy is removed.\n\nThe same issues with resource containers are reported here:\nhttps://github.com/kubernetes/kubernetes/issues/66614\nhttps://github.com/kubernetes/kubernetes/issues/54967\nhttps://github.com/kubernetes/kubernetes/issues/17619\nhttps://github.com/kubernetes-sigs/kubespray/issues/3518\n\nNote that specifying the --resource-container option is deprecated,\nand the setting defaults to \"/kube-proxy\" when empty string is\nprovided. Configuring the value to \"/\" effectively disables this\nfeature, where kube-proxy will just log a non-fatal error message.\n\nChange-Id: Id73303afb9b5aa8fa628cc17e03f3457787cfa22\nStory: 2005192\nTask: 33484\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update conditions for config change and manifest apply\n\nThe runtime manifest apply for an oam config change was being\ntriggered on host-swact to the target controller after startup.\nThus, the config runtime manifest was being triggered even when\nthere was not an oam config change.\n\nUpdate the runtime manifest apply for oam config to be triggered\non active controller startup after an oam configuration change.\n\nDuring upgrades, disallow oam network changes as the configuration\naffects the platform and kubernetes components dependent on the\nOAM network.\n\nAdded https and admin endpoint changes to the audit as these can\nset during configuration of a system.\n\nTests performed:\n-Standard lab install with https. https was setup correctly.\n-AIO-SX lab install with https lab AIO-SX. https was setup correctly.\nTested oam-modify required host-lock/unlock to clear the config out of\ndate alarm.\n-DC lab install. Confirmed the admin endpoints are set to https.\n-Standard lab install with https.  Tested  host-swact after initial\ninstall and reinstall.\n-oam-modify lock/unlock standby/host-swact and verify oam access.\n\nCloses-Bug: 1874136\nCo-authored-by: John Kung <john.kung@windriver.com>\nChange-Id: Icec24c3095e5ab13454fe34c9b94da8f8e3eaa23\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix data-migration on script 98-sysinv-k8s-param-upg\n\nDuring the upgrade from 22.06 to 22.12, the\nk8s control plane component configuration is\nsaved and restored. Also, the 22.06 configuration\nmust be loaded into the sysinv database because,\nsince 22.12, k8s custom configuration is supported\nat runtime.\n\nThe kubelet component uses a different API that\nsupports, among others, dictionaries as a type.\nThe error occurs saving this type of data.\n\nkubelet runtime configuration is not yet supported,\nit will be addressed in task:44586 / story:2009766,\nso the kubelet section can be safely removed from\nthe upgrade script at this moment.\n\nTest Plan:\n  - Upgrade from centos 22.06 to 22.12 SX and DX\n\nCloses-Bug: 1994884\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Ic560315dc66bc991fe9a98043ef9eeac4fba6441\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use default value if mon_lv_size not set\n\nmon_lv_size was not migrated during older upgrades. Previous releases\nused a default value.\n\nThis change modifies puppet to use the default value in the event of\nno value is found.\n\nChange-Id: I1d2426beb73e7a52b6eef02974d40d6cfa479a51\nStory: 2002886\nTask: 22847\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable IPv6 address DNS lookup in sssd\"",
        "issue_summary": ""
    },
    {
        "commit_message": "App Fmwk: Add support for FluxCDKustomizeOperator\n\nThis update adds the FluxCD complement to the ArmadaManifestOperator to\nallow runtime adjustments to which helm releases are enabled based on\nplatform conditions.\n\nChanges include:\n - Add FluxCDKustomizeOperator to support helm_release_resource_delete()\n   and platform_mode_kustomize_updates() to allow runtime updates to the\n   top-level kustomization.yaml file that controls helm releases.\n - Add a GenericFluxCDKustomizeOperator for apps that don't provide a\n   kustomize plugin.\n - Addition of stevedore plugin support using the namespace\n   systemconfig.fluxcd.kustomize_ops\n - Refactor helm.py to have two separate functions for generating helm\n   overrides, one for Armada and the other for FluxCD, so that easily\n   removing Armada support can be done in the future.\n - Armada provided an --enable-chart-cleanup option when it stops\n   managing helm releases. To provide similar functionality the\n   FluxCDKustomizeOperator will manage a helmrelease_cleanup.yaml file\n   and remove HelmRelease CRDs after application applies.\n - Refactor _find_manifest() in kube_app.py and supporting functions in\n   utils.py to provide more meaningful feed back when the required\n   application elements (Armada or FluxCD) are not present\n - Update sysinv-helm command to generate system application overrides\n   for Armada and for FluxCD apps.\n - Update get_custom_resource() and apply_custom_resource() to remove\n   the 'cert' references as these are generic use functions.\n\nTest Plan:\n PASS: CentOS - Build/Install/Bootstrap/Unlock AIO-SX\n PASS: CentOS - Verify application upload/apply/remove/delete of an\n                Armada app and a FluxCD app\n PASS: CentOS - Use helm-chart-attribute-modify to enable and disable\n                charts and confirm that after application re-apply that\n                the desired helm releases are deployed\n PASS: Debian - Build/Install/Bootstrap/Unlock AIO-SX\n PASS: Debian - Verify application upload/apply/remove/delete of an\n                Armada app. Debian FluxCD app not enabled yet.\n\nChange-Id: I346324b382ad3106777df61781c8b2af326e26c8\nCloses-Bug: #1974095\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial changes to enable new upgrades\n\nMaking initial changes to enable new upgrades. Most\nof the changes are related to removing older upgrade code that\nis no longer necessary (i.e. all the packstack to mattstack\nconversion code).\n\nChange-Id: I8fe4c8c0d3f12fd7b4fc45b226bf969ffda72dc7\nStory: 2002886\nTask: 22847\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Produce the fm-rest-api tgz file\n\nThis commit allows to create the fm-rest-api tgz file\ninside stx-openstack-helm RPM package which includes the\nfm-rest-api helm chart.\n\nStory: 2004008\nTask: 29987\nDepends-On: https://review.openstack.org/637120\nChange-Id: I9778a0a3c904f1c762dc92cab76c1af75a4bd5d0\nSigned-off-by: Mario Alfredo Carrillo Arevalo <mario.alfredo.c.arevalo@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable duplex platform upgrades\n\nEnable the mechanism to upgrade the platform components on\na running StarlingX system with duplex controllers.\n\nThis includes upgrade updates for:\n  o generation of kubernetes join_cmd to enable the N+1 controller\n    to join the cluster\n  o migrate of kubernetes config\n  o migrate etcd on host-swact\n  o migrate of DistributedCloud dcmanager and dcorch databases\n\nA maintenance release for stx3.x is required to upgrade to stx4.0\n\nTests Performed with duplex controller: AIO-DX and Standard\n- system load-import\n- system health-query-upgrade\n- system upgrade-start\n- system host-upgrade controller-0\n- system host-lock/unlock host N while controller N, N+1\n- system host-lock/unlock controller-0 while controller N+1\n- system host-upgrade controller-1\n- system host-upgrade storage\n- system host-upgrade worker\n- system upgrade-activate\n- system upgrade-abort\n- system host-downgrade\n- system upgrade-complete\n- verified application (e.g. stx-monitor) over upgrade\n\nChange-Id: I4267c7b32b2e7b59b5ffdd8146288698962da1e0\nStory: 2007403\nTask: 39243\nTask: 39244\nTask: 39245\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set ceilometer's endpoint type to internalURL on all types of nodes\n\nBecause the endpoint type for ceilometer is set to publicURL rather\nthan internalURL, ceilometer polling agent is unable to poll measures\nfrom other services with a https configured system. This update is to\nset ceilometer's endpoint type to internalURL through puppet for all\ntypes of nodes.\n\nCloses-Bug: 1790238\n\nChange-Id: I19f0e354a22b089f140ed8e762f3db68f6bc4ddb\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet-manifests for kubernetes 1.12\n\nThe kubeadm.yaml format has been updated for the new settings.\nkubernetes 1.12 uses coredns rather than kube-dns.\n\nThe service file is simplified and the conf file now\nspecified the kubelet extra args like this:\n\nnodeRegistrationOptions:\n  kubeletExtraArgs:\n    cgroup-driver: \"cgroupfs\"\n    node-status-update-frequency: \"4s\"\n    fail-swap-on: false\n\nStory: 2002843\nTask: 26751\nChange-Id: I1e25e17ce865960950e98e5033ccf1e43b3a8611\nDepends-On: Ib5602a4a57c0e8998430b0774375853cdd2bca01\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Verify OpenStack version to activate agent service\n\nSince pci-irq-affinity-agent service is being containerized, once\nthe related changes are merged sysinv will have to check if\nthe stx-openstack application version already supports the agent\nor not, in the latter case the agent service still need to be\nactivated on the platform.\n\nDepends-on: https://review.opendev.org/c/starlingx/openstack-armada-app/+/813247\nStory: 2009299\nTask: 43653\n\nChange-Id: Ida99726e0ed780cc72da28d74bdae8e1ff08bfc4\nSigned-off-by: Heitor Matsui <HeitorVieira.Matsui@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify OVS puppet plugin and host vswitch hugepages allocation logic\n\nChange vswitch and puppet plugins variables to enable and disable itself\nbased on host labels. Also, modify some host memory allocation checks that\nonly make sense when the host has the vswitch enabled.\n\nTest Plan:\nPASS: Test vswitch hugepages deallocation.\nPASS: Test puppet manifests with the new variables added to ovs plugin.\n\nRegression:\nPASS: Successfully build and install starlingx ISO.\n\nStory: 2009702\nTask: 44028\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: Ic9251ff15690a5548ce0a2de4fab4e85454e4ce6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX: Fix adding OSD at runtime hanging when /dev/rbd* are mounted\n\nThis mostly happens when stx-openstack application is running\nas there are a couple of pods that uses RBD PVCs.\n\nThe reason of the hang is that, on AIO-SX, all OSDs are stopped\nwhile new ones are configured. This leads to data on the /dev/rbd*\nto be inaccessible when runtime puppet manifests executes\n'ceph-disk list' to query the state of all storage devices in\nthe system.\n\nThis commit removes the code that stops existing OSDs on all\ndeployments. A side effect is a decrease in time needed to\nadd the OSDs on a node with many OSDs already configured.\nFor e.g. time for adding an OSD on a system with 7 OSDs can\ntake more that 2 minutes, while with this change it drops to\naround 30 seconds.\n\nChange-Id: I41a65d42a45a90b00f65509f4e536eb1c345a91b\nCloses-Bug: 1829855\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "update nfv-vim puppet runtime manifests and config files\n\nnfvi would raise openstack alarms/logs to the fm in pods,\nwhen it is availiable. following configure changes are\nrequired:\n1. add \"fault_mgmt_plugin_disabled\" para in vim config\nfile. Set it \"True\" when openstack application is not\nimplement, and \"False\" when it is.\n\n2. add \"fault_mgmt_endpoint_disabled\" para in alarm\nand event_log config file. rules are the same with\n\"fault_mgmt_plugin_disabled\"\n\n3. add \"openstack\" and \"fm\" info to alarms and event_logs\nconfig file\n\nStory: 2004008\nTask: 30954\nDepends-On: https://review.opendev.org/#/c/661548/\nChange-Id: Iee2a4515336f4ce9b6373d56d4f7a5779664233d\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add \"allow_resize_to_same_host=true\" to nova chart\n\nOpenstack-helm upstream removed this flag by default. Since we\nhave had requests from user, we need enable it again.\n\nCloses-Bug: #1824412\n\nChange-Id: Ib8a07d41405f838fd79a3b16f3dac9923514a06d\nSigned-off-by: zhipengl <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing rpm as a dependency for sysinv\n\nA new version of the python module was released Nov 4\nwhich breaks pip installs in some environments.\n\nThe rpm dependency is not directly required by sysinv\nand so it has been removed.\n\nThe source code changes in this review are only included\nto ensure that all zuul targets are invoked.\n\nCloses-Bug: 1949804\nSigned-off-by: albailey <Al.Bailey@windriver.com>\nChange-Id: I6786c3510bb7bac5f03adf3a3c3d377a090063ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix tox pep8 errors in sysinv of type E203\n\nRemove the skip clause for E203.\nFix the offending errors which are only formatting changes regarding\nextra spaces around ':'. E203: \"whitespace before ':' on list slice\".\n\nStory: 2002888\nTask: 23161\n\nChange-Id: I9964eb9affebed8231446ee82f0a6f7fa7870657\nSigned-off-by: Mathieu Robinson <mathieu.robinson@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove references to Mellanox's ConnectX-3\n\nThe ConnectX-3 and ConnectX-3 Pro cards are no longer supported as of\nthe version mlnx-ofa_kernel-5.5-OFED.5.5.1.0.3.1 of the OFED. The\ninfomation can be found in the part \"Unsupported\nFunctionalities/Features/NICs\" in this link:\n\nhttps://docs.nvidia.com/networking/display/MLNXOFEDv551032/\nGeneral+Support\n\nThis change removes any handling that was specific to the CX3 devices or\nMLX4 drivers.\n\nTests:\n- Build successful\n- Tests executed on a host with a CX4 and another with a CX5\n    - System install successful\n    - Mofified one of the Mellanox ethernet interfaces to class\n      'pci-sriov' with the maximum number of VFs\n    - Created a virtual interface using some of the aforementioned VFs\n    - Deleted the new virtual interface and returned the ethernet one to\n      class 'none'\n    - Checked logs for any unexpected behavior\n\nStory: 2009878\nTask: 44707\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: Id0d61f9d86251116f38b7450b2e3b64eb59639b8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new RestAPI to update intermediate CA on subcloud\n\nNew sysinv RestAPI serves on subcloud, when admin endpoint\nintermediate CA is renewed, cert-mon on system controller\ninvokes this RestAPI to pass root ca cert and key/cert pair\nto subcloud.\nOn the subcloud, the received cert and key are validated then\ninstalled.\nUpon successfully installing intermediate CA cert, it deletes\nadmin endpoint cert to trigger an update of endpoint cert with\nnew intermediate CA.\nUp coming DC root CA renew changes will also update the root\nCA cert before triggering admin endpoint cert update.\n\nPassed TCs:\n(with other changes) Update intermediate CA on a managed\nsubcloud.\n\nStory: 2007347\nTask: 40328\n\nChange-Id: I5f014a03de351c0bc7e4520551da25926f977d8b\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable security group support for OVS agent\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update ptp config generator to accept new phc2sys params\n\nUpdated the logic networking.py which generates the puppet hieradata for\nptp configurations to accept a new category of parameters which will be\nused for the Redundant / HA PTP timing clock sources feature.\n\nThis change checks for the presence of the \"phc2sys_ha=enabled\"\nparameter supplied via user configuration and then allows additional\nphc2sys_ha prefixed parameters to be included in the phc2sys config.\n\nThis allows the Redundant timing feature and all related parameters to\nbe enabled or disabled by setting/removing the above value.\n\nTest Plan:\nPASS: Verify phc2sys config is generated and applied when phc2sys_ha is\ndisabled\nPASS: Verify phc2sys config is generated and applied when phc2sys_ha is\nenabled, additional phc2sys_ha prefixed params are also allowed to\nappear in the config as a result\nPASS: System lock/unlock succeeds after code changes\n\nStory: 2010723\nTask: 48262\n\nChange-Id: I72e0c9e615affe467a83554d3d7f6a732efccaf8\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable python3.5 sysinv unit test\n\n- Replace mox with mox3 to support python3\n- Change 'lambda (x, y): y - x' to 'lambda xy: xy[1] - xy[0]'\n- Change iter to list for str operator\n- Change urlparse to compatible python 2/3\n- Adapt gettextutils\n- Fix 'TypeError: unorderable types: NoneType() < int()' for python3\n- Change dict key to list\n- Change some requirement and test requirement\n      remove MySQL-python\n      remove Cheetah\n      remove version limitation <3.0.0 for python-ldap\n- Fix encode/decode issue\n- Avoid exception for obj_load_attr with optional fields\n- Remove test_hash_file test case since it was never used.\n- Use mock not CreateMockAnything to mock contentmanager\n- Fix UnboundLocalError issue for python3\n- Replace self.stubs.Set with stub_out\n- Change e.message to str(e) in exception block\n- Add self.mox.UnsetStubs() before self.mox.VerifyAll()\n- Fix set() order dismatch for python 2/3\n- Implement nested for context manager in python 3\n- Change migration version of sqlalchemy from 0 in python 3\n- Avoid expose exception for db not connected\n- change hasattr(obj,attr) to getattr(obj,attr,None) since\n  hasattr shadows all exception in python2.7\n- Avoid sqlalchemy.orm.exc.DetachedInstanceError in get_networks\n\nStory: 2003433\nTask: 28354\nDepends-on: I4c601a72232402e45fe70e0d29de031ff294a4d7\n\nChange-Id: I8382eba1bc3c91ca63d93e759021149914b12865\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Temporarily disable iptables restore during puppet\n\nDocker and kubernetes add rules to iptables, which can end up\npersisted in /etc/sysconfig/iptables by calls to iptables-save.\nWhen the puppet manifest is applied during node initialization,\nkubernetes is not yet running, and any related iptables rules\nwill fail.\n\nThis update disables the restoration of iptables rules from\nprevious boots, to ensure the puppet manifest does not fail\nto apply due to invalid rules. However, this means that in\na DOR scenario (Dead Office Recovery, where both controllers\nwill be intializing at the same time), the firewall rules\nwill not get reapplied.\n\nFirewall management will be moved to Calico under story 2005066,\nat which point this code will be removed.\n\nChange-Id: I43369dba34e6859088af3794de25a68571c7154c\nCloses-Bug: 1815124\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Revert \"configure kubernetes to use containerd as CRI\"\"\n\nThis reverts commit be3208886a2a2c69248e923eab38e4c73e35c43d.\n\nDepends-On: https://review.opendev.org/703263\nChange-Id: Id834b878099f6db49d18cbc06e97cdb2669cb352\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cert manager upgrade script\n\nThis commit adds an upgrade script for migrating cert manager data.\nThis is required because the version difference between the armada\nversion and fluxcd version of cert manager is too great.\n\nThis upgrade script is run before the generic upgrade script in order\nto upgrade cert manager first. This will prevent any errors from the\nupgraded versions of other applications creating resources supported\nby only the fluxcd version of cert manager.\n\nTest Cases:\n\nPASS: multi-node system upgrade, configured as a DC system controller\n      with DC certificates managed by cert manager\nPASS: multi-node system upgrade, with no cert manager resource\n\nChange-Id: I0216cb78fb4dd00f6ce367f86c7710127c300981\nStory: 2009837\nTask: 45445\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add replica and anti-affinity to rbd-provisioner\n\nThe rbd-provisioner does not follow the same template as the other\nopenstack-helm charts so we need to use specific methods to set the\naffinity and replica parameters.\n\nStory: 2004520\nTask: 29845\nChange-Id: I05b97b8254a541753031ba051707092eae301d6a\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ipv6 support in generation of lighttpd.conf file\n\nThe generated lighttpd.conf file only included ipv6 support\nwhen https is enabled.\nThis modification fixes the template to support ipv6 in all cases\n\nStory: 2002986\nTask: 23000\n\nChange-Id: I3551e5cfeb4d31a8fefcbd3f6f1350bb17984053\nSigned-off-by: Paul-Emile Element <Paul-Emile.Element@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide infrastructure for kubernetes upgrades\n\nThis commit provides the CLI and REST API infrastructure for\nkubernetes upgrades. It also includes support for:\n- starting a kubernetes upgrade\n- upgrading the kubernetes control plane components\n- upgrading the kubelets\n\nNote that these capabilities cannot be exercised in a standard\nload - they require a new kubernetes version to be defined in\nthe load and patches created for the new kubernetes version.\n\nChange-Id: I0c2755fca89e93583e43fc5ace93bef8fc181766\nStory: 2006781\nTask: 37306\nTask: 37579\nTask: 37580\nTask: 37581\nDepends-On: https://review.opendev.org/#/c/695542\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix interface name for sysctl cmd in ifcfg file\n\nThe configured interface name was used in setting a pre-up option\nin the ifcfg file. This commit is to correct it by using the o/s\ninterface name.\n\nCloses-Bug: 1847625\n\nChange-Id: I9f6cea67b49f4e16ae95725002099fba644485a9\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow activate script to run for 21.12 upgrade\n\nThis is to enabled upgrade migration scripts to allow migrate from 21.12\nto 22.12 upgrade.\n\nTCs:\n    Passed AIO-DX upgrade from 21.12 to 22.12\n\nStory: 2009303\nTask: 47148\n\nChange-Id: I211e667eacb3f125d46a2a00acec1ca348346822\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix fm-rest-api pod crash when starting on 1st time\n\n   1) add '---' in Deployment yaml to support multi resources types.\n   2) change Deployment apiVersion to 'apps/v1'.\n   3) set serviceaccount name to 'fm' to be same as db-init etc jobs.\n   4) add job ks_service and ks_user dependencies.\n\nChange-Id: I3b15da621dd5a5cc1f20e9e963abbeba54827592\nCloses-Bug: 1831163\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Remove Nova prefix from constants\"\n\nReason for revert: The functionality added here will\nbe a part of a different application, and the code\nhere is now obsolete.\n\nThis reverts commit 889011:\nRemove Nova prefix from constants\nhttps://review.opendev.org/c/starlingx/config/+/889011\n\nTest Plan:\nPASS: Bootstrap is Success\nPASS: system host-unlock with no alarms\nPASS: Designer build of debian AIO-SX and deployment without QAT and\n      GPU functionality code.\n\nReference to the application where these functionalities will be added: https://opendev.org/starlingx/app-intel-device-plugins\nThe same storyboard can be tracked for further updates.\n\nStory: 2010604\nTask: 48739\n\nChange-Id: Ia210cd5dff472d26f5f2b2311a838799d585e2bf\nSigned-off-by: Aman Pandae <amanpandae.mothukuri@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Extend sysinv to assign kubernetes labels to nodes\n\nAdd CLI commands and restapi to assign and remove kubernetes labels to\nhosts.\n\nChange-Id: I3f68fcd331d5539429f86dfd4bf7514dc963bedb\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002845\nTask: 22793\nDepends-On: https://review.openstack.org/#/c/595875/\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Decouple Fault Management from stx-config\n\nList of changes:\n1.Remove all fault management (FM) database tables from sysinv DB\n2.Remove all FM commands from sysinv REST API service\n3.Remove all FM CLI commands from cgts client\n4.Add FM user to config controller to support region config\n5.Update backup restore to reference the new alarm database table\n6.Update controller config test files and add the new FM user\n7.Add a FM puppet module in order to manage configuration data and\n  database; to configure user, service and endpoint in Keystone\n8.Add a FM puppet operator to populate FM and SNMP configuration data\n9.Update NFV puppet to support FM endpoint configuration\n10.Update haproxy manifest to support active-active FM API service\n\nStory: 2002828\n\nTask: 22747\n\nChange-Id: I96d22a18d5872c2e5398f2e9e26a7056fe9b4e82\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "One Node System install stuck in degraded state\n\nThe cloud platform is configured explicitly to not use LVM metadata\nservice for caching disk metadata.\n\nCurrently LVM puppet is used to (in this order):\n1. set 'use_lvmetad = 0' in /etc/lvm/lvm.conf\n2. stop and disable lvm2-lvmetad.service\n\nLVM metadata is also listening on a socket created by\nlvm2-lvmetad.socket service unit.\nThe socket file is under: /var/run/lvm/lvmetad.socket\n\nIf lvm2-lvmetad.service (LVM metadata daemon) is stopped and\n'use_lvmetad = 1', it can still be started via LVM metadata socket\nwhen needed, such as when running 'lvs' command. This is called\nservice activation by socket in systemd.\n\nThere is a potential race condition in the current LVM puppet\nmanifest, where an LVM command (such as 'lvs') can arrive between\nthe moment lvm2-lvmetad.service is stopped and 'use_lvmetad' is set\nto 0, causing the service to restart. From this moment, with LVM\nmetadata service running and 'use_lvmetad = 0', each LVM command will\nraise the following warning:\n\n\"WARNING: Not using lvmetad because config setting use_lvmetad=0\"\n\"WARNING: To avoid corruption, rescan devices to make changes visible\n(pvscan --cache)\"\n\nLVM command result parsing will be affected and puppet manifest will\nfail. The solution is to update the LVM puppet manifest to ensure\n(in this order):\n\nlvm2-lvmetad.socket is masked and stopped\nlvm2-lvmetad.service is masked and stopped\n'use_lvmetad = 0'\n\nStory: 2002983\nTask: 22992\n\nChange-Id: I16deb7f01fbedf8cb102af932f52834f69eda681\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update Ceilometer Helm conf overrides\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Get swift working on containerized openstack\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Handle N3000 FPGA reset\"",
        "issue_summary": ""
    },
    {
        "commit_message": "switch to use new control-plane label\n\nThe node-role.kubernetes.io/master= label is being deprecated and is\nbeing replaced by node-role.kubernetes.io/control-plane=\n\nSimilarly the node-role.kubernetes.io/master:NoSchedule taint is being\nreplaced by node-role.kubernetes.io/control-plane:NoSchedule\n\nWe need to update the code appropriately.\n\nTest Plan:\nPASS: Run \"system health-query\" and ensure it says all control plane\npods are ready.\nPASS: Install with K8s 1.23 and upgrade to 1.24.\n\nStory: 2010301\nTask: 46553\n\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: Ia08d491bf93ce08ead150bf12fb6a07db0b00eeb\n",
        "issue_summary": ""
    },
    {
        "commit_message": "OpenDev Migration Patch\n\nThis commit was bulk generated and pushed by the OpenDev sysadmins\nas a part of the Git hosting and code review systems migration\ndetailed in these mailing list posts:\n\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-March/003603.html\nhttp://lists.openstack.org/pipermail/openstack-discuss/2019-April/004920.html\n\nAttempts have been made to correct repository namespaces and\nhostnames based on simple pattern matching, but it's possible some\nwere updated incorrectly or missed entirely. Please reach out to us\nvia the contact information listed at https://opendev.org/ with any\nquestions you may have.\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add the required package openstack-helm to stx-openstack-helm spec\n\nChange-Id: I74f4972ea68ed7b8414a34cdc67f90bdf6418fbc\nStory: 2005350\nTask: 30420\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Trigger application reapply on host unlock/delete\n\n- Triggers an application reapply (including override\n  regeneration) on node unlock to pick up a new node being added\n  or configuration changes being made.\n- The reapply also triggers on node delete if the host\n  had a compute node label to remove any per-host overrides.\n- Turned on the restriction that nodes must be locked to modify\n  labels.  Added an audit task to sync any labels made before\n  a node is unlocked and missing from k8s.\n- Modified k8s puppet manifest to only launch kubelet on the\n  initial configuration, after that the service file is\n  modified to have a dependancy on the config gate.\n  This is to avoid PLEG errors in kubernetes due to the node\n  being overwhelmed during boot.\n\nChange-Id: I1d9ca92f451aa322765da43ffcbb1d95f97f92f2\nStory: 2004520\nTask: 28826\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ansible Bootstrap Deployment\n\nThis commit is initial submission of bootstrap playbook which\nenables the bootstrap of initial controller. The playbook\ndefaults are meant for configuring the localhost in vbox\ndevelopment environment. Custom hosts file and user overrides\nare required for configuring multiple hosts and lab specific setup.\nSecret file and SSH keys are required for production test enviroment.\n\nTests performed:\n - installation\n - config_controller complete to ensure the current method of\n   configuring the first controller is intact\n - localhost bootstrap with default hosts file\n - multiple remote hosts bootstrap with custom hosts file\n - reconfigurations with user overrides\n - stx-application applied in AIOSX and AIODX\n - Failure & skip play cases (invalid config inputs, incorrect load,\n   connection failure, no changes replay, etc...)\n\nTODO:\n - Support for standard & storage configurations\n - Docker proxy/custom registry related tests\n - Package bootstrap playbook in SDK\n - Config_controller cleanup\n\nChange-Id: If553f1eeed32606bacc690ef277e60606e9d93ea\nStory: 200476\nTask: 29686\nTask: 29687\nCo-Authored-By: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ironic network type\n\nThis commit adds a new network type: ironic. Ironic network is a\nlogical network connects ironic conductor on both controllers to\nironic nodes. The interface addresses for ironic conductors are\nallocated from ironic network.\n\nDuring ironic tenant os scheduling the address pool range of\nironic network is also used as ironic node dhcp pool via neutron.\n\nStory: 2004760\nTask: 30978\n\nChange-Id: I3da7479bbcf163c0979dd8e5df7a51258c7c8d1d\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing pci-irq-affinity configuration code\n\nThis code is being removed as part of an effort to move the\npci-irq-affinity-agent into a openstack application container, instead\nof a platform service.\n\nTEST PLAN:\nPASS: Successfully build a platform ISO\nPASS: Install the built ISO on an AIO-SX system\nPASS: Verify that the pci-irq-affinity-agent.service is NOT activated\nafter system startup\nPASS: Verify that there are no active alarms\n\nStory: 2009299\nTask: 43653\n\nDepends-On: https://review.opendev.org/c/starlingx/openstack-armada-app/+/830505\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I16206d69b5bb5675f0ea9fa67b32798d53091ac1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix to not restart alias interface\n\nThe alias interface may at times be brought up before its parent\ninterface (ethernet or vlan) depending on how the interface config\nfiles are listed in the filesystem.\nThe fix is to not restart the alias interface. If there is a\nchange in the alias interface configuration, the parent interface\nwould be restarted instead.\n\nPartial-Bug: 1817593\n\nChange-Id: I83b88e1587c6468d85e14a50de934908586cbc9b\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure Armada lock is released\n\nIf the apply/remove of an application is failed due to\nan exception of the Armada request or an abnormal exit\nof the Armada request, the Armada lock cannot be released\nby Armada which causes the subsequent re-apply of the\napplication to fail as it cannot acquire the lock.\n\nUpdate to delete the lock if an exception occurs during\nArmada request or Armada request exits abnormally.\n\nCloses-Bug: 1911243\nChange-Id: I6ab02474831152b5b2b7302f0799c48d05fef64d\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Docker Logical Volume in CGTS-VG.\n\nDo not add Docker Logical Volume in CGTS-VG at all if --kubernetes\noption not specified for config_controller.  Will prevent hw lab\ninstalls from failing.  VBox installs with --kubernetes will be\nfine if disk size is appropriate, hw lab installs with --kubernetes\nstill need work.\n\nChange-Id: I6f3f3620dd06bfa5fbc751f5ca84191c4195ced4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix to Horizon VM launching\n\nThis commit removes the cookie name customizations,\nthey are being moved into the platform horizon instead\n\nChange-Id: I2b80dc388f599c3168c45fab7db7cd38cdf96f7e\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\nCloses-Bug: 1813661\nDepends-On: https://review.openstack.org/#/c/635560/\n",
        "issue_summary": ""
    },
    {
        "commit_message": "debian: Remove sleep in network interface pre-up\n\nRemove the 20 second delay before bringing up the network\ninterface. This was done so that the network interface has\nfeature parity with Centos 7, but ifupdown detects nelink\ndifferently compared to Centos 7. Removing the delay\nresults in a significant speed up.\n\nIn Debian, the network cable test is run by\n/etc/network/if-pre-up.d/00check-network-cable script.\n\nStory: 2009221\nTask: 45758\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/851077\n\nTest Plan\nPASS Build sysinv package\nPASS Build ISO\nPASS Run bootstap/unlock\nPASS Check /etc/network/interface.d/ifcfg-* if 'sleep 20'\n     is still present.\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I2da5b46340cd625896d4f3e4e983874d228855c8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove pm-qos hieradata from platform puppet plugin\n\nSince we are removing the pm-qos class from the puppet\nmanifest we don't need the hieradata provided to it anymore.\n\nStory: 2009886\nTask: 44642\n\nTest plan:\nPASS: Restart sysinv-conductor and check if it's still working properly.\nPASS: System host lock/unlock with BIOS settings modifications.\nPASS: Verify CPU Cores c-states switching after changing tuned profile.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I39c4b54a711270ef048b7cbad977072cd8566860\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add controller-cluster-host IP to /etc/hosts\n\nTo allow any user to create new K8S configuration files, the cluster\nhost floating address must be present in \"/etc/hosts\".\n\nTest Plan:\n\nPASS: Complete an AIO-SX deploy containing this change and verify that\nthe file \"/etc/hosts\", generated by Puppet, has an entry called\n\"controller-cluster-host\" pointing to the cluster floating address.\n\nStory: 2010738\nTask: 48565\n\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I73744bc520f8c8fcc6ba7ca947e94ffe92f7477a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX K8s upgrade optimization: \"cordon\" and \"uncordon\" as optional\n\nThe cordon and uncordon commands are not necessary to execute during\nk8s upgrade in AIO-SX. This change provides the cordon and uncordon\nsystem commands as optional.\n\nTest Plan:\nPASS: Fresh install ISO as AIO-SX. Successfully upgraded from 1.23.1\n      to 1.24 using the manual K8s upgrade without executing cordon\n      and uncordon system commands. Successfully upgraded from 1.24\n      to 1.25 with the cordon and uncordon system commands.\n      After executing cordon system command some of the pods went to\n      the 'Pending' status. After executing uncordon system command\n      pending pods are return to 'Running' status.\n\nStory: 2010565\nTask: 48042\n\nChange-Id: Ia4b7b8345d33cb6662c6de6fbb13d6314e4c109f\nSigned-off-by: Ramesh Kumar Sivanandam <rameshkumar.sivanandam@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use bonded interface name in ptp4l configuration\n\nAlthough linuxptp already supports bonded interfaces since version\n1.9.2, the slave interfaces have been named in the ptp4l service\nconfiguration file. Because of this, when PTP is enabled through a\nbonded interface, it remains unlocked and error messages can be seen in\nboth sides of LAG.\nThis change allows the bonded interface name to be referred directly by\nthe corresponding ptp4l configuration file. Moreover, it has been\nobserved that only \"active_standby\" mode of LAG is actually accepted by\nptp4l service, therefore a semantic check to constrain the AE mode is\nalso introduced.\nFinally, some code for applying legacy PTP configuration (deprecated)\nwas also removed.\n\nTest Plan:\nPASS: New unit test cases for the scenario of having PTP on top of\n      bonded interface\nPASS: Bonding+PTP configuration in fresh install using VM setup\nPASS: Check for PTP lock through bond interface in hardware setup\n\nCloses-Bug: 1973201\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: Ic5c20c56dd220d8887518d40096ca89039818bd8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "dcorch for containerized openstack services - config\n\nThis updated sysinv to call runtime puppet classes to update dcorch\nconfiguration file with containerized keystone credentials after\nstx-openstack is successfully applied, and restart dcorch for the\nnew configuration to take effect, so that dcorch will orchestrate\nstx-openstack services.\n\nWhen stx-openstack is removed, the containerized keystone credentials\nwill be removed from the configuration file and dcorch is restarted\nagain.\n\nChange-Id: I824f43c61265e3d2a1dc3e1571bf81c2f54e0712\nStory: 2004766\nTask: 36157\nDepends-On: https://review.opendev.org/#/c/682052/\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fail parameter apply if AD mandatory params missed\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Store front-proxy server certificates in hiera data\n\nStore the front-proxy server certificates in hiera data so\nthey can later be copied to the second master.\n\nCloses-Bug: 1855915\nDepends-On https://review.opendev.org/#/c/698349\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n\nChange-Id: I538b5ad4263319dce4c063ffc279799d3a878b62\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CLIs for kube rootca update procedure\n\nThis commit reunites the code related to user client interface\nto use k8s rootca update APIs on sysinv.\nIncludes commands for\n  system kube-rootca-update-start\n  system kube-rootca-update-generate-cert\n  system kube-rootca-update-upload-cert\n  system kube-rootca-host-update\n  system kube-rootca-pods-update\n  system kube-rootca-update-complete\n  system kube-rootca-update-abort\n\nTask: 43080\nStory: 2008675\nDepends-on: https://review.opendev.org/c/starlingx/config/+/805375\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\nChange-Id: I67f938130a9f3d6a4abdcf7b47492226dfbd3ce6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide API to enable/disable NTP service in SysInv\n\nNTP API is modified to prevent both PTP and NTP from running at the same time.\nAdditional parameter \"--enabled=<true/false>\" is intoduced for the \"ntp-modify\".\nUser is able to disable NTP service before turning PTP service on.\n\nDepends-On: I0831487fb14de80edec0ee8df5cc6f23dfb6bae8\nChange-Id: Icdf6b0a4bf5f5ffee6742a6cba03ed22c7d6d038\nStory: 2002935\nTask: 24646\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Enable ptpinstance functionality\n\nThis commit provides the API and CLI updates to enable\nptpinstance functionality and runtime manifest application.\n\nA new CLI command is provided to apply the ptpinstance configuration:\n\nsystem ptp-instance-apply\n\nTests:\n\nPass: Build and install on hardware lab\nPass: multi instance ptp can be configured and applied\n\nRegression:\n\nPass: Single instance ptp is unaffected\n\nStory: 2009248\nTask: 44292\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/824800\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I095a000989af9c3c002b6bde5f899c0671860e66\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable CPU manager static policy for non-openstack worker nodes\n\nFor non-openstack based worker nodes the kubelet cpu-manager\nstatic policy is enabled. The default 'none' policy is retained\nfor openstack based worker nodes and non-worker nodes.\n\nThis enables the complete CPU isolation of:\n- Platform tasks (i.e., systemd tasks configured with CPUAffinity)\n- kubernetes guaranteed pods (Gu)\n- kubernetes besteffort (Be) and burstable (Bu) pods\n\nRefer to following for CPU manager:\nhttps://kubernetes.io/docs/tasks/administer-cluster/cpu-management-policies.\n\nThe platform reserved CPUs and memory are queried from sysinv database\nfor each worker node. Puppet configures the following cpu-manager\noptions specifically with 'static' policy:\n--cpu-manager-policy=static\n--system-reserved-cgroup=/system.slice\n--system-reserved=cpu=<k8s_reserved_cpus>,memory=<k8s_reserved_mem>Mi\n\nThe Allocatable pool of resources is based on the total node capacity\nand subtracting overheads including '--system-reserved' and\n'--kube-reserved'. Specifying kube-reserved is not necessary.\n\nChange-Id: I235c05b82d50bd9e3a8d36b0b076d8374dfb6055\nStory: 2005192\nTask: 29952\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Removing unnecessary IP for platform-nfs.\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enabled platform interfaces to add ip address(es)\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Support stx-openstack app install with the authed local registry\n\nThe functionality of local docker registry authentication will be\nenabled in commit https://review.openstack.org/#/c/626355/.\nHowever, local docker registry is currently used to pull/push images\nduring application apply without authentication and no credentials\npassed to the kubernetes when pulling images on other nodes except\nfor active controller.\n\nIn order to install stx-openstack app with local docker registry that\nhas authentication turned on, this commit updates the following:\n 1. Pass the user credentials when pulling/pushing images from local\n    registry during application apply.\n 2. Create a well-known registry secret \"default-registry-key\" which\n    holds the authorization token during stx-openstack app apply and\n    delete the secret during removal. The helm-toolkit is updated to\n    refer to this secret in k8s openstack service account template for\n    pulling images from local by kubelet. This secret is also added to\n    rbd-provisioner service account as well since it is not using\n    helm-toolkit to create service account.\n\nNote: #2 is short-term solution. The long-term solution is to implement\nthe BP https://blueprints.launchpad.net/openstack-helm/+spec/support\n-docker-registry-with-authentication-turned-on.\n\nStory: 2002840\nTask: 28945\nDepends-On: https://review.openstack.org/636181\nChange-Id: I015dccd12c5c7fa7a4bea74eef8d172f03b5d60e\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure SM to monitor cluster-host-ip\n\nChanged to use the new cluster-host-ip service in SM instead of\ncinder-ip.\nIf cluster-host interface is shared with the management\ninterface, the cluster host ip and interface would not be monitored.\n\nStory: 2004273\nTask: 28962\nDepends-On: https://review.openstack.org/#/c/650980/\nChange-Id: I773ab2240d4b165dee5738cf0f957e631da67a1d\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase tolerance for declaring nova services down\n\nThe nova conductor listens for heartbeats from the nova\ncompute services running on worker nodes. The services send\nthis heartbeat every 10s and the default timeout is 60s.\nHowever, in some cases (e.g. when a controller host is powered\ndown unexpectedly), it can take more than a minute for the\nrabbitmq server to restore messaging functionality, so\nnova compute services will be declared down incorrectly. This\ncauses the VIM to migrate instances away from the worker\nnode, which we want to avoid.\n\nTo make this more tolerant of temporary failures in the\nrabbitmq server, I am increasing the timeout (service_down_time)\nto 90s.\n\nChange-Id: Iedca615edf0bef8be4a05a12960071ebd055aae2\nCloses-Bug: 1816848\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure calico-ipam for multus k8s pod network\n\nThis commit configures calico-ipam rather than host-local for the\nIPAM configuration on the k8s pod network delegate.\n\nUsing host-local IPAM, there is a possibility for duplicate IP\naddress allocation as the IP addresses are managed locally on\nthe node's file system.\n\nUsing calico-ipam, the IP addresses are managed across the\ncluster as a whole.\n\nCloses-Bug: #1830282\n\nChange-Id: I9a68fc164ad88f295827442ec83236c454af7907\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Spectre/meltdown kernel options controllable by customer\n\nImplements customer configuration of kernel options to control\nspectre/meltdown related kernel options.  Default (with \"nopti\nnospectre_v2\" options) can be changed to \"\" using\n\nsystem modify -S spectre_meltdown_all\n\nChange-Id: I6241b8ecda15216a35f45cfeb7c1749294fc0cb8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "assorted kubeadm configmap compatibility issues\n\nThere is an upstream issue in Kubeadm (affecting at least up till\n1.24.4) where if the \"certSANs\" field of the kubeadm configmap contains\nunquoted IPv6 addresses starting with colons in \"flow style\" it will\nchoke while parsing.\n\nThe problematic formatting looks like this:\n\n        ClusterConfiguration: |\n            apiServer:\n                certSANs: [::1, 192.168.206.1, 127.0.0.1, 10.20.7.3]\n\nWhile this is fine:\n\n          ClusterConfiguration: |\n            apiServer:\n                certSANs:\n                - ::1\n                - 192.168.206.1\n                - 127.0.0.1\n                - 10.20.7.3\n\nIt also works to wrap each IPv6 address in quotes.\n\nIt's not clear what causes the certSANs field to be formatted in flow\nstyle, but it was seen in testing after a platform upgrade followed\nby a k8s upgrade.\n\nThe workaround is to modify the \"upgrade first control plane\" code\nto update the configmap 'certSANs' field to block style if it's in\nflow style and contains IPv6 addresses.\n\nI've opened an upstream issue:\nhttps://github.com/kubernetes/kubeadm/issues/2858\n\nWe'll hit the same error in _get_kubernetes_join_cmd(), but since that\ncode is run more frequently rather than reformatting the configmap\nwe modify the code to explicitly set the certificate key rather than\npassing in the whole kubeadm config file.  This is arguably how it\nshould have been done originally.\n\nIn StarlingX 7 by default we set the \"HugePageStorageMediumSize=true\"\nfeature gate in the kube-apiserver section of the kubeadm configmap.\nIn k8s 1.24 it's no longer supported.  In StarlingX 8 we remove it\nfrom various locations (kubelet config, service parameters, etc.)\nbut we also need to remove it from the kubeadm configmap.\n\nTest Plan:\nPASS: platform upgrade from Starlingx 7 to 8, then K8s upgrade to 1.24\nPASS: add \"::1\" address to certSANS in configmap then upgrade k8s\nPASS: set HugePageStorageMediumSize in cm then upgrade k8s to 1.24\n\nChange-Id: I45e9e22585a5b2912a339ad5905d011e3adc29ab\nCloses-Bug: 2016041\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "FluxCD: Support disabling release instead of chart\n\nThe initial implementation of the FluxCDKustomizeOperator was following\nthe ArmadaManifestOperator wrt disabling charts of a given app, but\nFluxCD has this layer of abstraction called HelmRelease. Most of the\nStarlingX apps are defining the HelmRelease with the same name of the\ncharts and we were disabling the releases all the way through the\ninitial implementation anyway, but if the HelmRelease have a different\nname of the chart this will fail. Besides that, we might want to define\nmore than one release using the same chart. This fix will allow\nfulfilling both cases.\n\nAlso, this change implements a new sysinv.helm.base.FluxCDBaseHelm that\nwe encourage to be extended for the helm plugins of apps that are using\nFluxCD so they require CHART and HELM_RELEASE to be defined.\n\nIt's worth mentioning that I had to change the way some mocks were done\non test_kubernetes.py and test_manager.py since they were producing\nfalse positives on kustomize_base.py#L139.\n\nTEST PLAN\nPASS Upload app with charts disabled on the FluxCDKustomizeOperator,\n     check if they are not present on the list of resources on the\n     top-level kustomization.yaml\n\nStory: 2009138\nTask: 45572\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I96bf49601d1227cb876d7f9e54d6efd799a56a53\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Build stx-openstack-helm without requiring networking\n\nThis commit bypasses the helm init --client-only command\nwhich required networking access from within mock.\n\nThis allows stx-openstack-helm to be built the same as other std packages\n\nStory: 2004005\nTask: 28794\nChange-Id: I113ec91b64faebf2e7e8154e4bfbe75acc3fbf43\nDepends-On: I35c9b547a98fac559793bc2ec00012f6eded8ffa\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable helm repository and chart upload tool\n\nThere's a lot going on here but conceptually we're just enabling a\nlocal helm repo along with a helper script to install helm charts into\nthe repo.\n\nThe first item is to configure lighttpd to serve up helm charts as\nstatic information (so no proxying) at http://127.0.0.1/helm_charts\".\nThis is fairly straightforward, but the files are served out of\n/www which isn't a replicated filesystem and which is owned by the www\nuser.\n\nThe helm puppet manifest is modified to create the \"helm_charts\"\ndirectory for the webserver, to generate the initial index file,\nand to tell helm to add the new repo for the \"wrsroot\" user.  The\nvarious commands are run as specific users with specific environment\nvariables, this is key to making everything work as planned.\n\nTo allow the wrsroot user to upload charts into /www the helm-upload\nscript will re-run itself as the www user.  /etc/sudoers.d is modified\nto allow this without asking for a password.  The upload script will\ncopy the specified charts in to /www/pages/helm_charts, and will then\nregenerate the index.yaml file. The upload script will then try to\nsync the files over to the other node.  To enable this without\nprompting for a password we modify /etc/rsyncd.conf to allow\npasswordless syncing into /www/helm_charts.\n\nIn a future commit we'll need to sync charts with the other\ncontroller when booting up, and also configure the local starlingx\nhelm repo on the second controller.\n\nChange-Id: I37755ab7eedd070c27218862f936877949e378e8\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002876\nTask: 22831\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix improper move of gnocchi config\n\nIn the move of gnocchi static configurations from the overrides to\nthe Armada manifests, some configs were put in the wrong location.\nThis commit fixes this.\n\nStory: 2003909\nTask: 29535\n\nChange-Id: Iac0ada67b7a7f6c44540c731fb505090362489a1\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "iscsi multipath support\n\nAdd service parameter to enable multiple iSCSI multipath:\n\n   system service-parameter-add cinder DEFAULT multipath=true\n   system service-parameter-apply cinder\n\nAdd Puppet manifests for multipathd service.\n\nWhen multipath service parameter is enabled then controller\nand compute nodes go into config out-of-date status. They\nneed to be locked/unlocked to apply the new configuration:\n\n1. cinder.conf (only for controllers)\n\n       [DEFAULT]\n       use_multipath_for_image_xfer=true\n\n       [backend_defaults]\n       use_multipath_for_image_xfer=true\n\n   Note:\n     a. enforce_multipath_for_image_xfer option is not set\n        to allow fallback to single path in case multipathd\n        service is not available\n\n2.  load dm_multipath kernel module\n\n3.  multipath.conf\n      defaults {\n          user_friendly_names yes\n          find_multipaths yes\n      }\n\n      blacklist {\n          device {\n              vendor \"*\"\n          }\n      }\n\n      blacklist_exceptions {\n          property \"(SCSI_IDENT_|ID_WWN)\"\n          device {\n              vendor \"3PARdata\"\n          }\n      }\n\n    Notes:\n      a. multipath support is enabled only for hpe3par\n         iSCSI devices by:\n         - blacklisting devices from all vendors\n         - blacklisting all devices that do not\n           have ID_WWN or SCSI_IDENT_ udev entries\n           (see multipath.conf manual page)\n         - making an exception for 3PARdata vendor\n\n      b. multipath service is managed by systemd\n\nStory: 2002996\nTask: 27040\nChange-Id: Ib34d4542f93e78a507073f43808658be2b9fc87d\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cert Alarm service\n\nAdding service feature's framework code. Includes helper functions\nfor reading/writing certificate-related data, some processsing and\naudit threads. Also includes unit test code for all cert-alarm utils.\n\nStory: 2008946\nTask: 42852\n\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nChange-Id: I2c37e0aa6d5c4185578a8a235d6969b90db9dc4a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Make Heartbeat Failure Action Configurable\n\nThe current maintenance heartbeat failure action handling is to Fail\nand Gracefully Recover the host. This means that maintenance will\nensure that a heartbeat failed host is rebooted/reset before it is\nrecovered but will avoid rebooting it a second time if its recovered\nuptime indicates that it has already rebooted.\n\nThis update expands that single action handling behavior to support\nthree new actions. In doing so it adds a new configuration service\nparameter called heartbeat_failure_action. The customer can configure\nthis new parameter with any one of the following 4 actions in order of\ndecreasing impact.\n\n   fail - Host is failed and gracefuly recovered.\n        - Current Network specific alarms continue to be raised/cleared.\n          Note: Prior to this update this was standard system behavior.\ndegrade - Host is only degraded while it is failing heartbeat.\n        - Current Network specific alarms continue to be raised/cleared.\n        - heartbeat degrade reason is cleared as are the alarms when\n          heartbeat responses resume.\n  alarm - The only indication of a heartbeat failure is by alarm.\n        - Same set of alarms as in above action cases\n        - Only in this case no degrade, no failure, no reboot/reset\n   none - Heartbeat is disabled ; no multicase heartbeat message is sent.\n        - All existing heartbeat alarms are cleared.\n        - The heartbeat soak as part of the enable sequence is bypassed.\n\nThe selected action is a system wide setting.\nThe selected setting also applies to Multi-Node Failure Avoidance.\nThe default action is the legacy action Fail.\n\nThis update also\n\n 1. Removes redundant inservice failure alarm for MNFA case in support\n    of degrade only action. Keeping it would make that alarm handling\n    case unnecessarily complicated.\n 2. No longer used 'hbs calibration' code is removed (cleanup).\n 3. Small amount of heartbeat logging cleanup.\n\nTest Plan:\nPASS:    fail: Verify MNFA and recovery\nPASS:    fail: Verify Single Host heartbeat failure and recovery\nPASS:    fail: Verify Single Host heartbeat failure and recovery (from none)\nPASS: degrade: Verify MNFA and recovery\nPASS: degrade: Verify Single Host heartbeat failure and recovery\nPASS: degrade: Verify Single Host heartbeat failure and recovery (from alarm)\nPASS:   alarm: Verify MNFA and recovery\nPASS:   alarm: Verify Single Host heartbeat failure and recovery\nPASS:   alarm: Verify Single Host heartbeat failure and recovery (from degrade)\nPASS:    none: Verify heartbeat disable, fail ignore and no recovery\nPASS:    none: Verify Single Host heartbeat ignore and no recovery\nPASS:    none: Verify Single Host heartbeat ignode and no recovery (from fail)\nPASS: Verify action change behavior from none to alarm with active MNFA\nPASS: Verify action change behavior from alarm to degrade with active MNFA\nPASS: Verify action change behavior from degrade to none with active MNFA\nPASS: Verify action change behavior from none to fail with active MNFA\nPASS: Verify action change behavior from fail to none with active MNFA\nPASS: Verify action change behavior from degrade to fail then MNFA timeout\nPASS: Verify all heartbeat action change customer logs\nPASS: verify heartbeat stats clear over action change\nPASS: Verify LO DOR (several large labs - compute and storage systems)\nPASS: Verify recovery from failure of active controller\nPASS: Verify 3 host failure behavior with MNFA threshold at 3 (action:fail)\nPASS: Verify 2 host failure behavior with MNFA threshold at 3 (action:fail)\n\nChange-Id: I198505fb7a923cc760b12082acff1e5bac929ef2\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker integration on storage nodes\n\nAllocate 10G LV for docker in the cgts_vg volume group if the\n--kubernetes option is used with config_controller.\n\nStory: 2002839\nTask: 22778\n\nChange-Id: Iabd08fc6da3a0fafd3005c2a49625ba477228ec5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure dcmanager user for endpoint_cache\n\nThe following changes are made, in order to remove the\ndependencies to 'admin' user and use 'dcmanager' user to\nauthenticate with services in the subclouds:\n. Configure dcmanager user for dcorch\n. Add the dcmanager user id to the static.yaml on subclouds\n  during upgrade\n\nDepends-On: https://review.opendev.org/#/c/735994/\nPartial-Bug: 1883758\n\nChange-Id: I72ed05d38ac6c25d240f99c4aeaf13b51273471f\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Mellanox device detection\n\nThere are some instances where the is_a_mellanox_device() method could\nfail depending on how the driver of a port is detected. The driver\nparameter of a port can be a string of various driver names, separated\nby commas. The Mellanox detection method was not able to handle this and\nwould erroneously identify a device as a non Mellanox in this scenario.\n\nTESTS:\n- Installed on a host using a Mellanox CX5 card\n- Set the interface using a port of the CX5 to pci-sriov class\n- Confirmed that the port driver is listed as 'mlx5_core,mlx5_core' when\n  running 'system host-port-show'\n- Assigned this interface to a datanetwork\n- Confirmed that the flag 'isRdma' is now correctly appended to the\n  datanetwork resource in the file /etc/pcidp/config.json\n\nCloses-Bug: 1973361\n\nSigned-off-by: Antonio Augusto Vilas Boas Teixeira\n<antonio.augustovilasboasteixeira@windriver.com>\nChange-Id: Ib12d104a61c3e78803e4387804cd53a98ee8f0ec\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Added synce4l configuration support\n\nThis commit provides configuration of synce4l application using\nPTP CLI commands.\n\nTest Plan:\nPASS: configure synce4l via CLI\n\nStory: 2010540\nTask: 47360\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/873594\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: Icb6802edcef346955029ead745dadd30024a47b9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet to ignore hugepages\n\nBy default, kubernetes assumes any hugepages on the host are\navailable for it to use, but it has the limitation that it can\nonly handle a single hugepage size per host.  This makes it less\nuseful for us, since we want to give vswitch 1GB pages but prefer\n2MB pages for OpenStack VMs.\n\nFor now, the workaround is to tell kubernetes to ignore hugepages.\n\nThis also fixes up kubeadm.yaml.erb to use the new format for\nkubernetes 1.12.\nChange-Id: I0917781db4f1961d433399e0a9799f3a6253ca11\nStory: 2003909\nTask:  27085\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Deprecate sysinv.openstack.common.log\n\nSysinv had partially converted to oslo_log, but\nnot all the files had been updated.  This completes\nthat conversion and completely removes\n - sysinv.openstack.common.log.py\n - sysinv.openstack.common.log_handler.py\n\nMost of the changes in this review are:\n\nOld Code:\n  from sysinv.openstack.common import log\n\nNew Code:\n  from oslo_log import log\n\nTwo main differences are:\n - verbose flag was removed from oslo_log config in 2017\n - oslo_log automatically prefixes each line with config type (sysinv)\n   Old Prefix:\n     2019-11-01 16:39:24.142 72561 INFO\n  New Prefix:\n     sysinv 2019-11-05 18:55:03.620 96275 INFO\n\nChange-Id: I0dda384d943c6dc9277ebce87a6b295fb62500ff\nStory: 2006796\nTask: 37342\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix kubernetes apiserver advertise address\n\nSet the kube-apiserver advertise address to the local\ncontroller cluster-host unit address to ensure kubeadm\ndoes not attempt to discover the default address which\nin most cases will be invalid.\n\nThe option --apiserver-advertise-addres is added to the\njoin command for controller nodes joining as master nodes.\n\nCloses-Bug: 1877383\nDepends-On: https://review.opendev.org/734865\nChange-Id: I1575da6d28d08731a8aaf4200f920f5e8f510fa0\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Rebase openstack-helm and openstack-helm-infra\n\n- Remove the mariadb force recovery override. With the rebase of\n  openstack-helm-infra, mariadb now uses a configmap to track the\n  grastate data. This allows for better recovery behavior across host\n  reboot cycles.\n- Add README.md to the RBD provisioner chart to track the last commit\n  that this chart was validated against.\n\nChange-Id: Idc007c6b696a206fb205d769e4664f702e209b75\nDepends-On: Iacbdd666687b8bc12053f9d3dd833f9896a508cd\nStory: 2003909\nTask: 27632\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the global_index policy settings for containerized heat\n\nSets the following in the armada manifest\n\n    software_configs:global_index: rule:context_is_admin\n    stacks:global_index: rule:context_is_admin\n\nCloses-Bug: 1814333\nChange-Id: Ib037b39c320587c0220b432a4198197923396709\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove magnum from baremetal.\n\nMagnum is no longer packaged on bare metal.\n\nThe sysinv and upgrades code related to magnum has been removed.\n\nThe helm configuration for magnum remains, although it is not currently\nsupported in containers either. The magnum-ui is not installed in\nplatform or containerized horizon so the code to enable it is removed.\n\nSome upgrade code remains, due to the fact that that utility is\nin the process of being re-written.\n\nStory: 2004764\nTask: 34333\nChange-Id: I56873b4e04aac2e7d0cd57909beea00ecc2c1b9a\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow user specified registries for config_controller\n\nCurrently docker images were pulled from public registries during\nconfig_controller. For some users, the connection to the public\ndocker registry may be slow such that installing the containerized\nservices images may timeout or the system simply does not have\naccess to the public internet.\n\nThis change allows users to specify alternative public/private\nregistries to replace k8s.gcr.io, gcr.io, quay.io and docker.io.\nInsecure registry is supported if all default registries were\nreplaced by one unified registry. It lowers the complexity for\nthose who build his own registry without internet access.\n\nDocker doesn't support ipv6 addr as registry name, instead\nhostname or domain name in ipv6 network is allowed.\n\nTest:\nAIO-SX/AIO-DX/Standard(2+2):\n  Alternative public registry (ipv4/domain) with proxy\n    - config_controller pass\n  Private registry (ipv4/ipv6/domain) without internet\n    - config_controller pass\n  Default registry with/without proxy\n    - config_controller pass\n\nStory: 2004711\nTask: 28742\n\nChange-Id: I4fee3f4e0637863b9b5ef4ef556082ac75f62a1d\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Zero Touch Provisioning changes for subcloud configuration\n\n- Cleaning up old RegionOne endpoints during runtime manifest apply\n- Configuring dcdbsync endpoints in subclouds\n\nDepends-On: https://review.opendev.org/#/c/670321/\nChange-Id: I14729b579646aab9acecc8a953513b87b16363d2\nStory: 2004766\nTask: 35756\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integrate gnocchi for OpenStack Telemetry\n\nThis commit integrates gnocchi as metric storage backend because of the\ndeprecation of ceilometer metering backend.\nWith gnocchi integrated, ceilometer api and collector processes are\nremoved, ceilometer agent nofitication and polling processes\nare still running to collect and normalise data from other openstack\nservices. Ceilometer notification agent also has the responsiblity\nto send samples to gnocchi backend through its gnocchi publisher and\nevents to panko backend.\nTwo gnocchi processes are introduced, gnocchi api is REST API service\nand gnocchi metricd is for metric computing and gnocchi CLI is\nsupported to query measures/metric from gnocchi backend. Ceilometer\nservice and user still need to be registered in keystone, but stop\ncreating endpoints. Gnocchi is a seperate user/service in keystone and\nrun on active controller licensing on port 8041\n\nChanges:\n\n- puppet changes to add gnocchi user and endpoints to keystone, gnocchi\n  port to haproxy and firewall,\n  remote logging as well as other necessary configurations for gnocchi\n- backup restore for gnocchi postgres db (except metric and resource\n  tables)\n- sm changes to manage gnocchi processes through created lsb scripts\n- support for multi-region setup\n- distributed cloud - do not enable service and create endpoints for\n  gnocchi in system controller\n- add gnocchi logs in syslog\n- support no reboot patching for gnocchi processes\n- add gnocchiclient in remote CLI\n- add NotIn validation method in python-voluptuous which needed in\n  gnocchi\n- collect scripts updates\n- cleanup ceilometer api and collector in puppet configuration, sm,\n  service parameter, syslog, remotelogging, patch-restart-processes\n- remote ceilometerclient from remote CLI\n- remote openstack client changes for ceilometer CLI extensions\n- remove ceilometer-api and ceilometer-collector packages from iso\n\nStory: 2002825\nTask: 22871\nDepends-On: https://review.openstack.org/587419\n\nChange-Id: Ia46c67eb6543c3694dff03435dc2b00fb2b760e5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove support for nova-local lvm backend for compute hosts\n\nThis story tracks the removal of the nova-local lvm backend for compute\nhosts. The lvm backend is no longer required; nova-local storage will\ncontinue to support settings of \"image\" or \"remote\" backends.\n\nThis story will remove custom code related to lvm nova-local storage:\n- the 'sysinv host-lvg-modify' command is modified:\n\n  --instance_backing lvm parameter is removed\n  ('image' and 'remote' remain)\n\n  --instances_lv_size_gib <size> option is removed\n\n- puppet instances_lv_size configuration is removed\n\n- local_lvm is removed from storage host-aggregates\n\nDocImpact\nStory: 2004427\nTask: 28083\n\nChange-Id: I5443a07f8922bcab7fa22e5ff8fc2d0ff3fb109d\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for bonded interfaces configuration on Debian\n\nThis change corrects bonded interface configuration on Debian systems\nusing the ifupdown package.\n\nThe master interface now receives the parameter \"bond-slaves\" to\nidentify the physical interfaces, and the slaves receive the stanza\n\"alow-[master] [slave]\" to trigger the configuration on the physical\ninterfaces.\n\nDuring tests it was observed that the slaves only run the pre-up\nstep, so for them all commands are executed on that point since\nslaves are the physical interfaces all pre-up can run since the\ndevice exists.\n\nTest Plan:\nPASS configuration of balanced interfaces with all txhashpolicy\n     values\nPASS configuration of active-standby interfaces with all\n     primary-reselect values\nPASS configuration of addresses and routes on the bond interface\nPASS configuration of VLAN interface on top of bond interface, with\n     static addresses and routes\nPASS all tests executed with host lock/unlock cycle\n\nStory: 2009965\nTask: 45196\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: Iec0d2b068c0a7a699aafd4af630364770fd3adb5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Network agent rebalance/reschedule config changes\n\nIn the unlikely event that the network agent\nrebalance/reschedule state machines are moving a resource\nfrom one agent to another, and something happens to the host\nagent, VIM,  or neutron during this small window of time, it\nmay be possible for a resource (dhcp network or router) to be\nleft unattached to an agent.  In order for these resources\nto be recovered and reattached to an agent, this update\nwill turn the network_auto_schedule and router_auto_schedule\nneutron config parameters back on.  These were originally\nturned off in order to prevent potential race conditions with\nthe rebalance/reschedule algorithms, but after further\nreview this was not considered to be an issue. They are\ntherefore being turned back on.\n\nIn addition, during host unlocks the VIM was being restarted\ncausing the rebalance/reschedule state machines to lose\nconfiguration and potentially uncleanly aborted mid-\noperation.  A change is made to only restart the VIM\non initial application apply.\n\nStory: 652151\nTask: 30561\n\nChange-Id: I73a069e478200fa4ee9eb959eceecc2dc598eecc\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restrict migration scripts that are not runable for 22.12 upgrade\n\nAdd execution exclusion for migration scripts:\n  63-helm-v2-to-v3-rel_migration.sh\n  64-upgrade-cert-manager.sh\n  65-k8s-app-upgrade.sh\n\nThis skips running the scripts above for 22.06 to 22.12 upgrade.\n\nTCs:\n    upgrade 22.06 -> 22.12 completed successfully\n\nStory: 2009303\nTask: 46219\nChange-Id: I7353d06033b6a014d8654220624c856d7d900e19\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Further increase tolerance for declaring neutron agents down\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable puppet hiera setup for USM\n\nThe puppet-usm endpoints, etc.. are setup\nby puppet by setting the appropriate hiera values.\nIt is basically the same as setting up patching.\n\nTest Plan:\n  PASS: Build/bootstrap/unlock AIO-SX\n  PASS: Build/bootstrap/unlock STD (2 controllers)\n  PASS: Verify a 'hacked' horizon can attempt authenticated\n        USM api calls\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/888783\nStory: 2010676\nTask: 48409\nSigned-off-by: Al Bailey <al.bailey@windriver.com>\nChange-Id: I75c182886ef57356dfc554c0bdc3dd589eac2533\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change compute node to worker node personality\n\nThis update replaced the compute personality & subfunction\nto worker, and updated internal and customer visible\nreferences.\n\nIn addition, the compute-huge package has been renamed to\nworker-utils as it contains various scripts/services that\nused to affine running tasks or interface IRQ to specific CPUs.\nThe worker_reserved.conf is now installed to /etc/platform.\n\nThe cpu function 'VM' has also been renamed to 'Application'.\n\nTests Performed:\nNon-containerized deployment\nAIO-SX: Sanity and Nightly automated test suite\nAIO-DX: Sanity and Nightly automated test suite\n2+2 System: Sanity and Nightly automated test suite\n2+2 System: Horizon Patch Orchestration\nKubernetes deployment:\nAIO-SX: Create, delete, reboot and rebuild instances\n2+2+2 System: worker nodes are unlock enable and no alarms\n\nStory: 2004022\nTask: 27013\n\nChange-Id: I0e0be6b3a6f25f7fb8edf64ea4326854513aa396\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding pylint checking to the sysinv unit tests\n\npylint checks were excluding the unit tests folder.\nIt is now included.\n\nThe following pylint errors needed to be fixed in the unit tests\n - wildcard import (tests.db)\n - duplicate-key (fornodeid was listed twice in one test structure)\n - function-redefined (test_storage_tier.py)\n - dangerous-default-value (using a list as a default)\n - no-member (rename a class to end in Mixin to avoid these checks)\n\nChange-Id: I1095d54542e1e7b3d07865e1e7b4cd46f14dc407\nStory: 2007082\nTask: 38081\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add sysinv upgrades support for Kubernetes 1.24.4\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Disable enumerate for AD domains\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix upgrade with Host TPM\n\nThis commit allows TPM certificates, per controller hosts, to be\npersisted across:\n- Host Reinstalls\n- Controller Restores\n- Doing a Backup on controller-1 and doing a Restore on controller-0\n- DX / SX Upgrades\n\nBy populating them in Sysinv's per host tpmdevice table's tpm_data\nfield, we manage to push these certs in as hiera data and recreate the\nTPM certs\n\nThe TPM binary memory maps are base64 encoded to allow RPC conduction\nand storage in DB, as by default when the Agent RPC message is parsed,\nit is done so using json.dumps which expects utf-8 encoding. The Binary\nmaps are base64 decoded prior to be written to the hiera records so that\nthe right content ends up in the files when the config manifest applies.\n\nChange-Id: Ie8b282808afacbba92949eefb85e96d6be441822\nStory: 2002886\nTask: 22847\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Apply static IP address for alias interfaces\n\nIt happpens because \"ifup -a\" is executed by the service.\nBut it fails because /var/run/network-scripts.puppet/interfaces\nhas 2 interfaces with same IP address.\nIt can happen when an interface (i.e: mgmt) is configured on the loopback.\nThe same IP Address is configured for interfaces: lo and lo:1.\nFor this case parent interface \"lo\" should be defined as Manual and not\nreceive a Static IP address, while \"lo:1\" will receive the Static IP\naddress.\n\nTest Plan (Debian only):\nPASS  Configure MGMT in the loopback interface AIO-SX\nPASS  Configure MGMT in the ETH interface AIO-DX\nPASS  Check systemctl status networking.service after unlock\n\nPartial-Bug: #1983503\n\nChange-Id: Ic2f07f847cb461dd01aa8cd33faae99ceb827eb2\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable oidc-auth-apps application upgrade\n\nThe oidc-auth-apps application requires conversion of the configuration\ndata during upgrade. Disable the application upgrade until the\nconversion scripts are ready.\n\nStory: 2009838\nTask: 45408\n\nTest cases:\nPASS: CentOS build\n\nSigned-off-by: Michel Thebeau <Michel.Thebeau@windriver.com>\nChange-Id: I35a1a76c013a6d45d9cae75fbe6feccbb7a33f4f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix flake8 errors in sysinv\n\nStory: 2003087\nTask: 23171\n\nChange-Id: I297f686875afb66ff7c0c44be6da8a6a6ebba29d\nSigned-off-by: Patrick Bonnell <patrick.bonnell@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Pull Armada image in the same step as Tiller\n\nUpdate helm puppet manifest to pull Armada image in the same\nstep as Tiller so it is available before running system\napplication commands. Ensure that Armada-Tiller compatibility test\nis conducted if and when Tiller is upversioned.\n\nTests conducted:\n  - fresh install + config controller (AIOSX)\n  - verify armada image is in local docker repo\n  - verify much more speedy application upload (initial upload)\n\nChange-Id: Ibae3043f52ded8f038066746e0b77edf9ace0388\nStory: 2003908\nTask: 26792\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable PCH sanity check on compute nodes (PTP slaves)\n\nThere can be configurations (i.e. LAG or VLAN) that use several NICs\nwith different PTP hardware clocks on management network.\nboundary_clock_jbod allows such configuration and needs to be enabled.\nBefore we used this option on controller nodes only because of PTP\nenabling on both OAM and management network interfaces. With LAG\nsupport this option needs to be enabled on compute nodes as well.\n\nChange-Id: I523844fce76bd2a90332d31e6104e4eaa36c6ca1\nCloses-bug: 1828017\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide env settings to allow zuul and developers to both run tox\n\nZuul checks out the dependant projects by their repo names.\nRepo checks out the project directory structure based on the\nlabels in the manifest.\n\nCurrently these directories have different names and so tox\npasses when run by zuul, but fails when run in a developer env.\n\nThis submission uses an env variable: \"STX_PREFIX\" to make\nboth envs able to run tox.\n\nStory: 2004515\nTask: 30664\nChange-Id: I06cefab7422f53ccc0b8af30ca06945311cec70e\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Updated hieradata with label value\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Call nova-sriov script only at initialization\n\nCalling script nova-sriov as part of openstack::nova::compute::runtime\nresults in the loss of sr-iov interfaces for an active instance.\n\nThis fix ensures calling of script nova-sriov is limited to when we\napply compute manifests (ie on unlock).\n\nChange-Id: I895a252dafc8677fcbfce4bcd2b2f50a2732ff32\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Configure internal/admin endpoints for vim on DC\"\n\nThis reverts commit 8543378423fa5cf8fc81e25c9272568620745301.\n\nReason for revert: There was a side effect on environments \nafter upgrades that caused the creation of wrongly configured\nendpoints. In this scenario, no HTTPS endpoint would be \ncreated for Vim on SystemController, which is worse than \nprevious behavior.\n\nChange-Id: Ib4de6b5578025538933ddb25c262f68af2a8bc0c\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replicate nova-api-proxy pod\n\nThe nova-api-proxy is currently running in a single pod on one of\nthe controllers. To improve recovery time when a controller\nfails, the nova-api-proxy pod will now be run with replicas\nset to two and anti-affinity configured so there is a pod on\neach controller.\n\nCloses-bug: 1833730\nChange-Id: Iacd17251b86050e337d9a0f832b9dfa6e9864fce\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Create openldap certificate on upgrade\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Register configuration for ovsdb-server and ovs-vswitchd with pmon daemon\n\nLinking pmon configuration files for ovsdb-server and\novs-vswitchd to link_path in /etc/pmon.d. Doing this\nwill register the configuration with pmon daemon.\n\nChange-Id: Icf2fff05782db1ea9f3bf8410ee982366d148d99\nStory: #2002947\nTask: #22942\nDepends-On: https://review.openstack.org/#/c/648330/\nSigned-off-by: Chenjie Xu <chenjie.xu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable firewall for DC setups\n\nAs in the case for non-DC installations, internal cluster traffic for\nthe platform networks will receive a firewall that allows only packets\nwithin the internal networks, by filtering only with source IP address\nand not using L4 ports.\n\nIt will restrict traffic between the system-controller and the\nsubclouds to the L4 ports described in:\nhttps://docs.starlingx.io/dist_cloud/kubernetes/distributed-cloud-ports-reference.html\n\nThey also restrict the L4 ports to only the networks involved, the\nsubcloud only accepts traffic from the system controller and in the\nsystem-controller from the subclouds.\n\nThe DC rules are applied in the management network (or the admin\nnetwork, if used in a subcloud).\n\nTest Plan\n[PASS] Install DC system-controller with firewall active\n[PASS] Install DC subcloud with firewall active (using management\n       network on both sides)\n[PASS] Modify subcloud to use admin network during runtime\n[PASS] Validate that only the registered firewall ports are\n       accessible from system-controller to subcloud\n[PASS] Validate that only the registered firewall ports are\n       accessible from subcloud to system-controller\n[PASS] Execute a subcloud rehoming\n\nStory: 2010591\nTask: 48244\n\nChange-Id: I4d27baa601d7f9b43e6c09e703a548656f8846f4\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "System mode modify fails for duplex systems\n\nThe system modify command was not working properly to update\nthe system_mode on duplex systems, so updating from duplex to\nduplex-direct and vice versa was not possible. Changes were\nmade to ensure that this modification could be made\nwhile keeping the SX to DX update rules implemented.\nAdditionally, the same rules applied during simplex to duplex\nmigration were also applied during simplex to duplex-direct\nmigration.\n\nAutomated tests were also added to make sure future changes\ndon't change the behaviour of the system without warnings.\n\nTest plan:\nPASS - Install and bootstrap SX, migrate it to DX and\nduplex-direct and check if the system modify command is\nworking properlly on CentOS.\nPASS - Install and bootstrap SX, migrate it to DX and\nduplex-direct and check if the system modify command is\nworking properlly on Debian.\n\nCloses-bug: 2002561\n\nSigned-off-by: Victor Romano <victor.gluzromano@windriver.com>\nChange-Id: I42cff0291945a42b10fa9a4abecaf3c936ffc7e6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Integrate host configuration into configuration framework\n\nIntegrates the following host configuration into the configuration\nframework:\n- Host boot parameters\n- CPU reservation\n- Process affinity\n- Memory huge page allocations\n\nChange-Id: I2259e0e93eefd5ce5000271fa32ecaa8d13fa411\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "VF rate limiting support\n\nThis feature is part of 'Single NIC support'.\nThis commit implements the rate limit on VFs in terms of\nmax_tx_rate leveraging hardware NIC driver capability.\nAnd adjust sriov-device-plugin config.json to make it easy\nto allocate rate limited VFs to the target Pods.\n\nStory: 2008470\nTask: 41508\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/770132\nSigned-off-by: Litao Gao <litao.gao@windriver.com>\nChange-Id: I3b609296b6b5b872f0bb0bd9733740b01e9d421c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Using general naming for app openstack\n\nTo make a downstream release of stx-openstack, we often have to also\nrename all the app's helm and puppet plugins namespace and also change\ncode on sysinv. This change decouples the name of the openstack\napplication from its plugins in order to ease downstream development\nand release.\n\nTests report: https://paste.opendev.org/show/810225/\n\nStory: 2009669\nTask: 43899\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I4d4199b085b25e15ffeec77348e6d517bd808302\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove nova service parameters for pci alias\n\nThe pci_alias is meant to be overridden through helm overrides,\nrather than a service parameter.\n\nRemoving the nova service parameters.\nRemoving runtime references to non existant nova puppet\nmanifests.\n\nChange-Id: Icb6a16ae0953b58a1339a4db6835c2c02ab15c0e\nStory: 2004764\nTask: 30202\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Resolving not-callable\n\nAll non-callable errors were suppressed per\nline basis, done for all references of subprocess\ncheck_call and check_output\n\nStory: 2007082\nTask: 37996\n\nSigned-off-by: Lu Yao Chen <luyao.chen@windriver.com>\nChange-Id: Id7ede03016e006c0de35a090d422a68ee83f5f1e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Setup certmon service configuration\n\nThis change generates certmon service configuration for puppet to\ncreate /etc/sysinv/cert-mon.conf.\n\nChange-Id: I045d5c07a66b8286acca3c628d2c5e100e245b6a\nStory: 2007347\nTask: 40393\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add dynamic provisioning for the Mtce guestAgent\"",
        "issue_summary": ""
    },
    {
        "commit_message": "sysinv: Intel ACC100 (Mt Bryce) enablement\n\nThis commit adds SR-IOV device plugin support for forward error\ncorrection (FEC) devices that are enabled on an Intel ACC100 (Mt.\nBryce). The Intel ACC100 is mounted on Lisbon ACC100 Card.\n\nThe FEC device is intended for use by a DPDK application. It is\npresented to the system under resource name: \"intel_acc100_fec.\"\n\nAn example usage to modify the device:\n\nsystem host-device-modify <host> <device_name> \\\n  -e true \\\n  --driver igb_uio \\\n  --vf-driver <driver> \\\n  -N <num_vfs>\n\nAnd example assignment to a pod:\n\n resources:\n      requests:\n        memory: 4Gi\n        intel.com/intel_acc100_fec: '16'\n        cpu: 6\n      limits:\n        hugepages-1Gi: 2Gi\n        memory: 4Gi\n        intel.com/intel_acc100_fec: '16'\n        cpu: 6\n\nStory: 2008440\nTask: 41403\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/775253\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/775252\n\nSigned-off-by: Babak Sarashki <Babak.SarAshki@windriver.com>\nChange-Id: I831fd16a0410ee988365c067789f760139274ec8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support background runtime manifests during upgrade-activate\n\nIn distributed cloud environments runtime manifests can be applied in\nthe background. This can cause hosts to become config out-of-date after\nthe upgrade-activate completes. This is due to the large window between\nsetting the host's config_target and updating the config_applied. If a\nmanifest is run in this window the host will remain config out-of-date\nuntil a lock/unlock is performed.\n\nTo address this the config_target changes will be limited to hosts that\napply a runtime manifest as part of the upgrade-activate process.\nFurther the config_target will be updated immediately before the\n_config_apply_runtime_manifest is called.\n\nStory: 2008055\nTask: 41917\nChange-Id: I2e60c7557e8d398eeef2a407a0552f5e8f4a1f18\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enhancements for the rbd-provisioner helm chart\n\n- remove the need to create the openstack namespace: the\n  namespace will be created by default by helm when the first\n  chart is installed using the namespace\n- the rbd-provisioner chart is now installed in the openstack\n  namespace and doesn't create resources over multiple namespaces\n\nChange-Id: I875acd5959ceca033d9233ddf70ac951db7ca6a8\nStory: 2004520\nTask: 28395\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove references to pacemaker from sysinv\n\nSysinv use of pacemaker was replaced by SM a long time ago\nand the code that referenced it is being removed.\n\nChange-Id: Ic2a55698f64757bffeb9b53f4a105ea6ccb3dd2f\nStory: 2004764\nTask: 30665\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support optional nova-local volume-group\n\nFor pure worker nodes we do not require a nova local vg. Modify the\nworker manifest to only add the supporting logical volumes if the volume\ngroup is present.\n\nStory: 2004022\nTask: 30672\nChange-Id: I5deffc6eb968d585074fed4ef5bc5455f0c35b8b\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Allow configuration of isolcpus\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add system health check for psp policy\n\nRemoval of PSP Support as part of k8s 1.25/1.26 transition,\nadding a check in the system health-query that there are\nNO PSP policies present in the cluster. With the release of\nKubernetes v1.25, PodSecurityPolicy has been deprecated.\nWe can read more information about the removal of PodSecurityPolicy\nin the Kubernetes 1.25 release notes here:\nhttps://kubernetes.io/blog/2021/04/06/podsecuritypolicy-deprecation\n-past-present-and-future/\nThe check should FAIL the scenario and log the error output in\nsysinv log with the psp resource names exisitng in the cluster,\nasking the user to remove it before the upgrade.\n\nTest Plan\nAIO-SX: Perform system health-query\nPASS: Iso creation\nPASS: bootstrap\nPASS: RUN system health-query with no PSP policies\n      Output:\n      System Health:\n      All hosts are provisioned: [OK]\n      All hosts are unlocked/enabled: [OK]\n      All hosts have current configurations: [OK]\n      All hosts are patch current: [OK]\n      No alarms: [OK]\n      All kubernetes nodes are ready: [OK]\n      All kubernetes control plane pods are ready: [OK]\n      All PodSecurityPolicies are removed: [OK]\nPASS: RUN system health-query with existing PSP policies\n      Output:\n      System Health:\n      All hosts are provisioned: [OK]\n      All hosts are unlocked/enabled: [OK]\n      All hosts have current configurations: [OK]\n      All hosts are patch current: [OK]\n      No alarms: [OK]\n      All kubernetes nodes are ready: [OK]\n      All kubernetes control plane pods are ready: [OK]\n      All PodSecurityPolicies are removed: [Fail]\n      PSP policies exists, please remove them before\n      upgrade: privileged, restricted\nPASS: RUN system health-query-kube-upgrade with no PSP policies\nPASS: RUN system health-query-kube-upgrade with existing PSP policies\n      All hosts are provisioned: [OK]\n      All hosts are unlocked/enabled: [OK]\n      All hosts have current configurations: [OK]\n      All hosts are patch current: [OK]\n      No alarms: [OK]\n      All kubernetes nodes are ready: [OK]\n      All kubernetes control plane pods are ready: [OK]\n      All PodSecurityPolicies are removed: [Fail]\n      PSP policies exists, please remove them before\n      upgrade: privileged, restricted\n      All kubernetes applications are in a valid state: [OK]\nPASS: RUN system health-query-upgrade with no PSP policies\nPASS: RUN system health-query-upgrade with existing PSP policies\n      All hosts are provisioned: [OK]\n      All hosts are unlocked/enabled: [OK]\n      All hosts have current configurations: [OK]\n      All hosts are patch current: [OK]\n      No alarms: [OK]\n      All kubernetes nodes are ready: [OK]\n      All kubernetes control plane pods are ready: [OK]\n      All PodSecurityPolicies are removed: [Fail]\n      PSP policies exists, please remove them before\n      upgrade: privileged, restricted\n      No imported load found. Unable to test further\n\nStory: 2010590\nTask: 48145\n\nChange-Id: I3787bdce505c2d18f5312fc32e95c507d8916b3d\nSigned-off-by: Rahul Roshan Kachchap <rahulroshan.kachchap@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "add workaround for N3000 reset behaviour\n\nThe N3000 FPGA is supposed to be reset after every image update,\nbut the first reset after boot changes the PCI address of the device.\n\nAs a workaround, we need to reset the N3000 on startup and then\nsend new PCI information to sysinv-conductor.\n\nChange-Id: Ie9eea8b670f0c82f0108ccbec978500e1bc0eb6a\nStory: 2006740\nTask: 39929\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create docker-lv in the automatically created ctgs-vg volume group\n\nThis commit creates docker-lv in the automatically created cgts-vg\nvolume group on the worker nodes if kubernetes is configured. It\nalso supports cgts-vg expansion.\n\nThis commit also increases docker-lv size to 30G for all the hosts.\n\nStory: 2004520\nTask: 28663\nDepends-On: https://review.openstack.org/628053\nChange-Id: I9b53421318883d0e951d64d0be91e146d14e5d7b\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Engineer IRQ affinity to decouple applications from platform\n\nThis engineers the default IRQ affinity setting to application cores if\nthey are configured. PCI IRQs for platform interfaces and NVMe are later\nmoved to platform cores, so this change effectively decouples platform\nfrom application.\n\nThis is particularly noticeable when running RT kernel + kernel-bridge,\nusing SRIOV pod and significant traffic load. The resultant irq kernel\nVF threads do work on cores where they are affined.\n\nPartial-Bug: 1930595\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Ieb112d3261f884b839a2e986111b22fa94fa1b69\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding AIO-SX to AIO-DX migration steps patching existing PVs\n\nKubelet and kube-api are no longer available during puppet\nmanifest run during unlock. Therefore, we moved the patching\nof Persistent Volumes from puppet tosysinv-conductor\nas a post-migration step during its start-up.\n\nCloses-Bug: 1927224\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/789844\nDepends-On: https://review.opendev.org/c/starlingx/fault/+/790183\nChange-Id: I9745b7f8547c82485353130156011650f2655317\nSigned-off-by: Pedro Henrique Linhares <PedroHenriqueLinhares.Silva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix mariadb nginx worker number issue\n\nOverride nginx \"worker-processes\" setting in mariadb ingress\ncontroller. Default value is changed from auto to 4 to reduce\nmemory consumption by nginx worker processes. 4 worker can\ngive 2 per platform CPU (in AIO) to avoid blocking all users\nin case that part of workers are blocked.\nThe static override is done in the Armada manifest.\n\nCloses-Bug: #1823803\nDepends-On: https://review.opendev.org/#/c/659464/\nChange-Id: If0e6d2b2ac45dedbd9e67b4f866702d9de1db15c\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update stx branding in horizon local_settings\n\nIn the commit https://review.openstack.org/#/c/623231/, the stx\nbranding was moved from stx-horizon to stx-gui and renamed from\n\"titanium\" to \"starlingx\".\nThis updates the horizon local_settings in aramda manifests to search\nfor \"starlingx\" themes in order to bring up the containerized horizon.\n\nChange-Id: I4eec0a19d808398cce4f7ec14fb93d188a9aac5a\nStory: 2004520\nTask: 28529\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix multi-net interface configuration\n\nOn the worker and storage nodes, the mgmt interface should be\nset to DHCP and the cluster host alias should be set to use static IP.\nHowever, the recent fix for this added DHCP to an alias interface which\nis not supported.  This was causing the management network to not be\nconfigured after the host was rebooted and the interfaces were\nreconfigured by Puppet.\n\nThe interface configuration has been updated to ensure that DHCP\nnetworks are configured against the parent device and all additional\nstatic addresses will be configured as alias interfaces.\n\nThere is also a few additional issues that have been fixed:\n  - multinetting with different address families\n  - traffic controls applied to parent interface\n  - address scope for aliases on AIO-SX with dedicated interfaces\n  - setting of the gateway address on multi-net interfaces\n\nStory: 2004273\nTask: 27826\n\nChange-Id: If8e354bf41cbc1c11966a4b43b8a058c33580c49\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca pods update\n\nAPI for pods rollout restart to update pods to receive certificates\nsigned by the new root CA. Respective to phases trustBothCAs\nand trustNewCA\n- kube rootca pods update phase trustBothCAs API and conductor\nimplementation.\n- API unit tests for pods update phase trustBothCAs.\n- kube rootca pods update phase trustNewCA API and conductor\nimplementation.\n- API unit tests for pods update phase trustNewCA.\n\nStory: 2008675\nTask: 42703\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/798306\nChange-Id: I34fe51dd1dca401864d165b04186ebe1fab178c7\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove embedded keystone policy config change\n\nCurrently keystone policy file (policy.json) is from a custom file\npatched into keystone source tree. This update removed the patched\nfile from keystone and instead use a puppet template to generate one\nat system configuration time (puppet manifest apply).\n\nStory: 2003110\nTask: 23229\n\nChange-Id: Ia604f50351f932a284ab73e1453c6b6e2cf1616b\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore containerized platform using Ansible restore_platform playbook\n\nThis commit is to support platform restore for AIO-SX using\nrestore_platform playbook:\n 1. During AIO-SX restore, the restored ceph crushmap is loaded through\n    puppet.\n 2. Bypass vim when unlocking controller-0 for the first time.\n 3. When unlocking controller-0 for the first time, app_reapply is\n    skipped for stx-openstack application.\n 4. After controller-0 is unlocked, ceph backend task is set to None.\n\nChange-Id: I36d27b162334e5a2f0371793243f2301b5fec1eb\nStory: 2004761\nTask: 33645\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add cluster-host IP for worker node in /etc/hosts\n\nmtcClient monitors the cluster-host interface and looks up the\ncluster-host IP address. Since the cluster-host network is not\nserved by dnsmasq, the cluster-host IP address is not available\nin the dnsmasq.hosts file.\nThis commit add the cluster-host IP address to the /etc/hosts file\nfor worker nodes.\n\nStory: 2004273\nTask: 28899\nChange-Id: I80937e8809ed5d40cf57d97d34eaab6afd7d6400\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: I000b28bf01976e7c44e06ddb661d9c526a10298c\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ihost cpu_max_frequency\n\nAdds a new host attribute to limit the host CPU frequency\nvia system command.\n\nTest plan:\nPASS: Bootstrap a system.\nPASS: Configure and restart sysinv-agent and check configuration\n         persistence.\nPASS: Configure a value higher than supported by the CPU.\n      (cpupower doesn't allow)\nPASS: Configure a value below than supported by the CPU.\n      (cpupower doesn't allow)\nPASS: Upgrade a system.\nPASS: Ensure cpupower utility is available on debian OS.\n      (linux-cpupower package not present)\n      https://review.opendev.org/c/starlingx/tools/+/839205\n      adds the package to the debian builds\n\nStory: 2009886\nTask: 44882\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/835748\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: If9ed56497791f5acd36a28fad5d3c2c7ba11db74\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable puppet hiera setup for USM\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix vim endpoint port for SystemController\n\nAdded internal/admin endpoints to fix an issue with Puppet-Keystone\n'keystone_endpoint' method for DC's SystemController vim endpoint,\nthat wasn't being correctly updated when https was enabled.\n- Added script to support upgrades from previous versions (tested\n  in AIO Duplex with SystemController).\n\nTest Plan:\nPASS: List OpenStack endpoints. For nfv/vim, SystemController region\n      now must have 3 endpoints, one for each interface (public,\n      internal and admin). For each interface, the endpoints must be\n      configured with same base IP as the other services (i.e.\n      Patching).\nPASS: Enable https. Wait for the endpoints to be applied. Public\n      endpoint for vim in SystemController must become https.\nPASS: During upgrade, the script must run on activate stage and\n      remove all previous endpoints for vim/nfv on SystemController,\n      then create public, internal and admin endpoints already\n      configurated.\n\nCloses-Bug: 1995951\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/866573\n\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\nChange-Id: I47acfc7009f4ef4b509d7ca976bcb7eef283c3a8\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet module tox.ini files for puppet-lint\n\nWhen running \"tox -e puppetlint\" manually, the tox.ini will\ninstall puppet-lint via gem, but does not automatically install\nthe json module upon which puppet-lint depends.\n\nThis commit adds json to the gem install command.\n\nChange-Id: Ib8b6133395bf76748a8bcac0cb7bd718a89d6d5a\nStory: 2004515\nTask: 28704\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Block host-unlock till kernel manifest completes\n\nIf the following commands are issued in quick succession,\n1. system host-kernel-modify controller-0 lowlatency\n2. system host-unlock controller-0\n\nThe puppet runtime manifests , which is executed asyncronously,\nwill not have enough time to run and will end up being run\non the next reboot leading to alarms being raised.\n\nThis feature will add reporting of kernel runtime\nmanifest status. The 'in progress' status will be persisted\nin the ihost table and used to validate host-unlock\n\nStory: 2010731\nTask: 48684\n\nTest plan:\n\nPASS - AIO-SX: DM config with kernel: lowlatency\n               Verify no kernel config alarms raised\n               and lowlatency kernel is running\n\nPASS - AIO-DX: DM config with kernel: lowlatency\n               Verify no kernel config alarms raised\n               and lowlatency kernel is running\n\nPASS - AIO-DX: Test really fast unlock\n               Verify unlock is blocked\n\nChange-Id: I5f30e6f94eae3b287b402a15d1739d61b7d20ca9\nSigned-off-by: Kyale, Eliud <Eliud.Kyale@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Nohz_full configuration hieradata needs to be updated\n\nThe grub commandline parameters contains nohz_full grub which needs\nto be updated with something different than a cpu list for kernel\nisolation when the user decides to disable it by assigning the\ndisable-nohz-full label. In this manner, the disabled string can be\nused to signal the kernel to restore this configuration to default.\n\nCloses-Bug: 1981762\n\nTest plan:\nPASS: Disable nohz_full configuration in a standard worker by enabling\n      disable-nohz-full label.\nPASS: Verify that /etc/default/grub doesn't contains nohz_full\nparameter.\nPASS: Verify that /sys/devices/system/cpu/nohz_full was restored to\n      default.\nPASS: Enable nohz_full configuration in a standard worker by removing\n      disable-nohz-full label.\nPASS: Verify that /sys/devices/system/cpu/nohz_full has the cpulist.\nPASS: Remove label and verify alarms and system overall health.\nPASS: Add label and verify alarms and system overall health.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I00b68faae2612088b8e2fe7aeb3900babe638ca0\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix openldap cert install error on upgrade\n\nDo not enter the code branch that tries to read the openldap certificate\non sysinv startup and is causing an error during 22.12 upgrade.\n\nThis is a temporary fix to allow the upgrade to run. A subsequent code\nchange to create the openldap certificate during the upgrade and then\nremove this check will be done later.\n        \nTest Plan:\n\nPASS: Install fresh iso and verify that certificate and key files are\n      created and there are no sysinv.log or puppet.log errors\nPASS: Upgrade from stx 22.06 to 22.12 and verify that sysinv process\n      does not try to read certificates from kubernetes and there are\n      no sysinv.log or puppet.log errors\n\nStory: 2009834\nTask: 45933\n\nChange-Id: Ie5201b6149f5dcec48e958fef3a4f987006b81be\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nDepends-On: https://review.opendev.org/c/starlingx/config/+/855699\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Barbican provisioning in SM in kubernetes environment\n\nSince Barbican is in charge of storing BMC passwords for MTCE now\nwe need it to run as a bare-metal service alongside with kubernetes.\nThis patch enables SM provisioning for barbican in this case.\n\nChange-Id: Id51f679738d429e78f388b6dc42e7606ef0c41ab\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove stx-monitor constants and logic\n\nStory: 2007960\nTask: 40450\n\nChange-Id: I43a1f416c50138f263cc98ec83d395d9bb3c7464\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create TLS 'system-local-ca' in openldap_ca cert mode\n\nChange the behavior in sysinv API when a certificate install is called\nusing 'openldap_ca' mode. Before, this call would recreate the secret\n'system-local-ca' using the same type (Opaque or TLS) as it had\nbefore. Now the call will recreate always as TLS, as this is required\nto deployment configurations that try to create a local issuer with\n'system-local-ca' secret. The call will also create a default issuer\nusing the secret.\n\nThis API cannot be called directly from CLI in production environment,\nand it's only called as of today during a DX subcloud upgrade by\norchestration from the SystemController already in the N+1 load to the\nsubcloud in N load.\n\nTest Plan:\nPASS: Enable manually the CLI call for mode openldap_ca in sysinv API\n      code in:\n      https://opendev.org/starlingx/config/src/branch/master/sysinv/cgts-client/cgts-client/cgtsclient/v1/certificate_shell.py#L86\n      Create a certificate + key bundle and install as openldap_ca.\n      Check if the 'system-local-ca' secret in namespace cert-manager\n      is now TLS and contains the certificate and key installed.\n      Check if the 'system-local-ca' ClusterIssuer is created and\n      available.\n\nCloses-Bug: 2029508\n\nChange-Id: Ief932778f7e2dd4e4bd703ef009ec4058b7416f0\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove tiller docker image in helm manifest\n\nPreviously the tiller image was included in the build and the helm\nmanifest loaded that image. The tiller image is no longer included in\nthe build. Without the tiller image present the helm manifest fails\nduring config_controller.\n\nThis changes the helm manifest to pull the docker image from its\nexternal home.\n\nChange-Id: If6ea726c0439e3a5e88fb7218c26b702a5f1122c\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2003491\nTask: 24768\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce VF interface type\n\nThis commit introduces a new interface type: 'VF'.\n\nA VF (virtual function) interface is a sub-interface of an existing\npci-sriov class interface.  It can have a different (less than)\nnumber of VFs as the parent interface as well as a different\nvirtual function driver.  In addition, the VF interface can be\nassigned to a different data network as the parent SR-IOV interface.\n\nThe purpose of the VF interface is to enable a user to split the\nvirtual functions of a parent device between the parent and child\nso that each can be assigned a different VF driver. This may be\nbeneficial to a user that has a mix of (DPDK) accelerated\ncontainers and containers that just depend on a kernel\nnetdevice.\n\nAn example of configuring a VF interface from the client\nis as follows:\n\nsystem host-if-add -c pci-sriov <host> \\\n  <ifname> vf <parent sriov interface> \\\n  -N <numvfs> --vf-driver <vfio|netdevice>\n\nStory: 2006842\nTask: 37422\nChange-Id: I1c9712f511c395c532d9b36721d94e22760210af\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use V1 API for webhooks\n\nThe application framework is using AdmissionregistrationV1beta1Api\nto interact with kubernetes webhooks. V1beta1 is removed as of\nversion 1.22 of kubernetes, which results in the kubernetes client\nreturning nothing. This fails the pre-backup step of the portieris\napplication. This commit changes the application framework code\nto use AdmissionregistrationV1Api instead. The only code that\ninteracts with webhooks in our codebase is the portieris\nlifecycle. This means this code change should have no impact\nelsewhere.\n\nTest Cases:\n\nPASS: Backup and restore test with portieris applied.\n      simple sanity of portieris after restore\n\nStory: 2010394\nTask: 47745\n\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\nChange-Id: Ia308155ed6e050e1e27f0e6d129ffb68e60a73ba\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix tox pep8 errors of type E231 in sysinv\n\nRemove the skip clause for E231.\nFix the offending errors which are only formatting changes.\nE231: \"missing whitespace after \u2018,\u2019, \u2018;\u2019, or \u2018:\u2019\".\n\nStory: 2002888\nTask: 23161\n\nChange-Id: I533bc4ac72d717b960ed20fbfffafb77c65f91f1\nSigned-off-by: Mathieu Robinson <mathieu.robinson@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Turn off the legacy pip resolver for sysinv\n\nThe requirements that had conflicts have been updated.\n\nThe local upper-constraints is no longer being used by tox\nsince two constraints files with different values for the same\nrequirements are not supported.\n\nAdditional pylint error codes are being suppressed as\npylint is now running in python3 and has some newer checks.\n\nCleans up some linter warnings related to yaml.\n\nChange-Id: I9b5158d59b0791e49c3037a8e823b67fb30c8292\nRelated-Bug: #1907678\nSigned-off-by: albailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Firewall: allow IGMP queries from 0.0.0.0\n\nIGMP queries from address 0.0.0.0 on the cluster-host and mgmt networks\nare being blocked and it causes the heartbeat traffic to stop and the\ncontroller-0 to reboot.\nIGMP queries with source address 0.0.0.0 are sent when the switch\nbetween the controllers has IGMP snooping enabled on a VLAN without an\nIP address configured.\n\nTest Plan:\n    PASS: check if IGMP rules for all networks are correct\n    PASS: check if the IGMP queries from 0.0.0.0 are allowed and IGMP\n          reports are replied\n    PASS: check if heartbeat messages are exchanged between the\n          controllers\n\nCloses-Bug: 2039881\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: Id930edf692dbd59fecef4647904abfc58e881669\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing Pep8 errors of type F841\n\nChange-Id: Ie03201b9d73fc201d1e2de8a2b0585897381273a\nStory: 2002888\nTask: 23097\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Ceph External Backend issues\n\n 1. Fixes the traceback raised by sysinv conductor when reprovisioning\n    external ceph backend using same ceph.conf naming as old backend\n 2. Allows ceph config file to be overwritten in the\n    /opt/platform/config/version/ceph-config directory\n 3. In the original design, a new directory, /opt/extension/ceph,\n    would be used to store external ceph config files. This directory\n    is not actually needed. This commit removes the code in drbd.pp that\n    creates this directory.\n 4. In storage_ceph_external.py, use uuid instead of isystem_uuid.\n\nStory: 2002820\nTask: 22737\n\nChange-Id: Ic9bbfd5859b2ce8a02b6940965db16b78ce854ae\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "sysinv: skip slave network configuration for dpdk interfaces\n\nThe only data interfaces that require a puppet network configuration are\nthose interfaces that require cooperation between the DPDK driver and\nthe Linux driver.  For now that list includes only the Mellanox devices.\nThe Linux device must be configured with the correct MTU value otherwise\nthe the DPDK driver cannot send/receive any packets above the default\nMTU value (i.e., 1500 bytes).\n\nThe network configuration generated for those devices must not include\nthe \"slave\" attributes since the master device does not actually exist\nin the Linux domain.  The master device exists only in the vswitch\ndomain.  Since slave devices are ignored by apply_network_config.sh they\nare not brought up as part of the node initialization and therefore\ntheir MTU value is not set.\n\nBy excluding the slave attributes from the network configuration the\napply_network_config.sh script will recognize these interfaces as\nregular Ethernet interfaces and will bring them up/down as needed.  This\nwill ensure that the MTU value is set approprietly.\n\nCloses-Bug: 1803714\n\nChange-Id: I1dcf659c7c8828d0aa4bf2ebd0af96dc71bf14a0\nSigned-off-by: Allain Legacy <allain.legacy@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Boost sm process priority in VBox environment\n\nThere is an instance that sm claimed its main thread ran sluggish\nas some critical timer run behind the scheuled timing.\nThe issue could prevent the sm from scheduling services.\nAs the result, the controller could fail to enable.\n\nThe issue was found only on vbox labs on AIO-SX, the fix is to boost\nsm process priority to nice value -10 from current -2.\n\nCloses-Bug: 1816764\nDepends-On: https://review.openstack.org/638664\nChange-Id: Iafa17b1c47d65cc7394552ea1c8e7a78398e4869\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n(cherry picked from commit a6934ac9d27e0357d0025018077441d989679409)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable configurable vswitch memory\n\nCurrently, a DPDK enabled vswitch makes use of a fixed 1G hugepage to\nenable an optimized datapath.\n\nIn the case of OVS-DPDK, this can cause an issue when changing the\nMTU of one or more interfaces, as a separate mempool is allocated\nfor each size.  If the minimal mempool size(s) cannot fit into the\n1G page, DPDK memory initialization will fail.\n\nThis commit allows an operator to configure the amount of hugepage\nmemory allocated to each socket on a host, which can enable\njumboframe support for OVS-DPDK.\n\nThe system memory command has been modified to accept vswitch\nhugepage configuration via the function flag. ie:\n\nsystem host-memory-modify -f vswitch -1G 4 <worker_name> <node>\n\nStory: 2004472\nTask: 28162\nChange-Id: Ie58d1b8317b4eb3c498524db6bd53ffff3bf1a39\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Sysinv partitions cleanup\n\n- remove udev flushes from parted & sgdisk if not needed\n- wait for udev to index a newly created partition\n- make sure that calls to wipefs are protected with wait\n- on parted mktable wait for any partitions to be deleted from udev &\n  kernel\n\nChange-Id: Ia5b3764f70cc265ffc9d76841ee71f4eaae722f3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for python-kubernetes 12\n\nThis work is part of debian intergration effort.\nOn CentOS 7 python-kubernetes version 8 is used.\nOn Debian Bullseye python-kubernetes version 12 is used.\n\nThe API was slightly changed in version 12.\nKubernetes configuration is not correctly handled, sysinv can't connect\nto kubernetes endpoints. This prevents the bootstrap from finishing on\nDebian.\n\nDetermine the module version and handle Kubernetes configuration\nbased on version.\n\nCentOS 7 tests\nPASS: Build & install\nPASS: Bootstrap\nPASS: Unlocked enabled available\nPASS: Apps installed\nPASS: Compared sysinv log with 1st Dec load, nothing unsusual\n\nDebian Bullseye tests\nPASS: Build & install\nPASS: Bootstrap goes past the breaking point\n\nStory: 2009101\nTask: 44335\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Ia75b24f3396ed820e92ec95ff3b400e97233a1c4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Specify encoding of the file for yaml load\n\nyaml.load might not properly detect the encoding.\n\nThis error was observed during bootstrap when the first app\n(nginx-ingress) had the values.yaml file loaded as yaml.\nThe encoding was detected as being ascii when it was not.\nA UnicodeDecodeError is thrown: 'ascii' codec can't decode\nbyte 0xe2 in position.\n\nThe fix is to specifically tell yaml the encoding of the file.\nAs 'encoding' parameter exists only for open in Python3, but not\nPython2, switch to io.open to be backward compatible.\nAs a precaution, did the same changed to ruamel yaml.\n\nStory: 2006796\nTask: 42798\nSigned-off-by: Dan Voiculeasa <dan.voiculeasa@windriver.com>\nChange-Id: Ib101c95392cb453121baecadebb4f75b81216477\n(cherry picked from commit 156cc123e43e929fff23b047c4960134ddd0831a)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Review of PTP data model\n\nSame PTP parameter (key:value) can be shared among different instances\nor PTP interfaces. Therefore, instead of listing all the UUIDs of the\nowners inside the original 'foreign_uuid' column of the table, a new\n\"bridge\" table is created to manage the many-to-many (N:N) relation-\nship between parameter(s) and owner(s). This is also recommended for\nbetter query results.\nAnother improvement related to PTP parameters management is the intro-\nduction of a parent (\"abstract\") table to serve as the generic owner of\na PTP parameter, according to the diagram below. Given this hierarchy of\ntables it is not necessary to implement a logic to decide upon the\nactual owner, leaving such resolution for SQLAlchemy to manage.\nFinally, there are explicit one-to-many (1:N) relationships between:\n- a PTP instance and the host(s) that use that PTP configuration (then\n  removing the host ID column from PtpInstances);\n- a PTP interface and the interface(s) that are configured to run PTP\n  (then removing the interface ID column from PtpInterfaces).\n\n            +------------------------+\n            | PtpParameterOwnerships | (\"bridge\" table)\n            +------------------------+\n                        |\n                        |\n+---------------+       |       +--------------------+\n|               |N      |      N|                    |\n| PtpParameters |---------------| PtpParameterOwners |\n|               |               |                    |\n+---------------+               +--------------------+\n                                           ^\n                                          /_\\\n                                           |\n                                  +--------+--------+\n                                  |                 |\n                        +--------------+       +---------------+\n                        |              |       |               |\n                        | PtpInstances |<------| PtpInterfaces |\n                        |              |       |               |\n                        +--------------+       +---------------+\n                              1|                      1|\n                               |                       |\n                              N|                      N|\n                           +-------+             +------------+\n                           | Hosts |             | Interfaces |\n                           +-------+             +------------+\n\nTest Plan:\n\nTODO: New unit tests to cover the associations between parameter and\n      owner, between host and instances, and between interfaces and PTP\n      interfaces.\n\nRegression:\n\nPASS: Other unit tests for PTP tables still running (creation of\n      instances, parameters, listing, get operations, etc.)\nPASS: Fresh install and bootstrap with the new tables\n\nStory: 2009248\nTask: 44010\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I27ed713084544ca8fab948f8b5dc8163ebaa8ba6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Ceph pools management chart\n\n- new helm chart to set replication and min replication for\neach Ceph pool:\n  -> new helm chart name: ceph-pools-audit\n  -> the ceph-pools-audit chart creates a CronJob that runs\n     every 5 minutes; the CronJob checks the replication for\n     each existing pool and sets it right if needed, to reflect\n     the attributes of the Ceph backends\n  -> the CronJob is needed for: charts that may not manage pool\n     configuration, pools created dynamically by services that\n     may not have the current pool configuration uploaded\n     (ex: swift), updating replication without reinstalling the\n     charts that created the pools\n  -> the ceph-pools-audit chart is installed after the\n     rbd-provisioner in the application-apply\n- new overrides for the ceph-pools-audit chart that provide\nthe replication values from the attributes of the present\nCeph backends\n- enable rados-gw by default when a Ceph backend is enabled\n\nChange-Id: I1565268bac3ddc77e8368d2d6ab8600b3e4ed893\nStory: 2004520\nTask: 29034\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unused container images as last step in K8s upgrade complete\n\nIn order to reduce the number of container images that we're storing,\nand to reduce the amount of data that needs to be preserved for both\nbackup/restore and for platform upgrades, we want to add a step at the\nend of the \"system kube-upgrade-complete\" command to delete container\nimages that are associated with older versions of K8s and are no\nlonger needed or used by target version.\n\nThis includes two categories:\n1. Images specified by '/usr/local/kubernetes/<version>/stage1/usr \\\n   /bin/kubeadm config images list --kubernetes-version <version>'.\n2. Images specified in Ansible playbooks under playbooks/roles \\\n   /common/load-images-information/vars/<version>/system-images.yml\n\nTest Plan:\nPASS: Perform platform upgrade and then k8s upgrade.\nPASS: Perform k8s upgrade, after the step system kube-upgrade-complete\n      verified that the images were deleted by randomly selecting the\n      image and passing it to the command\n      system registry-image-delete <image:tag> and confirming that\n      output of system registry-image-tags <image_name> for respective\n      image is empty\nPASS: Package builds successfully\n\nStory: 2010565\nTask: 48366\n\nChange-Id: Ifcf37fd27bb273c9d5f7bb09e6a2805b43597fe5\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: Update puppet class scoping for network.pp\n\nThis change-set updates the puppet references made in\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/832124.\n\nChanges are required to eliminate puppet 5 warnings under Debian.\n\nTest Plan:\n\nCentOS\nPass: Build package/image\nPass: Install controller, unlocked/enabled/available\n\nStory: 2009101\nTask: 44782\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/832124\nSigned-off-by: Fabricio Henrique Ramos <fabriciohenrique.ramos@windriver.com>\nChange-Id: Ifa013d86c4ab799c4a7aafbdc77bad344a93f26c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support authenticated registries\n\nThis commit updates to support pulling application images from\naws ecr at application-apply time.\n\nIn commit https://review.opendev.org/686057, all system images\nare pushed to local registry at Ansible bootstrap time. This\ncommit also updates armada container to use armada image from\nlocal registry.\n\nAllow to add \"elastic-registry\" in service parameter to be able\nto deploy stx-monitor from private registries.\n\nTests conducted:\n - deploy platform-app-integ from public/aws ecr registry\n - deploy stx-monitor from public/aws ecr registry\n - tiller image upgrade/downgrade test\n\nChange-Id: I7a597a2bfdacf969462f166e8f416e570f243076\nStory: 2006274\nTask: 36874\nDepends-On: https://review.opendev.org/686057\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable PTP support for Link Aggregation\n\nThe Linux bonding driver aggregate multiple NICs into a single bonded\ninterface of two or more NIC slaves. This bonded interface has no\nPTP hardware clock associated with it and cannot be used by the\nLinuxPTP for clock synchronization. Need to derive all the LAG slaves\nfrom the bonded interface and feed them to the LinuxPTP daemon instead\nof the bonded interface. VLAN interface names should be cleared from\nVLAN numbers as well in order for PTP to work.\n\nChange-Id: I022e2d74e6459825129107881dd585bb2a13f953\nCloses-bug: 1828017\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix oam VLAN interface MTU\n\nWhen Debian's ifup tool runs for a IPv6 VLAN interface it is not setting\nthe MTU found in the configuration file. Instead it sets it to the\nunderlying interface's MTU. If that's a jumbo MTU value, it can cause\npacket drops during file transfer and installation on controller-1\nto fail.\n\nThis fix uses post-up configuration to set the correct MTU value to\nmimic CentOS's ifup tool behavior.\n\nTest Plan:\n    PASS: check that the VLAN's MTU is correct\n    PASS: installation on standard lab\n\nCloses-Bug: 1991582\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: Id898a0eb132abe6838ddc81ff0adb4401c33d731\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable enumerate for AD domains\n\nEnumeration for a domain has advantages, such as the use of command\n\"getent passwd\" for quick list and filtering of AD domain users\ndiscovered with SSSD. For testing purposes enabling enumerate is very\nuseful. There are other benefits as well, but for AD domains with\nlarge number of users, it is documented that enumerate can have a\nnegative performance impact.\nTo avoid performance degradation for SSSD service when discovering AD\ndomain users and groups, in a production environment, this commit is\ndisabling enumerate for AD domains. Disabling enumerate means that\nthe SSSD \"enumerate\" parameter gets the default value of \"False\".\n\nTests performed:\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd ldap domain service parameters are added and applied at\nruntime in \"/etc/sssd/sssd.conf\".\nPASS: sssd service is successfully started.\nPASS: Verify ldap users have been successfully discovered by checking\nan individual user with \"getent passwd <user-name>\", as listing all\nusers with \"getent passwd\" will not be available.\n\nStory: 2009834\nTask: 46782\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ifedbbd93e82cf85304700fe0456bf050335c38b2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix getting kubelet versions during k8s api server down\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Hugepage percent allocation.\n\nUsers have the option to allocate hugepage memory by # of\npages or percent of memory available.\nPercent allocation is allocated on boot.\n\nStory: 2006755\nTask: 37245\n\nCLI:\nAllocating by percentage:\nsystem host-memory-modify -2M 50% controller-0 0\nAllocating by # of pages\nsystem host-memory-modify -2M 50 controller-0 0\n\nTestcases:\nAllocating hugepage memory by percentage\nAllocating hugepage memory by number of pages\nCorrect percentage is allocated if available memory\n    changes\n100% of hugepage memory allocates correctly\nCheck error is raised if user attempts to allocate\n    percentage not in range of 0%-100%\nConfirm that Horizon GUI can set as both percent and\n    integer\nConfirm that hugepage changes are made before unlock\n    and after unlock\n\nChange-Id: I6f1165c22e409e261c0b065f7d6cf5407647b56e\nSigned-off-by: Andrew Troake <andrew.troake@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleaning up panko from bare metal\n\nAll of the service parameters are removed from sysinv since\nthey are now driven through helm charts.\n\nThere is no panko DB or config on bare metal, so there is\nno need for upgrade, backup and restore or region config\nto have panko related code.\n\nVerified that the panko service parameters are not present.\n\nThe sysinv DB schema will be cleaned up in a later commit.\n\nStory: 2004764\nTask: 30519\nChange-Id: I6e6e0ab41083c6825f73bd287d3babd678e2ef64\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow recovery from failures during kubernetes upgrade\n\nAllow the user to recover from failures at any stage of a\nkubernetes upgrade. This includes the following changes:\n- Add new failure states to denote the action that has failed.\n- Add failure handling code to allow recovery from the new\n  failure states.\n- Add a new CLI and state for downloading images to allow\n  recovery if this step fails.\n- Add a function that is called each time the sysinv conductor\n  starts and fails any kubernetes upgrade operation that is in\n  a transitory state and will not complete.\n\nChange-Id: Ib48f84a66dc9260c63fdb427c0b8fed877370474\nStory: 2006781\nTask: 37582\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add firewall filtering rules for platform networks in non-DC setups.\n\nThis change adds firewall rules for non-DC installations that will\nlimit the traffic allowed in the management, cluster-host, pxeboot,\nand storage interfaces to the local platform network, any outside\ntraffic will not be accepted. The filtering only looks at the source\nIP address to allow or deny ingress into the node.\n\nFor IPv4, the DHCP's UDP port 67 is allowed without source address\nfiltering because the DHCP-Offer message sent by the client comes\nwith the source address \"0.0.0.0\".\n\nFor IPv6, the local link network address (fe80::/64) is also added to\nthe source nets to allow the cases where the initial communication,\ninside the local network, starts with the local link source address\n(e. g. DHCPv6-Solicit message).\n\nAlso, for IPv6, the cluster-pod network is also added to the\ncluster-host firewall, this is done because, unlike IPv4 setups, the\npod traffic is not tunneled, running over the cluster-host interface.\n\nDC scenarios will be part of a future task.\n\nIn all test scenarios below the correct presence of iptables/ip6tables\nwas verified, together with traffic tests using netcat, when directly\nfrom the host network.\n\nTest Plan\n[PASS] Install Standard (controller+worker+storage) in IPv6\n[PASS] Install Standard (controller+worker+storage) in IPv4\n[PASS] Install AIO-DX in IPv4\n[PASS] Install AIO-DX in IPv6\n[PASS] Controller Lock/Unlock/Reinstall\n[PASS] Worker Lock/Unlock/Reinstall\n[PASS] Storage Lock/Unlock/Reinstall\n[PASS] Change HTTP port during runtime\n[PASS] IPv4 pod-to-pod communication between nodes\n[PASS] IPv6 pod-to-pod communication between nodes\n[PASS] Validate WRA installation\n[PASS] Validate WRO installation\n\nStory: 2010591\nTask: 48088\n\nChange-Id: I453c7cd8fcb9e63eb9a5c9d321ca6b504ea21e0d\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update hostname for cluster-host\"",
        "issue_summary": ""
    },
    {
        "commit_message": "For stability bump size of rabbitmq PV to 1Gi\n\nThe rabbitmq chart requests a 256Mi PV for operational storage. With\nCentOS 7.5 and 7.6 kernels, a jbd2 kernel thread hang is observed after\na long soak period. Once this occurs, a host reboot is required to\nrecover access to the PV.\n\nWe have been able to reliably recreate this using the stock upstream\nCentOS 7.6 kernel and the latest Ceph Jewel LTS (10.2.11) version using\nfsstress. This is currently pointing to a race condition in the\nfilesystem code.\n\nWith a reliable test available for this, other scenarios to characterize\nthis have been performed including using different volume sizes and\nusing different ext4 filesystem formatting options.\n\nWe've been unable to cause the hang using a 1Gi PV over an extended soak\nperiod so we'll update the stx-openstack manifest to request a 1Gi PV\nuntil the root cause and fix has been addressed in the kernel.\n\nChange-Id: Ia0e5b7ffb049c6e3cedfb4a6d3afda597eedb18a\nRelated-Bug: #1814595\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Fix DRBD task affinity to platform cores\"\n\nThis reverts commit b2dd5fb464590e6253070cb604d62313c90d1791.\n\nThis solution will be replaced with a better solution that updates the cpu-mask formatting in the puppet-drbd template.\n\nConflicts:\n\tsysinv/sysinv/sysinv/sysinv/tests/common/test_utils.py\n\nChange-Id: I4b1b887a6928488ce12bd2dbe7e6c2fa58fb6467\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update kubernetes version state on AIO-SX as available if version newer\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Run kubeadm command with specific configuration file\n\nsysinv uses the kubeadm command to generate kubeadm join command.\nHowever, it is not passing the --kubeconfig parameter to this command,\nso the command will search for the kubeconfig file. Normally it finds\nthis file in /etc/kubernetes/admin.conf, but if a user accidentally\n(or intentionally) creates a config file at /root/.kube/config,\nthis file can take precedence and cause the kubeadm command to fail.\n\nThis commit updated the command with /etc/kubernetes/admin.conf as its\nconfiguration file explicitly.\n\nChange-Id: I4fb6d6325ca2cd8c7ab28c0acb0efdf6b1fea45b\nCloses-Bug: 1882678\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Clean up interface network assignment\n\nThe networktype field is no longer used in the interface table\nsince an interface can have multiple networks associated with it.\nThis commit is to remove the networktype field and use the\nnetwork association instead.\n\nThe host interface commands used to allow associating an initial\nnetwork to the interface. This has been changed such that network\nassociation can only be done with the interface-network commands.\n\nThe address assignment of an interface is performed when a network\nis assigned to an interface, not when the interface is provisioned.\n\nData interface no longer requires at least one datanetwork\nassociated with it.\n\nThe REST API doc is also updated to reflect the changes.\n\nStory: 2004273\nTask: 30947\nTask: 33504\n\nChange-Id: I952008408826f4c630246477d71687628357622c\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set the number of nova schedulers to 1\n\nWhen applying the stx-openstack manifest, the default\nnova scheduler processes was equal to number of cores.\n\nNow it is set to 1.\n\nThis reduces overall memory footprint and the time\nto apply the stx-openstack manifest.  This reduces\nout of memory issues on systems that have a very large\nnumber of cores.\n\nChange-Id: I7f9f41f13d5ae18da2c58d9968a7ee67cbe5a05e\nFixes-Bug: 1826308\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update Ceilometer Helm conf overrides\n\nThis update is to configure ceilometer messaging_urls in sysinv\noverrides instead of armada manifest to allow us to set the\nrandomly-generated password for accessing messaging queues.\n\nChange-Id: I08c7d5292611ecc7876b742cc5f537273272ee91\nStory: 2003909\nTask: 27083\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update deprecated K8S API references of v1beta2 to v1beta3\n\nPackage v1beta3 defines the v1beta3 version of the kubeadm\nconfiguration file format.\nUpdate the K8S API reference of kubeadm.k8s.io/v1beta2 to\nkubeadm.k8s.io/v1beta3. This API is used when generating\nkubernetes join command. The v1beta2 is deprecated and\nsupport is removed as of K8S v1.27.\n\nTest Plan:\nPASS: k8s upgrade from 1.22.5 to next all available versions.\n\nStory: 2010878\nTask: 48827\n\nChange-Id: I14130d66a297f5cfcacfead7c32314ee2f44c7a0\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Force v1 protocol in monitors during upgrade\n\nBefore all monitors are upgraded, it is needed to make sure they use v1\nprotocol, otherwise they will use v2 protocol and be unable to join the\nceph cluster.\n\nTesting performed:\n- Upgrade of 2+2+2\n- Upgrade of AIO-DX\n- Upgrade of AIO-SX\n- Fresh install of AIO-SX\n- Fresh install of AIO-DX\n- Fresh install of 2+2\n\nStory: 2009074\nTask: 43956\n\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\nChange-Id: I25d26c40cebb7d027b75e58d05bbb763ca97bb21\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add semantic checks for k8s upgrade\n\nSemantic checks added:\n  - verify whether all installed applications are compatible with\n    the new k8s version before starting k8s upgrade\n  - prevent host-unlock if the host kubelet upgrade is in progress\n    (allow --force to do force unlock).\n  - prevent application-apply/update if the app is incompatible with\n    the current k8s version.\n\nFor the application that has k8s version restriction, the following\nkeys need to be optionally specified in its metadata file:\nie...\nsupported_k8s_version:\n  minimum: v1.16.1\n  maximum: v1.16.3\n\nThe k8s version related information in metadata file will be used for\ncompatibility check. The metadata file is updated to copy over to the\ndrbd fs during application-upload.\n\nTests conducted:\n  - \"system kube-upgrade-start\" rejected if any installed app's k8s\n    version check failed\n  - host-unlock rejected if the host is in upgrading-kubelet status\n  - was able to forcibly unlock host even if it's upgrading kubelet\n  - application-apply/update testing\n\nChange-Id: I1ef852cccddf7ae39eca4b4e25b80a7f4347d8a4\nStory: 2006781\nTask: 38761\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve placement of pci-irq-affinity-agent svc\n\nOn commit 4ed96fc424fa2eff58c322ff26c1daa0e8ddc2ff we started verifying\nthe version of stx-openstack to verify if we should enable the\npci-irq-affinity-agent as a service on the platform or, if the app\ncarried the containerized verion, disable it. This change removes that\nversion check in favor of checking on the app itself if the chart is\ncontained, thus avoiding errors on the downstream versions of\nstx-openstack due to differences on the version build number.\n\nTEST PLAN\nPASS Applied old stx-openstack without pci-irq-affinity-agent chart,\n     service on the platform was enabled\nPASS Applied new stx-openstack with the pci-irq-affinity-agent chart,\n     service was disabled on platform\nPASS Disabled the pci-irq-affinity-agent chart using `system\n     helm-chart-attribute-modify --enable false stx-openstack\n     pci-irq-affinity-agent openstack` before first apply and check if\n     service is enabled in platform\nPASS Removed app, re-enable pci-irq-affinity-agent chart using `system\n     helm-chart-attribute-modify --enable true stx-openstack\n     pci-irq-affinity-agent openstack`, re-applied application and check\n     if service is disabled in platform\nFAIL (expected) Disabled the pci-irq-affinity-agent chart using `system\n     helm-chart-attribute-modify --enable false stx-openstack\n     pci-irq-affinity-agent openstack` after apply and check if service\n     is enabled in the platform. Probably due to [1]. Looks like a\n     desirable feature, but we are meaning to remove the service from\n     the platform on stx.7\n\n[1] https://opendev.org/starlingx/openstack-armada-app/src/branch/master/python-k8sapp-openstack/k8sapp_openstack/k8sapp_openstack/lifecycle/lifecycle_openstack.py#L123\n\nStory: 2009299\nTask: 43653\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I7f5263d8d3a66fc58a8c6d9e9eee6834e2582430\n",
        "issue_summary": ""
    },
    {
        "commit_message": "For OAM firewall support old host-endpoint label notetype\n\nIt was observed that during upgrade that the new OAM firewall,\ngenerated by controller-1 already in the new version, does not\ncontain the host endpoint label \"notetype\", used in the previous\nversions. This label was renamed \"nodetype\" as it only contains the\nvalues of 'controller' or 'worker'.\n\nThis changes adds \"notetype\" as a supported label in the OAM Global\nNetwork Policy, to allow firewall application during upgrade in the\ncontroller-0, when still running the old version. The other network\ntypes did not had firewall attached to them in previous versions.\n\nTest Plan\n[PASS] Execute upgrade on an AIO-DX system and validate that after the\n        unlock of controller-1 the OAM access is operational in\n        controller-0 and controller-1\n[PASS] Execute boostrap install for AIO-DX system and validate that\n        that the OAM access is operational in both controllers\n\nCloses-Bug: 2038306\n\nChange-Id: Ib6bc95db9a2ec22ec63f693bd4f85dad89023a2b\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow parallel application upgrade on upgrade-activate\n\nAs part of an effort to improve the overall time to upgrade\nan AIO-SX, this commit focus to improve the upgrade-activate\nstep where upgrade scripts are executed.\n\nThe commit changes the application upgrade approach to\nupgrade all upgradable applications in parallel and then\nmove forward; the applications are verified later during\nthe activate step by a new script that will wait for all\nof them to complete.\n\nScripts 64 (cert-manager) and 73 (portieris) were not changed\nsince they have post-apply actions, and it would not be a good\nidea to split the logic to upgrade these applications into\nmultiple scripts, so in the upgrade paths where these scripts\nare executed and applications are uploaded/applied, they will\nfollow the previous approach to upgrade -> apply -> wait.\n\nTest Plan\nPASS: run upgrade-activate on AIO-SX successfully\n\nRegression\nPASS: run upgrade-activate on AIO-DX successfully\n\nStory: 2010798\nTask: 48251\n\nChange-Id: I8156e1cd123b0f5c6b6bf8657631e9b4f85a2c89\nSigned-off-by: Heitor Matsui <heitorvieira.matsui@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Glance periodic cleanup\n\nAdd glance cleaner periodic script as a cron task\nand create CLI wrapper for it.\n\nChange-Id: I40a70bc5159592ed346be83c17b6bd93c1d881c2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "removed key entry from hieradata\n\nhttps://review.opendev.org/c/starlingx/config/+/804526\nintroduced access to both key and key=value in hieradata.\n\nKey is no longer necessary in the hieradata and the new\nformat key=value is now the default format.\n\nPartial-bug: 1940042\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/804528\nChange-Id: I8a42886a215337860477e9f942918e684e5b0660\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add chart to deploy fm rest api\n\nThis commit adds the required files to deploy\nfm rest api service with helm.\n\nStory: 2004008\nTask: 26955\nDepends-On: https://review.opendev.org/634540/\nDepends-On: https://review.opendev.org/656388/\nDepends-On: https://review.opendev.org/656655/\nChange-Id: I566f2191914a49403c1947f3b767fae7807c43d0\nCo-authored-by: Sun Austin <austin.sun@intel.com>\nSigned-off-by: Mario Alfredo Carrillo Arevalo <mario.alfredo.c.arevalo@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial firewall config causes temporary packet loss\n\nDue to ordering of firewall rule/policy configuration, all incoming\npackets may be dropped during firewall configuration, until its\ncompletion. This creates a race condition where this packet loss\ncould result in manifest application failure, causing the initial\nunlock to fail.\n\nIn order to avoid this packet loss, this update adds ordering\ndependencies to ensure the default policies are applied only after\nthe common platform firewall rules.\n\nChange-Id: I196911a197e6efb58e41d742a57216d0175cd4be\nCloses-Bug: 1814619\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "nova overrides: set long rpc timeout and cpu_mode\n\nlong_rpc_timeout: timeout for long running live migration tasks\n  Setting to 400s.  This is reduced from the nova default of 1800s to\n  give a more timely response and is based on an old custom patch to\n  stx-nova where we allowed pre_live_migration to take 300s (if block\n  migration) + 6s * number of vifs.\nlibvirt/cpu_mode: set to host-model so guest can closely match host\n\nStory: 2003909\nTask: 30059\nChange-Id: Iab26aa7143697e21678eecfb3f3e161a6e0a786c\nSigned-off-by: Gerry Kopec <Gerry.Kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP SyncE] Generate ts2phc hieradata\n\nThis commit adds support for generating ts2phc hieradata from the\nptpinstance database tables. This is an extension of the work done to\nsupport ptp4l and phc2sys per-instance configuration.\n\nThe main changes are to allow different default parameters per instance\ntype and to support user defined command line options, as ts2phc\nrequires the \"-s\" parameter set according to the type of PPS source\nbeing used.\n\nThe commands line options are to be provided all at once using the key\n\"cmdline_opts\"\n\nie.\nsystem ptp-parameter-add cmdline_opts \"-s nmea\" ptp-instance\n<instance_uuid>\n\nThe command line options will be templated into the env file by puppet\nand located at /etc/sysconfig/ptpinstance/\n\nTest Plan:\nRegression:\n\nPASS: Installed and tested on hardware lab. Code is benign until\nmulti-instance ptp is enabled in puppet manifest\n\nStory: 2009130\nTask: 44130\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I72a627ced661ee7b3db77fa7babf091047c0e64a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Ceph uprev v13.2.2 Mimic\"",
        "issue_summary": ""
    },
    {
        "commit_message": "puppet-cinder: Fix cinder calling nova over public ip\n\nUsing public ip leads to SSL certificate failures on HTTPS enabled\ndeployments.\n\nCinder stopped using two cinder.conf options, nova_catalog_info and\nnova_catalog_admin_info.\nThe two options are replaced by [nova]/interface. Upstream puppet is\nstill using the two options although cinder seems to have stopped.\n\nChange-Id: I1c5b11d26d90bfe36045dacc4335997a1c5141b6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use platform::network::routes::runtime to update routes\n\nUse the new route update runtime puppet class to make route updates for\na specific host interface.\n\nThis class has been introduced to only perform the minimum amount of\nwork specific to route manipulation.\n\nUpdate the route, address, and sriov resource classes to match up with\nthe network.pp manifest restructuring done to introduce the class.\n\nChange-Id: I56943f382b5ebb5ae52865aad3b05c1720b6d794\nDepends-On: Ieba501a6bd86164599eff97b9fe73d847740df68\nStory: 2007101\nTask: 38153\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix mtce.pp to handle missing /etc/rmonfiles.d directory\n\nhttps://review.openstack.org/#/c/628687/  stopped packaging the\nquery_ntp_servers.sh script. However, since there were no other\nfiles being packaged into that directory the spec file choose\nnot to create an empty directory.\n\nWhen config controller called the mtce.pp manifest to install\ndynamic files into /etc/rmonfiles.d it could not. So it failed.\n\nThis update adds a directory check block to the mtce.pp file\nto create the directoy if its not present.\n\nTesting: Install AIO SX in SM1\n\nChange-Id: Ib2dfadb261be6f9ebbaa7213eb6669b25158c779\nCloses-Bug: 1811693\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add rbd-provisioner to common StarlingX charts\n\nAdd the custom StarlingX rbd-provisioner chart to the common custom\nchart area of the stx-config repo. Add the chart to the stx-openstack\napplication RPM.\n\nThis chart is based on the content of the ceph rbd storage code\n(kubernetes-incubator/external-storage):\n - c463bd18 -> kubernetes-1.12.0-beta.1\n\nChange-Id: Ib5fe40ed82bf5ffdd2eea4ebc1cd534e1b5ceacd\nStory: 2004005\nTask: 27802\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for galera based mariadb replication\n\nBuilding on top of the previous commit which added the helm chart\nfor the galera arbitrator, this does essentially three things:\n\n1) Add the galera arbitrator (aka \"garbd\") helm chart to the\nstx-openstack application manifests as part of the mariadb\nchart group.\n\n2) Modify the mariadb system overrides to specify a number of\nreplicas equal to the number of controller nodes.\n\n3) Modify sysinv to remove the garbd helm chart from the mariadb\nchart group if there is only one controller node (for the AIO-SX\nuse-case).\n\nThe rationale for this is that galera requires three DB nodes to\nallow for a quorum if a Kubernetes node goes down.  The mariadb\nreplicas use StatefulSets and are therefore pinned to specific\nKubernetes nodes which is problematic for the third DB node--if\nits host node goes down it won't be moved to the remaining\nKubernetes node. By running a galera arbitrator as the third DB\nnode, we avoid this problem (because the arbitrator is stateless\nand can be restarted on the remaining Kubernetes node).\n\nThe third item was a bit tricky and required testing a few different\napproaches.  Just setting the chart manifests to \"disabled\" should\nhave worked, but Armada got stuck waiting for resources that didn't\nexist.  Newer Armada supports explicitly setting an empty list of\nresources to wait for, but that would require an Armada upgrade and\nwould still require a meta-override to specify the wait parameters.\nUltimately the path chosen was to add the ability for each helm\nclass in sysinv to specify meta-overrides as well as regular\nvalues overrides.  This allows them to change non-values portions\nof the \"chart\" section of the manifest, as well as the \"chartgroup\"\nsection or even the main \"manifest\" section.\n\nChange-Id: I1fe66985a4af18d624aa54d45e91db7c121333f5\nStory: 2004712\nTask: 28743\nTask: 29055\nTask: 29056\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add floating ip for ironic network\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Finish kubernetes networking upgrade support\n\nThe commit completes the RPC kube_upgrade_networking\nin sysinv-conductor to run ansible playbook\nupgrade-k8s-networking.yml to upgrade networking pods\nand also updates the networking upgrade function called\nas part of sysinv-conductor startup to provide a current\nkubernetes version when running the upgrade playbook.\n\nThe second control plane upgrade can only be performed\nafter the networking upgrade is done, fix the semantic\ncheck in sysinv api.\n\nChange-Id: I8dcf5a2baedfaefb0a7ca037eb47bf7cacd686f8\nStory: 2006781\nTask: 37584\nDepends-On: https://review.opendev.org/#/c/705310/\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"configure kubernetes to use containerd as CRI\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add check to secret data for k8s rootca update\n\nThis change adds a checking to the secret got from k8s python client\nthat ensure content expected on secret is present as expected.\nAlongside the Secret object returned from the client we now check\nits secret.data preventing our method from allowing an empty secret,\nor a secret missing important information, being used and then\nfailing forward during the execution of k8s root ca update procedure.\n\nTest Plan: Repeated series of commands that made the bug to reveal\nMade a script that repeated its execution several times (10x).\nExecuted this script 4 times after change added.\n\nCloses-Bug: 1945331\nChange-Id: If0b4105684d1333fc257644cbe9a8df23836ac6a\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set up endpoint groups for distributed keystone\n\nThis commit sets up Endpoint groups in SystemController and RegionOne\nregions via Keystone Puppet manifest\n\nStory: 2002842\nTask: 22785\n\nChange-Id: I9a61dd4dd2ae18b00a7ea3ad2f0e6dc52cf0c348\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add a new filesystem for image conversion\n\nCreate the new host_fs CLI commands and the APIs\n    system host-fs-add\n    system host-fs-delete\n\nThese commands will be used only for adding/removing 'image-conversion'\nfilesystem dedicated only for qcow2 image conversion.\n'image-conversion' filesystem is optional.\nIt is not allowed to add/remove any other filesystem.\n\nChange-Id: I87c876371e123ec1ba946170258401d220260e31\nPartial-bug: 1819688\nDepends-On: https://review.opendev.org/#/c/714936/\nSigned-off-by: Elena Taivan <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait for all apps are stable before activate\n\nDuring an upgrade on an AIO-SX, images are automatically recovered after\nmigrating to the new release and the host is unlocked. While this is\noccurring, applications may be in an 'applying' or 'restore-requested'\nstate. The recovering period may time consuming if the network(mgmt) is\nnot stable or in low speed. This commit adds retries up to 15 mins to\nwait for all the apps are uploaded or applied for AIO-SX system.\n\nTested with upgrading and activate an AIODX central cloud and an\nAIO-SX subcloud. In the orchestrator, if an app on subcloud is still\nin applying status for more than 15 mins, the activate-audit fails\nonce, the orchestration succeeds after the app status becomes applied.\n\nPartial-Bug: 1904934\nSigned-off-by: Yuxing Jiang <yuxing.jiang@windriver.com>\nChange-Id: Ia995b7d6785dfdd0420e977b4431f68ac3b495c3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support VFIO for FPGA FEC device VF\n\nThe vfio-pci driver has been now been verified as a device\ndriver for an Intel N3000 FPGA FEC virtual function (VF).\n\nStory: 2006740\nTask: 39947\n\nChange-Id: Ia52a708a7c3fbc52a68daebe73b9d33a13f428d4\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move nova static configs to Armada manifest\n\nMove all nova static configurations from the overrides to the\nArmada manifest.\n\nStory: 2003909\nTask:  29372\n\nChange-Id: I92c787cb8f05e02c8e960e23dcb356cc8f007492\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Additional unit tests related to puppet configuration\n\nThis allows puppet unit test permutations for:\n IPv4 vs IPv6\n Controller / Worker / Storage / AIO\n CephBackend\n\nThis changes the unit test count for test_puppet from 5 to 45.\nThis alters the test_interface classes to have a slightly\ndifferent class hierarchy.\n\nChange-Id: I83b04686e2d5b6976b3d7926e98d0507512220de\nStory: 2005939\nTask: 36055\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support ovs in container\n\nAs stx cutovers to containerization, most openstack components run in\ncontainers, but ovs-dpdk running on the host.\n\nThis patch is to support ovs running in container, and make it the\ndefault setting. We still support running ovs-dpdk on the host.\n\nFor option ovs-dpdk on the host, run follow command before unlock.\n```\nsystem modify --vswitch_type ovs-dpdk\n```\n\nChange-Id: I111865de17fc82a1e7c269fb97f53a181fb382b2\nStory: 2004649\nTask: 28610\nCo-authored-by: Huifeng Le <huifeng.le@intel.com>\nSigned-off-by: chengli3 <cheng1.li@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"delete nginx-ports-control chart before stx-openstack re-apply\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Migrate the OAM firewall to the new implementation\n\nAs part of this story, the OAM firewall will be implemented using the\nsysinv.puppet.platform_firewall module, as it is done for the other\nplatform networks. Currently, this firewall is built using a puppet\nclass.\n\nAll the OAM rules are implemented in this module as they were used in\npuppet, from a functional point of view there will be no difference.\n\nDuring tests, it was observed that the bring-up manifest did not\nupdate the firewall config as it requires kubectl to be available at\nthe moment of execution. Now the file presence of\n.platform_firewall_config_required in /etc/platform/ will trigger\nsysinv to apply the configuration, guaranteeing the new config apply.\nThis file will be generated in the stx-puppet repo (see Depends-On\nlink below). For the stand-by controller the agent's periodic audit\ntask will check for the flag file and request a firewall update.\n\nTest Plan:\n[PASS] Modify configured firewalls with kubectl edit and execute\n        lock/unlock, after bring-up, check they were reset to the\n        original config\n[PASS] Erase a HostEndpoint and execute lock/unlock, bring-up check\n        the HostEndpoint was reset to the original config.\n[PASS] Erase a GlobalNetworkPolicy and execute lock/unlock, on\n        bring-up check the GlobalNetworkPolicy was reset to the\n        original config.\n[PASS] Modify http port and check is changed in the firewall\n[PASS] enable HTTPS and check is changed in the firewall\n[PASS] Install without storage config and check port is not on\n        the firewall\n[PASS] Add storage config after installation and check port is on\n        the firewall after lock/unlock\n[PASS] Verify all ports open in the firewall are accessible from\n        outside\n[PASS] Install a System Controller and verify open ports in the\n       firewall\n[PASS] Execute a DOR (dead office recovery) test\n[PASS] Modify the OAM IP address and verify that it reflects in\n       the firewall (AIO-SX)\n\nStory: 2010591\nTask: 48277\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/886108\nChange-Id: Ic226f15cb6e9376c20ba5001ae717d52f4df9474\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix sysinv tox flake8 failure.\n\nChange-Id: I836490ecd9b50a16b250142a8c9214caa9ef3aee\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure internal/admin endpoints for vim on DC\n\nAdded internal/admin endpoints to fix an issue with Puppet-Keystone\n'keystone_endpoint' method for SystemController's vim endpoint,\nthat wasn't being correctly updated when https was enabled.\n\nTest Plan:\nPASS: List OpenStack endpoints. For nfv/vim, SystemController region\n      now must have 3 endpoints, one for each interface (public,\n      internal and admin). For each interface, the endpoints must be\n      configured with same base IP as the other services (i.e.\n      Patching).\nPASS: Enable https. Wait for the endpoints to be applied. Public and\n      admin endpoints for vim in SystemController must become https.\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/863936\n\nCloses-Bug: 1995951\n\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\nChange-Id: I173cda45962c401b261dfb5cf88a88d036453f41\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Produce the fm-rest-api tgz file\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add helm chart for galera arbitrator\n\nAs part of the work to enable clustered database, a new helm chart is\nneeded to define how to run the galera arbitrator.  This chart makes\nuse of the newly-created stx-mariadb Docker image which has the galera\narbitrator added to the upstream openstack-helm mariadb Docker image.\n\nSince we have a new system chart, add sysinv support to handle any\nsystem overrides.  Initially this just means specifying the Docker\nimage.\n\nWhen we go to merge this upstream, we should try to add the galera\narbitrator to the existing upstream Docker image and the existing\nmariadb helm chart.  One upstream dev has said that they'd be willing\nto accept this.\n\nChange-Id: If0362916d3b575adabf9d6c8cc467e488b249b7b\nStory: 2004712\nTask: 29054\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Deactivate ptp-instance code\n\nThe _get_instance_ptp_config() method was incorrectly being run when\nptp was enabled. This resulted in a bad api call which prevents the\nsystem from being unlocked.\n\nThis commit adds a return statement to prevent any of the developmental\nptp-instance code from running and resolves the unlock issue.\n\nStory: 2009248\nTask: 44146\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: Idaa9e305740bd132fb8c44c5c0875ddeb0c74e2f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide helm chart for containerized Barbican service\n\nThis commit introduces Barbican as an OpenStack Application.\nAdding the Armada manifest for Barbican and updating the helm\nplugin with correct values to bring up containerized Barbican.\n\nAlso fixing the typo in memcache_secret_key for all the services\nin order to leverage authtoken cache encryption key feauture.\nRemoving the non-existing value for Keystone.\n\nChange-Id: I41c85969fe0554399721abb6efa73148bdc84cd4\nStory: 2003108\nTask: 29969\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Limit number of notification workers to 10 max\n\nThe current setting of ceilometer notification workers can result in\nan excessive number in multi-node system with high core controllers.\nIt should be limited to 10 max to avoid unnecessary system resources\nconsumption and to improve vcpu scaling responsiveness. The degraded\nvcpu scaling performance is caused by time taken to rebuild the\ntransformer caches in all workers following a swact/service restart\nas well as the increased cpu sample age in these caches.\n\nTests conducted: sanity, nightly sanity and 25 iterations of vcpu\nscaling tests in multi-node system with 32-core controllers.\n\nCloses-Bug: #1790679\n\nChange-Id: I47b7f14a75846fd9765e9a2ea2fb3ca3a6cad01a\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix host unlock when sriov-fec-operator is used\n\nWhen SRIOV FEC operator is used to manage the FEC devices, the\nexpected sriov_numvfs is not set using the host-device-modify\nmethod. The second host unlock would fail after sriov-fec-operator\ncustom resource is applied.\nThe semantic check during host unlock to compare the\nexpected and actual sriov_numvfs is not needed in this case.\nThis commit to bypass that semantic check if sriov-fec-operator\nis managing the device.\n\nTest Plan:\nPass: AIO-SX Host unlock successful with sriov-fec-operator\nPass: AIO-DX Host unlock successful with sriov-fec-operator\nPass: Host unlock without sriov-fec-operator\n\nCloses-Bug: 1996109\n\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\nChange-Id: If6fe113d37cfd28cefa8cea1b796c626dcff7370\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support ICA signed certificate installation\n\nEnhanced certificate installation to support intermediate CA signed\nssl, docker_registry, openstack certificate.\n\nChange-Id: I6ed9dfbf3f3379ad152d714dac691ea16f7f206e\nDepends-On: https://review.opendev.org/#/c/740958/\nCloses-Bug: 1883300\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removed puppet-openstack and puppet-platform\n\nChange-Id: I999fce6820336d917098b53cbbd7795237c1f1aa\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Read more than 100 images from local registry\n\nReading images from local registry is, by default, limited to 100.\nThis commit increases the limit to a large enough number to allow\nretrieving the full list in one query (i.e. 100 thousands images).\n\nCloses-Bug: 1896776\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nChange-Id: I032c073a68e580079e9278d8929dacd8cc8f2ac1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize to /var/log\n\nAdd support to modifying /var/log partition\nthrough system host-fs-modify command.\n\nTest Plan:\n PASS: Install ISO and resize /var/log on a Simplex\n    https://paste.opendev.org/show/b1gJyqtBPX6VGVTMkZx8/\n PASS: Unit tests on test_manager.py\n PASS: Make an upgrade and test feature\n PASS: Reject resize to a smaller value\n   https://paste.opendev.org/show/bei1VoXNQhQMTjsKqgS1/\n\nStory: 2010026\nTask: 45269\nDepends on: https://review.opendev.org/c/starlingx/stx-puppet/+/839617\n\nSigned-off-by: Heron Vieira <heron.vieira@windriver.com>\nChange-Id: I78c7ead4d7209986781d24d6aec013ff7d66991f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unused cinder references from bare metal\n\n- Removed the sysinv puppet cinder operator.\n- Updated all puppet operators that referenced cinder, those\noperators are likely to be removed as well.\n- Removed all cinder service parameters.\n- Cleaned up some requirements warnings from tox.\n- Removed any unused constants that seemed related to cinder\nthat were not being referenced anywhere in the code.\n\nNote: the code related to cinder storage backend remains.\nThis will be cleaned up as part of shared services and\ndistributed cloud cleanup and re-implementation.\n\nChange-Id: I3861f5e48d2fd89fdfd33b9c1431d8fdc7ed05ce\nStory: 2004764\nTask: 33614\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix issues when switch between HTTP and HTTPS\n\nIssues:\n1- wrs-ssl.rpm installs a key file that is expected to be modified by\nuser. Updating, patching or removing this RPM can potentially change the\nuser file.\n2- Going back to HTTP after going to HTTPS fails\n3- Going back to HTTPS again after going back to HTTP, access fails\nuntil a new key is installed\n4- key files under /etc/ssl/private are required to be removed when\ngoing back to HTTP\n5- sysinv creates backup copies of key (.pem) files\n\nFixes:\n1- renaming the self signed certificate installed by wrs-ssl.rpm so\nthat:\n- the key file is not installed in place\n- the self-signed certificate remains available to reinstall when going\nback and forth between HTTP and HTTPS\n2- updating the lighttpd.conf manifest so that the daemon does not look\nfor pem files in HTTP mode\n3- modifying sysinv so that the pem files are removed from both\ncontrollers when going back to HTTP\n4- modifying sysinv so that the tool does not create a backup copy of\nthe pem file.\n\nStory: 2002894\nTask: 22857\n\nChange-Id: Ibd0958e910a8914a3c65d3504ff82ebbef24c6c5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH support for 1 node configuration\n\nIn order to enable Openstack's helm charts on StarlingX we need a\ndistributed persistent storage for Kubernetes that leverages our\nexisting storage configurations. For this stage we will enable CEPH's\nRBD to work with Kubernetes RBD provisioner through a new Helm chart.\n\nSince RBD will be the persistent storage solution, CEPH support has to\nbe extended to the 1 and 2 node configurations.\n\nThis commit enables CEPH on 1 node configuration.\n\nDetails:\n* Allow CEPH to be configured on a 1 node configuration with a single\n  monitor.\n* Allow CEPH OSDs to be assigned to controller disks (only dedicated\n  disks allowed)\n* No enforcement on the number of OSD's.\n* Enable OSD level redundancy versus node redundancy that is present on\n  the standard system cluster,\n* Adding/Modifying CEPH backend configuration require node to be locked.\n* After adding the backend & before unlock: Monitor is immediately\n  available; Backend will be in \u201cprovisioned\u201d state; Secondary tiers can\n  be added at this stage.\n* Configuration is be applied on unlock. CEPH OSDs will start after\n  reboot.\n* Adding OSDs require node to be locked, they will be operational after\n  unlock.\n* Host-unlock is allowed only if number of configured OSDs per tier\n  matches replication number configured for that tier.\n* Services supported in this configuration: cinder, glance,\n  rbd-provisioner, swift, nova (with remote ephemeral storage).\n* Support for replication 1, 2 and 3 per tier, default to 1. Replication\n  is changeable on the fly for this configuration.\n* Update StarlingX HA for storage process groups - we no longer have 2\n  controllers so we disable group monitoring.\n\nChange-Id: I92edca700b7cc557a71edfb33e0453e860f52078\nImplements: containerization-2002844-CEPH-persistent-storage-backend-for-Kubernetes\nStory: 2002844\nTask: 26877\nSigned-off-by: Ovidiu Poncea <Ovidiu.Poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix race condition during certificate key regeneration\n\nWhen monitor is created on compute-1 hiera data is regenerated including\ncertificate-key during controller-1 reboot as part of the unlock. When\ncontroller-1 boots up the join command fails as certificate key is no\nlonger valid\n\nChange-Id: I99057fa1afc3648c7aa3910f95067bde7b51b033\nCloses-bug: 1873916\nSigned-off-by: Paul Vaduva <Paul.Vaduva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "config: Add global service parameter to set cri handler\n\nThis commit adds global service parameter \"container_runtime\" to\nallow setting container runtime interface (CRI) entries in the\ncontainerd configuration file for custom runTimeClass.\n\nAn example usage to set the cri:\n\nsystem service-parameter-add \\\n  platform container_runtime \\\n  custom_container_runtime=my_crihandler:/absolute/path/to/my_criBinary\n\nStory: 2008434\nTask: 41390\n\nSigned-off-by: Babak Sarashki <babak.sarashki@windriver.com>\nChange-Id: Icc5fd16682f4cf47abff16e20a5332fc195c4afc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Attach all nodes to the cluster host network\n\nProblem: Nodes in the cluster are attached to the management\nnetwork instead of the cluster host network.\n\nAccording to StarlingX documentation, all nodes in the cluster\nmust be attached to the cluster host network.\n\nTest plan ( Debian only )\nPASS Installed 2+1 system using IPv4\n     (2controllers, 1 worker)\nPASS Installed 2+1 system using IPv6\n     (2controllers, 1 worker)\nPASS AIO-SX system using IPv4\nPASS AIO-SX system using IPv6\nPASS AIO-SX system external access to a Kubernetes service\nPASS AIO-DX system using IPv4 and tested traffic between PODs\nPASS AIO-DX system using IPv6 and tested traffic between PODs\nPASS AIO-SX upgrade\nPASS STANDARD ( 2 controllers + 1 worker ) upgrade\nPASS STANDARD ( 2 controllers + 1 worker ) pod -> external traffic\n\n\n\nCloses-Bug: #1999690\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: Ib9ea1a857f657ca6fe193aab5cb692d3baf76c4b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add placement chart to armada system\n\nThis change allows to deploy the placement helm\nchart with armada system and remove placement deployment within\nnova.\n\nBelow test pass on both AIO and multi setup\n1) Openstack Application apply and reapply\n2) VM creation and delete\n3) Active controller switch and create vm after that\n\nStory: 2005750\nTask: 33418\n\nDepends-On: https://review.opendev.org/662371/\nChange-Id: I32dc127dcbc0319e3a20703ed66c9e8119fabcba\nSigned-off-by: zhipengl <zhipengs.liu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore failed on AIO-SX\n\nWhen using \"config_controller\" to do restore on AIO-SX, SM is signaled\nto manage the services through /etc/platform/.initial_config_complete\nright after controller manifest is applied. For restore, SM shouldn't\nstart to manage the services this early. This is a new behaviour\nintroduced by Ansible Bootstrap. This commit adds a check for restore\nin platform::config::controller::post to delay SM service management.\n\nStory: 2004761\nTask: 30522\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\nChange-Id: Ia19907bd07c84ec988d32bd48da6803b20e961c6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change the default value of sysinv-api bind host\n\nThe default sysinv-api bind host value was changed from\n\"0.0.0.0\" to \"::\" to support both IPV4 and IPV6.\n\nChange-Id: I072cda6df02f49a94d94871a9f19800f106f49dc\nCloses-Bug: 1833459\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix missing default route on worker nodes\n\nOn the worker and storage nodes, the mgmt interface should be\nset to dhcp and the cluster host alias should be set to use static IP.\nWith mgmt and cluster host interface sharing the same interface,\nthe mgmt alias interface was incorrectly set to static instead of\ndhcp which causes the default route to be removed during host unlock.\nThis commit is to set the address method of the alias interfaces\ncorrectly.\n\nStory: 2004273\nTask: 27826\n\nChange-Id: I6deee76a5ea25e7753bf0f53c499922bc5d66ec6\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "enabling fm containerization log to host log files.\n\nThis config will enable log output to host\n/var/log/containers/fm-rest-api-xxx.log\n\nStory: 2004008\nTask: 33499\n\nChange-Id: I5b4b76af59fd8d87e6874a31fbb43f576c81a526\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add an additional check for data interface configuration\n\nIf an interface is data interface and the vswitch type is not\naccelerated, the data interface is a member of a linux bridge\nand then the linux bridge will occupy the interface after host\nunlock. if so, it will cause conflict with ovs bridge when ovs\nagent add the interface to ovs bridge.\nthis patch add an additional check to determine if the vswitch\ntype supports accelerated interfaces. If it doesn`t support\naccelerated interfaces, a bridge should not be created.\n\nChange-Id: I0fbae866c364fe7b787aa850db79bca1bf597389\nCloses-bug: #1834556\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"AD domain groups and members discovery with sssd\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Audit local registry secret info when there is user update in keystone\n\nlocal registry uses admin's username&password for authentication.\nAnd admin's password could be changed by openstack client cmd. It will\ncause auth info in secrets obsolete, and lead to invalid authentication\nin keystone.\nTo keep secrets info updated, keystone event notification is enabled.\nAnd event notification listener is added in sysinv. So when there is\nuser password change, a user update event will be sent out by keystone.\nAnd sysinv will call function audit_local_registry_secrets to check\nwhether kubernetes secret info need be updated or not.\n\nA periodic task is added also to ensure secrets are always synced, in\ncase notification is missed or there is failure in handle notification.\n\noslo_messaging is added to tox's requirements.txt to avoid tox failure.\nThe version is based on global-requirements.txt from Openstack Train.\n\nTest:\nPass deployment and secrets could be updated automatically with new auth\ninfo.\nPass host-swact in duplex mode.\n\nCloses-Bug: 1853017\nDepends-On: https://review.opendev.org/700677\nDepends-On: https://review.opendev.org/699547\nChange-Id: I959b65288e0834b989aa87e40506e41d0bba0d59\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow configuration of PTP master/slave interfaces\n\nWith this change a new field ptp_role will be added to the interfaces\ntable. This will allow administrators to configure which interfaces will\nbe used for PTP serivces. Only platform or SRIOV interfaces may be\nspecified for PTP use. If a host has clock_synchronization=ptp there\nmust be at least one host interface with a ptp_role value specified.\n\nChange-Id: I86eddebf2f716f76d4eb9a5b5698a61ff3aec566\nStory: 2006759\nTask: 37690\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace cinder B&R with upstream implementation\n\nUpdate Cinder's backup path to /opt/backups\n\nChange-Id: I3d4793bb79ab088737fc253e581ec0394d994ee3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for \"cordon\" and \"uncordon\" to sysinv\n\nThis change provides two system commands: 'system kube-host-cordon'\nand 'system kube-host-uncordon'. The \"system kube-host-cordon\n<host-name>\" command will evict the regular pods from the host.\nThis command will not evict the mirror and daemon set-managed pods.\n\nThe \"system kube-host-uncordon <host-name>\" command will\nallow the regular pods on the host again.\n\nThese system commands will be used during K8s version upgrade on\nAIO-SX and in the following sequence:\n - system kube-upgrade-start <target-version>\n - system kube-upgrade-download-images\n - system kube-upgrade-networking\n - system kube-host-cordon controller-0\n - system kube-host-upgrade controller-0 control-plane\n - system kube-host-upgrade controller-0 kubelet\n - system kube-host-uncordon controller-0\n - system kube-upgrade-complete\n - system kube-upgrade-delete\n\nTest Plan: Debian\nPASS: Fresh install ISO as AIO-SX. Successfully upgraded\n      from 1.23.1 to 1.24 using the manual K8s upgrade.\n      After executing cordon system command some of the pods went to\n      the 'Pending' status. After executing uncordon system command\n      pending pods are return to 'Running' status.\n      Used the command 'kubectl get pods -n <namespace>' to verify\n      the status before and after executing the cordon and uncordon.\n\nStory: 2010565\nTask: 47825\n\nChange-Id: Ia07e1ec3e4f955f3b6dd1ea6084b9682b3f09acd\nSigned-off-by: Ramesh Kumar Sivanandam <rameshkumar.sivanandam@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Don't ping local addresses on controller\n\nWhen verifying addresses we specify the interface that we expect\nthe traffic to use.  For addresses that belong to the active\ncontroller, this means that the connectivity test will fail because\nthe valid route is via the \"lo\" loopback device rather than the\nexternal network interface.\n\nSince the relevent addresses are statically configured anyway,\nthe simplest solution is just to skip checking for connectivity\non controller nodes.\n\nNote: the change is logically just adding two lines, but the indentation\nchanges make it look more complicated.\n\nChange-Id: I326ae03c5dc368692e43aeb7d5ba2ae95c957145\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Keep platform-nfs-ip for upgrade process\n\nThe platform-nfs-ip service is not necessary for fresh installs\nbecause it is just an alias for the controller IP.\nBut for old releases like StarlingX rel. 6 or 7 the\nplatform-nfs-ip uses a specific IP, If for some reason an error\noccurs during the upgrade process, the upgrade will be aborted\nand the nodes will downgrade to the older release again.\nAt this moment the nodes will try to communicate with the\nprevious platform-nfs-ip IP configured in /etc/hosts.\nBut if the active controller is using the new Release\nthis IP doesn't exist anymore and the downgrade will fail.\nFor this reason the platform-nfs-ip service will be available\njust for upgrade operations and will be deprovisioned for fresh\ninstalls or at the end of the upgrade process\n( upgrade-activate phase ).\n\nTest plan\nPASS Fresh install on AIO-SX\n     Fresh install on AIO-DX\nPASS Upgrade AIO-DX system from CENTOS Rel 7 to DEBIAN Rel 8\nPASS Reboot controller-0 during upgrade of AIO-DX\n     controller-1 was the active one with the new release ( Rel 8 )\n     controller-0 using old release.\n     reboot controller-0 and check if it could connect to\n     controller-1 using old platform-nfs-ip.\nPASS Upgrade-abort during AIO-DX upgrade\n     controller-1 was the active controller and already upgraded\n     controller-0 was upgraded but locked.\n     Abort the upgrade and downgrade to old release ( Rel 7 )\n\nPartial-Bug: #2012387\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/878122\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: Ia7217544f2c954a83af71d488e0f2d722e17ec64\n",
        "issue_summary": ""
    },
    {
        "commit_message": "config: Convert wrsroot -> sysadmin\n\nThis also changes the group wrs_protected to sys_protected\nto de-brand the user and group names.\n\nDepends-On: I887464a20fc17d66529caea03be2b445156f9426\nChange-Id: I9b08bf502a9dad279966b201999f65d06dbc5774\nStory: 2004716\nTask: 28747\nSigned-off-by: Saul Wold <sgw@linux.intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubernetes version state on AIO-SX as available if version newer\n\nFor AIO-SX all versions newer than the current version should\nbe available.\n\nTest Plan:\nPass: 'System kube-version-list' shows all versions newer than\nthe current version as available.\n\nStory: 2010565\nTask: 47458\n\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\nChange-Id: Ie154e939d2fcb95317a410016b82dc1e55a5a0a2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "sysinv: Add support for mpath device\n\nThe device node in /dev/ and device path in /dev/disk/by-path\ncan not be used directly for mpath devices, use /dev/mapper/mpathN\nand /dev/disk/by-id/dm-uuid-mpath-<WWID> instead, and change\nthe following accordingly:\n\n* No DB schema change, the column used for by-path will be used\n  for /dev/disk/by-id/dm-uuid-mpath-<WWID>\n\n* common/utils: add several common functions for the device_node\n  and device_path mapping.\n\nTest Plan:\n\nPASS: AIO-SX without Ceph\nPASS: AIO-SX with Ceph, 1 osd\nPASS: AIO-SX with Ceph, 2 osd\nPASS: AIO-SX with Ceph, 4 osd\nPASS: Add/Remove partition\nPASS: Extend physical volumes with partition\n\nStory: 2010046\nTask: 45429\n\nSigned-off-by: Jackie Huang <jackie.huang@windriver.com>\nSigned-off-by: Thiago Miranda <ThiagoOliveira.Miranda@windriver.com>\nChange-Id: I075a6b64118ba05852c73f80589e0c87dfaa7017\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable enumerate for local openldap domain\n\nEnabling enumeration for ldap domains has advantages, such as\nthe use of command \"getent passwd\" for quick list and filtering\nof users discovered with SSSD and implicitly verifying that the\nSSSD connection is successful. If the number of users discovered\nis not very large there will be no concern for performance\ndegradation.\nLocal openldap domain will not have a very large number of users\nas remote AD ldap domains do, so it is beneficial, safe, and\ndoing no harm to enable enumeration for this domain.\n\nTests performed:\nPASS: The local ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd service is successfully started.\nPASS: Verify local openldap users have been successfully discovered\nby SSSD service using command \"getent passwd\".\n\nStory: 2009834\nTask: 46824\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I0c649caf834531811aa74bc1c97b3d7028abb81d\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate openldap CA cert hireadata from secret\n\nThis change is part of refactoring openldap CA certificate\ninstallation. It updated sysinv ldap puppet plugin to retrieve\nopenldap CA certificate from k8s secret and add it into puppet\nhieradata. The CA certificate in hieradata will then be consumed\nby puppet to install into system trusted CA bundle.\n\nTest Plan:\nPASS: system deployement, after hosts are unlocked, verify openldap\n      CA certificate presents as\n      /etc/pki/ca-trust/source/anchors/openldap-ca.crt\n      and is included in\n      /etc/ssl/certs/ca-certificates.crt\nPASS: Verify client access to secure openldap by\n      ldapsearch -xH ldaps://controller -b \"ou=People,dc=cgcs,dc=local\"\nPASS: Verify client access to secure openldap by\n      ldapfinger admin\nPASS: Verify openldap user login from console and by ssh.\n\nStory: 2009834\nTask: 46516\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ib4639633d9a015b1c55a7700ed3aaeb984f8bdb4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix haproxy/novnc interaction in containers setup\n\nnova-novncproxy pod is currently listening at platform floating mgmt\naddress port 6080 in containers setup.  However this implicitly requires\nthe pod to track the active controller which is not desired or\nenforceable causing the pod to frequently fail to come up.\n\nTo fix, don't override config option vnc/novncproxy_host.  This will\nrevert behaviour to upstream default of listening at 0.0.0.0:6080 but\nalso requires that we do not configure nova forwarding in haproxy to\navoid port conflict.  This is in line with overall networking\narchitecture for containers.\n\nStory: 2003909\nTask: 27081\nChange-Id: I8eff1ad837c6a874a2a11e2f6bc73876042bb171\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add pod security admission controller labels\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move gnocchi and ceilometer static configs\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Address python3 string issues with subprocess\n\nThis patch updates our Popen and check_output calls to enable\nnewlines for calls that we parse or consume the output for.\nWithout universal_newlines=True, the output is treated as bytes\nunder python3 which leads to issues later where we are using it as\nstrings.\n\nSee https://docs.python.org/3/glossary.html#term-universal-newlines\n\nStory: 2006796\nTask: 42667\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I2086628948ca2dfb742de01923b56949ed30dfab\n(cherry picked from commit 185808f082d2b18cdfe672c768d7d2343ad2f016)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ironic manifest to stx-openstack\n\nAdd ironic chart to stx-openstack manifest. Ironic services are\nenabled when label openstack-ironic=enabled is set. A nova service\nnova-compute-ironic within nova chart is referring to this label as\nwell. Nova-compute-ironic is configured to use ironic driver for\ncreating/scheduling instance to ironic node through nova service/CLI.\n\nIronic chart group enablement will be added by ironic meta overrides.\n\nStory: 2004760\nTask: 28869\nDepends-On: https://review.opendev.org/#/c/653914/\nChange-Id: I5728586c69689e32afc948009c2b8c9e2bff84e0\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable helm repository and chart upload tool\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add platform network type for storage\n\nAdded a new platform network type for optional backend storage.\n\nStory: 2007391\nTask: 39018\n\nChange-Id: I1a389b8aede49095e4f7f7d24ed8224504575d45\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Openstack clients helm chart\"\n\nThis reverts commit 9dd64e3b9003fda21ec90594da70763901ceeaad.\n\nChange-Id: Iec5ded20d5f27bf7726aa3fa62bc935e9dcfa045\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\nDepends-on: I06931b7f5ae047ec93eaa0ee553e35577ceb433b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enclose Barbican API host into square brackets in case of IPv6\n\nBarbican fails to start in case of IPv6 configuration:\n\"Error: ':2:9311' is not a valid port number.\"\nWrong parsing of IPv6 host address can be fixed by adding [].\nAlso dropping '' for API workers number for the sake of consistency.\n\nChange-Id: Ie40a0338d202dfa1cc17810db56d902b14e5accf\nCloses-Bug: 1810558\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add support for multiple hpe3par backends\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create a service account for ceph-pools-audit cron job\n\nA service account for ceph-pools-audit cron job should be\ncreated to provide identity.\nThe commit updates the ceph pools audit chart to leverage\nhelm-toolkit to create its service account which also\nprovides the image credentials.\n\nChange-Id: I2da135047ee9fa47274c49a989d6b905104f3ffd\nCloses-Bug: 1819720\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Ceph split brain on multinode\n\nDue to changes that make Ceph work on 1 node configuration\n'mon_initial_members = controller-0' was added to /etc/ceph.conf.\nThis settings allows ceph to work with a single monitor. On\nmultinode it may cause brain split as controller-0 may start by\nitself if it is not able to immediately connect to the good cluster.\n\nThis will also cause problems at Backup & Restore when controllers\nare reinstalled but older ceph cluster is recovered. In this case\nvalid monitor data present on storage-0 is downloaded by the monitor\non controller-0. Problem is that if mon_initial_members = controller-0\nthen the monitor on controller-0 will be happy to start by itself and\nwill not download the valid data from storage-0 leading to a possible\nbrain split condition.\n\nThis commit sets this option for 1 node configuration only and\nkeeps it undef for multinode.\n\nChange-Id: I01d5563260ad211b04fe4904c32f255f4e683b07\nCloses-bug: 1801772\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom ceilometer configuration files\n\nWe have some custom configurations in pipeline.yaml and polling.yaml\nin stx-ceilometer. This update configures those yaml files through\npuppet instead.\n\nCustom changes:\n1. Add csv_sink and vcpu_sink in pipeline.yaml\n2. Enable more polling meters in polling.yaml\n\nStory: 2003120\nTask: 23239\n\nChange-Id: I06ee94752a7bae396d767d0577d8a4a6204779f8\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubernetes rootca host update updateCerts\n\nAdding auxiliary methods to help create the resources needed in\nthis step of kubernetes rootCA update procedure\n- precheck for validation of the procedure phase\n- creation of kubernetes resources to proceed with root CA update\n- Methods to extract DNS and IP address from certs SAN\n- Refactored method to update hieradata regarding kube certificates\n- Unit tests\n\nStory: 2008675\nTask: 42698\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/798307\nChange-Id: I1ae300c48749c17cbe7be9645a81e06790c52a64\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Debian: Update puppet class scoping for network.pp\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Align with latest SR-IOV CNI and device plugin images\n\nCurrently, StarlingX uses a version of the SR-IOV CNI and device\nplugin container images that are based on a certain commit reference.\nThis is done to ensure reliable and predicable behaviour until the\nimages can be locked down on a stable release version.\n\nIt is desirable to move to a later version of these images for\na couple of reasons (aside from bug fixes, etc):\n\n1. The SR-IOV CNI image now uses an alpine base, rather than\n   a Redhat base.\n2. The SR-IOV device plugin allows a DPDK enabled pod with\n   Mellanox NICs to run unprivileged.\n\nThis commit makes the necessary changes to handle the change\nto the SR-IOV device plugin configuration file.\n\nAn example of the new format is as follows:\n\n{\n    \"resourceList\": [{\n            \"resourceName\": \"pci_sriov_net_network1\",\n            \"selectors\": {\n                \"vendors\": [\"8086\"],\n                \"devices\": [\"154c\", \"10ed\"],\n                \"drivers\": [\"i40evf\", \"ixgbevf\"],\n\t\t\"pfNames\": [\"ens802f0\", \"ens801f0\"]\n            }\n    }]\n}\n\nAs such, it can be seen that the vendor and device ids must be\nread, rather than the old format which just needed the PCI root\ndevice address(es).  To achieve this, the sysinv agent must\nread and store any SR-IOV virtual function device ids.  The\nvendor id can be read from the existing pvendor id field of the\nport with the addition of the -nn flag to the lspci command.\n\nChange-Id: Id73eaa1cf8ff39643c113d4787417f3b44b1560f\nDepends-on: https://review.opendev.org/685498\nPartial-Bug: 1835020\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure anti-affinity for coredns pods\n\nThere is no supported way to do this to configure the coredns pod for\nanti-affinity. See https://github.com/kubernetes/kubeadm/issues/1416\n\nFor now we will set this with a patch in the kubernetes manifest.\n\nChange-Id: I3c83cee9d3209b223fd2c2e1149a85205e3c9b15\nStory: 2004520\nTask: 29726\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Create DataNetworks modelling in System Configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add cluster-pod network to cluster-host firewall in IPv4\n\nIt was observed that is not necessarily true that all pod traffic\nis tunneled in IPv4 installations. To solve that we are extending the\nsolution done in IPv6 to IPv4, which consists in adding the\ncluster-pod network into the cluster-host firewall\n\nThe problem showed itself when the stx-openstack application was\ninstalled.\n\nTest Plan:\n[PASS] observe stx-openstack installation proceed with the correction\n\nCloses-Bug: 2023085\n\nChange-Id: I572cd85e6638d879d8be1d9992ae852a805eca4b\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable --reserved-cpus option in k8s v1.18.1\n\nThe option was introduced in k8s v1.17 and will now be used to define\nthe explicit set of CPUs that are reserved for specific cpu functions in\nStarlingX.\n\nThis retires setting the number of CPUs reserved in the --kube-reserved\nand --system-reserved options.\n\nInstead of calculating the number of CPUs related to reservations,\nprovide the specific list of CPUs in a comma separated range format.\nThis will be used by puppet to set the --reserved-cpus option based on\ncpu manager policy.\n\nRemove restrictions around CPU assignments:\n- Allow platform cores to be reserved on any processor\n- Allow application isolated cores to be reserved on any processor\n\nChange-Id: I1a3d4e4cca7b6940682a787c2e7348e56a047a06\nDepends-On: https://review.opendev.org/#/c/722189\nStory: 2006999\nTask: 39528\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove swift endpoints from baremetal\n\nSwift endpoints were being setup through the puppet manifest\nplatform::ceph::rgw::keystone::auth\n\nThis change removes that manifest as well as references to it\nand any hiera data setup that pertains to it.\n\nStory: 2004764\nTask: 30412\nChange-Id: Ic7e10eff04677dcd0380557767147b7103f073ad\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Commands For Docker Registry Image Cleanup\n\nAdd commands for\nregistry-image-list, to list the existing images in the repo\nregistry-image-tags, to list the tags of a specified image\nregistry-image-delete, to delete a tag of a specified image\nregistry-garbage-collect, to delete space on the filesystem from\nimages that do not have any tags referencing them\n\nIt is currently impossible to delete images from the local Docker\nregistry on the controllers. This can be an issue if images are\ncontinuously pushed. The only solution was to grow the file system.\nThis commit provides commands for a user to find unwanted images and\nto delete them from the controller local Docker registry in order to\nfree up space on the file system.\n\nThere is a possibility of the registry getting stuck in read-only mode\ndue to garbage collect if puppet dies or there is a swact while\ngarbage collect is running. In this situation, the user should run\ngarbage collect again. Getting stuck in read-only mode does not\nprevent image pulls or kubernetes deployments from existing images\nfrom starting or completing.\n\nStory: 2002840\nTask: 28621\n\nChange-Id: I4bb9301a1165db8b860418c413aa3238169bab03\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Populate flat networks in ml2 configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix up puppet dependencies for firewall rules\n\nEnsure that the custom firewall chains are present before trying to flush\nthem.  This requires that we remove what we believe is an unnecessary\ndepencency between the custom firewall chains/rules and the normal\npuppet-configured firewall chains/rules.\n\nChange-Id: I939c6fecbf4b4fa3d4821025efd96d715f06eb1b\nStory: 2002843\nTask: 22791\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv upgrades support for Kubernetes 1.25.3\n\nThis adds sysinv upgrades support for Kubernetes 1.24.4 to 1.25.3.\n\nTest-plan: Debian\nPASS: system kube-version-list shows\n      v1.25.3 available\n\nStory: 2010368\nTask: 46586\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/864407\n\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\nChange-Id: I3f13a0644caf0acb436a32a22364a67fbe77d06a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove puppet entry related to host-based snmp\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore the Aggregate Provider Network Filter\n\nRestored AggregateProviderNetworkFilter to\nSCHEDULER_FILTERS_COMMON list as it was inadvertently\nremoved by a previous commit.\n\nCloses bug 1792609\n\nChange-Id: Ia5bf0841145737a8196792e8ae23895741edfc39\nSigned-off-by: Daniel Chavolla <daniel.chavolla@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enhancements for the rbd-provisioner helm chart\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing unnecessary IP for platform-nfs.\n\nIt is not necessary to allocate a specific IP address\nfor NFS.\nCreating the alias controller-platform-nfs for floating-\ncontroller IP address is enough.\nWith this change, another IP address is available to\nconfigure an additional Worker node.\n( i.e: subnet /29 )\n\nStory: 2010351\nTask: 46502\n\nTest plan ( Debian only )\nPASS Installed 2+2 system with subnet configuration (/29)\n     (2controllers, 2 workers)\nPASS Installed 2+2 system using IPv6 subnet\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I81dc5b6435cb9925f3e16c8a275ac41b5356fef9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable horizon on subcloud controllers\n\nThis fixes Horizon issues seen on subclouds when navigating to another\nsubcloud.\n\nStory: 2002857\nTask: 22806\n\nChange-Id: I3ba271c13ea6a5d7908614960ba077b2def14d18\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kubernetes Cluster Network Configuration\n\nThe Kubernetes cluster network is introduced and configurable.\nThe cluster-host interface can be configured on any interface of the\nhost and is defaulted to the management interface if it is not\nspecified.\nThe infrastructure network is no longer used in kubernetes config.\nSM and MTCE are setup to monitor the cluster-host if kubernetes is\nenabled.\nNova live migration ip is set to use the cluster-host ip.\n\nTests Performed:\nContainerized setup:\nAIO-SX: mgmt and cluster-host shared loopback interface\nAIO-DX: mgmt and cluster-host shared an interface\nAIO-DX: mgmt and cluster-host on different interface\nStandard 2+2+2: mgmt and cluster-host shared an interface\nStandard 2+2+2: mgmt and cluster-host on different interface\nFor each of the setup, launch VM and connect to VM console\n\nNon-containerized deployments\nAIO-SX sanity\nAIO-DX sanity\nStandard 2+2 sanity\n\nStory: 2004273\nTask: 27826\n\nChange-Id: If6b918665131f01bc62687fbdc7978c5c103e3b7\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "device plugin images can be pulled from private registry\n\nCheck user specified docker registry and pull device plugin from\nit if exists. And fix 2 issues related to private registry.\n\n1. pause image redirection is not needed in k8s 1.13\n2. missing double quotes in /etc/docker/daemon.json\n\nCloses-bug: 1829299\n\nChange-Id: I71074056009544abd6c91b10716b3dd5bf7b9e89\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv to use sysinv as registry user\n\nThis commit makes sysinv use 'sysinv' to access the registry\ninstead of 'admin'\n\nPartial-bug: 1882117\nDepends-On: https://review.opendev.org/#/c/736419/\n\nChange-Id: Ibdfeccf950fae7376e7f98d697a7066c95f28b9e\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable security group support for OVS agent\n\nThe neutron OVS firewall_driver driver is currently set to noop since\nthere is no suitable firewall driver packaged. The security group\nsupport for OVS agent is now enabled with the native \"openvswitch\"\nfirewall driver, which is stateful and based on openflow + conntrack\nimplementation.\n\nChange-Id: Ie49ea124b3dd1ad2c5d405274fa891d88c7e39bf\nStory: 2002944\nTask: 22937\nSigned-off-by: Kailun Qin <kailun.qin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Sysinv exports OAM firewall L4 ports to system.yaml\n\nThis change creates the necessary L4 ports constants to be exported\nto system.yaml, to be used by the respective puppet classes.\n\nThis is necessary to the next change that will use the constants in\nthe new implementation to create the OAM firewall, inside sysinv.\n\nThe test below validates the correct values are present in the OAM\nfirewall\n\nTest Plan:\n[PASS] Install, Lock, Unlock AIO-SX\n[PASS] Install, Lock, Unlock AIO-DX (as SystemController)\n\nStory: 2010591\nTask: 48254\n\nChange-Id: Ib5f314eea457f99d1b9834a37f0cfa00b3b1d01f\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Local Docker Registry HA Integration\n\nAdd new 1g DRBD filesystem for docker local registry\nMake SM manage docker local registry\n\nStory: 2002840\nTask: 22782\n\nChange-Id: I55fb1369c7141e2f40c35d01379925439264eed9\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Support for NTP/PTP coexistence\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Deprecate sysinv.openstack.common.gettextutils\n\nThe gettextutils code dates back to when openstack projects\nmaintained common code and was later replaced by oslo_utils.\n\nThe new convention is to create a new _i18n.py file at the base\nlevel and import it.\n\nSee: https://docs.openstack.org/oslo.i18n/latest\n\nMost of the changes in this review are:\n\nOld Code:\n  from sysinv.openstack.common.gettextutils import _\n\nNew Code:\n  from sysinv._i18n import _\n\nThis explicitly adds oslo_i18n to requirements.txt\n\nChange-Id: I606ef9fef1e0431340669e9a2f153a038e72b88a\nStory: 2006796\nTask: 37340\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove stx branding from containerized horizon\n\nChange-Id: I38ab801756bee2d8ef8d655f2d3566faffb872b7\nStory: 2004751\nTask: 30805\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix domain setting for Barbican during bootstrap\n\nBarbican returns \"503 Service Unavailable\" during bootstrap\nphase of StarlingX. This happens because Keystone auth token\nlacks domain details for Barbican. Need to explicitly specify\nproject_domain_name and user_domain_name in Barbican config.\n\nChange-Id: I4bf6b275c1eb271b62a2e7a1bc72c049f193afc4\nCloses-bug: 1834670\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "K8s custom configuration: extra-volumes and kubelet support\n\n- New service-parameter sections has been created for k8s\n  control-plane pod volume management.\n- The add, modify, and delete service parameters behaviors\n  have been changed for these new sections only.\n- A new function has been added to analyze and verify the\n  system parameters values that define the volumes.\n- When added volumes are of type 'File', a kubernetes\n  configmap is created with the contents of the file.\n- New functions have been added to the sysinv.common.kubernetes\n  module to allow the creation of configmaps from files.\n- The audit policy file ad-hoc code was removed as it is\n  contained in new modifications.\n- Upgrade script updated.\n\nTest Plan:\n  PASS: Fresh Install with Debian AIO-SX and DX/STD.\n  PASS: Backup and Restore. Debian AIO-SX and DX/STD.\n  PASS: Backup and Restore with optimize mode. Debian AIO-SX and DX/STD.\n  PASS: Upgrade from 22.06 CENTOS to 22.12 Debian.\n\nStory: 2009766\nTask: 46890\n\nSigned-off-by: Jorge Saffe <jorge.saffe@windriver.com>\nChange-Id: Ib3d67a3b9a8310bfecae31ed311e46612391b6fc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add keystone-api-proxy helm charts and overrides\n\nThis update adds the required helm charts, manifest and\noverrides to deploy the containerized keystone-api-proxy.\n\nIt also configures the required chart groups for openstack\nservices running on System Controller.\n\nStory: 2004766\nTask: 30454\n\nChange-Id: I3a8ac1f1ca811b3004c42a13c9bcab61e1c2f405\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "SM monitors cluster-host floating IP\n\nThe cluster-host floating IP is managed by SM.\nThis commit reuses the existing cinder-ip service to monitor the\ncluster-host floating IP address for the kubernetes config.\nThis is a temporary change until a cluster-host-ip resource\nis added to SM.\n\nStory: 2004273\nTask: 28962\nChange-Id: Ibff1766e6115b946cba6f8f1289463ceb866d135\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update expired unit test certificate\n\nThe sysinv unit test certificate expired Dec 22, 2020\nThis extends the date to Dec 22 2021.\n\nThe unit test header was updated to trigger zuul to verify\nthe changes are valid.\n\nA Readme file has been provided which lists the expiry dates\nfor all the pem files used for the unit tests. Information\non how to update the pem files will be added to the readme\nwhen all the expiry dates are aligned.\n\nChange-Id: I63cdd865a1818756f9ec3f20ebd724d2ad2d5729\nPartial-Bug: 1909817\nCo-Authored-By: Sabeel Ansari <Sabeel.Ansari@windriver.com>\nSigned-off-by: albailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix K8s *.key file permissions during upgrade end\n\nOld versions of StarlingX have wrong permissions set to files\n\"/etc/kubernetes/pki/ca.key\" and\n\"/etc/kubernetes/pki/apiserver-etcd-client.key\". The simplex upgrade\nprocess carries the permissions of these files from the old StarlingX\nversion to the new one. This commit fixes this problem by resetting\nthese file permissions on controller-0 when activating the upgrade.\n\nThis file permission reset is not needed in controller-1 because the\nduplex upgrade process resets the file permissions on both controllers.\n\nTest Plan:\n\nPASS: Successfully complete AIO-SX upgrade and check that the files\n\"ca.key\" and \"apiserver-etcd-client.key\" in the folder\n\"/etc/kubernetes/pki/\" have the permissions changed from 0644 to 0600.\n\nCloses-Bug: 1996932\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: I1f25724161bc1347187a4f276d8ddaf436fae3f3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enhance glance to support distributed keystone\n\nAs part of Distributed Cloud keystone scalability, this patch enhance\nglance to support distributed keystone in DC config.\n\nThis patch include:\n- enhance glance store driver to support authentication to system\n  controller keystone by username and password, so that glance client\n  can talk to glance registry on system controller to fetch images\n  created on system controller.\n- enhanced puppet manifest to configure glance-api and glance-registry\n  on both system controller and subcloud.\n\nChange-Id: I6a7a4c593407b7d3f28b2f51b402936927963039\nStory: 2002842\nTask: 22785\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable VIM plugins for Kubernetes deployment\n\nDo not load vim plugins and disable vim audits instead of\njust disabling the endpoints as was previously done in\nChange 599741.  Leave setting of (new) Nova and (pre-existing)\nNeutron endpoint disabled flags for infrastructure host services usage.\n\nStory: 2002876\nTask: 26573\n\nChange-Id: Id3af829562e5765b99dbab23d913d65a4e6ec4a7\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding nvidia_vgpu drivers support\n\nOn compute nodes with openstack-compute-node=enabled label,\nthe non-open-source NVIDIA vGPU drivers should, if present,\nbe loaded for commercial scenarios where the non-open-source\ndrivers are built into the StarlingX ISO.\n\nThis change adds the conditional set of a config flag that\ncontrols the non-open-source vGPU drivers.\n\nTest plan:\nPASS: Verify that after applying the modification in a host\nWITH openstack-compute-node=enabled label tagged the installation\nscript of nvidia_vgpu drivers (if present) should be triggered\nto be executed.\nPASS: Verify that after applying the modification in a host\nWITHOUT the openstack-compute-node=enabled label tagged the\nuninstall script of nvidia_vgpu drivers (if present) should be\ntriggered to be executed.\n\nStory: 2010090\nTask: 45618\n\nSigned-off-by: Rafael Falcao <rafael.vieirafalcao@windriver.com>\nCo-Authored-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I4d22398c551a3462cad0d040e8955365dda3dc99\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup ceilometer from bare metal code\n\nCeilometer is being setup through helm charts in containers\nso the references to ceilometer in bare metal can be cleaned up.\n\n - Removing the sysinv puppet code for ceilometer\n - Removing the bare metal ceilometer pipeline upgrade script\n - Cleaning up unused variables from templates\n\nStory: 2004764\nTask: 33690\nChange-Id: I2efe7aed7a4570121c1376c132e157c6f47e9f29\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add logging configuration to nova-api-proxy\n\nPuppet manifests now include logging data to push to\nthe conf file. This is needed for a subsequent code\nchange to change the logging backend to oslo_log\n\nChange-Id: I303e199fd3c984af20564c43bdb98c460cbed0f1\nStory: 2004007\nTask: 27608\nSigned-off-by: Lachlan Plant <lachlan.plant@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove the is_kubernetes checks from sysinv\n\nThe is_kubernetes checks were added when containerization\nwas first being implemented to allow a non containerized\nenvironment to continue to work.\nThe non kubernetes environment is no longer operational\nand the option to disable this is no longer provided, so all\nthe code that checks for this system capability is no longer\nneeded, since it will always be True.\n\nChange-Id: Iae91d6cb6f9a4fe19fad992df318b4cd609c6c97\nStory: 2004764\nTask: 33417\nDepends-On: https://review.opendev.org/#/c/663779\nDepends-On: https://review.opendev.org/#/c/663780\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move heat static configs to Armada manifest\n\nMove all heat static configurations from the overrides to the\nArmada manifest.\n\nThis is being done so we have a consistent way of managing\ncontainerized openstack configurations. Static configurations will\nbe located in the Armada manifest and dynamic configuration will be\nlocated in the overrides files.\n\nStory: 2003909\nTask: 29455\n\nChange-Id: Ie35b1696b9fce0458db724fc8163d5d181e0768a\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet: enforce OVS init/config order\n\nDuring debugging of a separate, unrelated issue, it was found that\nthere were instances of ports being added to OVS bridges after\nthe dpdk-init config option was passed to OVS.\n\nAlthough there doesn't seem to be an actual execution error here,\nit seems proper to ensure that the dpdk-init happens before DPDK\nenabled ports are added.\n\nChange-Id: Ib42d1404682fcbd1e98841e15302f1b86c98fcc4\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix additional puppet-lint warnings and errors\n\nThis update addresses the following errors and warnings\nfrom puppet-lint:\n- 140chars\n- case_without_default\n- ensure_first_param\n- inherits_across_namespaces\n- parameter_order\n- single_quote_string_with_variables\n- variable_is_lowercase\n- variable_scope\n\nIn the case of variable_is_lowercase, the compute.pp manifest\nhas variables with sizes like 2M in the name. These have been\nleft as-is, with lint:ignore comments for the check, due to\nthe semantics of the name.\n\nFor the 140chars check, certain long lines have been left as-is,\nwith lint:ignore comments, due to long commands being executed.\nThese can be revisited in a future update to try to break up\nthe lines and remove the lint:ignore directives.\n\nChange-Id: I37809bacb43818e0956f9f434c30c48e05017325\nStory: 2004515\nTask: 28685\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable StarlingX helm charts for stx-openstack app\n\nUse an application RPM to build and collect application artifacts.\n\nThis follows the same mechanism that is used to build the openstack-helm\nand openstack-helm-infra charts. The custom StarlingX charts are built\nand the application specific armada manifests are included in the RPM.\n\nThis application RPM will be used to produce some of the required build\nartifacts (custom helm tarballs + armada manifests) but is not intended\nto be installed on the system. These artifacts are extracted later for\nproper application packaging with additional required metadata.\n\nChanges also include:\n - Update the README describing the new layouts for applications.\n - Move the nova-api-proxy chart from the common area to be included as\n   a chart specific to the stx-openstack app.\n\nChange-Id: I1140760d56035249324519be93bb913e18f394d9\nStory: 2004005\nTask: 27801\nDepends-On: I57c5ec5f3565e9e585f0935af745e495699aa28c\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable IPv6 address DNS lookup in sssd\n\nThe default value for sssd parameter \"lookup_family_order\" used to\nselect preferred address family when performing DNS lookups does\nnot work for IPv6 addresses. The default value is \"ipv4_first\"\nand should work by trying looking up IPv4 address first and if\nthat fails, trying IPv6 address.\nThis commit enables IPv6 lookup by checking what kind of IP\naddress the host has and sets the \"lookup_family_order\" parameter\nto \"ipv6_first\" for IPv6 addresses.\n\nTests performed:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd ldap domain service parameters are added and applied at\nruntime in \"/etc/sssd/sssd.conf\".\nPASS: sssd service is successfully started.\nPASS: Verify DNS lookup works successfully for hosts with IPv6 as\nwell as IPv4.\n\nStory: 2009834\nTask: 46694\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I47222500e8f5f54826e86cd835379740cb9d5049\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable cert manager and nginx application upgrade\n\nThis commit removes cert manager and nginx from the list of\napplications upgraded during a system upgrade. These applications\nare not ready to be upgraded yet, and will break upgrades in\ntheir current state. Removing them allows upgrades to finish.\nNote that an upgraded system at this point will encounter\ncert manager issues. DC setups will be unable renew certificates\nand platform managed certificates will fail to create. This\nis because the system is set up to work with the new fluxcd\ncert manager, while an upgraded system will have the old armada\ncert manager.\nCert manager is removed because it needs special handling for\ndata migration.\nNginx is removed because the system cannot apply a fluxcd\napplication during an upgrade in its current state.\n\nTest Cases:\n\nPASS: Upgrade with 2 controller system, up to upgrade-complete\n\nStory: 2009837\nTask: 45296\n\nChange-Id: I372f38ba629a95bea584f7b35ad75fa3c5506ddc\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Copy hieradata on openstack when upgrading\n\nDuring the platform upgrade process, we first install the newer version\nof the StarlingX system on the standby controller and after that, we\nswact and install the other controller. When this process happens, the\npuppet plugins are not in place on the newly updated controller since\nthe stx-openstack app is installed only on the older version of the\nsystem. This fix bypasses that behavior by checking for all plugins that\nuses Openstack configuration data, if it is generating hieradata during\na upgrade process, it will copy those configuration from the older\nversion's hieradata folder.\n\nTEST PLAN\nPASS: Installation from scratch on a new SX server\nPASS: Upgrade from previous version to current development version on SX\nPASS: Upgrade from previous version to current development version on DX\n\nCloses-Bug: #1961114\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: Id1cbf682013820f1430bfe292448caeddba585e7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Improve update of user config robustness\"",
        "issue_summary": ""
    },
    {
        "commit_message": "add helm chart for nginx ports control\n\nthis chart is added as a part of \"stx-openstack\" application,\nin the same chart group as openstack-ingress chart, so that\nwhen \"nginx-ingress-controller\" starts working, http and https\nports are allowed for nginx which accepts http/https requests\nand forwards to internal services accordingly.\nIn the following LP#1827246, the http request of opening console\nof VM instance is sent to nginx 80 first, and then nginx forwards\nthe request to \"nova-novncproxy\" at port 6080 internally.\n\nCloses-Bug: 1827246\n\nChange-Id: I183f7edc92f1a9e0bdedad0afe35e3d03e20e7d5\nSigned-off-by: yhu6 <yong.hu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"K8s custom configuration: extra-volumes and kubelet support\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow TCP, UDP and IGMP traffic inside the admin network\n\nIt was observed that it's necessary to allow TCP, UDP and IGMP traffic\nin the admin network between the subcloud's controllers in order for the\ncontrollers to exchange system health messages (IGMP to help multicast\nestablishment, if necessary).\n\nThis change adds the necessary rules in the admin network firewall\n\nTest Plan:\n[PASS] Install a AIO-DX subcloud and verify traffic is available\n       between the subcloud controllers in the admin network\n\nCloses-Bug: 2028971\n\nChange-Id: If8bc6c462453eba5be7f94c86b7f4cde5301a293\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "clear yamllint errors under stx-config\n  Listed below are the errors which were fixed as well as the actions\n    [error] trailing spaces (trailing-spaces)\n    --> delete spaces\n    [error] too many blank lines (3 > 2)\n    --> delete blank line\n    [error] too few spaces after comma (commas)\n    --> add space after comma\n    [error] too many spaces inside brackets\n    --> delete extra spaces\n    [error] wrong indentation: expected XX but found XX (indentation)\n    --> delete/add spaces to indente\n    [error] line too long (97 > 80 characters) (line-length)\n    --> change the line max length to 200\n        cut the too long lines to 2 or 3 (by using '|-')\n    [error] duplication of key \"XXX\" in mapping (key-duplicates)\n    --> delete the duplication\n    [warning] missing starting space in comment (comments)\n    --> add blank after '#'\n    [warning] truthy value should be true or false (truthy)\n    --> lower case \"False\"/\"True\" to false/true\n\n  Listed below are test cases done which run one controller and one compute in KVMs\n    Test-Install           ----  success\n    Test_create_instance   ----  success\n\n  Now linters errors under stx-config is clear. Weee!!\n\nRelated commit: https://review.openstack.org/#/c/600473/\n\nStory: 2003360\nTask: 24411\n\nChange-Id: Idc3c9304172be52c5d2fb2cbd862527066b72ecf\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "StarlingX open source release updates\n\nSigned-off-by: Dean Troyer <dtroyer@gmail.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Traffic control fixes and refresh\n\nThis commit fixes a couple of issues surrounding the main StarlingX\ntraffic control script.  The following has been changed:\n\n- The name of the script has been changed to remove the 'cgcs_'\n  prefix\n\n- It was discovered that traffic controls were not being set on a\n  multi-netted interface shared by aliased management and\n  cluster-host interfaces.  This is because aliased interfaces\n  do not support a 'post-up' command in their network-script\n  configuration file.\n\nDepends-On: https://review.opendev.org/691414\nPartial-Bug: #1839386\nChange-Id: I27c699415d80ff10f5eac162ae3a6be17ec59c7a\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove some firewall rules\"",
        "issue_summary": ""
    },
    {
        "commit_message": "enable k8s huge page feature\n\n- record k8s labels for nodes in puppet\n- enable k8s huge page feature for worker w/o openstack compute label.\n  and disable otherwise.\n- automatically defaults hugepages for worker nodes with openstack\n  compute labels, changes will be applied on the unlock\n- do not allocate any huge pages by defaults for worker nodes without\n  the openstack compute labels and vswitch_type is none.\n  is assigned\n- when changing vswitch type,trigger update grub mem config\n\nStory: 2004763\nTask: 28880\n\nChange-Id: I7636eeb4773fa3fe32671a6bb2870c2e1074a5fa\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Package and Enable Memcached on Controllers/AIO\n\nAdd memcached as a service on controllers/AIOs.\n\nMemcached engineering values:\n1. MAXCONN (-c option) : max simultaneous connections.\n   Set to puppet-memcached default value 8192.\n2. CACHESIZE (-m option): MB memory max to use for object storage.\n   Set to roughly 10% of 8192 = 782.\n3. -t option: number of threads.\n   Set to number of CPU cores.\n\nPuppet creates memcached service as 'disabled' and 'running'.\nThis change make sure memcached service is enabled.\n\nChange-Id: I212924a42b105ba7ecc7f46224b02a50902d59bf\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add support for bonded interfaces configuration on Debian\"",
        "issue_summary": ""
    },
    {
        "commit_message": "downgrade calico to v3.1.4 and add IP autodetect\n\nCalico is being downgraded to v3.1.4 since the latest versions\nare causing readiness and liveness failures.  Based on K8S v12.1,\nCalico should be on v3.3.x, therefore the underlying issue should\nbe investigated further and Calico upgraded once resolved.\n\nThis update also changes the IP autodetect method to ensure the\nproper IP is selected.  This is required for hosts that have\nmultiple IP addresses and the wrong address is being selected\nbased on the default find first address method.\n\nChange-Id: I31c3630bde69160786866d0bc1bc29816892943f\nStory: 2002843\nTask: 22791\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: \"filter\" issue for Python 2/3 compatible code\n\nReplace filter(lambda obj: test(obj), data) with\n [obj for obj in data if test(obj)]\n\nStory: 2003433\nTask: 28380\n\nChange-Id: I69262226bb454319be6b3d2a1c3c64bb7bb3357c\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Openstack clients helm chart\n\nAdd a helm chart for configuring and starting openstack\nclients pods. The pod is configured with admin credentials\nand launched on a controller node.\n\nChange-Id: I4dea49301fd778db9a9ddf900a752831bd455fda\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\nStory: 2005312\nTask: 30557\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Custom ceilometer gnocchi_resources.yaml file\n\nPuppet updates to add custom changes in gnocchi_resources.yaml\n\nCustom changes:\n1. Add vcpu_util under instance resource type\n2. Add more ipmi metrics under ipmi resource type\n3. Add the definition of vswitch resource type\n4. Change initial timespan for ceilometer-low/ceilometer-low-rate\n   archive policy to 7 days\n\nStory: 2002825\nTask: 22871\n\nChange-Id: Ib6610530a1f8bb7c86fd61ab8da8390a26744add\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller to align with helm 2.11.0\n\nAs part of helm upversion from 2.9.0 to 2.11.0\nthe tiller docker image for 2.11.0 should also\nbe updated to align with it.\n\nStory: 2002843\nTask: 26751\nDepends-On: I5afb5847204c62214689f9e246a4c9c0ddaf02b7\nChange-Id: Iba89f89c9689579703354a77cafea33705c3b35d\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add more logging to run docker login\n\nAdd error log for running docker login. The new log could\nhelp identify docker login failure.\n\nCloses-Bug: 1930310\nChange-Id: I8a709fb6665de8301fbe3022563499a92b2a0211\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Integrate openstack clients helm chart in armada\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove a manifest wait when setting up ovs-dpdk pods\n\nThis commit added support for wait in the pods\nhttps://review.openstack.org/#/c/651380\n\nHowever, when ovs-dpdk vswitch type is enabled like this:\n  system modify --vswitch_type ovs-dpdk\nthe wait causes armada to timeout.\n\nThis fix is to re-comment out the wait.\n\nNote: this causes the armada logs to show:\n\nWARNING armada.handlers.wait [-] [chart=openvswitch]:\n \"label_selector\" not specified,\n waiting with no labels may cause unintended consequences.\n\nThis submission will get sanity to pass.  A later submission\nby someone with ovs expertise can update the openvswitch.py\nhelm code to add a meta_override to eliminate the warning logs.\n\nPartial-Bug: 1824829\nChange-Id: I1e08b2dd98d859d0b37612aba3de70d969653cda\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Open vSwitch integration with host and configuration framework\n\nIntegrates the latest Open vSwitch with DPDK into the host management\nand configuration framework and configures the default system\nvswitch type to be ovs-dpdk.\n\nChange-Id: If7ef2975e4b90ce84d170051f332f778a867a873\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restore ceph during system restore\n\nOn AIO and standard setup, ceph osd(s) are running on the\ncontroller nodes. During restore after ceph is operational\nthe backup crushmap needs to be set before creating osd(s).\n\nChange-Id: Id2a7c666fa3670c460f412cfc0184ad0a9f6ccff\nStory: 2004761\nTask: 30522\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create docker filesystem on compute hosts\n\nCreate docker_lv and cgts_vg on on compute hosts, mounted as\n/var/lib/docker.\nProvisioned similarly to nova-local storage.  With Kubernetes enabled,\ncompute hosts will fail to unlock without this storage provisioned.\n\nStory: 2002839\nTask: 22778\n\nChange-Id: I2df5e995437841c965311b23c8cc23e9207e1dc5\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix barbican-api.log rotation issue\n\nThe barbican-api process currently writes directly\nto its logfile. As such, the logrotate config file\nneeds a copytruncate directive to ensure the process\ndoesn't end up writing to the rotated file instead.\n\nChange-Id: I60c8a08ce612fd7f82e05f69b168919b12ab0017\nPartial-Bug: 1836632\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support pci-pt and sr-iov on the same interface\n\nThis update allows both pci-passthrough and pci-sriov network types to\nbe assigned to an interface.\n\nChange-Id: I1e11e02293ada434372bec3689dee1d395877504\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix VLAN creation in duplex-direct mode\n\nIn duplex-direct mode, the ifupdown VLAN configuration tries to\ndisable DAD using pre-up command 'sysctl -wq net.ipv6.conf.%s.accept_dad=0'\nwhere %s is the vlan device and fails because the VLAN is not created yet.\n\nThis happens because Debian's ifupdown tool runs pre-up commands from\n/etc/network/interface.d/ before running /etc/network/if-pre-up/vlan\nscript that creates the VLAN.\n\nMoving the sysctl command to up or post-up won't avoid DAD to run.\n\nThe solution found is to add a VLAN creation command in pre-up before\nthe sysctl command.\n\nSome bonding configuration was also being added to VLANs. Although it\nwas not causing any issues, it was fixed to be added only to the\nbonding interfaces.\n\nTest Plan:\n    PASS: Run new VLAN unit test for duplex-direct mode\n    PASS: Install duplex-direct system\n\nCloses-Bug: 1992832\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: Icbdd113e6051d584959039e85f2dfa078ec0eb2c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set service_credentials/interface for aodh\n\nConfigure aodh to support new gnocchiclient interface.\n\nStory: 2002825\nTask: 22871\nDepends-On: https://review.openstack.org/587418\n\nChange-Id: I5e2c29c3d1b8e66d373a484ced6face094a2694f\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update compute_reserved.conf via a platform manifest\n\nThe /etc/nova/compute_reserved.conf is not updated by the generic\nplatform module compute.pp manifest. This results in some of the\nvalues not being set properly for ovs-dpdk in starlingx.\n\nThis update creates an ERB template for compute_reserved.conf\nand manages the ERB template through the platform compute.pp\nmanifest.\n\nIn addition, the hiera data generation has been added to sysinv\npuppet platform operator.\n\nCloses-Bug: #1789726\n\nChange-Id: I3a005482342532229c66b5bd9f36d581a85d30f7\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change nova instances mount to reflect openstack-helm default\n\nThis changes all references to /etc/nova/instances and mount to reflect\nthe openstack-helm instances_path default of /var/lib/nova/instances.\n\nThe related code in config_controller backup and restore is removed\nsince it is not functionally required anymore.\n\nChange-Id: I7a6c7f17802d7e739aad931bff175ea8d0d8007d\nStory: 2003909\nTask: 27081\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate cert for kube-rootca-update procedure\n\nThis API will offer an option for the user to auto-generate\na new root CA.\n- Manager method to execute new root CA generation\n- Build kubernetes resources to store this CA\n- Conductor RPC API call\n- Kubernetes method to wait for tls secret creation\n- Unit tests\n\nStory: 2008675\nTask: 42697\nChange-Id: Id17f773415885cb8a57565b2d8c754132db64ab0\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implement L3 firewall basic infrastructure for platform networks\n\nThis change adds the necessary sysinv.puppet class to generate the\nhiera data for puppet. It will associate the network type firewall\nwith the desired platform interface.\n\nSince this is an ongoing feature the new firewalls will only contain\nfiltering by protocol, allowing all TCP, UDP, and ICMP to ingress\nthe node (in practice there will be no blocks).\n\nIt is also skipping the DC setups as it will be done in a later phase.\n\nThe OAM network already existed using other implementation (directly\nin puppet) and for now it will not be handled by this implementation.\nA future task will be open to unify the solution.\n\nIf the change 881496 in stx-puppet is merged later, we will generate\nthe hiera_data but there will be no class in puppet to read. It will\nnot break the operation, but I'm adding a Depends-On to prevent this\nsituation.\n\nThe unit tests are already testing all code, using mock and database\nentries.\n\nTest PLan:\n[PASS] install AIO-SX\n[PASS] install Standard with DX+Worker+Storage nodes\n[PASS] modify http_port and check the firewall is reapplied\n       in runtime\n\nStory: 2010591\nTask: 47956\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/881496\nChange-Id: Ia693cd36873188ce4a7f8daba4a909c6e7a27813\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"fix armada stuck at processing osh-openstack-ceph-rgw chart\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv to not create openldap cert on subcloud\n\nOpenldap is not running on subcloud so no openldap certificate\nis created as k8s secret during bootstrap. But current sysinv ldap\nplugin still tries to retrieve the certificate from k8s, causing\nsubcloud unlock to fail.\n\nThis change updated sysinv ldap plugin to not retrieve openldap\ncertificate for subcloud.\n\nTest Plan:\nPASS: subcloud deployment by \"dcmanager subcloud add\"\n\nCloses-Bug: 1988601\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Iafbc5d6ff90735c07ac6850d2f76e9a6230a7a41\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable intel_idle c-states configuration override\n\nIntel_idle driver is currently overriding BIOS c-states settings. To\nset a low latency profile or enable BIOS to drive c-states settings we\nneed to disable an OS level configuration override by setting the\nkernel parameter intel_idle.max_cstate to 0 in worker hosts.\n\nTest Plan:\nPASS: Bootstrap and check if worker c-states are driven by BIOS.\nPASS: Host lock and unlock.\nPASS: System upgrade.\n\nTask: 45367\nStory: 2009886\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I90dd149d375c435e512e69ced6e4e16c03a64a73\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support to handle Kubernetes mutating webhooks\n\nThis commit will add new functions to list and\ndelete 'MutatingWebhookConfiguration' objects\nusing the Kubernetes API.\n\nPartial-Bug: 1890630\nChange-Id: I84cd8afc09c504f7278e57ccce1c089415627620\nSigned-off-by: Rafael Camargos <RafaelLucas.Camargos@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add static route subnets to the firewall if in mgmt or admin nets\n\nThis change adds, for subclouds, the static routes subnets to the\nappropriate firewall, mgmt, or admin network, to restrict the set of\nL4 ports available in distributed cloud setups to be used only from\nthe system controller.\n\nIt collects the static routes that are using the management or admin\nnetworks and adds them to the respective firewall, in a similar way\nthat is done in the system controller.\n\nTest plan:\n[PASS] Install subcloud using management network to connect with\n       system controller\n[PASS] Modify subcloud in runtime to use the admin network instead of\n       management to connect with system controller\n[PASS] Execute a subcloud rehoming operation.\n\nStory: 2010591\nTask: 48185\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/885457\nChange-Id: I2b96c364f0c69d54c08bc5e157f60be335d2b114\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add kubernetes endpoint health-check with timeout\n\nThis checks k8s control-plane component health for a specified\nendpoint, and waits for that endpoint to be up and running.\nThis checks the endpoint 'tries' times using a API connection\ntimeout, and a sleep interval between tries.\n\nThe default endpoint is the localhost apiserver readyz URL\nif not specified.\n\nTest plan:\nPass: Verified during k8s upgrade abort it waits for all control-plane\nendpoints to be healthy.\n\nStory: 2010565\nTask: 48215\n\nChange-Id: I9aae478765cf8aa13b7769127a87e18c33b5fe0b\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Customize sysinv dpdk_elf_file for OVS-DPDK\n\nAs part of Debian migration, the sysinv procedure to check DPDK\ncompatibility for each host interface was also updated in order to make\nit customizable in case one would like to use other virtual switch than\nthe delivered OVS with DPDK support [1].\n\nFor other virtual switches, that might or not rely on DPDK, the ELF\ntarget that sysinv uses to verify interfaces compatibility must be\ncustomizable and the query_pci_id script is already able to use custom\nvalues [2].\n\nThis change adds the required logic on sysinv ovs puppet module such\nthat it is able to customize the hiera data with OVS-DPDK correct ELF\nfile. This is not strictly necessary, since it is configuring sysinv\nwith query_pci_id default ELF value, but would be an example for anyone\nthat wants to use a different virtual switch in the future and needs to\nupdate the sysinv configuration likewise.\n\n[1] https://review.opendev.org/c/starlingx/config/+/872979\n[2] https://opendev.org/starlingx/config/src/branch/master/sysinv/sysinv/sysinv/scripts/query_pci_id#L34\n\nTest Plan:\nPASS - Build sysinv packages\nPASS - Build a custom stx ISO with the new packages\nPASS - Bootstrap AIO-SX virtual system (vswitch_type=none)\n       and ensure the hiera data was not modified neither\n       sysinv.conf was updated\nPASS - Bootstrap AIO-SX virtual system (vswitch_type=ovs-dpdk)*\n       and ensure the hiera data was modified correctly and\n       sysinv.conf was updated accordingly\n* A successful complete installation with ovs-dpdk is still blocked by\na bug that will be solved soon:\nhttps://bugs.launchpad.net/starlingx/+bug/2008124\n\nStory: 2010317\nTask: 46389\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/887102\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I4e33fb86199b3a0de7015aab44a66ef84138fca3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix bonding interface sysconfig pre-up params\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"sysinv: update constant name to be more accurate\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Changing tiller pod networking settings to improve swact time\"\n\nThis reverts commit 4802f1d96a1217124e39a057fd7a05e22177b81c.\nThe change made is no longer necessary due to commit 9a4b6b6a.\nThe playbookconfig code was moved to the ansible-playbooks repo\nand will be removed there.\n\nConflicts:\n\tplaybookconfig/centos/build_srpm.data\n\tplaybookconfig/playbookconfig/playbooks/bootstrap/roles/bringup-essential-services/tasks/bringup_helm.yml\n\tpuppet-manifests/centos/build_srpm.data\n\tpuppet-manifests/src/modules/platform/manifests/helm.pp\n\nChange-Id: I20a38c1ad882bebb6e1208f43d6582bc399e9e87\nRelated-Bug: 1817941\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Prevent platform upgrade unless using latest k8s\n\nThe new/upgraded StarlingX version may or may not support\nprior k8s versions to the latest supported version. It is\nrequired that the active k8s version is the latest supported\nversion before running platform upgrade. A check for that is\nadded in the upgrade health query.\n\nDC subcloud orchestrated upgrade testing:\nPASS: Install system controller: DX + 1 worker with stx 7.0\n      and k8s 1.22.5. Add an AIO-SX subcloud with k8s 1.22.5.\n      Start system controller platform upgrade as a part of DC\n      subcloud orchestrated upgrade. Upgrade health check fails.\n      Upgrade system controller k8s to 1.23.1. Upgrade health check\n      passes. Perform system controller platform upgrade to stx 8.0.\n      After successful platform upgrade, observe load_sync_status and\n      kubernetes_sync_status are out_of_sync.\n      Create a dcmanager upgrade-strategy for the only subcloud.\n      Apply the strategy. Precheck fails. Delete the strategy.\n      Manually upgrade k8s on the subcloud to 1.23.1.\n      Recreate the upgrade strategy and apply it.\n      Precheck passes this time. Upgrade proceeds the precheck.\n\nStory: 2009932\nTask: 44815\n\nSigned-off-by: Kaustubh Dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: I0466e323544ffad819fb5920597a3dc9cea5b10e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Boost sm process priority in VBox environment\n\nThere is an instance that sm claimed its main thread ran sluggish\nas some critical timer run behind the scheuled timing.\nThe issue could prevent the sm from scheduling services.\nAs the result, the controller could fail to enable.\n\nThe issue was found only on vbox labs on AIO-SX, the fix is to boost\nsm process priority to nice value -10 from current -2.\n\nCloses-Bug: 1816764\nDepends-On: https://review.openstack.org/638664\nChange-Id: Iafa17b1c47d65cc7394552ea1c8e7a78398e4869\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Uprev calico from 3.1.3 to 3.2.3\n\nFiles are being updated based on\n https://docs.projectcalico.org/v3.2/getting-started/kubernetes\n\nrbac-kdd.yaml.erb originates from:\n installation/hosted/rbac-kdd.yaml\n\ncalico.yaml.erb originates from:\n installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml\n\nStory: 2002843\nTask: 26751\nChange-Id: I1d88a8f777bcecfc90b2fdc82edeb39f823b6150\nDepends-On: I1e25e17ce865960950e98e5033ccf1e43b3a8611\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Restore ceph during system restore\"\n\nThis reverts commit a03cbf1b678af7939b706d0997624208a4d880a6.\n\nChange-Id: I11c4115f225a65fad8e037711a6164fd5570b3c9\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update get_kube_versions to align with v1.18.1\n\nChange-Id: Ib5b2cb2849a2865b8e31bc37a84d35bb9736f131\nStory: 2006999\nTask: 39341\nDepends-On: https://review.opendev.org/#/c/718568/\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix sysinv for TLS system local CA secret\n\nThe sysinv component of the issue is related to the fact that\nsubclouds are bootstrapped with a 'system-local-ca' of type Opaque,\nbut cert-manager migration playbook replaces it by a TLS one. Sysinv\nmust therefore be able to deal with both of the possible types.\n\nThis requires two changes in config:\n- In the openldap puppet plugin, making it capable of reading both\ntypes for this secret;\n- In conductor, the API called by orchestration while upgrading\nsubclouds will create the secret or replace the existing one matching\nthe current type (Opaque or TLS).\n\nThis changes will match a change in distcloud, where the key will be\nsent alongside the cert always. Conductor will choose when to store\nthe key is required (TLS) or not (Opaque).\n\nTest plan:\n- Deploy SX, DX and DC with both SX and DX subclouds.\n- Change the 'system-local-ca' type from Opaque to TLS using\n  SystemController's 'system-local-ca' data (*).\n- Upgrade SX, DX and DC Systems with SX and DX subclouds from 21.12\n  and 22.06 to designer iso 22.12. (**)\n\nP.S.:\n(*) This was done in previous releases by cert-manager migration\n    playbook and require fixes moving forward in ansible-playbook\n    module:\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/878916\n\n(**) Due to the existence of an upgrade start script called in the\n     'from' side that will overwrite the secret after this code is\n     called, this change will only have effects in upgrades moving\n     forward.\n\nPartial-Bug: 2012435\nDepends-on: https://review.opendev.org/c/starlingx/distcloud/+/882106\n\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\nChange-Id: I2f044c20bcf402735deb5128ef4638238ac7441a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Prevent overwrite of sensible FEC configuration\n\nRegardless these precedent changes:\nhttps://review.opendev.org/c/starlingx/config/+/733724,\nhttps://review.opendev.org/c/starlingx/config/+/761176 and\nhttps://review.opendev.org/c/starlingx/config/+/801055\nthat intended to avoid the overwrite of values in database for FEC\ndevice configuration with the actual (sometimes empty or temporary)\nvalues coming from PCI inventory report, it has been still noticed that\nunder some unexpected reboot such sensible, stored data could be lost.\n\nThis change implements for FEC driver and VF driver the same approach\ntaken for number of configured VFs versus actual VFs introduced by the\nchanges:\nhttps://review.opendev.org/c/starlingx/config/+/791531,\nhttps://review.opendev.org/c/starlingx/config/+/795850 and\nhttps://review.opendev.org/c/starlingx/config/+/808756\n\nFrom now on, the configured FEC driver and VF driver will be available\nas \"extra information\" (in the 'extra_info' field, together with\nconfigured number of VFs) that can be compared with the actual settings\ncollected from PCI inventory for the host.\n\nTest Plan:\n\nPASS: Fresh install of r/stx7.0 with subsequent FEC configuration;\nPASS: Backup & restore of r/stx7.0 after FEC configuration;\nPASS: Patch of r/stx5.0 with previous FEC configuration;\nPASS: Upgrade from r/stx5.0 with previous FEC configuration to patched\n      r/stx6.0.\nPASS: Upgrade from patched r/stx5.0 with previous FEC configuration to\n      patched r/stx6.0.\n\nCloses-Bug: #1966471\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I5e2e6f55856d5eef0a02117a10e36dc9c5aa9dda\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the helm-upload failure on controller-1\n\nThe user \"www\" is used to upload charts by using\nhelm-upload cmd. The root cause for the helm-upload\nfailure is the uid and gid of user \"www\" do not match\nthe uid and gid on controller-0.\n\nCurrently, www is created on controller-0 during ansible\nconfiguration and the uid is set to \"1877\" explicitly.\nOn controller-1, it's created in puppet manifest but\nit doesn't set the uid.\n\nThe user \"www\" should really be added in setup package so\nthat it's created after each node installation and it makes\nsure the uid and gid are consistent on each node.\nThis is done in review https://review.opendev.org/#/c/668034/\n\nHowever, we want to add the uid and gid in puppet as well\nto ensure they are identical on both controllers in case\nthe user is not created during setup rpm installation.\n\nChange-Id: I54035739c15eb0f5254f00f5c22d44925316e81c\nPartial-Bug: 1833603\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix mariadb nginx worker number issue\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Sysinv healthy query API request failed\n\nThe healthy query API request triggers sysinv to query the alarm list.\nThe alarm query is attempted via a sysinv database API which is no\nlonger supported. This results in the REST API request failure.\n\nThis update contains the following changes to address the issue:\n1.Add FM catalog info to sysinv puppet class and manifest\n2.Add service catalog to the user request context\n3.Add a FM client interface to communicate with FM API\n4.Update the health query to retrieve the alarm list via FM client\n\nCloses-Bug: # 1789983\n\nChange-Id: I31b256f6de22fe70cba59b08bf927c8b0ac119ee\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove the Ceph related charts from the stx-openstack application\n\nThis will remove the rbd-provisioner and ceph-pools-audit charts from\nthe stx-openstack application and enable it to use the default platform\nstorage provisioner.\n\nChanges include:\n - Update the rbd-provsioner and ceph-pools-audit helm plugin to provide\n   overrides for the namespace defined by\n   HELM_NS_STORAGE_PROVISIONER (currently: kube-system).\n - Update the cinder, glance, gnocchi, and nova helm plugins use the\n   existing ceph-pool-kube-rbd secret for Ceph client access. This\n   allows removing the pvc-ceph-client-key generation from the\n   rbd-provisioner chart.\n - Add functions to kube_app.py to create/delete the required Ceph user\n   secret for all namespaces of a supported application. This provides\n   support for PVCs within the application's namespace(s). In the case\n   of stx-openstack, this covers any claims made from the 'openstack'\n   namespace.\n - Add functions to kube_app.py to support creating and deleting app\n   specific resources that are not handled by the application charts.\n   Using this enables copying the 'ceph-etc' configmap from the\n   provisioner namespace to the openstack namespace for application use.\n - Add support through the kubernetes API to copy a secret from one\n   namespace to another.\n - Add support through the kubernetes API to get, create, delete, and\n   copy configmaps.\n - Remove the rbd-provisioner and ceph-pools-audit stevedore plugins\n   from the stx-openstack application. Also, re-number the plugins.\n - Update the RBD provisioner to support creating namespaces and Ceph\n   user secrets for additional namespaces other than that which the\n   provisioner is installed. Also, enable PVCs for default\n   namespaces (default and kube-public) against the 'general'\n   storageclass.\n\nChange-Id: I387e315545d2c99a1b6baa90d30bdb2a4e08f315\nDepends-On: I67dba3f1a3a6e7c8169719ee622ddd533c69be31\nStory: 2005424\nTask: 30679\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix yaml.load() calls on sysinv code\n\nAfter upversioning python3-yaml package [1] the yaml.load() method\nsignature started requiring Loader as a mandatory argument [2].\n\nThis change updates sysinv code entries where yaml.load() was called\nwithout specifying a loader, such that now it is compatible with the\nnewest signature of yaml load calls.\n\n[1] https://review.opendev.org/c/starlingx/tools/+/881280\n[2] https://pyyaml.org/wiki/PyYAMLDocumentation\n\nTEST PLAN:\nPASS - Build sysinv package\nPASS - Build a new STX ISO\nPASS - Deploy the new ISO (virtual AIO-SX)\n\nCloses-Bug: 2021672\n\nSigned-off-by: Thales Elero Cervi <thaleselero.cervi@windriver.com>\nChange-Id: I36565dbb9ca65234e596578e2f2e4adeb3e1628a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide a way to enable/disable NTP service\n\nModify NTP puppet manifest to allow enabling and disabling this service.\nThis is required in case user would like to enable PTP service instead.\nAs a result, NTP daemon must be stopped on compute/storage nodes.\nIt is still running on controller nodes, but all the servers are wiped.\nSo, system date cannot be updated by NTP on controller nodes, but\nit is still possible for compute nodes to do an initial time sync.\nAlso, PMON script is moved here from MTCE to follow enabled/disabled path.\n\nChange-Id: I0831487fb14de80edec0ee8df5cc6f23dfb6bae8\nDepends-On: I1ca6045af8c5169220b7332d45b843fdb4960f01\nStory: 2002935\nTask: 24646\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable data interface if vswitch is unaccelerated\n\nstarlingx will by-pass data interfaces configuration by default,\nand this will cause issues such as fail to set the IP for data\ninterfaces when vswitch type is VSWITCH_TYPE_NONE.\nthis patch checks if the vswitch type is VSWITCH_TYPE_NONE,and if so,\npermit it to generate a static configuration for interfaces with an\nifclass of INTERFACE_CLASS_DATA which will allow puppet to configure\nthe data interface after host unlock.\n\nChange-Id: I66d8c7750a68b319bbfec2dcaa5d09aea41fa864\nCloses-bug: #1832697\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet-lint support\n\nThis update adds the tox and zuul configuration to\nrun puppet-lint against the puppet manifests. The\ninitial update ignores all existing errors, which\nwill be cleaned up later.\n\nChange-Id: I293abc2eac6bc6216cbbf6d939c1ba3474fb9384\nStory: 2004515\nTask: 28665\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add a new filesystem for image conversion\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleaning up murano references on bare metal.\n\nMurano is no longer installed and running on bare metal.\n\n - Removed the system parameters related to murano.\n - Removed the upgrade code for murano databases.\n - Removed the murano certificate installation code from CLI\n - Removed the murano puppet code\n - Remove murano keystone user special handling\n - Remove armada/helm code to support enabling murano in horizon\n - Cleaned up comments in the code referencing murano.\n\nStory: 2004764\nTask: 30667\nChange-Id: I4d9f82414043a8cad22220556181b5454572d42d\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Removing unused variables passed to platform/ceph.pp\"\n\nThis reverts commit 2be2af918bfc1f39bff251d42b2060e7a171131d.\n\nThis had side effects in the format of ceph mgr address and there are\npossible other impacts in the other fields of ceph.conf.\n\nA new commit will be provided to fix this task.\n\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/819926\nStory: 2009074\nTask: 44044\n\nChange-Id: I1500f07b04792ccb11df0a11d0a2e9150c8d7a6e\nSigned-off-by: Vinicius Lopes da Silva <vinicius.lopesdasilva@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix HelmRepository CRDs on lighttpd port change\n\nThis commit fixes the problem of changing the lighttpd port in 2 parts:\n- Added a callback to the puppet runtime manifest apply to call a method\nthat will fix the addres on the custom resource if it is already created\non puppet\n- Modified the FluxCDKustumizeOperator to change the helmrepository.yaml\nwhen the app is uploaded/applied/reapplied and removed that\nresponsibility from kube_app.py.\n\nTEST PLAN\nPASS change the http port and check if the HelmRepository resource was\n     updated on kubernetes\nPASS check if the resource definition on base/helmrepository.yaml was\n     uploaded and that helmrepository-orig.yaml was created\nPASS upload the snmp-app and verify that the default port for it's\n     helmrepository.yaml was updated and helmrepository-orig.yaml was\n     created.\n\nCloses-Bug: #1977471\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I4ac50bc7dabdb589a1774f2c13dba1f5d16432c5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add intermediate CA cert monitor and audit\n\nMonitor intermediate CA cert on systemcontroller, starts renew\nsubcloud intermediate CA cert by calling sysinv-api on subcloud.\n\nPassed TCs:\nManually delete subcloud intermediate CA cert on system controller,\nsubcloud gets updated after cert-manager recerates the CA cert.\n\nscheduled audit against subcloud endpoint cert,\n  in-sync and\n  out-of-sync\n\nservice starts up audit against subcloud endpoint cert, when subcloud\nis out-of-synced\n\nsubcloud offline->online audit\nsubcloud unmanaged->managed audit\n\nsubcloud delete -> readd\n\nStory: 2007347\nTask: 40390\nDepends-on: https://review.opendev.org/#/c/738029\nDepends-on: https://review.opendev.org/#/c/740709\nDepends-on: https://review.opendev.org/#/c/740147\nDepends-on: https://review.opendev.org/#/c/744179\n\nChange-Id: I139ecc595de384b79bf4af6671edb9b567b7232a\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Serialize resources intensive operations\n\nOccasionally in some labs, sysinv api is inaccessible following\nAnsible bootstrap. This is due to incomplete sysinv endpoints update\nin keystone database even though puppet returned no errors and\n.config_applied flag is generated.\n\nThis commit:\n  a) serializes the two resources intensive operations\n       - service endpoints reconfiguration\n       - Kubernetes+Helm bringup, images download\n     to avoid the possibility of some database transactions being timed\n     out. Furthermore, checking for endpoint reconfig specific flag is\n     a more reliable method than relying on the general .config_applied\n     flag.\n  b) verifies that the controller is online before exiting the playbook\n\nTest:\n  Verify that installation succeeds in labs that exhibit the issue.\n\nCloses-Bug: 1830085\nChange-Id: Ifb6e77f08a64a80a854faf15c58200e2ba49824a\nSigned-off-by: Tee Ngo <tee.ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update the sysinv Kubernetes upgrade mechanism\"",
        "issue_summary": ""
    },
    {
        "commit_message": "sysinv: reduce minimum allowed vswitch cpu count\n\nThe vswitch CPU count semantic check is being modified to reduce the\nminimum acceptable value from 1 to 0.  This is being done to accommodate\nwork being done to allow a vswitch to share the set of platform CPUs and\noperate in a reduced CPU usage mode rather than require a dedicated set\nof CPUs to run.\n\nStory: 2004357\nTask: 27957\n\nChange-Id: Ic6d9d4b7f46a37e294c4bdcbb2948a7310956d65\nSigned-off-by: Allain Legacy <allain.legacy@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Keystone DB sync - add service puppet module\n\nThis update adds the puppet package for keystone DB synchronization\nservice. This puppet package will be used by controller puppet manifest\nto deploy and configure the synchronization service.\n\nStory: 2002842\nTask: 22787\n\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n(cherry picked from commit 51b20e03eaf13407cd30ab0f4066368cbfe8d568)\n\nConflicts:\n\tcentos_pkg_dirs\n\nDepends-On: https://review.opendev.org/#/c/655727\nChange-Id: I7059800daa053eaf975ad7f02200247d77653926\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Introduce rook ceph\n\n1, add storage backend rook ceph for container-based ceph cluster\n2, create puppet rook.py\n3, update sysinv-agent audit function\n   rook ceph provision disk with bluestore, which create a vg and lv\n   update sysinv-agent audition function, so after rook-ceph applied\n   add rook-ceph created vg named ceph-xxxxx to sysinv-db\n4, update lvm filter for rook-ceph provisioned osd\n\nStory: 2005527\nTask: 39452\n\nDepends-On: https://review.opendev.org/#/c/713084/\nDepends-On: https://review.opendev.org/c/starlingx/rook-ceph/+/716792\n\nChange-Id: If8c1204dd3c7cc25487b2f645ace9aa680d32d59\nSigned-off-by: Martin, Chen <haochuan.z.chen@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create new host_fs CLI and API\n\nCreate the new host_fs CLI commands and the APIs.\n  system host-fs-list\n  system host-fs-modify\n  system host-fs-show\n\nRemove the backup, scratch and the docker filesystems from the\ncontrollerfs CLI as these are being managed by host-fs.\n\nChanged the host\u2019s boot_device and rootfs_device default values\nto the full path name \u201c/dev/sda\u201d. Having \u201csda\u201d only was causing\nget_disk_capacity_mib() to fail to locate the disk.\n\nThe documentation for the API changes will be in another submit.\n\nThese changes were tested in Standard VBOX, Hardware AIO-DX,\nHardware with worker and also storage nodes. Installs and\nconfigration of the labs were done.\n\nPartial-Bug: 1830142\n\nChange-Id: I2ca6adf9c5e9debaf0f4a23e67fadf47f2eaf670\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add pod security admission controller labels\n\nPod security admission controller labels on namespaces are needed\nfor pod security admission controller to know how restrictive each\nnamespace is. This commit adds labels for pod security admission\ncontroller to our namespaces. Pod security admission controller\nis enabled by default on kubernetes 1.23. These labels do nothing\nharmful or beneficial on the lower versions of kubernetes.\n\nTest Plan:\nPASS: Bootstrap system and ensure the pod security admission\n      controller labels are present on our namespaces (kube-system,\n      armada, deployment, and any namespaces created by applications\n      such as cert-manager)\nPASS: Upgrade an old system and ensure the labels are added after\n      the upgrade is finished\nPASS: Try to bring up privileged pods in a baseline namespace,\n      ensure it fails. This was done on a developer iso, since\n      we do not have kubernetes 1.23 ready yet. The same labels\n      were applied to the developer iso's namespaces.\nPASS: Deploy a privileged pod in a baseline namespace in the\n      current kubernetes version. Ensure it is NOT rejected\n\nChange-Id: Ib909eaacb6bba3b5c3327e2f9998a5ecdcb70e9b\nStory: 2009833\nTask: 44764\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AD domain groups and members discovery with sssd\n\nThis commit completes the sssd ldap groups configuration for AD ldap\ndomains.\nGroups and their members will be discovered by sssd service according\nto the ldap search criteria.\n\nTests performed:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The default remote ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd ldap domain service parameters are added and applied at\nruntime in \"/etc/sssd/sssd.conf\".\nPASS: sssd service is successfully started.\nPASS: Verify ldap groups and their members have been successfully\ndiscovered by running getent passwd.\n\nStory: 2009834\nTask: 46679\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I0f5be834922cbe7bd05aaafe7f1a5d57822aa0f7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for shared N3000 NIC with VF upper interfaces\n\nPrevious commit ec8ff34 (Fix for shared NIC with the N3000 FPGA)\nenabled the restarting of any upper interfaces of an N3000 network\ninterface after the FPGA is reset.  This was needed to restore any\nIP configuration and routes on the upper interfaces such as in the\ncase of a shared NIC scenario with mgmt and oam being vlan interfaces\nontop of a shared lower interface.\n\nAn issue can occur with this in the configuration scenario of the\nlower N3000 device being of class PCI-SRIOV, with type 'VF' upper\ninterfaces. The 'VF' upper interfaces are virtual and do not have\na corresponding kernel interface.  This means an error will occur\nwhen puppet attempts to ifdown/ifup them after the N3000 device is\nreset.\n\nThis commit fixes the issue by restricting the upper interfaces in\npuppet's interface fpga config resource to be only of type vlan.\n\nCloses-Bug: #1931461\nChange-Id: I280148883b33c4aef4cfd4a53dff53ca8c3f824e\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix two coredns pod in simplex system\n\nThere are 2 coredns pod in default. For simplex system, use kubectl\nscale cmd to set the replicas to be 1.\nA coredns class is created for coredns configuration. And is configured\nto run as initial configure only, the same as kubernetes::master::init.\n\nTest:\nPass simplex and duplex deploy test, and coredns pod is 1 for simplex\nand 2 for duplex. affinity and nodeselector setting for duplex is kept.\n\nCloses-Bug: 1822880\n\nChange-Id: Ic2bbdc614acc0a04f91bec71691c2ff097218915\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update sysinv for Kubernetes 1.23.1\"",
        "issue_summary": ""
    },
    {
        "commit_message": "For IPv6 use ICMPv6 instead of ICMP in the firewall\n\nIt was detected that the IPv6 firewall was selecting ICMP instead of\nICMPv6 for IPv6 installations. Each protocol have a different number\nand that is used in ip6tables.\n\nThis change selects the correct protocol for IPv6\n\nTest Plan:\n[PASS] Install AIO-DX IPv6\n\nStory: 2010591\nTask: 48007\n\n\nChange-Id: I2be10999a362328fc730728052a9eb34c364af4d\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update network interface name length limit, change VLAN OS interface\nnaming rule, refactor tests\n\nThis commit changes the interface name length limit to a global value\nof 15, which is the maximum value allowed by the kernel. Previously\nit was 10 to allow for the 5 remaining characters to be used as VLAN\nID, but this restriction does not work well, since there are systems\nwhere Linux generate names with more than 10 characters for some\nunderlying ethernet interfaces, causing VLAN interface creation to\nfail anyway. Instead, the OS interface naming convention for VLANs\nwas changed to be the following:\n\n- For platform interfaces, the interface name for the Linux OS\n  continues to be vlanNNNN, where NNNN is the VLAN ID number.\n\n- For non-platform interfaces, the interface name for the Linux OS\n  will be the same as the sysinv interface name (ifname)\n\n- For non-platform interfaces, if the sysinv interface name follows\n  the two patterns that are recognized as VLAN definitions when put\n  in /etc/network/interfaces (vlanNNNN and *.NNNN, like vlan6453 of\n  myinterface.1234), the OS name will be:\n  > For the vlanNNNN pattern, vlan#NNNN\n  > For the interface.NNNN pattern, interface#NNNN\n  This is necessary because such patterns cause ifup to deduce the\n  underlying interface and VLAN ID from the name, and they may differ\n  from the ones specified in sysinv.\n\nThis is achieved by the following changes:\n\n- Add code to handle non-platform interfaces whose name follow the\n  patterns which are recognizable by ifup. Patterns like vlanNNN are\n  replaced by vlan#NNN, and the ones like xxx.NNN by xxx#NNN. Hashtag\n  (#) character was chosen because it's accepted by Linux, but not by\n  sysinv, so it's impossible to generate name collisions. If\n  underscore was chosen, duplicate names might occur (for example,\n  in a host with two distinct interfaces named myif_555 and myif.555,\n  for both of them the OS name would be myif_555, causing a name\n  collision).\n\n- Add the command 'ip link add link <eth_port> name <ifname> type\n  vlan id <vlan_id>' to the pre-up operation for non-platform\n  interfaces. Since the name does not follow a recognized VLAN\n  pattern, there has to be an explicit instruction to create the\n  interface.\n\nAlso, the unit tests for api/interfaces in which fails were expected\ndid not have validations for the error messages, causing 7 of the\ntests to be wrongly evaluated. This commit adds the proper checks for\nerror messages in the test functions, and enforcements in the helper\nmethods. This way, all existing tests are evaluated correctly,\nand any new written tests will fail if the expected error messages\nare not specified.\n\nTest plan\n\nPASS Create a VLAN interface using a name with 15 characters (ok)\nPASS Create a VLAN interface using a name with 16 characters (fail)\nPASS Check OS interface names for non-platform interfaces whose names\n     follow ifup VLAN patterns\nPASS Boot host and check for proper VLAN interfaces creation\nPASS Install duplex-direct system\n\nCloses-Bug: #2003589\n\nSigned-off-by: Lucas Ratusznei Fonseca\n               <lucas.ratuszneifonseca@windriver.com>\n\nChange-Id: I73594f21fc8e0e0ad27a40e21fbb6b7a4c3347d6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use deployment namespace for platform certificates\n\nInstead of using kube-system namespace, we want to use\ndeployment namespace for platform certificates. This commit\nincludes:\n- Creation of namespace during upgrades\n- Changing namespace that cert-mon monitors\n\nDepends-on: https://review.opendev.org/#/c/768241/\n\nChange-Id: Ieac392ed6d560be77327dd9e713fae01b17fda04\nStory: 2007361\nTask: 41165\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Helm repository replication\n\nCurrently, starlingx helm local repository is only configured on\ncontroller-0, that causes stx-openstack application apply failure\nwhen controller-1 is active. This commit is to replicate helm\nrepository on both controllers.\n\nTo ensure charts synchronized on controllers, charts are placed\nin drbd fs(/opt/cgcs/helm_charts). However, lighttpd is configured\nin chroot environment(/www). So the directory /www/pages/helm_charts\nis served by lighttpd as helm repository which means the request\nlooks for charts under /www/pages/helm_charts. In order to access\ncharts outside of the chroot /www, a bind mount is created to mount\n/opt/cgcs/helm_charts on /www/pages/helm_charts. This mount resource\nis managed by SM.\n\nValidated:\n on AIO-DX, Standard\n - system application-upload on controller-0\n   system host-swact controller-0\n   system application-apply on controller-1\n - system application-upload on controller-0\n   system host-swact controller-0\n   reboot controller-0\n   system application-delete on controller-1\n   system application-upload with new tarball on controller-1\n   system application-apply on active controller\n - system application-upload on controller-0\n   reboot controller-0\n   reboot controller-1\n   system application-apply on active controller\n on AIO-SX,\n - system application-upload on controller-0\n - system application-apply\n\nStory: 2004520\nTask: 28343\nDepends-On: https://review.openstack.org/#/c/630764/\nChange-Id: I6c70e0f1866589888a826d8a890a21888c55633e\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix yaml generation for fpga_fec_device_config\n\nRegardless of how many FPGA devices is present, the host\nYAML file always contains one entry.\n\nThis is caused due to a list being overwritten with the\nlast entry instead of being updated.\n\nTo detect similar issues a new puppet unit test was added.\n\nTest Plan:\n    PASS: Run new unit test\n    PASS: Run all unit tests\n    PASS: Verify live system\n\nCloses-Bug: 1970785\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/840909\n\nChange-Id: I80dfaffc470083e09658c49982a2b5fe355962b8\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Swift on controllers\n\nEnable Swift on controllers to provide low-capacity object storage for\nusers who don't want to rely on the Swift-over-Ceph solution.\n\nSwift can be turned on after config_controller by CLI:\nsystem service-parameter-modify swift config service_enabled=true\nsystem service-parameter-modify swift config fs_size_mb=50 (optional)\nsystem service-parameter-apply swift\n\nBy default the filesystem size is 25MB. Users can optionally modify the\nsize before issuing service-parameter-apply:\nsystem service-parameter-modify swift config fs_size_mb=50\n\nStory: 2003518\nTask: 24793\nDepends-On: https://review.openstack.org/595330\n\nChange-Id: Ic28a2c21ee0823ce55b5d1f0e1123a418d20be04\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure gnocchi measures storage on both controllers\n\nMeasures cannot be stored and processed when controller-1 is the\nactive controller because gnocchi measures storage is not fully\nconfigured on controller-1. This commit is to run gnocchi-upgrade\nto configure measures storage on both controllers if the storage has\nnot been configured.\n\nCloses-Bug: 1789287\n\nChange-Id: Iffe7d9f40be049be99755768f7b133d74310635c\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Revert \"Changing tiller pod networking settings to improve swact time\"\"\n\nThis reverts commit a5c236dc522c050b036e638955c03074a2963996.\n\nIt was thought that setting the TCP timeouts for the cluster\nnetwork was enough to address the issues with the helm commands\nhanging after a controller swact. This is not the case. In\nparticular, swacting away from the controller with the\ntiller-deploy pod seems to cause tcp connection from that pod to\nthe kube-apiserver to hang. Putting the tiller-deploy pod back on\nthe host network \"fixes\" the issue.\n\nChange-Id: I8f37530e1f615afcffcf6cb1d629518436c99cb9\nRelated-Bug: 1817941\nPartial-Bug: 1837055\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new configuration for hbs cluster info\n\nStore 2 new system configurations:\n  sm_client_port, and\n  sm_server_port\nto sm db.\n\nStory: 2003577\nTask: 27727\n\nDepends-On: I1a3dbaec78de591ef0de75ef9cafab48bcbb4dbf\n\nChange-Id: I6c4885de92b311932c6934b5cb9acf1a00657bb2\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set neutron dhcp host agent scheduler to host-based\n\nThe neutron network scheduler driver was set to the default dhcp\nagent weight scheduler. This update is to set it to the host-based\nscheduler.\n\nChange-Id: I9d7d62935e0c2c26f22879dd1e249ef8eeeadd5a\nCloses-bug: 1798096\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enabled platform interfaces to add ip address(es)\n\nRemoved network type check in api controller interface to allow platform\ninterfaces to have static address mode in the database.\n\nRemoved broken network type check in api controller address.\n\nLoosened interface-class and network-type restrictions in puppet\ncontroller to allow platform interfaces to have static ip address\nduring system unlock.\n\nAdded unit tests to test puppet interface's new restriction logic of\nget_interface_address_method for ipv4 static mode (valid), ipv6 static\nmode (valid), and ipv4 static mode with network type (invalid).\n\nAdded unit test to ensure one can add an ip address to the static\nplatform interface. Enabled DAD for ipv6 tests. Renamed get_post_object\nparameter interface_id to interface_uuid to eliminate usage\ninconsistency because the former is rejected in the POST request.\n\nCloses-Bug: 1855191\n\nChange-Id: I1f2bc92bb1a97dc4afb21966de4055b12855510a\nSigned-off-by: Thomas Gao <Thomas.Gao@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"AppFwk: Recover apply from helm operation in progress\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix getting kubelet versions during k8s api server down\n\nWhen k8s api server is down, \"system kube-host-upgrade\ncontroller-0 kubelet\" fails during k8s upgrade.\n\nThe fix is to add retry when receives max retries\nexceeded exception, so that k8s upgrade will not fail.\n\nThis handles an exception seen in kube_get_control_plane_versions\nwhen k8s server is down. We now retry the function when there are\nno versions, so that k8s upgrade will not fail.\n\nTest Plan:\nPASS: Manually disrupt kube-apiserver by temporarily removing and\nlater adding the file: /etc/kubernetes/manifests/kube-apiserver.yaml.\nPASS: Tested by manually killing kube-apiserver process.\nPASS: Tested by deleting kube-apiserver pod.\n\nCloses-Bug: 2003360\n\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\nChange-Id: I86c231fdeec16abacf2d1667c21eea471b9ecc9e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove Resource Monitor ; aka rmon, from the load\n\nAll rmon resource monitoring has been moved to collectd.\n\nThis update removes rmon from mtce and the load.\n\nStory: 2002823\nTask: 30045\n\nTest Plan:\nPASS: Build and install a standard system.\nPASS: Inspect mtce rpm list\nPASS: Inspect logs\nPASS: Check pmon.d\n\nDepends-On: https://review.openstack.org/#/c/643739\nChange-Id: I7572a1d0a9cf746abfba3d67352534d96f60c5a7\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet vswitch service dependency on hugepage mount\n\nThe existing dependency for ensuring the hugepage directory was mounted\ndid not ensure that it was executed before the openvswitch service was\nstarted.  This causes an ordering problem under some configurations\nsince the OVS DPDK EAL init will fail since it cannot map the hugepages.\n\nThis update ensures the dependency is defined against the service rather\nthan the generic platform::vswitch puppet class to correct the\nincomplete dependency ordering.\n\nStory: 2003104\nTask: 24862\n\nChange-Id: I2dc9479024bd8363503058c0a9d3034b7c662a07\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config API for Kubernetes cluster access information\n\nIntroduces a new sysinv config API for retrieving the Kubernetes\ncluster access information and security credentials (if configured).\n\nThe information may be used to configure a remote Kubernetes client\nwith the required configuration to use the Kubernetes API with\nadministrative privileges with either client certificate authentication\nor token authentication for the kubernetes-admin service account.\n\nThe following information is available for each cluster:\n  Kubernetes Cluster Name (kubernetes)\n  Kubernetes Release Version\n  Cluster API Endpoint URL\n  Cluster Root CA Certificate\n  Admin Client Certificate\n  Admin Client Key\n  Admin User Name (kubernetes-admin)\n  Admin service account token\n\nStory: 2008630\nTask: 41836\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\nChange-Id: Ib81c7fcc3a577c1209ab3a0dd882552ba3d2b9db\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: Ib4e64858022a39a6143d51985363513ee6019a6d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Attach all nodes to the cluster host network\"\n\nThis reverts commit 891e71e2f2d59bd82c66ca7551534a2b9f300449.\n\nReason for revert: \nIt was detected issues in the Workers provisioning. The cluster-host IP for workers were not provisioned in the addresses DB.\n\nChange-Id: I79b8121628fbeba7757883916aee98b5acdb9e6f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Import subprocess from eventlet.green package\"\n\nThis reverts commit 45d62bf02e309b7c5e3356ff39a28b749fbcc633.\nThis commit is causing issues with partition management due\nto the manage-partitions command not using eventlet. It could\nalso be causing issues with the query_pci_id command for the\nsame reason.\n\nChange-Id: I6088b14d0c860c44b363e2e78903744f88308c6b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Changes to stx-openstack application automatic re-apply behaviour\n\nThe stx-openstack application is no longer automatically reapplied\non node unlock. The new behaviour is handled with a reapply flag:\n\n - When a node is unlocked, or a runtime manifest is applied,\n   overrides are regenerated and compared to\n   their old values.  If there is a difference a reapply flag is raised\n   along with a warning alarm\n - A check was added to the kubernetes audit in the sysinv conductor\n   to check if the reapply flag has been raised and to trigger a reapply\n   if the system is in a stable state (no hosts currently\n   locking/unlocking/booting)\n - This check is also done when a runtime manifest reports success\n\nTest cases:\nAIO-SX, AIO-DX, and Standard:\n - When a lock/unlock is done with no changes the application is\n   not reapplied\n - When a lock/unlock is done after a config change is made the\n   application waits until after the unlock and then triggers a reapply\nSTANDARD\n - Enabled ceph-rgw chart and ensured that the application was reapplied upon\n   config success (likewise for chart disable)\n - If there is a pending reapply, and the user triggers it before the\n   system is stable the reapply flag and alarm are removed\n - Provisioning a new compute node and unlocking it for the\n   first time triggers an application reapply after it comes online\n - App is reapplied when a node is deleted\n - Compute added without node labels and unlocked results in no reapply\n - Compute locked, labels applied, then unlocked results in a reapply\n   pods launch on compute only when labels present (likewise for label removal)\n - Pending reapply flag and alarm persist over a controller swact\n\nChange-Id: I1ae9fdc2afcdf831cf0e7d96f8af14fcb5f6b579\nCloses-Bug: 1837750\nDepends-On: https://review.opendev.org/677845\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable DAD on parent of IPv6 vlan interface\n\nTo disable DAD on IPv6 vlan alias interfaces, the flag must be\nset on the parent of the alias interface instead of the alias itself.\nThis commit handles this case.\n\nCloses-Bug: 1834234\nDepends-On: https://review.opendev.org/#/c/685796/\n\nChange-Id: I1c4e06132ee4f2e6a47cf61952fb73c6576afa69\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix DRBD task affinity to platform cores\n\nThis changes the input format of DRBD resource config option\ncpu-mask so it is correctly parsed in the kernel. The underlying\nbitmap_parse routine expects large hex values delimited every 8\ncharacters with a comma.\n\ne.g., On large-cpu systems, we would see the following kern.log :\n2020-10-13T20:55:34.079 controller-0 kernel: warning [  269.423462] drbd\ndrbd-dockerdistribution: Overflow in bitmap_parse(300000003), truncating\nto 64 bits\n\nThis resulted in drbd_w_* tasks affined to individual cores instead of\nplatform cores.\n\nPartial-Bug: 1900174\nChange-Id: Ib31d3c8b6d59b94f06d172143497678b0c9a7bc1\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ipv6 cluster networking support\n\nAddresses several issues with deploying IPv6 based network deployments:\n  - kubelet node IP assignment for IP version detection\n  - calico upversion to fix router ID generation from hash\n  - calico configuration specific to IPv6\n  - multus configuration specific to IPv6\n  - ansible bootstrap playbook updates to wrap IPv6 addresses\n  - ansible bootstrap updated to use Jinja2 templates\n  - puppet configuration for platform services with IPv6 addresses\n  - IPv4 and IPv6 IP forwarding sysctl setup\n  - docker registry does not support URL encoded IPv6\n  - armada does not support IPv6 address binding\n\nNOTE:\nThe Puppet ERB templates were updated to maintain config_controller\nfunctionality, but the files moved to Jinja2 templates should be removed\nonce config_controller is completely removed.\n\nChange-Id: I815035c679e61250099c74b1239f19bcc72733a0\nDepends-On: https://review.opendev.org/662292\nCloses-Bug: #1830779\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add puppet-etcd module to the puppet manifests\n\nStory: 2002841\nTask: 22784\n\nChange-Id: I92fab74b11155f681448565d53f76d0aad2ff2e7\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix Keystone cache settings\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow compute nodes access to private docker image server\n\nUpdate the NAT firewall rules to allow the compute nodes to pull docker\nimages from our private server operating on port 9001.\n\nThis can be reverted once we have a public server on ports 80/443.\n\nChange-Id: I427e13819eaf54aa6dd5248056494d4f9a825f51\nStory: 2002843\nTask: 27031\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Updated hieradata with label value\n\nplatform::kubernetes::params::host_labels\nin hieradata contains all the labels assigned\nfor a node but does not contain the values\nfor that keys.\n\nSome label values are needed in the kubernetes\npuppet code, e.g :\n('openstack-compute-node' in $host_labels) will\nnot check if the key openstack-compute-node has\nthe value enabled or disabled.\n\nThis commit fixes the bug by also providing access\nto the values in the hieradata.\n\nPartial-bug: 1940042\nChange-Id: Iefbcb1cde7db27250d9a3629472810d20f208248\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify default lldp system description\n\nThis commit modifies the default system description configuration\nfor the lldpd daemon to remove a product specific name and version.\nInstead, the OS name and version (default used by lldpd) will be\nused. For example, for a CentOS host, the system description would\nlook something like:\n\nCentOS Linux 7 (Core)\n\nFor security reasons, we also pass the -k option to the\nlldpd process in order to prevent the specific kernel version to\nbe broadcast.\n\nChange-Id: I2a15481b95d1e37bc2f4ae053a10c3289dd2f400\nCloses-Bug: #1796112\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Implementation of cli command  and API to enable/disable apparmor module\n\nApparmor can be enabled/disabled on a host using below commands\nsystem host-lock <host name>\nsystem host-update <host name> apparmor=enabled/disabled\nsystem host-unlock <host name>\n\nmanifest is applied at runtime as a part of host-update. User need to lock the host before\ncalling the host-update command\n\nTest Plan:\nPASSED: Check that apparmor is disabled  after bootstrap on AIO-SX\nPASSED: Enable the apparmor module on a host  using host-update command and verify if it is enabled after reboot : AIO-SX\nPASSED: disable the apparmor module on a host where it was already enabled.: AIO-SX\n\nStory: 2010310\nTask: 46696\n\nSigned-off-by: jmishra <jagatguruprasad.mishra@windriver.com>\nChange-Id: Icaa5c95d32bc43faf6c7da50a566bc92a8ec42b2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "rbd-provisioner storage class exclude 3rd monitor\n\nrbd-provisioner's storage class is referencing all configured\nCeph monitors. When a compute node is deleted and another one is\nconfigured to run the 3rd ceph-mon then the storage class\ndefinition is updated as expected in the overrides but then\nplatform-integ-apps fails to re-apply because storage class is\nimmutable (you would need to remove the app first then apply it)\n\nTo avoid this issue exclude 3rd monitor from rbd-provisioner's\nstorage class when generating the overrides.\n\nChange-Id: I546dfc255c5ec362169d23f1804e70b805b2a316\nCloses-bug: 1843569\nSigned-off-by: Daniel Badea <daniel.badea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Set applyOnForward to False for platform firewalls\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add kubernetes health checks\n\nAdding kubernetes health checks when a kubernetes upgrade is\nstarted to ensure the kubernetes cluster is healthy. Also\nadding a new \"system health-query-kube-upgrade\" command to\ndo the health checks without starting a kubernetes upgrade.\n\nChange-Id: Ib3a491e25a6cb523cfd9f08e74879e5c0a25d4f7\nStory: 2006781\nTask: 37583\nDepends-On: https://review.opendev.org/#/c/700197/\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix race condition during certificate key regeneration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix sysinv pep8 tox failure\n\nIssues:\n    - F401: 'REGION_ONE_NAME' imported but never used\n    - E302: Expected 2 blank lines, found 1\n    - F841: Local variable 'kspass' is assigned to but never used.\nFixes:\n    - Removed the unused import.\n    - Added a blank line.\n    - Removed unused local variable 'kspass'.\n\nStory: 2002888\nTask: 23097\n\nChange-Id: Ib2fa3b51e7570e3255edbf426b789cbeb59900ea\nSigned-off-by: Mathieu Robinson <mathieu.robinson@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "delete nginx-ports-control chart before stx-openstack re-apply\n\nSeveral cases might trigger stx-openstack re-apply, for example,\nlock and unlock standby controller. During the re-apply process,\nnginx-ports-control helm chart has to be removed first, otherwise\nre-apply process will be blocked because a previously applied GNP\n(GlobalNetworkPolicy) in nginx-ports-control chart has existed.\n\nCloses-Bug: 1834070\n\nChange-Id: I10805f052914a5157edc9b53699a94a2c7fd7953\nSigned-off-by: yhu6 <yong.hu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding back kvm_advance_timer service\n\nOn compute nodes with openstack-compute label, the\nkvm_timer_advance_setup.service should be enabled.\n\nThe puppet service runs before kubelet.\n\nChange-Id: I84d6c6234d4bd1c8c0c52f5735d7520377b2fe80\nPartial-Bug: 1823751\nDepends-On: https://review.opendev.org/#/c/672124\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support trap_server_port configurable\n\nAdd parameter for trap_server_port to allow sysadmin to\nconfigure snmp trap server port number through\nuser helm override.\n\nStory: 2008132\nTask: 41547\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\nDepends-On: https://review.opendev.org/769732\nChange-Id: Iac33ae11412852b59f6375abccb81988e85040e1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure admin endpoint cert always applies to both controllers\n\nPrevious commit incorrectly skip applying admin endpoint cert when\nthe cert is identical to the one exists on active controller. This\ncauses the certificate is not applied to controller-1 when it is\nunlocked the 1st time, and potential some other cases to the standby\ncontroller.\n\nThe change ensure the admin endpoint certificate is always applied.\n\nStory: 2007347\nTask: 40624\n\nChange-Id: Idfb0063f765fbcde70bbd116ff953564180dcd98\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make collectd startup dependent on networking Anchor\n\nStarting collectd too early in the manifest apply is seen\nto occasionally fail due to a dependency configuration on\nhostname resolution in FQDNLookup not being complete.\n\nThis is fixed by making collectd startup have a hard\ndependency on platform::networking by-way of a manifest\nrequire Anchor.\n\nAs well, to handle the DOR case when controller manifest\nis not executed, this update also ensures that collectd\nand influxdb services are enabled in its manifest base\nclass so these processes are auto started by init.\n\nSince influxdb is a controller only service it is removed\nfrom non controller load types.\n\nThis issue is fixed by the following multi-git changes.\n\nstx-metal:\n   Filter influxdb out of storage and compute only loads.\n   No real inter git merge dependency\n\nstx-integ:\n   Add startup Before=pmond dependency\n\nstx-config: This Update.\n   Move collectd config and startup to manifest apply post stage\n   Move influxdb config and startup to manifest apply post stage\n\nTest Plan:\nPASS: Build iso\nPASS: Verify install storage system and collectd startup\nPASS: Verify influxdb and extensions excluded in non-controller loads\nPASS: Verify collectd starts properly on all nodes (CC,DOR,UNLOCK)\nPASS: Verify influxdb starts properly on controller nodes (CC,DOR,UNLOCK)\nPASS: Verify collectd pmond process monitoring and recovery\nPASS: Verify influxdb pmond process monitoring and recovery\nPASS: Verify collectd statistics storage and fetch to/from influxdb\nPASS: Verify Install AIO DX and verify collectd and influxdb startup\nPASS: Verify Storage system DOR\nPASS: Verify AIO DX DOR\n\nChange-Id: Idff6382d835289f5986e98e3b4ee6e9c7a960287\nCloses-Bug: 1797909\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize to /\n\nAdd support to to modifying / logical volume group\nthrough the system host-fs-modify command\n\nTest Plan\nPASS - Install ISO and resized root logical volume.\nPASS - Perform Backup/Restore with optimized restore\nPASS - Extend root volume and reboot, verify that the\n       size of the volume remains the same.\nPASS - Peform system host-lock/host-unlock, verify that\n       the size of the volume remains the same.\nPASS - Verify Failure if user tries to extend beyond\n       available space in the volume group\n\nResults - https://paste.openstack.org/show/bkpGGPEYkDZHQJkwS1Ca/\n\nStory: 2009303\nTask: 47231\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/872324\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I6912ad87789b59d26bce8c6eba152e1868a2750f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Config support for nohz_full on standard workers\n\nThis commit ensures the nohz_full configuration on standard workers by\ndefault. If there is a need to keep the existing behavior on standard\nworkers a label must be added to it in order to disable the nohz_full\nconfig.\n\nStory: 2010062\nTask: 45514\n\nTest Plan:\nPASS: Bootstrap a standard worker with starlingx master and check if\n      parameter was set.\nPASS: Bootstrap a standard worker with label configured in dm config\n      file.\nPASS: Remove label and check if the parameter was unset.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I53f9863dd7c13d3f91e8cd1caed21a8646a5da89\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Aborting kubernetes upgrade process for AIO-SX\n\nThis change is to introduce a new system command\n\"system kube-upgrade-abort\" which will abort the k8s upgrade\nprocess for an AIO-SX.\n\nThe expected sequence on AIO-SX is:\n - system kube-upgrade-start <target-version>\n - system kube-upgrade-download-images\n - system kube-upgrade-networking\n - system kube-host-cordon controller-0\n - system kube-host-upgrade controller-0 control-plane\n - system kube-host-upgrade controller-0 kubelet\n - system kube-host-uncordon controller-0\n - system kube-upgrade-complete\n - system kube-upgrade-delete\n\nFor system kube-upgrade-start and system kube-upgrade-download-images,\nwhen we abort using system kube-upgrade-abort will just change the\nupgrade state as aborted since it doesn't affect anything.\n\nFor below mentioned sequence on AIO-SX we can abort the k8s\nupgrade at any stage here we call a puppet class\n'platform::kubernetes::upgrade_abort' which will drain the node,\nstop the kubelet, containerd, docker and etcd services, restore the\netcd snapshot, static manifests files and start the etcd, docker and\ncontainerd services, update the bindmount, start kubelet service\nand wait for control plane pod health.\n\n - system kube-upgrade-networking\n - system kube-host-cordon controller-0\n - system kube-host-upgrade controller-0 control-plane\n - system kube-host-upgrade controller-0 kubelet\n - system kube-host-uncordon controller-0\n\nThe initial Kubernetes version control plane state is stored in a backup\ncontaining etcd snapshot and static-pod-manifests. This backup is taken\nwhen 'system kube-upgrade-networking' is issued.\n\nThe \"system kube-upgrade-abort\" command will only be available prior to\nthe \"system kube-upgrade-complete\".\n\nTest Case:\nAIO-SX: Fresh install ISO as AIO-SX. Perform k8s upgrade v1.24.4 -> v1.25.3\nPASS: Create a test pod, before the etcd backup and delete the pod\nafter taking snapshot run the command \"system kube-upgrade-abort\",\nverify test pod is running after etcd is restored successfully.\nPASS: Verified by performing initial bootstrap and host-unlock prior to\nbootstrap.\nPASS: Verify kubeadm and kubelet version restored successfully to the\nfrom version after k8s upgrade abort.\nPASS: Verify static manifest are restored successfully after k8s\nupgrade abort.\nPASS: Verify /etc/fstab content updated successfully after k8s upgrade\nabort.\nAIO-DX:\nPASS: \"system kube-upgrade-abort\" will raise an error\n'system kube-upgrade-abort is not supported in duplex'.\n\nStory: 2010565\nTask: 47826\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/880263\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/883150\n\nChange-Id: Ia18079c5f17f86fb73776bfad124c72a0a3be6ad\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion Armada SHA to be a newer image\n\nUsing SHA: af8a9ffd0873c2fbc915794e235dbd357f2adab1\nwhich was built and tagged on April 9, 2019.\n\nThe previous Armada SHA was from Sept 2018.\n\nThe manifest.xml is updated to not generate armada warnings\nfor libvirt, openvswitch, nova and neutron.\nThe warning was:\n  \"label_selector\" not specified,\n  waiting with no labels may cause unintended consequences.\n\nStory: 2005198\nTask: 30436\nChange-Id: I97b633d9e6e1e4574e25dc8b69500faae4b4a809\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Cleanup of horizon's local_settings override in armada manifest\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove sha1 based kex algorithms\n\nThis patch hardened server configuration including removing sha1 based\nkex algorithms from the manifest template that puppet uses to generate\nthe configuration file sshd_config.\n\nIt also removed hardcoded sshd_config and ssh_config from repo, replaced\nthem with patches to openssh that harden both server and client\nconfiguration.\nThis is particularly to address the requirements that the system should\nbe hardened from the very first boot up (before it is configured by\nmanifest apply)\n\nIt also removed old obsolete patch files in openssh directory to avoid\nconfusions.\n\nChange-Id: Ic34bebfd88f46cade3596d920a00311f9aa5980f\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "change fm-rest-api helm endpoint service type to 'faultmanagement'\n\ncontainer fm-rest-api endpoint service type should be same as\nplatform fm-rest-api endpoint service type.\n\nStory: 2004008\nTask: 33501\n\nChange-Id: Iccb0f0544f388ca51f015c6b11e49f8058db4829\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sssd puppet plugin implementation in sysinv\n\nThis commit updates sssd service parameter configuration in the sssd\npuppet plugin of the sysinv component. New parameters have been added\nto local domain and to nss and pam services configuration.\n\nTest Plan for Debian:\nPASS: SX system bootstrap, unlock successfully.\nPASS: sssd.conf configuration data gets added in secure_system.yaml.\nPASS: sssd service starts successfully.\nPASS: Add new user successfully.\nPASS: The new user gets cached in /etc/passwd.\nPASS: New user can ssh successfully from remote server using sssd.\n\nTest Plan for CentOS:\nPASS: SX system installs successfully.\nPASS: Add ldap user and search users are successfull\n\nStory: 2009834\nTask: 46014\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: If5c3812f2a3682e995107c9c09b90fb5fcb6db41\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support puppet's network configuration for Debian\n\nWith the support for both CentOS and Debian, the puppet hiera file\ngeneration for network needs to yield different sets of options.\nCentOS uses sysconfig file format and Debian uses ifupdown file\nformat.\n\nSince this change is focused on providing basic network support,\nnot all configuration variants are supported, for now only physical\nand VLAN interfaces are creating a valid config in\n/etc/network/interface. Bonded interfaces aren't adding all necessary\nparameters needed to be supported (and it requires the addition\nof package ifenslave on the distro). Static routes are also working,\nbut they require the package ifupdown-extras.\n\nThe test of the generated puppet configuration was done using ifup\nand ifdown commands from the ifupdown package\n\nTest Plan\nPASS: the creation of valid physical interface config\nPASS: the creation of valid VLAN interface config\nPASS: installation on CentOS\n\nStory: 2009101\nTask: 44535\n\nSigned-off-by: Andre Fernando Zanella Kantek <AndreFernandoZanella.Kantek@windriver.com>\nChange-Id: I0094466db3b8b7c94dfb8d014d8cea98d50214a6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add lockout security compliance options for keystone\n\nThis change added support of two login fail lockout security\ncompliance options for keystone on Debian.\n\nTest Plan for Debian:\nPASS: package build, image build\nPASS: system bootstrap, keystone is running by systemd\nPASS: controller unlock, keystone is running by SM\nPASS: \"openstack endpoint list\" return correct list\nPASS: check the following two security compliance options are\n      set correclty in /etc/keystone/keystone.conf:\n      lockout_duration=1800\n      lockout_failure_attempts=5\n\nTest Plan for CentOS:\nPASS: system bootstrap, keystone is running by systemd\nPASS: controller unlock, keystone is running by SM\nPASS: \"openstack endpoint list\" return correct list\nPASS: check the following two security compliance options are\n      set correclty in /etc/keystone/keystone.conf:\n      lockout_duration=1800\n      lockout_failure_attempts=5\n\nStory: 2009101\nTask: 44784\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I0c26101cec3a2bf34402ef364ba20717ed10b41b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable application upgrades for 22.12\n\nThis commit allows the kubernetes application upgrade script\n65-k8s-app-upgrade to run on 22.12\n\nCloses-bug: 1996944\nDepends-on: https://review.opendev.org/c/starlingx/config/+/865856\n\nSigned-off-by: Luis Eduardo Bonatti <LuizEduardo.Bonatti@windriver.com>\nChange-Id: I1d8f2ebafb420a6b7c7cbe809286494e2db128f7\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove puppet SM calls for obsoleted services\n\nThe SM database had several services removed.\nThis change removes the calls to disable and deprovision those\nservices that no longer exist.\n\nStory: 2004764\nTask: 30247\nChange-Id: I8834803b5ebbd5f41af9af7fab3f225da4cecb99\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable Baremetal Libvirt and Enable baremetal horizon services\n\nAll openstack services except keystone and horizon need to be\ndisabled in a kubernetes configuration. This task re-enables openstack\nhorizon dashboard as a baremetal service, and in a kubernetes config, it\ndisables the platform libvirt services which run on compute nodes or\non controller hosts in an AIO config\n\nStory: 2002876\nTask : 26168\n\nChange-Id: I20e938ca83149474bf2c507062a0e65b69f005bc\nSigned-off-by: Shoaib Nasir <shoaib.nasir@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Restart collectd at the end of configuring cpu\n\nRestart collectd after configuring cpu to ensure collectd loads\nupdated configuration\n\nCloses-Bug: 1837424\nChange-Id: I10e0f431dfd01637f38319d506559aa3927f11ff\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix stuck config out of date alarm on worker nodes\n\nThis commit removes an argumment passed to the function that applies\nthe runtime puppet manifests. Problem with it is that we already pass\nit in the config_dict and that it is very easy for developers to skip\nthis argument.\n\nSo, if we don't properly pass the list of hosts to\n_config_apply_runtime_manifest it updates the puppet manifests for\nall hosts of given personality when force=True is used, instead of\nonly doing it for the intended host.\n\nThis commit also makes sure that we do not apply reboot required\nconfigs at runtime by making sure that config_uuid does not have\nthe reboot required flag set.\n\nChange-Id: I378cfc798b18920b58c8e453a28ef040167416d1\nCloses-Bug: 1830222\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Function to get k8s intermediate patch versions that require upgrade.\n\nReturns the list of all k8s \"v<major>.<minor>.<patch>\" versions that\nare greater than the current_version and up to the final target_version,\nkeeping only the highest patch version for a given minor version.\n\nWe multiple available Kubernetes versions, including some minor versions\nwith the same minor version and multiple patch versions.\n\nFor example, with the available versions of ['v1.21.8', 'v1.22.5',\n'v1.23.1', 'v1.23.7', 'v1.24.4']:\n- If current version is v1.21.8 and target version is 1.24.4,\n  we would want the output to be ['v1.22.5', 'v1.23.7', 'v1.24.4']\n- If current version is v1.23.1 and target version is 1.24.4,\n  we would want the output to be ['v1.24.4']\n\nTest Plan:\n\nPass: Verified by passing current version as 'v1.21.8' and target\nversion as 'v1.24.4' got output as ['v1.22.5', 'v1.23.7', 'v1.24.4'].\nPass: Verified by passing current version as 'v1.23.1' and target\nversion as 'v1.24.4' got output as ['v1.24.4'].\n\nStory: 2010565\nTask: 47270\n\nSigned-off-by: Boovan Rajendran <boovan.rajendran@windriver.com>\nChange-Id: I142ea8b95080b039f3b314ca0ab57d8ea76bcded\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enhance 65-k8s-app-upgrade.sh script robustness.\n\nBefore this change, during an upgrade, this script will\nrun and upgrade/apply  any applications present in the\napp folder to the appropriate version.  However, the script\nitself will only try once with each app.  For whatever\nreason, if the app fails to apply, upload, etc.. then\nthis script will exit with a non-zero return code and\nthe upgrade activate step will fail.\n\nThe changes in this script are meant to make a retry\nattempt in the cases of upload, apply or removal\nfailures. Or, in the case, if the script is interrupted,\nand run for a second, third (etc) time and finds an\napplication in a failed state, then it would also\ntry to retry the appropriate command.\n\nTest Plan:\nPASS - AIO-SX Full Install.\nPASS - Start Script With App already in apply-failed state.\n  1. Copy 65-k8s-app-upgrade.sh into the home folder and\n     modify permissions.\n  2. Re-apply the platform-integ-app with\n     system application-apply platform-integ-app.\n  3. Before the app can apply, restart the sysinv-conductor -\n     sudo sm-restart service sysinv-conductor.  This will\n     force the app into an apply-failed state.\n  4. Run: 65-k8s-app-upgrade.sh 21.12 22.12 activate.\n  5. Observe in logs that the script detects that the app\n     is in a failed state, retries to apply it, and detects\n     that the app finished applying and is in an applied\n     state.  Use: tail -f /var/log/platform.log.\n\nPASS - App ends up in apply-failed state while script is already\n     running. The script will wait on an app in applying state, if\n     it detects that the result is apply-failed then it should\n     retry the application-apply command. Verify that this behavior\n     happens correctly.\n\nCloses-Bug: 2035402\nChange-Id: I5dd40127f44a0074be0303469f0c2021da128c36\nSigned-off-by: Joshua Reed <joshua.reed@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv support for kubernetes to ignore isolcpus\n\nBased on the kube-ignore-isol-cpus host label which will generate\n/etc/kubernetes/ignore_isolcpus, also adjust the k8s_all_reserved_cpuset\npassed to puppet if the label exists.\n\nBasically if the label is set, we want to pass the isolated CPUs to\nkubernetes as though they were regular application CPUs.\n\nStory: 2008760\nTask: 42167\nChange-Id: I065ca40fbd3395bf86a02a7822c1f9d46ee3fe06\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove vswitch weigher\n\nRemoved vswitch weigher and platform monitor entries from\nnova_config.metrics, as they are no longer needed.\n\nStory: 2004312\nTask: 27879\n\nChange-Id: I1bcb34363d1f2c1d1772741644d564a5b73f2f89\nSigned-off-by: Daniel Chavolla <daniel.chavolla@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Truncate drbd cpu mask string to 31 bytes\n\ndrbd configuration has cpu mask which is affined\nto use cpu core. drbd process needs to be assigned\nto cpu for platform function.\nInternally this assing is done by parameter\n\"cpu-mask\" of the command \"drbdsetup\".\nIn the code, the size of cpu-mask\" is defined\n32 bytes.One byte is used for the \"end-of-string\"\ncharacter, and a comma is required after every\n8 characters of text, which leaves us 28 bytes\nto represent the bitmask. Since each character of\ntext represents 4 bits of bitmask but requires\none byte to store, this allows us to represent\na bitmask of at most 112 CPUs, (or 56 cores\nwith HT enabled).\n\nIt is possible to assign platform function by\nlogical cpu id and set drbd cpu_mask=0 after\ntruncated if assign it to cpu 126 and 127 for\nexample. To avoid this, we will reject to configure\nif platform function is assigned larger than\n112 logical cpu. So that user can notice to\nneed to configure differently (without truncate).\n\nLaunchpad:1900174 made this assignment. But,\nit is overflowed for 128 core cpu (64 cpu with HT)\nbecause cpu-mask string is;\n\"ffffffff,ffffffff,ffffffff,fffffffff\" (36 bytes)\nThis launchpad also indicated comma is necessary\nevery 8 bytes to parse cpu-mask string properly.\n\nThis fix is:\n1. Set cpu-mask=0 if cpu function is all for\n   platform (\"cpu-mask=0\" means use all cpu)\n   (In case of controller in DC/STD)\n2. Truncate to 31 bytes cpu-mask string if\n   cpu-mask string is more than 31 bytes\n   (Not 32 bytes as last bytes is string stop bit)\n3. Calculate cpu-mask if cpu-mask is less than\n   31 bytes (current implementation)\n\nCloses-bug: 2012639\n\nTest Plan:\nPASS: Install all platform function cpu with 128 cpu\n      - Finished successfully\n      - Set cpu-mask = 0 in configuration\n      - \"Set drbd cpu mask=0\" is logged\nPASS: Install mixed function cpu with 128 cpu\n      - Finished successfully\n      - Calculate cpu-mask properly in configuration\nPASS: Modify cpu function with \"system host-cpu-modify -c\"\n      (Modify with more than 31 bytes mask)\n      - Command shows error message\nPASS: Modify cpu function with \"system host-cpu-modify -c\"\n      (Modify with less than 31 bytes mask)\n      - Command finished successfully\n      - Function is assigned properly\n      - Calculate cpu-mask properly in configuration\nPASS: Modify cpu function with \"system host-cpu-modify -p\"\n      (Modify with more than 31 bytes mask)\n      - Command shows error message\nPASS: Modify cpu function with \"system host-cpu-modify -p\"\n      (Modify with less than 31 bytes mask)\n      - Command finished successfully\n      - Function is assigned properly\n      - Calculate cpu-mask properly in configuration\nPASS: Install all platform function cpu in small cpu\n      - Finished successfully\n      - Set cpu-mask = 0 in configuration\n      - \"Set drbd cpu mask=0\" is logged\nPASS: Install mixed function cpu in small cpu\n      - Finished successfully\n      - Calculate cpu-mask properly in configuration\nPASS: Modify cpu function with \"system host-cpu-modify -c/-p\"\n      - Command finished successfully\n      - Calculate cpu-mask properly in configuration\n\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\nChange-Id: I0e7e6e50fec0d9ac4585b5ccedc589b0d210baa2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ANSIBLE Bootstrap changes for System Controller\n\nThis update contains the following misc. config changes to\nsupport ansible bootstrap for system controller.\n\nCreates deps model for dcmanager and dcorch puppet modules.\nCreates a system controller postgres run time manifest which is\napplied upon the creation of initial controller host or replay after\nthe distributed cloud role has been changed.\nThe patch_vault file system is created during the first controller\nunlocked.\nAnd allows the dc role to be modified during bootstrap.\n\nChange-Id: Id7b416274b2a854c469bfdca7448bf1ddea639d7\nStory: 2004766\nTask: 35650\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Armada manifest for the stx-openstack application\n\nAs part of integrating the use of airship-armada into StarlingX we\nwant to add a first cut at the armada manifest for our version of\nOpenStack.\n\nFor this to be useful there are a number of changes that also need\nto be made in the various chart overrides, they should be coming\nshortly.\n\nWe also want to lay the groundwork for other items that will end\nup living in this subdirectory, hence the README and placeholder\nfiles.\n\nChange-Id: I73aac4121a5d46cc8647d82364a28aa6dbcd8b1c\nStory: 2003908\nTask: 27505\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"fix two coredns pod in simplex system\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch 'starlingx/master' into HEAD\n\nChange-Id: I05f7a6ab97c89415b6996e3ad3c4e400d45c2e5d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Increase rabbitmq pod probe period from 10 to 30s\n\nTo reduce cpu usage on platform cores (especially on AIO), reduce the\nfrequency of the rabbitmq readiness and liveness probes from every 10s\nto 30s.  These probes both run the command \"rabbitmqctl status\" which\nseems to have significant cpu impact.\n\nFor reference, the platform rabbitmq process status check runs every\n20s.\n\nPartial-Bug: 1837426\nDepends-On: https://review.opendev.org/#/c/677041\nChange-Id: Ie8eea35b9ed268f4156d1cdc884a6d5004e87018\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Neutron Router Rebalancing on L3 Agents\n\nTurn off router_auto_schedule so as not to conflict with\nrouter reschedule/rebalance.\n\nChange-Id: I710a698ebb31d48060903fb3966fa379b56ad190\nStory: 2003857\nTask: 30115\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision/deprovision dbmon dynamically\n\nThis change is to provision and deprovision dbmon service on an\nAIO/DX or distributed cloud systemcontroller after stx-openstack\napplication is active.\n\n1. Add active state to kube-app.\nA kube-app is active after the first time it is applied successfully,\nand deactive when it is being removed.\nAn util function is provided to access the active state of a given\nkube-app.\n\n2. apply stx_openstack runtime manifest to provision/deprovision\nbased on the active state of stx-openstack application\n\nStory: 2005486\nTask: 30922\n\nChange-Id: Icbe63de21f27d7a804715ec72a04d1aba3910b09\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create SSSD user home directory per domain\n\nIn a multi domain SSSD configuration there is always the potential\nthat the same user name gets discovered from different domains.\nCurrently, users that have the same \"common name\" in multiple AD\ndomains, like \"guest\" or \"administrator\" will be mapped in stx\nplatform to the same home directory name: \"/home/<user_name>\".\nAdding the domain to the user home directory path:\n\"/home/<domain_name>/<user_name>\" is resolving this conflict.\n\nTests performed:\nPASS: The local ldap domain configuration gets populated\nin sssd.conf.\nPASS: sssd service is successfully started.\nPASS: Verify that AD domain users get configured by SSSD with a\nper domain home directory path.\nPASS: Users discovered by SSSD can successfully ssh to the stx\nplatform and their home directory is created with the correct path\nat first login.\n\nStory: 2009834\nTask: 46920\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ia611aed9d164deac80f2c0f5979709ba0fa740e1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Implementation of cli command  and API to enable/disable apparmor module\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix an issue with libvirt pods not starting\n\nThe cgroup folder has been changed by commit:\nhttps://review.openstack.org/#/c/648511/\n\nAs a result the new hugepage folder was being created at:\n/sys/fs/cgroup/hugetlb/k8s-infra\nHowever the helm-chart default location was still looking at:\n/sys/fs/cgroup/hugetlb/kubepods\n\nThe k8s-infra label for the cgroup folder has now been added\nto the armada manifest, and libvirt pods are able to launch.\n\nCloses-Bug: 1824567\nChange-Id: I3f420dc4643b37f56cec3b38449ca9b0d3b8fe4f\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"configure kubernetes to use containerd as CRI\"\n\nThis reverts commit c229d8ac7e893ecce406cb15c8d1e35988e101e2.\n\nReverting due to https://bugs.launchpad.net/starlingx/+bug/1859686\n\nChange-Id: I6534fb83c202827aaf1365d92ea6acbf4e531d84\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create cluster-host-ipAttach all nodes to the cluster host network\n\nProblem: Nodes in the cluster are attached to the management\nnetwork instead of the cluster host network.\n\nAccording to StarlingX documentation, all nodes in the cluster\nmust be attached to the cluster host network.\nIt is necessary to create the cluster-host for worker or\nstorage node before the node_ip is required and just update\nthe interface_id field of addresses database when the node's\ninterface is being created.\n\nTest plan ( Debian only )\nPASS Installed 2+1 system using IPv4\n     (2controllers, 1 worker)\nPASS Installed 2+1 system using IPv6\n     (2controllers, 1 worker)\nPASS AIO-SX system using IPv4\nPASS AIO-SX system using IPv6\nPASS AIO-SX system external access to a Kubernetes service\nPASS AIO-DX system using IPv4 and tested traffic between PODs\nPASS AIO-DX system using IPv6 and tested traffic between PODs\nPASS AIO-SX upgrade\nPASS STANDARD ( 2 controllers + 1 worker ) upgrade\nPASS STANDARD ( 2 controllers + 1 worker ) pod -> external traffic\n\nCloses-Bug: #1999690\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I5aee984269a9710285092d8bc5def0842eb06f9f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix unnecessary admin endpoint configuration during restore and upgrade\n\nIn DC the admin endpoint config is being applied during\nrestore and upgrade stages since the flag\n/opt/platform/config/23.09/.admin_endpoint_config_required has\nbeen set which is based on /opt/platform/config/23.09/.bootstrap_completed flag, this fix avoids setting this flag if system\nrestore is in progress.\n\nTestcases:\nPASS: Test legacy restore and verify that admin endpoint config\n      not applied on systemcontroller\nPASS: Test optimized restore and verify that admin endpoint config\n      not applied on systemcontroller\nPASS: Test subcloud restore and verify that admin endpoint config\n      not applied on subcloud\nPASS: Test subcloud upgrade and verify that admin endpoint config\n      not applied on subcloud\n\nStory: 2010798\nTask: 48880\n\nChange-Id: Idf523ca771004146fb8d6e9eea9ec29d2ff6f8aa\nSigned-off-by: amantri <ayyappa.mantri@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Updates for nova-api-proxy helm chart\n\nNova endpoints cannot be created at the nova-api-proxy due to a few\nissues in nova-api-proxy chart.\n\nChanges include:\n - Fix the reference issues in nova-api-proxy chart in order to\n   create service and ingress for nova-api-proxy\n - Add a job in nova-api-proxy chart to create service ingress rule\n - Change the public host name of the endpoint from \"nova-api-proxy\"\n   to \"nova\"\n - Disable the nova endpoints and ingress creation in nova chart\n\nChange-Id: I6a49dee18aa409d81f4620920262715c6d85c2eb\nDepends-On: https://review.openstack.org/#/c/619651/\nStory: 2004007\nTask: 26953\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Collapse glance into platform in ControllerFS API\n\nThe existing \"platform\" filesystem is now resizable and added to\nthe ControllerFS API. The \u201cglance\u201d filesystem is merged into\n\"platform\" and therefore removed from the ControllerFS API. The\n\"--force\" flag is removed from the controllerfs-modify API as\nit was only used for glance fs resizing.\n\nThe folder /opt/cgcs is removed and the \u201chelm_charts\u201d and \u201ckeystone\u201d\nfolders now resides under /opt/platform.\n\n  ls /opt/platform/\n  armada  config  helm  nfv  puppet  sysinv\n\n  ls /opt/cgcs/\n  helm_charts  keystone\n\nResources related to drbd-cgcs and /opt/cgcs are removed from puppet\nor updated to use drbd-platform and /opt/platform.\n\nSM is no longer monitoring resources related to drbd-cgcs.\n\nTested in AIO-SX, AIO-DX and Standard hardware labs.\n\nPartial-Bug: 1830142\n\nChange-Id: I0a80c95a057e9d6d2acec5f33cc4da31cd20955e\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Single NIC support\n\nThis feature is to allow user to configure CaaS and Data networks\nto single VF capable NIC during \u2018Host interface configuration\u2019\nbefore unlock operation.\n\nThis commit introduce a new subinterface type which is used to\nsupport for ethernet subinterface creation over pci-sriov class\nethernet interface.\n\nStory: 2008470\nTask: 41505\n\nSigned-off-by: Litao Gao <litao.gao@windriver.com>\nChange-Id: I2c148d24c73854e59ebb2be122e97017c6235c89\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support kubernetes 1.21 removal of namespace API export parameter\n\nThe following Kubernetes client APIs changed and required usage\nchanges. The 'export' parameter was deprecated in v1.14 and is\nno longer supported in v1.21 .\n- c.read_namespaced_secret()\n- c.read_namespaced_config_map()\n\nSubsequent API create calls (i.e., c.create_namespaced_secret(),\nc.create_namespaced_config_map()) requires superfluous fields\nto be removed from metadata. This is done explicity by setting\nresource_version to None. These APIs are specifically used\nduring 'system application-apply X'.\n\nStory: 2008972\nTask: 43604\n\nTest Plan: Testing with commits for topic: kubernetes-1.21.3\n\nPASS: Install AIO-DX with kubernetes_version 1.18.1\nPASS: Install AIO-DX with kubernetes_version 1.20.9\nPASS: Install AIO-SX with kubernetes_version 1.21.3\nPASS: Install AIO-DX with kubernetes_version 1.21.3\nPASS: Install Standard with kubernetes_version 1.21.3\nPASS: Kubernetes 1.21.3, verify cpu-manager 'static' policy\n      isolation of Guaranteed resource limit pods\n      verify kubelet cpu-manager logs for pod apply\nPASS: Kubernetes 1.21.3, verify cpu-manager 'static' policy\n      isolation of 'windriver.com/isolcpus' resource limit pods\n      verify kubelet cpu-manager logs for pod apply\nPASS: Kubernetes 1.21.3 Verify platform apps: cert-manager, platorm-integ-apps\nPASS: Kubernetes 1.18.1 Create and delete PersistentVolumeClaim\nPASS: Kubernetes 1.20.9 Create and delete PersistentVolumeClaim\nPASS: Kubernetes 1.21.3 Create and delete PersistentVolumeClaim\nPASS: Apply and remove application <app> and verify <app>\nPASS: Kubernetes 1.18.1 Verify pause image version is 3.2\nPASS: Kubernetes 1.20.9 Verify pause image version is 3.2\nPASS: Kubernetes 1.21.3 Verify pause image version is 3.4.1\nPASS: Kubernetes 1.18.1 Verify cgroupDriver is cgroupfs\nPASS: Kubernetes 1.20.9 Verify cgroupDriver is cgroupfs\nPASS: Kubernetes 1.21.3 Verify cgroupDriver is cgroupfs\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Id8448c4cd3ca9839fde8b001ec05403284dc5bf4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ceph initialization on AIO is done only in 'controller' manifests\n\nOn AIO deployments puppet is run twice with two different manifests:\n1. 'controller': to configure controller services\n2. 'worker': to configure worker services.\n\nCeph is configured when 'controller' manifests are applied, there is\nno need to run them a second time, when 'worker' set is applied.\n\nCommit adds new puppet classes to encapsulate ceph configuration\nbased on node personality and adds a check to not apply it a 2nd\ntime on controllers.\n\nIf the ceph manifests are executed a second time then we get into\na racing issue between SM's process monitoring and 'worker' puppet\nmanifests triggering a restart of ceph-mon as part of reconfiguration\n\nAfter a reboot on AIO, SM takes control of ceph-mon monitoring\nafter 'controller' puppet manifests finish applying. As part of this,\nSM monitors processes death notification and gets the pid from the\n.pid file. And periodically executes '/etc/init.d/ceph status\nmon.controller' for a more advanced monitoring.\n\nWhen the 'worker' manifests are executed, they trigger a restart\nof ceph-mon through /etc/init.d/ceph restart that has two steps: 'stop'\nin which ceph-mon is stopped, and 'start' in which it is restarted.\n\nIn the first step, stopping ceph-mon leads to the death of ceph-mon\nprocess and removal of its PID file. This is promptly detected by\nSM which immediately triggers a start of ceph-mon that creates a\nnew pid file. Problem is that ceph-mon was already in a restart,\nand at the end of the 'stop' step the init script cleans up the\nnew pid file instead of the old.\n\nThis leads to controllers swacting a couple of times before the system\ngets rid of the rogue process.\n\nChange-Id: I2a0df3bab716a553e71e322e1515bee2bb2f700d\nCo-authored-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\nStory: 2002844\nTask: 29214\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fail parameter apply if AD mandatory params missed\n\nCurrently when remote AD domain service parameter is applied\nwhile there are missing mandatory parameters, only a warning\nis logged in sysinv.log. This change updated sssd sysinv puppet\nplugin so an exception is raised in such a situation, and the\nexception message is displayed at the CLI, notifying user that\nthe parameter apply for the domain fails.\n\nTest Plan:\nPASS: Add a remote AD domain, with partial mandatory parameters\n      added.\n      Run \"system service-parameter-apply identity --section=<domain>\"\n      to apply the service parameter, verify an error message as\n      following is displayed:\n\n      \"Apply failed, mandatory parameters are missing:\n      ldap_default_bind_dn ldap_default_authtok\"\n\nPASS: Add the missing mandatory parameters, and run service paramter\n      apply again, verify the apply is successful, and the new AD\n      domain is added in sssd's configuration.\n\nStory: 2009834\nTask: 46773\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I05c8e497056c38d6ca9918647304ff99347faffc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "configure kubernetes to use containerd as CRI\n\ndocker and containerd have different local filesystem for container\nimage. For containerd, crictl is used to pull the image instead of\ndocker client for docker. Due to containerd/crictl doesn't support\npush image to registry, docker client is kept to push image to\nlocal registry. And image pulled by docker need be removed after\npush to registry.\n\nStory: 2006145\nTask: 36747\nDepends-On: https://review.opendev.org/685211\n\nChange-Id: Id376c7e41a92aa69571b391020505934b6cdc23b\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Set neutron dhcp host agent scheduler to host-based\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix K8s pki folder permissions during upgrade end\n\nThe permissions of folder \"/etc/kubernetes/pki\" changed to 755 when the\nfolder is created during bootstrap (see\nhttps://review.opendev.org/c/starlingx/ansible-playbooks/+/890359). This\ncommit is a complement to set these permissions during upgrade.\n\nThis script is mostly a copy from \"90-reset-k8s-key-file-permissions.sh\"\n(https://review.opendev.org/c/starlingx/config/+/865338).\n\nThis upgrade script is only needed for simplex upgrades.\n\nTest Plan:\n\nPASS: As root, execute\n\"/etc/upgrade.d/92-reset-k8s-pki-folder-permissions.sh 22.12 24.03\nactivate\" and verify that the permissions of folder\n\"/etc/kubernetes/pki\" changes to 755.\nPASS: As root, execute\n\"/etc/upgrade.d/92-reset-k8s-pki-folder-permissions.sh 22.12 24.03\nstart\" and verify that the permissions of folder\n\"/etc/kubernetes/pki\" do not change.\n\nStory: 2010738\nTask: 48603\n\nSigned-off-by: Joao Victor Portal <Joao.VictorPortal@windriver.com>\nChange-Id: Ib4cf205cce497f20dfda0684c96376a63cbdd0a1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Monitor the datanetwork for non-OpenStack work node\n\nUpdate the lmon to support datanetwork interface monitoring\nand use collectd to control the alarm information. Now lmon\nwill obtain the list of interfaces from /etc/lmon/lmon.conf\nwhich can be generated by puppet.\n\nChange-Id: Id886c935d54158eca44d6685f1e282c20367b9a4\nStory: #2002948\nTask: #37326\nDepends-on: https://review.opendev.org/#/c/694927\nSigned-off-by: marvin <weifei.yu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Keystone cache settings\n\nSome cache parameters changed in the new version of Keystone (17.4).\nThis fix updates these parameters to the new ones:\n\nkeystone::cache_enabled -> keystone::cache::enabled\nkeystone::cache_backend -> keystone::cache::backend\nkeystone::cache_backend_argument -> keystone::cache::memcache_servers\n\nTEST PLAN:\nPASS: AIO-SX: create and deploy Debian installation ISO.\nPASS: AIO-SX: check if cache configuration was correctly applied.\nPASS: AIO-SX: check if memcached contains data from keystone.\n\nStory: 2010574\nTask: 47320\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/870803\n\nSigned-off-by: Reynaldo P Gomes <reynaldo.patronegomes@windriver.com>\nChange-Id: I926295ed3889856b7c9ddacc4498752290e4b291\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet.service to be monitored by pmond\n\nUse puppet manifest to setup the following:\n1. create kubelet service override to turn off systemd\n   auto restart\n2. create kubelet pmon conf file to setup pmond\n   to monitor kubelet\n\nStory: 2002843\nTask:  29255\n\nDepends-On I41206c7ea14d79b5d0cbca945e7a6488eda9b7bb\nChange-Id: I94659dd26b664c643270baa2c013f0910a07bf12\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable QEMU memory balloon usage statistics.\n\nSet mem_stats_period_seconds in nova.conf to 0.\nIt will disable QEMU memory balloon usage statistics.\nThere are 2 reasons of doing that in StarlingX:\n1. StarlingX doesn\u2019t support memory overcommit and adding\nQEMU memory balloon device doesn\u2019t make any difference.\n2. QEMU memory balloon usage statistics interrupts a VM run\nand causes unacceptable jitter in cyclictest once in a while.\n\nCloses-bug: 1803615\nChange-Id: Iaea1962601755736688f2deb61730ab1d548b8b1\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update sysinv for k8s 1.22.5\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Adjust who gets admin privs in kubernetes\n\nWe want to give sysinv and wrsroot \"admin\" access in kubernetes.\nAccordingly, the permissions on the auto-generated\n/etc/kubernetes/admin.conf file need to be adjusted, and the KUBECONFIG\nenvironment variable needs to be set to point to the system-wide admin\nconfig.  (To simplify things, we will set this env variable for anyone\nwho can read the admin config file.)\n\nChange-Id: I9085fd1840d99674e515436f435d6f94617b42c7\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002876\nTask: 22831\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set uniform PM-QoS value for all cpus on lowlatency nodes\n\nWe observed poor cyclictest results on lowlatency nodes. This was\ndue to the fact that we were trying to save power by only marking\nin-use CPUs as low-latency, but there was an underlying issue where\nany high-latency CPUs result in a latency hit for all other CPUs.\n\nAs a workaround to provide consistent low-latency performance, set\nall CPUs to only sleep as deep as C1 on lowlatency nodes.\n\nChange-Id: Idd627eee6e7ff95939e428b180d07d8ab1cadad2\nPartial-Bug: 1845735\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce pagination limit for registry requests\n\nIn the past, we introduced a large pagination limit for requests to\nthe registry in order to get around the default 100 results. The\ndefault 100 results was not enough once there are more than 100\nimages in the registry. Recently, a change in the registry started\nrejecting requests that specifies a pagination of over 1000:\nhttps://review.opendev.org/c/starlingx/integ/+/886884\n\nThis commit changes the pagination limit from 100000\nto 1000. This should still be sufficient, since it is 10x as much as\nthe default 100. We also do our image-list and image-tags commands\nseparately (busybox:1.36 and busybox:latest shows up as just busybox\non image-list. image-tags would show 1.36 and latest, but only show\ntags for busybox since image-tags needs the user to specify the\nimage name). This means a system that have been around for a long time\nand went through many upgrades would still likely not hit the limit\neven if it has multiple versions of the same image.\n\nTest Cases:\n\nPASS: system registry-image-list\n\nChange-Id: Ib1c071f6f66788065423f7e512366057a173cce6\nCloses-Bug: 2028566\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Ensure puppet dns config done after networking config\n\nIn some labs, the puppet manifest application during\nconfig_controller results in the ::platform::network class\nbeing applied after the ::platform::dns class. This causes the\n/etc/resolv.conf file to be wiped (when the\napply_network_config.sh is run by the ::platform::network\nclass).\n\nThe fix is to introduce a dependency to ensure that the\nnetworking config is completed before the dns config is done.\n\nChange-Id: Ie4a8b67e5eb3594f5c21e22f8014d2b8162a0758\nRelated-bug: 1812449\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: \"import\" issue for Python 2/3 compatible code\n\nuse absolute path imports to compat python3\nremove H301 ignore to enable H304 flake8 check\n\nStory: 2003433\nTask: 28376\n\nChange-Id: I3a50a0298fe34c60e3c63df23e72dcbb07c585d1\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet hiera data population for Mellanox devices\n\nMellanox based devices do not bind directly to the VFIO driver,\ntherefore the devices should not be included as part of the OVS device\nlist.  In addition, the ports for ConnectX-3 devices share the same PCI\ndevice address, therefore they must be identified by MAC address to\nensure each unique port can be properly bound to OVS.\n\nStory: 2003104\nTask: 24540\n\nChange-Id: I52386b0eed6629a4e03b9d5e581949bf0dccd3bc\nSigned-off-by: Matt Peters <matt.peters@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Convert calico to use non typha config\n\nCalico is meant to be configured for a < 50 node system.\nThe configuration for the > 50 node system had been mistakenly\nselected.\n\nStory: 2005198\nTask: 30499\nChange-Id: I5bd058a40b29f0a32f8d51d58054ab07faf3d85f\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"removed key entry from hieradata\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Move horizon static configs to Armada manifest\n\nMove all horizon static configurations from the overrides to the\nArmada manifest.\n\nThis is being done so we have a consistent way of managing\ncontainerized openstack configurations. Static configurations will\nbe located in the Armada manifest and dynamic configuration will be\nlocated in the overrides files.\n\nStory: 2003909\nTask: 29635\n\nChange-Id: I4abbc0eb158304774134e2d60f2b666c0d90bbd8\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce sudo rules refresh time for openldap\n\nNew openldap users with sudo permision are not able to exercise\nthe sudo capabilities for a maximum of 15min since creation\nbecause the sudo rules refresh interval has the default value\nof 15min.\nThis commit reduces the sudo rules refresh interval to 5min to\nimprove usability. This change will only be done for local\nopenldap server.\nThe interval value was chosen to match the value of\n\"ldap_enumeration_refresh_timeout\" attribute that specifies how\nlong SSSD has to wait before refreshing its cache of enumerated\nrecords.\nDue to performance consideration, it is not advisable to reduce the\nsudo rules refresh time for WAD servers because of their large\nnumber of users. Reducing the refresh interval can have negative\nperformance impact.\nThis commit also adjusts the sudo rules search criteria.\n\nTest Plan:\nPASS: Successful install in AIO-SX system configuration.\nPASS: Create a new openldap user with sudo permissions and verify\nthat sudo capabilities are available for the user in maximum\n300sec (5min).\nPASS: Verify remote ssh connection for a new openldap user.\nPASS: Verify SSSD sudo rules search works as expected for openldap\nand WAD servers.\n\nStory: 2010589\nTask: 48164\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ieb8e23068b82e09c3feeec4c8317d32d45ff64e6\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Cinder volume backups\n\nTo properly enable Cinder volume backup, the following configuration\nchanges are required:\n- For Cinder, enable 'CephBackupDriver' as the Cinder backup_driver and\n  'cinder' as the rbd_user for each Cinder backend\n- For libvirt, enable Ceph and use 'cinder-volume-rbd-keyring' for the\n  Ceph client user secret. This will create a libvirt secret that will\n  be used with the 'cinder' user.\n- For nova, enable the rbd_secret_uuid shared with libvirt and set the\n  'rbd_user' to cinder.\n- Update the chart group initialization sequence, so that\n  'openstack-cinder' is initialized prior to 'openstack-compute-kit'.\n  This is done because 'cinder-volume-rbd-keyring' is created by Cinder\n  and is required by libvirt to successfully initialize.\n\nWith these configuration changes:\n- Cinder volumes were created\n- Cinder volumes were backed up\n- Instances were booted by volume (from Cinder)\n- Instances were booted by image (from Ceph ephemeral disks)\n\nChange-Id: I29c7d3ed118f4a6726f2ea887a165f256bc32fd5\nDepends-On: https://review.opendev.org/#/c/664619/\nStory: 2004520\nTask: 28266\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add ZeroMQ RPC backend\n\nThis feature adds a new RPC backend for communication between\nsysinv-api, sysinv-conductor and sysinv-agent processes.\nThis backend is implemented using a patched zerorpc library [1],\nwhich is built on top of ZeroMQ and message-pack.\nThe motivation behind this change is to decouple sysinv from RabbitMQ,\nand use a brokerless solution for RPC instead.\n\nThe key points are:\n- All imports of rpcapi.py are replaced by rpcapiproxy.py, which\n  decides the backend to use (rabbitmq or zeromq) according to\n  configuration.\n- During an upgrade process the rpc service listens to both rabbitmq\n  and zeromq. For communication between hosts, the client backend api\n  is chosen according to host software version.\n- In future versions, the usage of RabbitMQ will no longer be\n  necessary and its usage can be removed. I have marked these parts of\n  code with \"TODO(RPCHybridMode)\" to easily track it.\n\n[1] https://review.opendev.org/c/starlingx/integ/+/864310\n\nTEST PLAN:\nPASS: Bootstrap and host-unlock on AIO-SX, AIO-Duplex, Standard\nPASS: Bootstrap and host-unlock on DC system-controller and subcloud\nPASS: Verify sysinv.log and confirm no error occurs in RPC communication\nPASS: Perform system cli commands that interacts with sysinv RPCs:\n  - system host-cpu-max-frequency-modify\n  - system license-install\n  - system storage-backend-add ceph-external\n  - system host-swact\nPASS: Backup & Restore on AIO-SX\nPASS: Bootstrap replay (updating mgmt and cluster subnet) on AIO-SX\nPASS: Platform upgrade on AIO-DX (22.06 -> 22.12)\nPASS: Platform upgrade on AIO-DX+ (22.06 -> 22.12)\nPASS: Platform upgrade on AIO-SX (22.06 -> 22.12)\n\nDepends-On: https://review.opendev.org/c/starlingx/tools/+/859576\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/859575\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/862609\n\nStory: 2010087\nTask: 46444\n\nChange-Id: I5cd61b541a6d8c62628a0f99db0e35af1eae5961\nSigned-off-by: Alyson Deives Pereira <alyson.deivespereira@windriver.com>\nSigned-off-by: Eduardo Juliano Alberti <eduardo.alberti@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Further increase tolerance for declaring neutron agents down\n\nThe neutron server listens for heartbeats from the various\nneutron agents running on worker nodes. The agents send\nthis heartbeat every 30s, but use a synchronous RPC, which\ncan take up to 60s to time out if the rabbitmq server\ndisappears (e.g. when a controller host is powered down\nunexpectedly). The default timeout is 75s, so if two of\nthese async RPC messages time out in a row (due to rabbitmq\nserver issues related to a controller power down or swact),\nthe neutron agent will be declared down incorrectly. This\ncauses the VIM to migrate instances away from the worker\nnode, which we want to avoid.\n\nCommit 2fcb4f15 increased the timeout (agent_down_time)\nto 150s. However, after further testing it has been found\nthat 150s is not enough in some rare cases (e.g. when\nrebooting the active controller host). I am increasing the\ntimeout (agent_down_time) to 180s.\n\nChange-Id: Ic0cedf8f20eaf1c1a33defbabcae13fbfb727ec9\nCloses-Bug: 1817935\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update panko api configuration in Armada manifest\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update the sysinv Kubernetes upgrade mechanism\n\nAdded the following kubernetes versions in sysinv:\n- v1.19.13\n- v1.20.9\n- v1.21.3\n\nWhen a k8s upgrade is first triggered we will update\nthe DB with the new desired version of kubeadm, write out the\nhieradata, then trigger the puppet runtime manifest to update the\nbind mount for kubeadm. The code that updates the bind mount is at:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/802136\n\nThe kubelet bind mount will be updated when the\nstate field in the \"kube_upgrade\" table is\nkubernetes.KUBE_UPGRADING_KUBELETS and will have the value of\nthe \"target_version\"  field in the \"kube_host_upgrade\" table.\nIn the DB, the kubelet version will be updated when the upgrade\nis complete.\n\nFor clarity, only the versions that would be valid to upgrade will be\nmarked as \"available. The other versions will show a state of unavailable.\nThe desired runtime version may then be chosen via sysinv as part of the\nK8s upgrade procedure.  (The \u201csystem kube-upgrade-start\" command already\ntakes a version argument; we will ensure that only one version newer is\nallowed.)\n\nTesting done on AIO-SX:\nThe default installed version is v1.18.1\n\nTried to upgrade kubernetes to the next version (v1.19.13):\n\n- I did the first command to upgrade $ system kube-upgrade-start v1.19.13\n  After this the kubeadm_version in the DB has the expected value of: 1.19.13\n\n- The next step will be 'system kube-upgrade-download-images'\n  but I had to mimic it since we don't do an actual upgrade because we don't\n  have kubernetes v1.19.13 packaged yet.\n\n- After that, I did: $ system kube-host-upgrade controller-0 control-plane\n  At this step the kubeadm bind mount is updated by the puppet manifest\n  https://review.opendev.org/c/starlingx/stx-puppet/+/802136\n  and I checked in /etc/fstab to have the following line:\n  /usr/local/kubernetes/1.19.13/stage1 /usr/local/kubernetes/current/stage1    none    rw,bind 0       0\n\n- Then the kube-upgrade networking was skipped for the same reason as the\n  kube-upgrade-download-images step before.\n\n- When upgrading kubelet, i.e: $ system kube-host-upgrade controller-0 kubelet\n  The kubelet bind mount was updated by the puppet manifest\n  and /etc/fstab had got the following new line:\n  /usr/local/kubernetes/1.19.13/stage2 /usr/local/kubernetes/current/stage2    none    rw,bind 0       0\n\n- After that, I did $ system kube-upgrade-complete\n  and the kubelet_version has got the value of 1.19.13 as expected in the DB\n\nStory: 2008972\nTask: 42613\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/804243\nChange-Id: I4a580409819df6e774a7a8f340e2d94e3377ace5\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Referencing the new OVS docker image\n\nThe version of existing OVS docker image is 2.8.1. StarlingX\nbuilds its own OVS docker image with latest version\n2.11.0. This patch overrides the old docker images.\n\nChange-Id: Iec56dc89cdb7a02f9b1beed459eab230c06707ec\nStory: #2004649\nTask: #30281\nDepends-On: https://review.opendev.org/#/c/662195\nCo-Authored-By: Cheng Li<cheng1.li@intel.com>\nSigned-off-by: Chenjie Xu <chenjie.xu@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Configure anti-affinity for coredns pods\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Change VLAN interface naming scheme\n\nThe VLAN alias interface name may exceed the maximum interface\nname length as defined by the kernel, depending on some hardware.\nThis commit changes the vlan naming convention from device name plus\nVLAN ID to VLAN plus VLAN ID for platform interfaces.\nA semantic check is also added to ensure that VLAN IDs are unique\nacross all platform interfaces of a host.\n\nCloses-Bug: 1817593\n\nChange-Id: Idf732e85aa7a6d19491f13e29cc1b408bb5bfe5d\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "isolcpu interactions with non-guaranteed pods\n\nFor low latency worker nodes without the openstack compute label set, \nthe isolcpu parameter should be restricted to vswitch cores (if any).\n\nChange-Id: I16ab59a6110fc5d8a1acfe5b6740868de3875585\nCloses-Bug: 1830634\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sysinv upgrades support for Kubernetes 1.24.4\n\nThis adds sysinv upgrades support for Kubernetes 1.23.1 to 1.24.4.\n\nTest-plan: Debian\nPASS: Install k8s 1.23.1, system kube-version-list shows\n      v1.24.4 available\n\nStory: 2010301\nTask: 46321\n\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/857975\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Ic5de632bd9bbb1fc0d0faf24cebf929ce30c547e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add stx-platform-helm RPM\n\nProvide a new helm RPM that will be included with and installed by the\nISO.\n\nThis RPM will package an application tarball that is to be managed by\nthe system without user intervention but supports all the existing\nmechanisms that the user installed applications use.\n\nThe intent of this application is to provide any charts required for\nplatform integration and install any of those charts through an armada\nmanifest.\n\nThe armada manifest will reference a new helm repository that will be\nenabled with a future commit. This repository is intended for platform\nspecific charts installed by RPMs. The existing helm repository is\nkept for optional runtime user installed applications.\n\nChange-Id: Ia34d3a1efa1006b184cc35e17afb231064cf36f9\nStory: 2005424\nTask: 30452\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup of horizon's local_settings override in armada manifest\n\n-Removing region settings since we have chosen a 2 horizon setup\n-Fixing domain setting in the local_settings override\n\nChange-Id: Ie98625d8c23b76defa205f3db1476000812e2d40\nTask: 27080\nStory: 2003909\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Retry docker login\n\nThe run_docker_login fails intermittently due to authentication\nfailure. Currently operation is aborted without touching flag file,\nwhich result subsequent operations are not completed.\n\nThis change is to add reattempt when docker login fails.\n\nCloses-Bug: 1931268\nChange-Id: Id6961b1b68f2fce07a3a65917eeaeadcd742f4f1\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Generalized interface and network configuration\n\n- Added the name field to the network table\n- Removed mtu, link_capacity and vlan_id from the network table\n- Removed unused networktypes for bm, control and data-vrs\n- Added four interface classes (platform, data, pci-passthrough,\n  pci-sriov) to interface table\n- Assign networks to interface during interface creation and\n  modification\n- Allow infrastructure network and management network to share an\n  interface with or without VLAN.\n- Updated sysinv puppet for interface and network\n\nStory: 2003087\nTask: 23171\nDepends-On: https://review.openstack.org/#/c/601155\n\nChange-Id: I2e211767639484992f868084eb47baacbe5ea83a\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv ldap puppet plugin to generate ldap cert\n\nThis is part of the change to replace nslcd with sssd to\nsupport multiple secure ldap backends.\n\nThis change updated sysinv ldap puppet plugin to retrieve\nopenldap certificate and key from k8s certificate secret into\nsecure_system.yaml. The certificate and key will then be used by\nldap puppet to generate openldap certificate and key files for\nsecure openldap service.\n\nTest Plan on Debian (SX and DX):\nPASS: Package build, image build.\nPASS: System deployment.\nPASS: Openldap certificate and key files are generated, and slapd is\n      configured to use the certificate and key after controller is\n      unlocked.\nPASS: sssd is connected to slapd on the secure port after unlock.\nPASS: ldap functions work properly (ldap user creation, user login\n      on console and by ssh etc).\nPASS: For DX system, ldap functions still work properly after swact.\n\nTest Plan on CentOS:\nPASS: ldap functions work properly (ldap user creation, user login\n      on console and by ssh etc)\n\nStory: 2009834\nTask: 46072\nDepends-On: https://review.opendev.org/c/starlingx/metal/+/854203\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Iec876c9b0a5698cf0b15781792443e99ddb5f4ec\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add sssd puppet plugin to generate sssd config data\n\nThis commit added a sssd puppet plugin to generate hieradata\nthat will be consumed by sssd puppet class to generate a minimum\nsample sssd.conf to bind to the local openldap. The plugin can be\nlater extended to generate additional data for adding/deleting\n/modifying extra domains to sssd.conf.\n\nThe commit also updated ldap puppet plugin to store ldapadmin\nuser's password in keyring so it can be retrieved by sssd plugin.\n\nTest Plan for Debian:\nPASS: packages build, image build.\nPASS: SX system bootstrap, unlock successfully.\nPASS: ldapadmin user password stored in keyring.\nPASS: basic sample sssd.conf configuration data generated in\n      secure_system.yaml.\nPASS: existing ldap functions don't break (ldap user login on\n      console and by ssh, ldap user creation etc.)\n\nTest Plan for CentOS:\nPASS: pacages build, image build.\nPASS: SX system bootstrap, unlock successfully.\nPASS: existing ldap functions don't break (ldap user login on\n      console and by ssh, ldap user creation etc.)\n\nStory: 2009834\nTask: 45836\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ifc8b73be38cce17188e7a68a927b2c093976f4ac\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new kube_cmd_versions table and API endpoint\n\nIn the DB, a new \"kube_cmd_versions\" table will be created,\naside from the boilerplate stuff, the important columns\nwill be \"kubeadm_version\" and \"kubelet_version\".\nWe want to default these to the highest-available\nvalidated version of kubernetes in the load at the time.\nThere will be only 1 row here and the default will be created\nin the DB migration script.\n\nIn the API a new endpoint is created '/v1/kube_cmd_versions',\nand with this we can get and modify the kubeadm/kubelet version.\n\nStory: 2008972\nTask: 42895\nChange-Id: Ic848ea777fecab5bda7488df225c2c3e924c2fd5\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set applyOnForward to False for platform firewalls\n\nOriginally the value should have been False, but a typo set it to\nTrue. This triggers the firewall to be applied during forwarding\nin iptables. This interferes with the k8s services installed by\nthe applications.\n\nTest Plan\n[PASS] create pods with services in selected L4 ports (not available\n        in the firewall) and observe that they can be accessed from\n        outside the system\n[PASS] check that L4 ports not available in the firewall and not part\n        of a k8s service are not reachable\n\nCloses-Bug: 2029376\n\n\nChange-Id: I3e6e25a97e77d1a0dc71389c3dec2afd968e4eb5\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Align API types with database types\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update logic for setting initial ptp4l pmc paramters\n\nRework the logic for how pmc GrandMaster parameters are\ninitialized.\n\nThe new logic checks for the presence of each of the valid Announce\nmessage keys in the user config and updates the values for any that are\ndefined.\n\nThese values are then made available in the resulting hieradata and\nsubsequently written by puppet.\n\nTest Plan:\nPASS: Verify that the pmc GRANDMASTER_SETTINGS can be set/unset via user\nsupplied parameters\n\nPartial-bug: 2036431\n\nChange-Id: Ib4429e2f4b2477273c421a862dadb1dbede4aaac\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: If60113563bcf3e31201005769471cef6aad8e90c\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move DNS requirement into kubernetes::master\n\nThis was causing a failure in computes unlock process where the\nPlatform::Dns class cannot be found.\n\nCloses-bug: 1817126\nChange-Id: I0a9e9b60580944a49b9672803fc05216f204b222\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update manifests to remove unused openstack components\n\nCleanup unwanted openstack setup on bare metal.\n\nPreparing the manifests to have the services removed from SM.\n\nBypass setting up openstack services on controller, worker and\nstorage.\n\nCleanup haproxy ports for services that will not be running\non bare metal.\n\nCleanup upgrade, remote logging, postgres, and anything else\nrelated to openstack services that no longer run on bare\nmetal.\n\nRemove all manifests and templates that are no longer being used.\nStrip out any static hiera data that is no longer needed.\n\nStory: 2004764\nTask: 29850\nDepends-On: Ice10fe6da6b34f1d9206f26e112eb555e2088932\nDepends-On: I3c1cc8673be5cf6ab15f9158199bc24fccb44f17\nDepends-On: Ie43cf11ebf1edcf3a8bb357205c4c59d2962b4fa\nChange-Id: I2be8e9ab418835125ff433d06d2930df37534501\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kubernetes, tiller and calico\n\nThis clamps kubernetes at 1.13.5 during the init phase.\nUpversions helm/tiller from 2.12.1 to 2.13.1\nUpversion calico to v3.6\n\nInformation about how to configure and test when upversioning\ncalico is located in the calico.yaml.erb file.\n\nStory: 2005198\nTask: 30211\nDepends-On: If9476b26b315e8c863e1ec487cbf701972a82a98\nChange-Id: I7fed5d75cb9f8b593fda7dc1bdd125c4e6d7affc\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "add patch to update description for admin and services projects\n\nupdate the descriptions of the admin and services projects created\nin the platform keystone as distinction.\n\nthe default is:\nadmin: admin tenant\nservices: Tenant for the openstack services\n\nupdated to:\nadmin: admin project\nservices: project for the platform services\n\nCloses-bug:1824872\nDepends-On: https://review.opendev.org/654024/\nChange-Id: I819f07f821e7cc7c9c4c87fcc1ed2ada1edcf05c\nSigned-off-by: SidneyAn <ran1.an@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace openstack.org git:// URLs with https://\n\nThis is a mechanically generated change to replace openstack.org\ngit:// URLs with https:// equivalents.\n\nThis is in aid of a planned future move of the git hosting\ninfrastructure to a self-hosted instance of gitea (https://gitea.io),\nwhich does not support the git wire protocol at this stage.\n\nThis update should result in no functional change.\n\nFor more information see the thread at\n\n http://lists.openstack.org/pipermail/openstack-discuss/2019-March/003825.html\n\nChange-Id: I81f3c7554c601e0297c61f4730244f4e28da33df\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Increase tolerance for declaring nova services down\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Add resize to /var\n\nAdd support to to modifying /var logical volume group\nthrough the system host-fs-modify command\n\nTest Plan\n\nPASS - Install ISO and resized root logical volume.\nPASS - Perform Backup/Restore with optimized restore\nPASS - Verify var volume group has been resized after\n       restore has taken place.\nPASS - Extend root volume and reboot, verify that the\n       size of the volume remains the same.\nPASS - Peform system host-lock/host-unlock, verify that\n       the size of the volume remains the same.\nPASS - Verify Failure if user tries to extend beyond\n       available space in the volume group\n\nResults - https://paste.openstack.org/show/bkpGGPEYkDZHQJkwS1Ca/\n\nStory: 2009303\nTask: 47231\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/872154\n\nSigned-off-by: Charles Short <charles.short@windriver.com>\nChange-Id: I17693e97d2ec26b5a8c8e821fb67387cbf03d4d5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix board management module access bug\n\nAdd egress icmp support in calico global policy because maintenance\nhas a BMC reachability audit that uses ping towards the provisioned\nBMC IP.\n\nChange-Id: I911a4da23a5b4ac7c0302bb9465cfe7cdab4c34c\nCloses-Bug: #1826421\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable upstream Cinder volume backup/restore capabilities\n\nTo workaround an upstream bug in rbd code, we need to create an\nempty file /etc/ceph/ceph.client.None.keyring in order to do cinder\nbackup and restore. This file is created in cinder manifest when\nceph backend is enabled.\n\nStory: 2003115\nTask: 26797\n\nChange-Id: I43388d5e1be2e37e32e88cce718034dbf58f53fc\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Get swift working on containerized openstack\n\nIn order to get swift working on containerized openstack,\nchanges were needed both on platform and application side.\n\nFrom platform side, settings from ceph.conf file were replaced.\nA runtime manifest was added to update ceph.conf after a successful\napplication apply:\n    1. Keystone auth url was updated with keystone openstack url\n    2. 'rgw_keystone_admin_domain' and 'rgw_keystone_project' settings\n    were updated with 'service'.\n\nFrom application side the following changes have been implemented:\n    1. Ceph-rgw chart from openstack-helm-infra repo was included\n    in stx-openstack\n    2. A chart schema for ceph-rgw was added\n    3. An override file was generated\n\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\nStory: 2003909\nTask: 30606\nChange-Id: I01f7cf412264394f4f9bfb31f3c5a5ebd73f49dc\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fixup for kubeadm cert upload\n\nIn commit 5c58f00c11 a change was made to use\n\"kubeadm init phase upload-certs --upload-certs --certificate-key <key>\"\nto upload the certs to a K8s Secret in order to work around an issue\ninvolving the YAML representation of IPv6 addresses.\n\nIt turns out that when used in this way, kubeadm does not upload the\nexternal-etcd-ca.crt/external-etcd.crt/external-etcd.key entries to the\nK8s Secret.  This breaks the install on multi-node labs.\n\nThe fix is to revert this code back to the old way of doing it, but to\ncall kubeadm_configmap_reformat() to reformat the ConfigMap if\nnecessary prior to dumping it out.  That way if it does contain IPv6\naddresses in the \"wrong\" YAML format, it will get corrected.\n\nTest Plan:\nPASSED: Install in AIO-DX virtualbox with IPv4.\nPASSED: Modified install in AIO-DX virtualbox with IPv6 address added\n        to kubeadm-config ConfigMap before unlocking controller-1.\n\nCloses-Bug: 2017146\nPartial-Bug: 2016041\nChange-Id: I999a161e15a81a50085a1843cc80515b9af0f117\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Debian: fix system registry image commands\n\nOn Debian system regirstry image commands such as\nsystem registry-image-list fails with traceback in sysinv log.\n\nThe root cause is that the command is looking for system trusted\nCA bundle in a hardcoded path \"/etc/ssl/certs/ca-bundle.crt\".\nBut on Debian the CA bundle is /etc/ssl/certs/ca-certificates.crt\n\nFixed this by adding a generic function to find the CA bundle in\na list that have the CA bundle path for Debian, CentOS, Suse and\nFreeBSD/OpenBSD.\n\nTest Plan for Debian and CentOS:\nPASS: package build, image build\nPASS: system bootstrap, controller unlock\nPASS: system registry-image-list succeed without error\n\nCloses-Bug: 1978320\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: I9fbf19ea6a78c1e4d93855815f239eb29b6f7551\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"CEPH support for 2 node configuration\"",
        "issue_summary": ""
    },
    {
        "commit_message": "generic feature gates cleanup on k8s upgrade\n\nIt turns out there are additional feature gates which may be left\naround after an upgrade from the previous release, or if someone\nis using the custom K8s config functionality.\n\nThis means that the previous commit which special-cased the\nRemoveSelfLink feature gate for the kube-apiserver is not\nsufficient.  At a minimum we also have to deal with a\n'HugePageStorageMediumSize: true' feature gate for kubelet.\n\nAccording to the upstream docs this should still be understood\nby kubelet, but the docs are wrong.  (An issue has been raised.)\n\nAccordingly this commit creates a generic framework which can\nbe used to remove one or more feature gates from all locations\nbefore upgrading to a specified K8s version.\n\nTest plan:\n\nPASS: exercise code via test harness to validate various\n      combinations of feature gates in different sections\nPASS: K8s upgrade to 1.24 in standard lab that was upgraded from\n      previous release\n\nCloses-Bug: 1999837\nChange-Id: Ibbcfdbb3deb5a11ee8ca059439bd4e2c7e0fd5a6\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Integrate openstack clients helm chart in armada\"\n\nThis reverts commit 248d3b3921024bc4cb6ad5234b34a9c2edf11599.\n\nChange-Id: I06931b7f5ae047ec93eaa0ee553e35577ceb433b\nSigned-off-by: Stefan Dinescu <stefan.dinescu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update puppet ceilometer upgrade dependency on service identity\n\nThe existing dependency for ceilometer upgrade cannot ensure that it\nwas executed after all service identites for ceilometer and gnocchi\nwere created. This causes ceilometer upgrade fails during subcloud\nconfiguration since an ordering problem that ceilometer service not\nbeing created before running ceilometer upgrade.\nThis commit is to update the dependency against the service identity\nfor ceilometer and gnocchi to ensure the correct ordering.\n\nCloses-Bug: 1791303\n\nChange-Id: Ibb4fb0fe15ba5c046d3c03478e4a9c1bee908f35\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "sysinv: update constant name to be more accurate\n\nFor ease of upgrades we're going to have the sysinv DB\ndefault to the same version of K8s that is used by 21.05\nand then have ansible override it for fresh installs.\n\nAccordingly, rename the constant to more accurately reflect\nhow it's used.\n\nStory: 2008972\nTask: 43435\nChange-Id: Iff0e9d1d942aff8cd36f69ffda9615154c45a6e7\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable duplicate address detection when using duplex-direct\n\nIn a duplex-direct configuration, the physical mgmt and cluster-host\nlink on controller-0 will be down until controller-1\ncomes up. In an IPv6 configuration, this results in dad not completing,\nso the addresses stay tentative.\n\nThis commit disables duplicate address detection on the mgmt and\ncluster-host interface if the system is configured as duplex-direct.\nIf the interface is a bonded interface, the interface is added to the\nbonding masters list before the DAD is disabled.\n\nCloses-Bug: 1836969\n\nChange-Id: I0e169904445db905729fce77e4afa2ba2052598b\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide hieradata to manifest ignore grub recovery\n\nIf needed, in the nohz_full parameter add/remove plugin must\nset a flag to ignore the grub parameters recovery.\n\nCloses-Bug: 1983029\n\nTest plan:\nPASS: Assign disable-nohz-full label host lock and unlock.\nPASS: Remove disable-nohz-full label host lock and unlock.\nPASS: Verify nohz was enabled/disabled in both tests above.\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I14b136bfb3c2b710815887914cba8c33cf9418ff\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial integration of DC with admin network\n\nBecause the management network and its parameters are\nembedded in many parts of the system, having a separate\nadmin network makes it much easier to change the parameters\nof this network (subnet, gateway, etc) after a subcloud has\nbeen provisioned.\n\nThe admin network will take precedence over the existing\nmanagement network for communication between the\nsubcloud and system controller if it is defined.\n\nThe management network will still exist on the subcloud, but\nwill be a private network.\n\nThis commit contains logic to choose the most appropriate\nkeystone auth url and admin endpoint required for subcloud\nadministration depending on whether the admin network is\npresent or not.\n\nNote: Corresponding puppet review:\nhttps://review.opendev.org/c/starlingx/stx-puppet/+/865288\n\nTest Plan:\n\n- Bootstrap and install DC subcloud with admin network defined.\n  PASS: Ensure the openstack admin endpoints on both the subcloud\n        and system controller for the affected services use the\n        admin subnet of the subcloud\n  PASS: Ensure the subcloud can become online and in-sync using\n        the admin network.\n\nRegression:\n\n- AIO-SX: On a non-DC system, ensure the openstack endpoints for\n          the various services are not impacted by the change.\n\n- Bootstrap and install DC subcloud with no admin network defined.\n  PASS: Ensure the openstack admin endpoints on both the subcloud\n        and system controller for the affected services use the\n        management subnet of the subcloud (no impact)\n  PASS: Ensure the subcloud can become online and in-sync with the\n        management network (no impact).\n\nDepends-On: https://review.opendev.org/c/starlingx/config/+/863033\n\nStory: 2010319\nTask: 46910\n\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\nChange-Id: Icf4c7c97ed69c74e6827c63614cb44abca28e38a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove unused upgrade code\n\nRemove upgrade code specific to StX4 -> StX5 upgrades.\n\nStory: 2008966\nTask: 42724\nChange-Id: Id0c31f3f2017f9acf3253740b83be9bb2a243e00\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add SSSD sudo configuration in sysinv\n\nThis commit updates SSSD configuration to support SSSD sudo\ncapabilities for ldap users and groups.\nRemote WAD ldap users as well as local openldap users can be\nconfigured to get \"sudo\" and \"sys_protected\" privileges on\nthe stx platform when connecting using SSH.\nConfiguration updates were done by adding SSSD sudo service\nand supporting parameters in the SSSD configuration file.\n\nTest Plan:\nPASS: Verify SSSD configuration in \"/etc/sssd/sssd.conf\" gets\nupdated with sudo parameters.\nPASS: Create a user with sudo privileges in openldap and verify\nthat the sudo privileges are available in the stx platform\nwhen the user connects with SSH.\nPASS: Create a user with sys_protected privileges in openldap\nand verify that the sys_protected privileges are available in\nthe stx platform when user connects with SSH.\nPASS: Configure a sys_protected group in a remote WAD server and\nverify it has been cached in the stx platform.\nPASS: Add a WAD user to the sys_protected WAD group and verify the\nuser has sys_protected privileges in the stx platform.\nPASS: Configure a sudo rule for a remote WAD user and verify the user\nhas sudo privileges in the stx platform.\nPASS: Verify that a regular WAD user that has no sudo rules defined,\ndoes not have sudo privileges in the stx platform.\n\nStory: 2010589\nTask: 47588\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/876393\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Id505d462cca26daad3fd82a49929e41a3d2cc1f4\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"set wait label for nginx chart\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Write software_version in hieradata as a string\n\nWhen puppet reads a unicode value from hieradata that it believes\nis a floating number, it automatically converts it to a float. In\nthe case of the software_version, that means a version like '18.10'\nis converted to 18.1 by puppet. This results in some components\nand directories using the wrong value for software_version, and\ncertain services fail.\n\nIn particular, this resulted in sysinv being unable to populate\nthe host inventory data when new nodes were installed in a running\nsystem. Queries like host-data-list or host-if-list would return\nempty data.\n\nThis update to sysinv writes the software_version to hieradata as\na string rather than unicode, ensuring puppet treats it properly.\n\nCloses-Bug: 1795400\nChange-Id: Ic3ab3aea2f7fc6662f0b523070afb4b3ef7ee282\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Stardandize makefiles for puppet-modules-wrs\"\n\nThis reverts commit 24fd045f6883dc060d6e09b5444080cae5196847.\n\nThis commit is causing an installation failure. It appears\nthat it has changed the location of some puppet manifests.\n\nChange-Id: Ic9e2a7638f9b87199417016c4d50d84c6534aa88\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set osd_pool_default_size based on deployment\n\nThe ceph.conf file packaged in the Ceph RPM sets 'osd_pool_default_size\n= 2'. This is a valid initial value for most deployments. The exception\nis for the AIO-SX single OSD installation (which is our default minimum\nAIO-SX configuration). In this deployment configuration, this value will\nproduce a HEALTH_WARN specifying \"Degraded data redundancy\".\n\nThis commit will set 'osd_pool_default_size' based on the deployment and\nspecifically set it to '1' for the AIO-SX. This will provide a HEALTH_OK\ncluster on controller unlock.\n\nIf/when additional OSDs are added, the 'system storage-backend-modify'\ncommand can be used to change the replication factor to provide a higher\nlevel of data redundancy.\n\nThis change removes the long-stanging need to run the following command\nwhen provisioning the AIO-SX:\n\n  ceph osd pool ls | xargs -i ceph osd pool set {} size 1\n\nThis will also now enable automatic loading of the platform-integ-apps\nk8s application and subsequent loading of the rbd-provisioner for\npersistent volume claims on the AIO-SX.\n\nChange-Id: I901b339f1c7770aa16a7bbfecf193d0c1e5e9eaa\nStory: 2005424\nTask: 33471\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Referencing the new OVS docker image\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"FluxCD: Support disabling release instead of chart\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable nova service cleaner in helm chart\n\nEnable service cleaner cronjob in nova helm chart.  This will run hourly\nand delete any nova services that are no longer up (e.g. conductor,\nscheduler & consoleauth).  These will be left over after controller\nlock/unlock or application-update.\n\nChange-Id: I001bf79b497eb1924b4252612c5ead6e992e8196\nCloses-Bug: 1835565\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Reduce neutron workers from eng_workers to eng_workers_by_2\n\nIn the case of a LO DOR with neutron workers equal to the number of\ncores, neutron-server was observed to consume nearly all of the CPU,\ncausing critical CPU alarms, and starving out the system.\n\nIn order to prevent this, this commit changes both the number of API\nworkers, and the number of RPC workers, to be eng_workers_by_2 rather\nthan eng_workers.\nBy cutting the number of workers in half, this change prevents too much\nthroughput in neutron from grinding the system to a halt, and provides a\nreduction in the overall time for a LO DOR. as well as giving somewhat\nmore consistent DOR results, consistenly <~45 mins with this change,\nrather than frequently over an hour, or not completing without this\nchange.\n\nChange-Id: Ib40257ef34766a250b70edcb704220675ed0cc85\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow subcloud to use central-cloud's local registry\n\nRemove the IP address URL encoding as it is not required for the\nthe dnsmasq.\n\nChange-Id: I25bd6d637e468188b4641c601c0d30e26f4c09d6\nPartial-Bug: 1846799\nSigned-off-by: Tao Liu <tao.liu@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Block the configuration of non-accelerated interface\n\novs-dpdk does not support non-accelerated data interface\nconfiguration and fails silently. There is also partial code\nin stx-config which is related to non-accelerated data\ninterfaces which needs to be removed.\n\nThis commit removes the unsupported code as well as implements\na semantic check to block this configuration.\n\nCloses-Bug: 1790522\n\nChange-Id: I921e92058a070526627a3f726931dafdd2370591\nSigned-off-by: eric zhang <eric.zhang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add runtime reconfiguration of kubelet\n\nThis adds the CLI command 'system kube-config-kubelet'. This invokes\npuppet runtime manifests to reconfigure kubelet-config ConfigMap\nwith new parameters, and to upgrade kubernetes nodes with new\nparameters, and restart kubelet. This gives the ability to update\nkubelet parameters with a software patch.\n\nThe specific kubelet-config parameters are provided within the puppet\nmanifests and its supporting parameters script. The specific settings\nvalues and engineering are described in the puppet component.\nIdentical settings are also configured at install time in\nansible-playbooks.\n\nTESTING:\nPASS - manually fill /var/lib/docker to exceed imageGC and\n       verify GC operates\nPASS - AIO-DX fresh install gets updated kubelet config\nPASS - AIO-DX apply/remove designer patch with updated kubelet config\nPASS - 'system kube-config-kubelet' updates K8S nodes kubelet config\nPASS - AIO-DX reinstall controller-1 has updated kubelet config\nPASS - AIO-DX install new worker node gets updated kubelet config\nPASS - build and view REST documentation\n\nPartial-Bug: 1977754\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/844298\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/844305\n\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\nChange-Id: Iad32a724d3f681bc9854fa663299f8539f70fd2a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update overrides and armada manifests for nova-api-proxy\n\nChanges include:\n - Enable nova-api-proxy chart in the armada manifests\n - Update the password overrides to use the new password generation\n   method which was made in https://review.openstack.org/#/c/613175/\n\nChange-Id: Icc79c89edf3753ca1ef2ab5b79b8a1822880f617\nStory: 2004007\nTask: 26953\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move neutron static configs to Armada manifest\n\nMove all neutron static configurations from the overrides to the\nArmada manifest.\n\nThis is being done so we have a consistent way of managing\ncontainerized openstack configurations. Static configurations will\nbe located in the Armada manifest and dynamic configuration will be\nlocated in the overrides files.\n\nStory: 2003909\nTask: 29433\n\nChange-Id: I5baf0bbc15912e0303955456151e69856bba0385\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Infrastructure and Cluster Monitoring\n\nIntroduce a new Armada manifest (stx-monitor) that defines the\nnecessary software components and services to deploy a\nmonitoring solution for the infrastructure and Kubernetes cluster\nas well as the services it is running.\n\nThe Elastic 7.x Apache 2.0 Licensed (\"oss\") images are included.\n\nThe following Elastic components are introduced in this commit:\nelasticsearch, filebeat, metricbeat, logstash, kibana.\nThis enables the build of the stx-monitor application manifest\nand upon application, the capturing of logs  and metrics\ninto elasticsearch.  The logs and metrics may then be viewed with a\ntool such as Kibana.\n\nThe stx-monitor application is built:\n   build-pkgs monitor-helm\n   build-pkgs stx-monitor-helm\n   build-helm-charts.sh --app stx-monitor\n\nThe settings for elasticsearch helm chart are set to allow mtce actions,\nsuch as host-lock, of a controller.\n\nThe following host labels are required on controllers prior\nto the application-apply:\n    system host-label-list controller-0\n    (and, in duplex, for controller-1)\n    | controller-0 | elastic-controller      | enabled     |\n    | controller-0 | elastic-data            | enabled     |\n    | controller-0 | elastic-client          | enabled     |\n\nTests:\n    build-helm-charts.sh --app stx-monitor\n    system application-upload\n    system application-apply\n    host management: host-lock, host-swact, host-unlock\n    Determine the port for kibana:\n        kubectl get service -n monitor\n        Access kibana via <oamip>:<service port>\n    verify logs and container logs are captured, include subdirs\n        under /var/log such as /var/log/openvswitch\n    system application-remove\n    system application-delete\n\nChange-Id: I0e2f94d302b3ec3a22ee5853d529efb6b423bdaa\nDepends-On: Ic9a5b909dfbf60e39f98f3f14fe9bbac2de1d42b\nStory: 2005733\nTask: 31081\nCo-Authored-By: Kevin Smith <kevin.smith@windriver.com>\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "CEPH: Adding OSD storage devices no longer need nodes to be locked\n\nCurrent procedure for adding OSDs on AIO-DX and Standard w/o storage\nnodes (2+2) requires controllers to be locked, OSDs added, node\nunlocked, controllers swacted then lock/unlock is needed for the\nother controller. This is too complex and not suitable for\nproduction.\n\nThis commit simplifies OSD management by enabling runtime addition on\na node that is operational 'enabled' thus avoiding the complex\nprocedure described above.\n\nThe runtime addition is handled by executing the Ceph OSD puppet\nmanifests when OSDs are added via the 'host-stor-add' API. Ceph OSDs\nare stopped, manifests are executed, OSDs are started and status is\nreported back to sysinv.\n\nMonitoring is done in a new column called 'state' with 4 values:\n1. 'configuring' - puppet manifests are running;\n2. 'configuring-on-unlock - node is locked and manifests will be run\n   on unlock;\n3. 'configured' - once configuration is successful, #1&#2 above will\n   turn into #3;\n4. 'configuration-failed' - error state if manifests fail, this may be\n   corrected by a lock/unlock of the node or a reinstall;\n\nThe 'state' column can be checked with 'system host-stor-list\n<node_id_or_hostname>'.\n\nChange-Id: Iccaaa0728a43936cd4c6e1ed590e01ba8f0fbaaa\nStory: 2002844\nTask: 29795\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve KubeOperator.list_custom_resources()\n\nThis commit extends the capabilities of list_custom_resources() to send\nout other parameters that may be used with the CustomResource API such\nas:\n- pretty\n- label_selector\n- resource_version\n- watch\n\nPartial-Bug: 1978346\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I8cb9fbb42865bfdb0718a0fea5300b54b1135ef3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO Reduce number of workers\n\nApply new rule for AIO eng_workers globally. Set eng_workers for all AIO\nvariants based on the number of platform cores, not exceeding 2 for AIO\nsimplex, Xeon-D and virtual box and not exceeding 3 for AIO duplex.\nAll eng_workers derivatives are set to 1 for AIO. A service can add an\nadditional worker if it is deemed necessary in its own puppet\nfile going forward.\n\nTests conducted:\n- Bulk VM launch/delete via heat stack create/delete - duplex (20 VMs) &\n  simplex (10 VMs)\n- Swact, failover, parallel live migration - duplex\n- Lock/unlock with max VMs, DOR - both duplex & simplex\n- Sanity, nightly sanity - both duplex & simplex\n- Full nova regression - duplex\n- Bulk VM launch/delete stress test - duplex (60 VMs)\n- Platform CPU adjustments via system host-cpu-modify\n- Ceilometer message queues verification\n- Standard system installation\n\nChange-Id: Ibd0cd1ae78591a0d979240e66a678f64c6cac2f5\n",
        "issue_summary": ""
    },
    {
        "commit_message": "kubelet does not start due to garbled cpulist\n\nThis adds consistent quote wrapping around sysinv puppet hieradata\nvalues containing complex cpulist or list of ranges.\n\nTwo new variables were introduced by commit\n92828038b4cfa720c6dfc74fbdcb2e463ac5996d Enable --reserved-cpus option\nin k8s v1.18.1.\n\nplatform::kubernetes::params::k8s_all_reserved_cpuset, and\nplatform::kubernetes::params::k8s_platform_cpuset.\n\nWithout the quotes, any value containing a comma gets interpreted\nas octal without comma, this results in a strange invalid integer.\nThis leads to kubelet fail to start. and node will not come up.\n\nThis issue was more likely when multiple platform cores are reserved,\nand hyperthreading is enabled, since that causes non-consecutive\nintegers specified in the reserved list.\n\nChange-Id: I029d89cd8a6f1ca12078d9b86ae05e6660fa2af6\nCloses-Bug: 1885316\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add keystone-api-proxy helm charts and overrides\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Convert cgtsclient from setuptools to pbr. Add tox.\n\nPrimary reason for this change was to update the spec and setup files\nfrom basic setuptools to use pbr\nThis allows the autogenerated  /usr/bin/system file to directly call the\nmain method without using pkg-resources.\nThis will provide a performance improvement of .5 seconds per CLI call,\nonce the other pkg_resources issues are resolved\n\nSecond reason for this change was to wire in the tox unit tests.  This\nalso includes pep8, pylint and coverage.\nCurrently pep8 does not perform the 80 char limit check\nCurrently pylint still reports some issues\n\nThis should not affect the RPM names being generated or otherwise affect\npatching or upgrades.\n\nChange-Id: I9f14c9216fdcc63930a4b2849102b58442706144\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Wait for pod termination on stx-monitor remove\n\nOn removal of the stx-monitor application, wait for all pods\nto have terminated before moving to 'uploaded' status.\nThis will prevent the user from issuing an application-delete\ncommand which could possibly timeout.\n\nChange-Id: I116a98bdc60a4a7fe05e50eb9b4ddd4e6ef2e24f\nCloses-Bug: 1868567\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove usage of /etc/kubernetes/kubeadm.yaml\n\n/etc/kubernetes/kubeadm.yaml could contain stale data, for example, from\nchanging kube-apiserver parameters. There are currently no system impacts\nfrom using the stale file, but as we change more parameters, there could\nbe system impact. This commit makes the existing usage of kubeadm.yaml\ngenerate a temp copy of the file with current data first.\n\nChange-Id: I62391d184e3e5d6397a9af4f43c7c7ec19314afc\nPartial-bug: 1866695\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Support shared LDAP share in region config\n\nThis patch enhanced region configuration to support LDAP as shared\nservice optionally for both IPv4 and IPV6 management network.\nBy sharing LDAP service, management of system users can be\ncentralized at primary region.\n\nA LDAP_SERVICE_URL=<[ldap://]ip_address[:port]> can be specified in the\n[SHARED_SERVICES] section of region configuration file, the secondary\nregions will then be setup and share the LDAP service running at the\nspecified URL of the primary region. If no LDAP_SERVICE_URL is\nspecified in the [SHARED_SERVICES] section, the secondary regions will\nsetup and use local LDAP service running at the region's controllers.\n\nDecouple NSLCD from the open-ldap SM service and manage it by PMOND\ninstead. This is needed because in the Shared LDAP case, we deprovision\nthe open-ldap service on the Secondary Region which renders NSLCD\nunmanaged.\n\nAdditionally, we allow the Secondary Region or Sub Clouds to bind\nanonymously, but still need to support LDAP read operations in these\nregions such as ldapfinger or lsldap. For this purpose, the ldapscripts\nruntime library has been modified to allow anonymous binds during LDAP\nsearch operations.\n\nChange-Id: Ic9f4d157c0eab02a8dabbdae28d508d4aef05fa2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Armada-Sysinv integration\n\nInitial implementation of Armada integration with sysinv which\nentails:\n\n- Basic application upload via system application-upload command\n- Application install via system application-apply command\n- Application remove via system application-remove command\n- Application delete via system application-delete command\n- Application list and detail viewing via system\n  application-list and application-show commands.\n\nThis implementation does not cover the following functionalities\nthat are either still under discussion or in planning:\na) support for remote CLI where application tarball resides in\n   the client machine\nb) support for air-gapped scenario/embedded private images\nc) support for custom apps' user overrides\n\nTests conducted:\n- config controller\n- tox\n- functional tests (both Openstack and simple test app):\n    - upload\n    - apply\n    - remove\n    - delete\n    - show\n    - list\n    - release group upgrade with user overrides\n- failure tests:\n    - no tar file supplied\n    - corrupted tar file\n    - app already exists/does not exist\n    - upload failure (missing manifest, multi manifests,\n      no image tags, checksum test failure, etc...)\n    - apply failure (nodes are not labeled, image download\n      failure, etc...)\n    - operation not permitted\n\nChange-Id: Iec27f356bd0047b2c7ef860ab3a2528f5a371868\nStory: 2003908\nTask: 26792\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove stale alarms in k8s apps upgrade script\n\nAdded a step to remove \"Application Update in Progress\" alarms\n(750.005) that sometimes remain after updating k8s apps as part of a\nplatform upgrade. The alarms remain due to an IPC error (root cause\nunclear). The issue is intermittent and very rarely seen.\n\nTest Plan:\nPASS: In a simplex upgrade activation stage (22.06 to 22.12), observe\n      the logs in /var/log/sysinv.log. During k8s apps upgrade script,\n      when app apply start, as soon as you see a log with \"Applying\n      app <app>. Overall completion ..\", restart fm-mgr service. Wait\n      for the app to finish applying. Even if there was a failure while\n      connecting with FM manager, when activation completes, there\n      shouldn't be any 750.005 alarms.\n\nCloses-Bug: 2003228.\nSigned-off-by: Marcelo de Castro Loebens <Marcelo.DeCastroLoebens@windriver.com>\nChange-Id: I74b2a1f29302842452136eb3d3cb150f4c31ac0b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "rootca update upload cert API\n\n- New REST API for kube-rootca-update-upload-cert\n- Utility functions to help implementation for this new API,\nextract information from PEM file that will be received.\n- Utility function to create custom kubernetes resource\n(in this case, to create an issuer that will sign\ncertificates with our new rootCA)\n- Utility function to extract current k8s rootCA on\n/etc/kubernetes/pki/ca.crt. The procedure will use it to store\ninformation in DB and to allow users to follow the change\non the respective k8s rootCA\n- Implementation of upload-cert in sysinv-conductor\n- Renaming of some states to be presented during the execution\nof kube-rootca-update procedure\n- Tox unit tests for ConductorManager additions\n\nStory: 2008675\nTask: 42406\nChange-Id: I0a4dd47ca05ae2ca7f150d813c3ff272d7fa8068\nDepends-On: https://review.opendev.org/c/starlingx/config/+/788947\nSigned-off-by: Joao Soubihe <JoaoPaulo.Soubihe@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge remote-tracking branch starlingx/master into HEAD\n\nChange-Id: I251438ffa46abb3840e0709240a074cfd06a0848\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow DNS server configuration for kubernetes\n\nIn kubernetes deployments, a DNS server is required to locate\nthe registry servers used to download the kubernetes images.\nCurrently, when config_controller is run, the 8.8.8.8\nnameserver is used, with no way to change it. Some users\nneed to specify their own name server to be used during\nthe execution of config_controller.\n\nThis change allows the user to specify up to three DNS\nservers when running config_controller interactively or with\na config file. If using a config file, add the following\nsection to the config file (only one nameserver is required,\nbut up to three are allowed):\n\n[DNS]\nNAMESERVER_1=8.8.8.8\nNAMESERVER_2=8.8.4.4\nNAMESERVER_3=9.9.9.9\n\nChange-Id: I59556138a11c6f627f45886a2da6b8a1ad9d89e1\nCloses-bug: 1812449\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial HA kubernetes deployment\n\nProvides initial HA support for our kubernetes deployment, including:\n- Tuning kubelet and kube-controller-manager configuration to provide\n  faster detection/response to node failures. Pods on failed nodes\n  will now be evicted in approximately 50s vs. the default of about\n  5m40s.\n- Configure kube-dns and tiller-deploy pods with a node selector to\n  ensure they only run on master nodes.\n- Update VIM to apply NoExecute taint to any kubernetes node when host\n  services are disabled (e.g. due to host lock or host failure).\n  Kubernetes will then evict any dynamic pods from the node (but not\n  static pods or daemonset managed pods).\n- Update VIM to remove NoExecute taint from any kubernetes node when\n  host services are enabled.\n\nChange-Id: I71cb5b5fb066b752fa909b297ad839aa94c0edb1\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\nStory: 2002843\nTask: 22790\n",
        "issue_summary": ""
    },
    {
        "commit_message": "LLDP OVS enablement: puppet configuration\n\nThis commit introduces puppet configuration enabling LLDP to operate over\nOVS.  Specifically, separate ports flows are configured to handle LLDP\ntraffic.\n\nIn addition, we restrict the lldpd daemon from\noperating over bridge, tap, and ovs-netdev devices.\n\nStory: 2002946\nTask: 22940\n\nChange-Id: Ibadc9c082425412b5b68b02a55e8c02692de0e17\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix Distributed Cloud Subcloud Compute Node Unlock\n\nService tokens were introduced in Nova Compute to resolve another\nissue. The change incorrectly adds the call to the nova::keystone::auth\nclass, which will attempt to test & set the Nova User and the Nova\nendpoints. This is a redundant operation as the Nova Controller\nmanifest would already have done this.\n\nThis increases the apply time of the Nova Compute manifest, since the\nkeystone::auth is a relatively heavy class - doing a number of\nList/GET calls to enforce the idempotentency of the underlying Exec\nclass.\n\nFunctionally, this breaks the Compute node in a subcloud as it uses an\nincorrect keystone auth url to try to create the Nova user.\n\nChange-Id: I1809b62bbb60a04d08c0afee87945fff4c0a99a8\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Decouple armada/helm stx-openstack plugins from sysinv\n\nRemove the stx-openstack helm and armada plugin modules from\nsysinv. These will now be packaged as part of the stx-openstack\napplication and reside in the openstack-armada-app repository.\n\nChange-Id: I7e1ae1d8a82ddf4c0beb94da0c4bb01328e28880\nDepends-On: https://review.opendev.org/#/c/687469/\nStory: 2006537\nTask: 36755\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "PTP: fix VLAN interface not working\n\nptp4l configuration needs the correct VLAN interface name for the\nport section.\n\nFor example: if the VLAN interface creates the Linux interface named\n'vlan100@enp0s8', the port section must be 'vlan100' and not 'enp0s8'\nnor 'vlan100@enp0s8'.\n\nTest Plan:\nPASS: Assign VLAN interface to PTP instance\nPASS: Assign bond interface to PTP instance\nPASS: Assign eth interface to PTP instance\n\nCloses-Bug: 1989797\n\nSigned-off-by: Caio Bruchert <caio.bruchert@windriver.com>\nChange-Id: I953fee83151bc1546786e495514c9352c8ccfc0a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Modify PCI IRQ Affinity agent plugin\n\nThis change aims the parameterization of the PCI IRQ Affinity agent\ninteraction with openstack services.\n\nTest plan:\nPASS: Test the PCI IRQ Affinity agent puppet manifests apply behavior.\n\nRegression:\nPASS: Successfully build and install starlingx ISO.\n\nStory: 2009702\nTask: 44184\n\nSigned-off-by: Iago Estrela <IagoFilipe.EstrelaBarros@windriver.com>\nChange-Id: I15152577f3ce3ea6d2b1c844b9d8fc79688cec0f\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update nova overrides to fix console addressing\n\nUse new nova helm chart config option introduced in dependent commit to\nprevent nova from overriding our per host override for VM console\naddress.\n\nCloses-Bug: #1815490\nDepends-On: I86eb80578b23fd89b7f9643b943ee759f26a15be\nChange-Id: I7617157b3b2848cbbe2d9014b900cd437ac082a6\nSigned-off-by: Gerry Kopec <gerry.kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv and charts default image to new tags\n\nAs part of the migration from pike/master to stable/dev,\nthis commit updates charts and sysinv to update the default\ntag to master-centos-dev-latest.\n\nChange-Id: I3cebd01e259889ac8099cb13542778d308d8b053\nStory: 2005248\nTask: 30269\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO reaffine tasks and k8s-infra during startup\n\nThis update reimplements the affine-tasks init script and service to\ndynamically reaffine tasks and k8s-infra cgroup cpuset on AIO nodes.\nThis accomodates CPU intensive phases of work. Tasks are initially\nallowed to float across all cores. Once system is at steady-state,\nthis will ensure that K8S pods are constrained to platform cores and\ndo not run on cores with VMs/containers.\n\nThis will speedup the first stx-application apply, as well as pod\nrecovery after lock/unlock, reboot, and controller swact.\n\nThis script waits forever for sufficient platform readiness criteria\n(e.g., system critical pods are recovered, critical openstack pods\nare running, nova-compute pod is running) before reaffining back\nto platform cores.\n\nThis corrects the pod affinity problem seen on AIO introduced by fix\nfor bug: 1826592, commit e513baad44181f667085886007632d0ebf79eeb0,\ni.e., fix allowed the AIO to not timeout, but left pods floating.\n\nChange-Id: Ic257378eac451904a200a0f2e79f7bc4f8373009\nPartial-Bug: 1832781\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "unknown kube version unit test: set system mode as duplex\n\nThis change https://opendev.org/starlingx/config/commit/8c359198c8fc1d811d15f98fa3546fbfbd247d69\nadded a condition to mark kube versions to be available if they\nare newer than the current version for AIO-SX.\n\nThe unit test to ignore unknown kube version fails intermittently\ndue to this change.\nOne such run: https://zuul.opendev.org/t/openstack/build/e2387230c96c4069bca14b3ae3532e7f\n\nSetting system mode as duplex will never let\nthe unit test fail.\n\nTest Plan:\nPASS: All unit tests pass\n\nCloses-Bug: 2018127\n\nSigned-off-by: kaustubh dhokte <kaustubh.dhokte@windriver.com>\nChange-Id: Ie26a12459d90c9a050276f6ea829e255d3e96807\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Keystone DB sync - update puppet manifest for dcdbsync service\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update NTP manifest to ensure controller syncs from mate if no servers\n\nThis update enhances the check around the ntp.pp ntpdate call to only\navoid running the command when there are no external servers on an\nAIO-SX controller. If running in duplex, the standby controller can\nsync its time from the active controller.\n\nChange-Id: I7619ee5a488a3ec795aa196d305c7c7a66ce1c2f\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv for k8s 1.22.5\n\nThe old way to retrieve the kubernetes\njoin cmd is no longer supported in k8s\n1.22.5. The new way of retrieving the\ninformation needed by kubeadm is added\nin this commit.\n\nAlso added the information needed for\nsystem kube-version-list.\nTested upgrade from k8s 1.21.8 on SX, DX and\nStandard setup. The k8s componenets upgrade\nis successfull.\n\nDepends-on: https://review.opendev.org/c/starlingx/integ/+/822904\nStory: 2009789\nTask: 44306\nChange-Id: I7f39baae66dc660fafbfb5b0a83897e97e1f1b4b\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update nova overrides to fix console addressing\" into f/stein",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleanup keystone service parameters\n\nThe only valid keystone service parameter is:\n  identity : config : token_expiration\n\nAll others keystone service parameters have been removed\nand their un-needed validators and constants are cleaned up.\n\nChange-Id: Icaa2222906e0335bd56eb680ab7a5ce592819495\nStory: 2004764\nTask: 35691\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"debian: update python-kubernetes function calls\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create a new unreplicated filesystem for gnocchi\n\nPuppet changes to configure the default 5G filesystem for gnocchi.\nGnocchi storage moves from /opt/cgcs/ceilometer/data to /opt/gnocchi.\n\nStory: 2002825\nTask: 24240\nDepends-On: https://review.openstack.org/#/c/590449/\n\nChange-Id: If943278d9aaaafe2bfa1f24017499fff6b3e0ecc\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Disable DAD on parent of IPv6 vlan interface\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Update kernel isolcpus boot args to isolate mananged IRQs\n\nUpdate kernel bootargs from isolcpus=<cpulist> to\n\"isolcpus=nohz,domain,managed_irq,<cpulist>\" to reduce jitter to\nlow-latency applications. This configures kernel managed IRQ kernel\nthreads (such as NVMe) so they do not land on isolcpus cores.\n\nThis setting is recommended by kernel SME.\n\nTest Plan:\nPASS: Verify isolcpus kernel boot args have new settings.\n\nCloses-Bug: 2002638\n\nSigned-off-by: Sachin Gopala Krishna <saching.krishna@windriver.com>\nChange-Id: I419e3aa2823de4615597c40660a5547530635535\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid SRIOV misconfiguration at FEC device\n\nWhen performing a batch SRIOV configuration (e.g. from shell script),\nit may be possible that commands consecutively issued - either related\nto interface(s) or a second FEC device settings - make the FEC device\nconfiguration to be not fully applied, and then unlock fails by\nsemantic check.\n\nThe reason for that is hieradata might get updated by intermediate\ninventory reports that could overwrite the values to be set with the\ncurrent ones, since it hasn't separate fields for both values. This\nchange makes 'num_vfs' to be used as the \"configured\" value (like it is\nactually used in puppet manifest) and creates another 'sriov_vfs' that\nwill contain the current value for number of VFs.\n\nBONUS: Fixed also the missing contents of 'extra_info' field when\nshowing the device details (output of 'system host-device-show' command)\n\nPartial-Bug: #1931458\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: Ie87ccfe4e27fe2fbad69b3bcc8e2687817be6893\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SNMP upgrade scenario\n\nChanges done to automatically upgrade SNMP,\nafter a system upgrade.\n\nCloses-Bug: 1944391\n\nSigned-off-by: Jose Infanzon <jose.infanzon@windriver.com>\nChange-Id: Iefd6714d814e0071723f8321a3765bb6eabab7b3\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removing horizon-region-exclusion support\n\nThis functionality is no longer supported with vanilla\nhorizon so this config file is being removed.\n\nDepends-On: https://review.opendev.org/#/c/659326/\nChange-Id: I61e2fa1d3da3fdc303fd35da8d7e0edbfd33e9d5\nStory: 2004520\nTask: 30987\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding support for Ceph storage during Simplex to Duplex migration\n\nThis change will allow users to migrate a simplex system with Ceph\nenabled to duplex via system modify command. During unlock it will\nget the cephfs filesystem pool names and generate the necessary hieradata.\nThis file along with other puppet changes on stx-puppet will be used to\nperform necessary changes on the Ceph cluster to support a duplex\nconfiguration.\n\nStory: 2008587\nTask: 42079\n\nSigned-off-by: Pedro Linhares <PedroHenriqueLinhares.Silva@windriver.com>\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/783727\nChange-Id: Idaa7ebbf3a9c55658187e1d5ca6c357349659d43\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update provider_uri for openldap syncrepl over TLS\n\nThis change updated provider_uri to be 'ldaps' so openldap syncrepl\nwill be secure over TLS.\n\nThis change also updated puppet tox unit tests accordingly.\n\nTest Plan:\nPASS: DX system deployment\nPASS: Check syncrepl section in slapd.conf.backup, it should contain:\n      provider=ldaps://<controller>\n      tls_cert=\"/etc/ldap/certs/openldap-cert.crt\"\n      tls_key=\"/etc/ldap/certs/openldap-cert.key\"\n      tls_cacert=\"/etc/ssl/certs/ca-certificates.crt\"\n      tls_reqsan=demand\nPASS: On one controller, add a new openldap user, and check the\n      newly added user exists on the other controller by:\n      ldapsearch -xH ldaps://<the other controller>\n      -b 'ou=people,dc=cgcs,dc=local' '(objectclass=*)' |\n      grep <the newly added user>\nPASS: After active controller swact, repeat TC #3 again.\n\nStory: 2009834\nTask: 46245\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/856769\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: If59016555e0762693ce3e9eeea33ae61e7dda4b1\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"Restore ceph during system restore\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Revert \"Add docker proxy configuration for kubernetes\".\n\nThis change broke the installation of kubernetes system (config_controller --kubernetes) when no docker proxy was specified.\n\nThis reverts commit e4086a073b7f661d4014061f25525120c27ea679.\n\nChange-Id: I8343741a50fa0857fde9dfe0ee8f81de80a0ff13\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create ceilometer resource types in gnocchi\n\n\"ceilometer-upgrade\" needs to run through puppet in order to create\nceilometer resource types in gnocchi as well as vswitch resources if\nthe vswitch type is not ovs.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: I757921f8d73068969f385012998c7fe778e4ad81\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Upversion tiller image\n\nThis commit upversions tiller, in order to fix an issue that is being\nseen with per-host overrides in neutron chart.\n\nRequires at least the following tiller image for the neutron per-host\noverrides to work correctly:\n\ngcr.io/kubernetes-helm/tiller@sha256:\n022ce9d4a99603be1d30a4ca96a7fa57a45e6f2ef11172f4333c18aaae407f5b\n\nStory: 2003909\nTask: 27082\nChange-Id: If70fe5b0d7dfc09f766f8ddfdb34dd48b44721bf\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provision dbmon for AIO-DX and DC systemcontroller\n\nThis change is to provision a dbmon service. The dbmon service is to\nmonitor and correct mariadb cluster state for a 2 servers\nconfiguration. See https://review.openstack.org/#/c/650288/ for\ndbmon service detail.\n\nFor the time being, the dbmon service will be provisioned regardless\nstx-openstack application has applied or not. OCF script will handle\nthe scenario that stx-openstack has not been installed.\n\nA new user story is to be defined to enhance SM to dymamically\nprovision/deprovision a service. When the enhancement is ready,\nthe service will be provisioned only after stx-openstack application\nis applied.\n\nStory: 2004712\nTask: 30363\n\nDepends-On: https://review.openstack.org/#/c/650301/\nDepends-On: https://review.openstack.org/#/c/650288/\n\nChange-Id: Ic8ca45c4e9906cb87b92fd8a0fe61ef9134642b6\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable platform helm repo for RPM installed charts\n\nAdd a new helm repository, 'stx-platform', designed to hold charts that\nneed to be delivered as part of the basic platform. These charts will be\ninstalled via RPMs as part of install and patching.\n\nUpdate the existing stx-openstack armada application manifests to\nreference the new location of the existing 'starlingx' repo. The\n'starlingx' repo will be renamed with a future commit to 'stx-apps'.\n\nEnable multiple repository support when generating helm overrides for\nthe chart location.\n\nThis updates both the puppet manifests and ansible playbook for initial\nand subsequent configuration scenarios.\n\nChange-Id: I0caaa878a6c6781d038b48b8caa2aa507ee9568a\nDepends-On: I4b1a3615a6bd5d0bdd834a1cdf27c05d5a1057a0\nDepends-On: I096d5ac126efc97f9a0a0f54f1e02323d936281c\nStory: 2005424\nTask: 30644\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "AIO-SX Regression: Memory usage exceed alarms appeared during test run\n\n- Reduce both CPU and memory footprint for AIO simplex by reducing the number of workers across the board.\n- In addition:\n     a. Reduce ceilometer workers to 1 as the traffic generated from max number of VMs in simplex (20) does\n        not warrant more workers than 1. Increase batch timeout to reduce load.\n     b. Change keystone workers factor from 1.5 to 1 which further reduces the number of keystone workers\n        for simplex. The number of requests do not warrrant more workers than other services.\n     c. Reduce the number of nova api metadata workers to half of nova api compute workers for both AIO and\n        standard configs based on LO data.\n  AIO installations, simplex sanity & sanity nightly all passed. Sanity, parallel VM/volume launch timings\n  also improved. Ceilometer messages were cleared timely.\n\nChange-Id: Idfd09d53af834276bc5f8e26853690ae3bf9b139\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: https://review.openstack.org/578134\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Log and exception handling for platform_nfs_ip\n\nAdding log and exception handling for update_platform_nfs_ip_references\nto confirm if the execution was correct.\nDuring an upgrade from Rel. 7 to Rel. 8 the upgrade_activate failed\nand after some time it was executed again. In the second\nupgrade_activate execution, the update_platform_nfs_ip_references\nwas called again, but this is not expected because, according to the\nlogs, it was already executed and there is a condition where it just\nruns if the platform_nfs_ip is present in the database. Please note\nthat at the end of this function, the platform_nfs IP is removed by\naddress_destroy.\n\nTest plan\nPASS AIO-DX upgrade from Rel 7 to 8\n\nPartial-Bug: #2015392\n\nSigned-off-by: Fabiano Mercer <fabiano.correamercer@windriver.com>\nChange-Id: I8a162d372c04b26cc3a4db3fc45528678f9989a2\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Create a new drbd synch'd filesystem for ETCD\n\nThe new drbd fs for etcd will be managed by SM.\nEtcd data directory will be created on this new etcd-fs for kubernetes\nconfig.\n\nStory: 2002841\nTask: 22784\n\nChange-Id: I5a11a17e8292a074104a73052ea27d979cd68f57\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "isolcpus incorrectly specified when option is unused\n\nWhen 0 vswitch cpu cores are requested we passed 'isolcpu= ' to the grub\nconfig. This resulted in isolcpu being allocated when none should have\nbeen. We now check the values passed the grub and ensure they are not\nempty.\n\nChange-Id: I398e67820f4a12f78a8b457f2618fc1bb7b7cf81\nCloses-Bug: 1825423\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add semantic checks for k8s upgrade\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Generate admin_url to enable https for admin endpoints\n\nThis commit updated platform services' sysinv puppet plugins to\ngenerate proper admin_url hiera data to enable https for these endpoints\nduring controller unlock.\n\nThis commit also updated controller_config to copy and install dc admin\nendpoint CA cert and haproxy cert for the second controller.\n\nChange-Id: I21345a96f8a0ffb416069ff28dbcfa51b9e12359\nStory: 2007347\nTask: 39314\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Register configuration for ovsdb-server and ovs-vswitchd with pmon daemon\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Initial kubernetes config on controller\n\nSupport the deployment of kubernetes on controller-0 through a new\n\"--kubernetes\" option on the config_controller command. This is\njust an early version of the code to allow other to build on it.\n\nChange-Id: I8514ca35606d5573de3f52b56551395618cca79b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add pre-checks for k8s app upgrades to validate app states\n\nDuring an upgrade on an AIO-SX, images are automatically recovered after\nmigrating to the new release and the host is unlocked. While this is\noccurring, applications may be in an 'applying' or 'restore-requested'\nstate. Prevent application updates until these states clear to provide\nproper conditions for application rollback on failed upgrades.\n\nThis will fail the upgrade-activation step and log an appropriate\nmessage.\n\nChange-Id: I94af4cd79f0e792bcb05eef19999adfa5d166493\nStory: 2007403\nTask: 40118\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Fix word and statement errors in comments\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Set nova override to enable numa live migration\n\nUpstream nova has disabled instances with numa_topology from being able\nto live migrate (see https://review.openstack.org/#/c/611088 and\nhttps://review.openstack.org/#/c/635350/) due to numerous issues with\nthe current implementation.  They did provide a workaround config option\n(enable_numa_live_migration).  We want this enabled by default for\nfurther testing.\n\nStory: 2003909\nTask: 29402\nChange-Id: Iadd9e2351e41aadd7fd0bb9a6e18e622e677fa42\nSigned-off-by: Gerry Kopec <Gerry.Kopec@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cleaning up after application removal\n\nThis commit adds commands that run after the armada\nremoval to delete the pvs that are linked to pvcs from\nthe openstack namespace and then deletes the namespace.\n\nThe ceph-etc configmap was also added to the rdb-provisioner\nchart to remove the manual workaround.\n\nChange-Id: I546cebee549bc3ef81693692579596d2d72ebf95\nStory: 2003908\nTask: 28130\nSigned-off-by: Tyler Smith <tyler.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set Linux IDs for WAD users/groups created with SSSD\n\nWAD groups discovered by SSSD and imported in the stx platform\nneed to have Linux IDs so that WAD users in these groups can perform\nprivileged operations according to the group permissions.\nAn example would be the \"sys_protected\" group. In order to be able to\nallow the WAD \"sys_protected\" user to execute privileged operations\nwith the stx platform applications, the same way as a native stx\nplatform user would do, the \"sys_protected\" group needs to be assigned\nthe GID number \"345\" when discovered with SSSD.\nThis commit is configuring SSSD to achieve that because by default the\nthe WAD users/groups are mapped to Linux users/groups on stx platform\nusing Windows Security Identifiers (SIDs).\nOn the WAD server, the \"sys_protected\" WAD group's Posix schema\nattribute \"gidNumber\" would have been populated already as \"345\",\nbefore the SSSD connects to WAD server. Similarly, the WAD user's\n\"uidNumber\" attribute needs to be populated in the WAD server.\nThis commit also optimizes the SSSD sudo rules search.\n\nTest Plan:\nPASS: Successful install in AIO-SX system configuration.\nPASS: The Linux uid and gid configuration for users and groups\nrespectively is configured correctly in sssd.conf.\nPASS: SSSD service is successfully started.\nPASS: Verify SSSD caches WAD users and groups and they have\nthe Linux IDs set correctly.\nPASS: Verify remote ssh connection for discovered WAD ldap users.\nPASS: Verify WAD users in \"sys_protected\" WAD group can perform\nprivileged operations like \"source /etc/platform/openrc\".\nPASS: SSSD sudo rules search works as expected and the sudo rules\nare discovered.\n\nStory: 2010589\nTask: 48010\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: I452b1097c607cd270bd56f03f7eba0d1f21f325c\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Horizon: Error viewing system information page with https\n\nWhen system is configured with https, the sm-api internal endpoint\nis incorrectly configured with https in haproxy.\n\nCloses-Bug: #1794373\n\nChange-Id: I0d2bc14dc5b2ac89b0720e8bddd6fb63348f3afd\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable communication from nova-api-proxy to VIM\n\nPrior to kubernetes integration, the nova-api-proxy\ncommunicated with the VIM using port 30003 on the loopback\naddress. This worked fine when both the nova-api-proxy and\nthe VIM were running on bare metal.\n\nWhen nova-api-proxy is running in a pod, it\ncannot use the loopback address to communicate with the VIM,\nsince the loopback address is local to the pod. The\nnova-api-proxy pod will instead use the floating management\naddress (which is present on all systems) to communicate with\nthe VIM. The problem is that on AIO simplex systems, the\nfloating management address is also in the loopback subnet.\nThe fix for this is to use a non-loopback address for\nmanagement on AIO simplex systems. This required changes to\nconfiguration scripts/utilities to allow the user to\nspecify the management subnet on AIO simplex systems,\ninstead of hardcoding it to a loopback address.\n\nChange-Id: I26c15657471f8214e628c6d43eaab07eb8e744ec\nStory: 2003910\nTask: 28061\nDepends-on: Ib7c08bfc1c661a9fb347308e55cc806b4dd129ad\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow uploading an in-use volume to image using force option\n\nAs by default, cinder does not allow uploading an in-use volume\nto image, enable that in the cinder puppet manifest.\n\nChange-Id: I067c23ae896fa7de921e8e8bb67430aac7f9cab8\nCloses-Bug: 1795652\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add configuration for containerized keystone to VIM\n\nAdding configuration to the VIM for containerized keystone. The\nVIM will now support two keystone instances:\n- platform: bare metal keystone used to authenticate with\n  platform services (e.g. sysinv, patching)\n- openstack: containerized keystone used to authenticate with\n  openstack services (e.g. nova, neutron, cinder)\n\nFor now, the same configuration will be used for both, as we\nstill only deploy with the baremetal keystone.\n\nStory: 2002876\nTask: 26872\n\nChange-Id: If4bd46a4c14cc65978774001cb2887e5d3e3607b\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add docker proxy configuration for kubernetes\n\nCurrent config_controller for containerization pulls kubernetes\nimages from public container registry. This requires controller\nto access internet. If a host network is behind a proxy, there\nis no chance to setup docker proxy configuration during config_\ncontroller, therefore, kubernetes images are not accessible.\n\nDocker proxy configuration questions were added to require users\ninput http/https proxy and no proxy settings. The docker proxy\nconfigurations are added to service_parameter table in sysinv.\n\nhttp-proxy.conf is the proxy info file required by docker daemon,\ngenerated by docker puppet manifest. It consists of the user\ninput docker proxy configuration.\n\nTests:\nAIO-SX: public k8s images accessible\nAIO-DX: public k8s images accessible\nAIO-SX without k8s config: config_controller successfully\n\nStory: 2004710\nTask: 28741\n\nChange-Id: I9d301d105f9fe5e388a29dee03957514b9b44fa7\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable 'platform-integ-apps' application support\n\nThis commit enables a new application tarball by:\n - adding existence through the stevedore plugin framework\n - register it as a system app to that system overrides can be generated\n - provide initial overrides for the rbd-provisioner and\n   ceph_pools_audit charts\n - updates the rbd-provisioner to support installation of multiple\n   provisioners in the same cluster.\n\nChange-Id: I34ad8789768bfd081ab2dcd45d110d9cd8349875\nDepends-On: I0caaa878a6c6781d038b48b8caa2aa507ee9568a\nStory: 2005424\nTask: 30646\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Audit application status upon sysinv-conductor startup\n\nIf sysinv conductor process is abruptly terminated due to power\nloss, OOM, missed audit cycle, etc... while an application upload/\napply/update/remove is in progres; the status of the application\nis stuck in uploading/applying/updating/removing preventing any\nsubsequent system applications to resume (or revert) the operation.\n\nThis is the first commit of multi-commit change to improve the\nrobustness of the application framework.\n\nPartial-Bug: 1833323\nChange-Id: I73129d5621c77b50c2e29c078e6b99089244129f\nSigned-off-by: Tee Ngo <Tee.Ngo@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Decouple Ceph pools creation from sysinv\n\nFor a containerized deployment:\n- the following Ceph pools are no longer created by sysinv:\n  cinder-volumes, images, ephemeral, kube-rbd; the creation has\n  been left/moved to the helm charts as follows:\n    -> the cinder chart: cinder-volumes, cinder.backup\n    -> the rbd-provisioner chart: kube-rbd pools and\n       the ephemeral pool for nova (temporary)\n    -> glance: images\n- sysinv no longer supports updating the pool quotas\n- sysinv no longer supports updating the replication for Ceph pools:\n  the replication is updated in the DB through the\n  'system storage-backend-modify' command, but the chart is applying\n  the change through the helm overrides when the application is\n  (re)applied\n- sysinv no longer audits the Ceph pools and adjusts the PG num\n- sysinv no longer generates the Ceph keys for the Ceph pools and the\n  k8s secrets, as these have been moved to the rbd-provisioner chart\n- upon storage node lock, we determine which are the existing data\n  Ceph pools and deny lock if they are not empty\n\nNOTE: There are still parts of the pool management code that\nwill have to be removed once we switch to a containerized\ndeployment only. I've marked that with \"TODO(CephPoolsDecouple)\"\nto easily track it.\n\nValidation:\n- install AIO-SX & Storage setups with --kubernetes and\n  -> add Ceph (primary and secondary tier)\n  -> lock/unlock host/storage hosts\n  -> check pools are not created by sysinv\n  -> generate the stx-openstack application tarball\n  -> system application-upload stx-openstack\n     helm-charts-manifest-no-tests.tgz\n  -> system application-apply stx-openstack\n\n- install AIO-SX without --kubernetes\n  -> check lock/unlock\n\n- install Storage setup without --kubernetes\n  -> check lock/unlock of storage nodes\n  -> check Ceph pools are created\n  -> test quotas can be changed\n\nStory: 2002844\nTask: 28190\nChange-Id: Ic2190e488917bffebcd16daf895dcddd92c6d9c5\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add SSSD ldap password expiration control\n\nThis commit updates SSSD configuration to support SSSD\npassword expiration control mechanism for local openldap users.\nRemote WAD ldap users' password expiration is not supported by\nthese changes.\nThe SSSD implementation for password expiration replaces the\nuse of script \"/etc/profile.d/password-expiration-check.sh\",\ntriggered at login time.\nThe added SSSD configuration controls when ldap users' password\nhas expired. At login time, including ssh connections, the\nuser will be prompted to change the password when password has\nexpired according to the expiry period set at user account\ncreation.\nA password expiration warning will appear at login time to\nnotify the user in advance, according to the configured warning\ntime set at the user account creation.\nA warning that the password has expired is also logged in\n\"/var/log/auth.log\".\n\nTest Plan:\nPASS: Verify SSSD configuration in \"/etc/sssd/sssd.conf\" gets\nupdated with password expiration configuration.\nPASS: Create a local openldap user using \"ldapusersetup\" utility\nand set the \"shadowMax\" attribute for the user password to expire\nin 2 days. The ldap user attribute \"shadowMax\" gives the maximum\nnumber of days that a shadow password is valid.\nPASS: Use the command \"date\" to set the time in the future to get\nthe password to expire (e.g.\" date -s \"Tue Aug 10 06:33:37 UTC 2023\").\nPASS: Execute ssh using the ldap user you have just created.\nA message saying the password was expired should be displayed and\na prompt to change the password would follow up.\nPASS: After the password was updated try to login the user again\nusing the new password and should succeed.\nPASS: Verify that a warning saying that the user's password expired\nand needs to be renewed appears in \"/var/log/auth.log\"\n(e.g.:\"pam_sss(sshd:account): Access denied for user testuser1: 12\n(Authentication token is no longer valid; new one required)\").\nPASS: Verify that a password expiration warning occurs at login time,\nbefore the password actually expires. Examples: \"Your password will\nexpire in 1 day(s).\" or \"Your password will expire in 45 minute(s).\".\nUse real time for this test instead of artificially modifying the\ndate.\nPASS: Verify the password expiration warning occurs according to the\nconfiguration of the ldap user account.\nPASS: Check that script \"/etc/profile.d/password-expiration-check.sh\"\ndoes not exist.\nPASS: Verify ldap user password expiration in a AIO-SX and a subcloud\nof a DC system.\n\nCloses-Bug: 2029425\nDepends-On: https://review.opendev.org/c/starlingx/config-files/+/891300\n\nSigned-off-by: Carmen Rata <carmen.rata@windriver.com>\nChange-Id: Ic7e1dcb9f5a946fcf782d8336ba8a823fbbfb11e\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change platform core pinning in AIO\n\nThe reason for this change is that the docker and kubernetes\nprocesses are affined to the platform cores, and cpu\nstarvation can occur when those processes are loaded\nwith work, such as applying an armada manifest or downloading\ndocker images.\n\nWith this change, AIO will use the entire host cpu set rather than\njust the platform cpu set.\n\nFixes-Bug: 1826592\nChange-Id: Ic357e46804cac27b007fa58c52052970b2932780\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add retry for \"system kube-upgrade-abort\"\n\nIn the case of intermittent failure behavior during the abort step\nThis change will retry running kube_upgrade_abort process and also\nretries while taking etcd snapshot during kube_upgrade_networking\nstep.\n\nDuring the step 'system kube-upgrade-abort' this change achieves\nthe abort retry process by reporting failure to conductor when\nupgrade abort fails.Since it is using RPC to send messages with\noptions, we don't get the return code directly and hence, cannot\nuse a retry decorator.So we want to use the callback feature to\nhandle the success/failure path.\n\nIn the case of abort failure, container services become masked by\nsystemd and are temporarily disabled, so any API calls to\nkube-apiserver will fail. This update also skips the periodic\nkubernetes labels audit, and the host configuration updates which\nrequire the apiserver.\n\nTest Plan:\nAIO-SX:\nPASS: Manually hardcode to fail kube_upgrade_abort and verify\n      from the sysinv logs that the change tries to execute\n      runtime manifest\n\nStory: 2010565\nTask: 48204\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/886401\n\nChange-Id: I25bd112892b8a27a3b7affdca8e5faa8074e3bb6\nSigned-off-by: Saba Touheed Mujawar <sabatouheed.mujawar@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add docker restart to upgrade process\n\nThere is a known intermittent bug with docker which breaks some of\nits functions, such as downloading images [1].\nThe workaround is a service restart.\n\n[1] https://bugs.launchpad.net/ubuntu/+source/docker.io/+bug/1950751\n\nTest Plan:\nPASS upgrade-activate updates apps with:\n     - docker healthy (/var/lib/docker/tmp exists and service active)\n     - docker unhealthy (/var/lib/docker/tmp deleted)\n\nCloses-bug: 1999182\n\nSigned-off-by: Leonardo Fagundes Luz Serrano <Leonardo.FagundesLuzSerrano@windriver.com>\nChange-Id: Id68620d1814d390d26adb1a60569c74062b36a91\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Nova - Add ephemeral pool creation\n\n- remove the ephemeral pool support from the rbd-provisioner helm\n  chart. This was initially added to the rbd-provisioner helm chart\n  to support initial integration efforts.\n- remove the info for the ephemeral pool(s) from the rbd-provisioner\n  overrides.\n- update the nova overrides to include the necessary info for\n  creating the ephemeral pool. Right now only one pool is included,\n  but the nova chart supports multiple.\n\nChange-Id: I9850663fc86c62ed759714f1297cfdaa8183183f\nStory: 2005073\nTask: 29647\nSigned-off-by: Irina Mihai <irina.mihai@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use the division operator\n\nThe division operator in Python 3 results in a float, not an integer\nlike in Python 2. Use the truncation division operator instead.\n\nStory: 2006796\nTask: 42662\n\nChange-Id: Iceb9a41219176f32e51cbad8aaced6de9d7fe6ff\nSigned-off-by: Charles Short <charles.short@windriver.com>\n(cherry picked from commit 4f224effc743ac312215ed5600a1dab720c66cf1)\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add customer-specified certificates for kubernetes\n\nWe need the ability to update the Kubernetes ApiServer RootCA at\nansible-bootstrap-time. This includes the ability of being able to\nspecify the apiServerCertSANs such that user can specify additional\nDNS:<FQDN> and/or IP Records for the auto-generated\napiServerCertificate.\n\nThis adds support for storing the apiServerCertSANs in the sysinv\ndatabase and modifies the puppet manifest to support user supplied SAN\nrecords.\n\nPartial-Bug: 1837079\nChange-Id: I4d23828b31ced55d55b1c6932d0cfd6b59727288\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix puppet-lint warnings and errors\n\nThis update addresses the following errors and warnings\nfrom puppet-lint, with most corrections done automatically\nusing puppet-lint --fix:\n- 2sp_soft_tabs\n- arrow_alignment\n- arrow_on_right_operand_line\n- double_quoted_strings\n- hard_tabs\n- only_variable_string\n- quoted_booleans\n- star_comments\n- trailing_whitespace\n- variables_not_enclosed\n\nChange-Id: I7a2b0109534dd4715d459635fa33b09e7fd0a6a6\nStory: 2004515\nTask: 28683\nSigned-off-by: Don Penney <don.penney@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable PHC sanity check in case of software PTP mode.\n\nboundary_clock_jbod performs a sanity check to make sure\nthat all of the ports share the same hardware clock device.\nThis option is not needed in case of software PTP mode.\nMoreover it interferes with normal PTP operation in this\ncase and causes PTP clocks instability in a network.\n\nAlso, cleaning up unused pmon scripts for ptp4l and phc2sys\nand adding services dependencies from mainline linuxptp.\n\nChange-Id: If4bbe6af600dbdf38d301deafb7dc050a7754cad\nCloses-bug: 1824218\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add new kubelet filesystem to host_fs\n\nAdd a new filesystem called \"kubelet\" to all hosts with a default\nsize of 10G. This new fs will be managed by the host_fs API.\n\nAlso made the scratch filesystem resizable on all hosts.\n\nTested with install of hardware Standard and AIO-DX labs. Also\ntested install of a vbox AIO-SX lab.\n\nPartial-Bug: 1830142\nDepends-On: https://review.opendev.org/671120\n\nChange-Id: I968f84b8ba7a069ec3d7027d4eb4a7355a06d9d3\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Follow up on general naming for app openstack\n\nFixing the way the puppet plugin for pci_irq_affinity_agent retrieves\nthe openstack app after the merge of [1].\n\n[1] https://review.opendev.org/c/starlingx/config/+/814670\n\nStory: 2009669\nTask: 43899\n\nSigned-off-by: Thiago Brito <thiago.brito@windriver.com>\nChange-Id: I5b51cd344c39a62de97da51c35c87eb91a2b3560\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Distributed Keystone for Distributed Cloud\n\nThis feature adds the ability to run Keystone in each Subcloud and\nimplements a Distributed Service Catalog such that the Central Region\nKeystone ONLY contains the Identity endpoint for each subcloud.\n\nThe DC Manager and DC Orchestration framework then does a 2 stage lookup\nto first procure a token from the subcloud and then use that for further\ncommunication with that subcloud.\n\nThis delivery adds the following:\n- New DC Orch Identity Proxy SM service\n- Keystone manifest changes to run init_keystone in Subcloud to spawn a\n  local Keystone instance\n- Modify System Controller Identity endpoints 5000 to 25000, i.e binding\n  to DC-Orch-API-Proxy\n- DC Manager and DC Orch Changes to do a 2-stage lookup on subclouds\n  (Distributed Service Catalog)\n- Cherry pick Endpoint Filter Group patches into Openstack client\n- Add Resource Sync for Keystone Users, Projects and Roles and reporting\n  to DC Manager\n- Add Auditing for Keystone Users, Projects and Roles on Central Region\n  and Subclouds\n- Lab Setup changes to configure Tenant users and projects against the\n  Keystone DC Proxy (port 25000) so that these may be synced to\nsubclouds.\n\nStory: 2002842\nTask: 22785\n\nChange-Id: I2db7610532d1835246b29bedf2cb719669f11935\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "stx-monitor Application Flexible Config and Upgrade\n\nAdd enhancements to the stx-monitor infrastructure and monitoring\napplication to expand flexible configuration and upgrade capabilities.\n\nStory: 2005733\nTask: 36387\n\nChange-Id: I11cef36f416a1a1b1fd813c0c06f6c7a20a19a2a\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sysinv for Kubernetes 1.23.1\n\nChanges for upgrading from k8s 1.22.5 to 1.23.1\n\nTested upgrade succesfully from 1.22.5 to 1.23.1 on\nan AIO-SX setup.\n\nDepends-on: https://review.opendev.org/c/starlingx/integ/+/825654\nStory: 2009830\nTask: 444243\n\nChange-Id: I69cf2c96211ad73f8f0762272f617f0e818673d8\nSigned-off-by: Gleb Aronsky <gleb.aronsky@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove V1 from FM endpoint\n\nThis change is required to enable the FM panels in the\ncontainerized horizon. The fmclient dependency used by the\nback-end already includes the reference to \"v1\". Then \"v1\"\nshould not be part of the endpoint.\n\nStory: 2004008\nTask: 34183\n\nChange-Id: Ibe92d942b2847ef6d9271595fcc9ac2faad2fb13\nCo-authored-by: Sun Austin <austin.sun@intel.com>\nSigned-off-by: Mario Alfredo Carrillo Arevalo <mario.alfredo.c.arevalo@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable VIM monitoring of Openstack services for Kubernetes deployment\n\nStory: 2002843\nTask: 22790\n\nChange-Id: I0a2b1c2a3799ab6e5c4a5a78cf60895e22469782\nSigned-off-by: Kevin Smith <kevin.smith@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the exception of host label assign\n\nIf Kubernetes node has images without tag and digest\n(\"crictl images\" shows <none>:<none>), system operations\nlike \"system host-label-assign\" that sending the requests\nto Kubernetes to patch/query node via python Kubernetes\nclient will raise this exception.\n  \"Invalid value for `names`, must not be `None`\"\n\nThe exception is raised in python Kubernetes client but not\nfrom kubernetes. Host label is actually created successfully\nin Kubernetes.\n\nImplement a workaround to replace V1ContainerImage.names\nin the python Kubernetes in the python Kubernete client\nto bypass the \"none image\" check.\n\nThis workaround should be removed if the proposed solutions\ncan be made in kubernetes or a workaround can be implemented\nin containerd.\nhttps://github.com/kubernetes/kubernetes/pull/79018\nhttps://github.com/containerd/containerd/issues/4771\n\nChange-Id: I2baae31b54c364c7d908f87b32ca0181a032976c\nCloses-Bug: 1905481\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Armada manifest updates for chart rebase\n\nRequired manifest updates to maintain current behavior:\n - For the keystone API continue to run as root, but adjust to new\n   security_context override.\n - Turn off AppArmor profile for nova\n - Turn off readiness/liveness probes for nova-scheduler\n - Turn off readiness/liveness probes for neutron agents\n - Disable nova hypervisor address search that dynamically sets my_ip in\n   nova.conf. This will interfere with per host compute override\n   settings.\n\nChange-Id: Ic8d68da7ddf30a3a1236f01dd4eb2531efbd2965\nDepends-On: Ied38e5cbedbe06fd0b6f27612aa0bddf60064dea\nStory: 2004520\nTask: 29966\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove the code related to puppet-glance from bare metal\n\nThe glance puppet module is not installed on bare metal, so the\nsystem parameters and code that populates hiera data for those fields\nis unused and can be removed.\n\nThis removes references to glance puppet operator from other\npuppet operators.  Those other puppet operators are also deprecated and\nare being removed by subsequent tasks.\n\nChange-Id: I6c67804d83628039c5b93dcaf6f983830d156124\nStory: 2004764\nTask: 33767\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP on Debian] Remove uds_ro_address from ptp4l\n\nThe latest tag of linuxptp package currently available for Debian does\nnot support the uds_ro_address parameter yet. Therefore, such entry in\nptp4l*.conf files will be generated for CentOS systems only.\n\nTest Plan:\nPASS: Fresh install and configuration in both CentOS and Debian builds.\n\nTask: 45476\nStory: 2009965\nSigned-off-by: Douglas Henrique Koerich <douglashenrique.koerich@windriver.com>\nChange-Id: I823de4779566ae30f951ff53cc057b3facea382a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Standardize makefiles for puppet-modules-wrs\n\nThe puppet-modules-wrs is formed by several subcomponents, in all\nof them the same changes were applied:\n\n  - Create a makefile with a install target.\n  - Remove license file from build_srpm.data as is not needed.\n  - Update target in specfile\n  - Change autosetup to setup in specfile, this was bug in the spec\n    files.\n\nTesting:\n  - Verification on correct install paths.\n  - config_controller complete on simplex configuration.\n\nChange-Id: I1512eb0c3034ffa2d57d098dab9800bdaba5b48d\nStory: 2004043\nTask: 27552\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Inclusion of the subcloud networks in the firewall rules\n\nThis commit implements the inclusion of the subcloud networks in the\nfirewall ingress rules. The networks are obtained from the routes\ntable.\n\nTest plan:\n\nSetup: Distributed Cloud with AIO-DX as system controller.\n\n[PASS] Add subcloud, check that the corresponding network is present in\n       the system controller's firewall.\n[PASS] Remove subcloud, check that the corresponding network is no\n       longer present in the system controller's firewall.\n\nStory: 2010591\nTask: 48139\nDepends-on: https://review.opendev.org/c/starlingx/stx-puppet/+/885303\nChange-Id: Ia83c26c88914413026953fcef97af55fe65bd058\nSigned-off-by: Lucas Ratusznei Fonseca <lucas.ratuszneifonseca@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Docker Registry Can't Deploy On Workers\n\nThe flag marking the registry as \"insecure\" is missing on the computes.\nThis creates certificate issues and fails deployments on computes when\nusing images from the local Docker registry. This commit adds the\n\"insecure\" flag to mark the registry as insecure on the compute nodes.\nThis will go away once proper authentication is implemented for\nDocker registry.\n\nStory: 2004520\nTask: 28312\n\nChange-Id: Ib8d9fad435eda85e1eaebc5fd71b0ff3d60f3dd8\nSigned-off-by: Jerry Sun <jerry.sun@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Barbican configuration thru Puppet and SysInv.\n\n1. Add the new barbican DB and barbican user.\n2. Support DB backup/restore and upgrades for barbican.\n3. Configure barbican user and password in region config.\n4. Provide Barbican configuration with appropriate data via SysInv.\n5. Setup Barbican thru puppet manifests.\nThere are three main services that need to be configured:\n- Barbican API: a RESTful API for managing secrets.\n- Barbican Worker: a RPC interface for Barbican API.\n- Barbican Keystone Listener: a service for Keystone changes.\nAlso, HA Proxy and Firewall need to be updated with Barbican port (9311)\nas well as Remote Logging manifest to allow Barbican log collection.\n\nChange-Id: I6b0b0c90456627bebde2b834b339bc968100b6f9\nStory: 2003108\nTask: 27700\nDepends-On: I2667d56a71b7d3881c03b6a5c1e5ed61d4f0b902\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Align API types with database types\n\nIn more recent versions of SQLAlchemy library the datatypes\nfilters are stricter and now rejects strings with boolean values\nsuch as \"True\"/\"False\" to a field mapped as boolean in the\nunderlying database.\n\nThis commit:\n\n1. Aligns fields with API types mapped as string but with its\ndatabase counterparts mapped as boolean, also changing places\nwhere the value was being compared as a string\n\n2. Fixes the bool_or_none function used to parse boolean types,\nas it was returning True when strings like 'false', 'n' and 'no'\nwere passed as parameter\n\n3. Removes code from sensor and sensorgroup API that was checking\nthe now boolean field against string values (confirmed that there\nare no references to force-action in hwmon code on metal repo)\n\nTest Plan:\nPASS: install/bootstrap/unlock host\nPASS: test cgtsclient system commands for changed attributes:\n      - host: ttys_dcd\n        (verified manifest apply msg on logs)\n      - memory: hugepages_configured, vm_pending_as_percentage,\n                vm_hugepages_use_1G\n        (executed \"grep Huge /proc/meminfo\" after host-unlock)\n      - sensor: suppress\n        (verified suppress/unsuppress msgs on logs)\n      - sensorgroup: suppress\n        (verified suppress/unsuppress msgs on logs)\n        (verified propagated suppress/suppress msgs on logs)\nPASS: run AIO-SX upgrade successfully\nPASS: all of the above on Debian (except upgrade)\n\nCloses-bug: 1977517\nChange-Id: Ie78f98b1b6141dc7ea5e4a125c64d50e1993f582\nSigned-off-by: Heitor Matsui <HeitorVieira.Matsui@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add pod_network_cidr tag to the calico ERB\n\nAs part of upgrading the calico ERB template to the calico 1.7 compliant\nformat, the pod_network_cidr printing tag was inadvertently left out.\nThis will add it back to the template so we can set the network from the\nkubernetes.pp manifest.\n\nChange-Id: Icee91f810e11fd8527beac5edb4017dd44c4611c\nStory: 2002843\nTask: 26751\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix for shared NIC with the N3000 FPGA\n\nAn issue can occur when using an N3000 FPGA NIC with upper\nvlan interfaces (oam, mgmt, etc).  Because the N3000 is reset\nafter the networking initialization is complete, any IPv6\naddresses, or (IPv4 / IPv6) default routes configured on the\nvlan interfaces will be removed.\n\nThis commit fixes the issue by creating an FPGA resource\nfor puppet containing the N3000 interface name and any of\nthe 'used by' (upper) interfaces belonging to the interface.\n\nIf these resources are present, puppet will restart the\nupper interfaces after the N3000 FPGA is reset, allowing\nany configured IP addresses and routes to be restored.\n\nDepends-On: https://review.opendev.org/c/starlingx/stx-puppet/+/795710\nPartial-Bug: #1931461\nChange-Id: Ie6725f572a32bfe649962a6eadca498bcc2c9e7c\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Use memcached as ceilometer caching backend\n\nUpdating ceilometer puppet manifest to use memcached as ceilometer\ncaching backend for resource caching.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: Ia4dfe41672c760488406ee5bbb33ca725e9a5d07\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Optimize the installation of ceph-pools-audit\n\nRemoves any delays associated with the installation of ceph-pools-audit.\nThis chart simply installs a CronJob to periodically review and adjust\nrbd pool replication based on the desired settings specified in the Ceph\nbackend.\n\nHere, the dedicated chart group is removed, the chart is specified as\npart of the provisioner chart group, the provisioner chart group is now\nsequenced with ceph-pools-audit occurring after the rbd-provisioner, and\nthe ceph-pools-audit waits for the rbd-provisioner app label.\n\nThis results in the immediate installation of the chart and we remove\nthe time delay in waiting for first run of the CronJob which could be up\nto five minutes.\n\nChange-Id: Icb8415e4206322df074e0f697a9d800414bd8394\nStory: 2004520\nTask: 29964\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add DNS requirement for kubernetes and helm.\n\n`helm init` is being execute before networking and DNS is properly\nconfigured in the controller. A dependency was added to kubernetes\nto setup DNS, helm manifest was updated to depend on kubernetes.\n\nAlso, the `--skip-refresh` flag was added to helm init for second\ncontroller to avoid timeout scenarios on proxy enviroments.\n\nCloses-Bug: 1814968\n\nChange-Id: I65759314b3a861e7fdb428889aa5f5c1c7037661\nSuggested-by: Mingyuan Qi <mingyuan.qi@intel.com>\nSigned-off-by: Erich Cordoba <erich.cordoba.malibran@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move cinder static config to Armada manifest\n\nMove cinder static configuration from the overrides to the Armada\nmanifest.\n\nStory: 2003909\nTask:  29419\n\nChange-Id: I5e213eb4dff5c3e1f2ef1edd588e60fb11501125\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Platform restore for AIO-DX and Standard no-storage configuration\n\nThis commit is to support platform restore for AIO-DX and Standard\nno-storage configuration using restore_platform playbook:\n - For AIO-DX, the restored ceph crushmap is loaded through puppet\n   when controller-0 is unlocked for the first time. OSDs are\n   created on controller nodes during controller unlock.\n - For Standard no-storage configuration, the restored ceph crushmap\n   is loaded through sysinv when ceph quorum is formed. OSDs are\n   created on controller nodes by applying ceph osd runtime manifests.\n - The .restore_in_progress flag file is removed as part of first\n   unlock of controller-0.\n\nChange-Id: I65bfc67cf90e894d125eb6c860139b26d17b562e\nStory: 2004761\nTask: 35965\nSigned-off-by: Wei Zhou <wei.zhou@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Move the image specification to the armada manifest\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix: \"dict\" issue for Python 2/3 compatible code\n\nReplace dict.iteritems() with dict.items()\nReplace dict.itervalues() with dict.values()\n\nStory: 2003433\nTask:28375\n\nChange-Id: Icba67b1fe19d807e6af86a8cca875ce3f120b367\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Puppet changes for helm and kubernetes\n\nCreate helm manifest.\n\nThe changes to kubernetes.pp are to ensure that the nested dependencies\nare completed before the helm manifest tries to run commands that depend\non docker/kubectl being functional.\n\nStory: 2002876\nTask: 22831\nDepends-On: https://review.openstack.org/587390\n\nChange-Id: Icf7e73047aecc933bf3451b20b6159997dfbea99\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update provider_uri for openldap syncrepl over TLS\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure SQL as helm storage backend\n\nConfigmap is the default helmv2 storage backend to store\nrelease information but its 1MB resource limit prevents\nscaling up stx openstack worker nodes, so we want to use\nSQL as helm storage backend.\n\nTo configure SQL backend, generate helm database hieradata\nthat will be used in puppet to create helm database. The\nhelm database password is stored in keyring which can be\nretrieved in ansible playbook to configure database connection\naddress.\n\nSystem upgrade support:\nThe helm DB is new in the release stx5.0, so a password is\ngenerated for helm user. Helm user and password are written\ninto the hieradata of release stx5.0. For AIO-SX upgrade,\nhelm DB is created when applying bootstrap puppet manifest\nduring ansible upgrade playbook. For two controllers upgrade,\nhelm DB is created when applying upgrade puppet manifest\nduring controller-1 upgrade. A migration script is created\nto migrate helm releases from configmap to postgresql.\n\nPartial-Bug: 1887677\nDepends-On: https://review.opendev.org/#/c/761642/\nChange-Id: I2f4f414068af297b5f4a3792c061443b7d3bdb32\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix SM cluster_host_ip service\n\nThe floating IP of the cluster-host interface was not transferred\nto the newly active controller after swact.\nThe service cluster-host-ip should be monitored by SM regardless\nwhether the management interface is shared with cluster-host interface.\n\nCloses-Bug: 1824994\n\nChange-Id: Ie2bc9012adf7da1e093ff697eda7ae1165643e8c\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Prevent platform upgrade unless using latest k8s\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable configurable vswitch memory\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Restore ceph during system restore\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Rename the existing /opt/patch-vault filesystem to /opt/dc-vault\n\nThe filesystem /opt/patch-vault is created on the system controller.\nIn order to re-use this filesystem to store FPGA images and software\nloads, it is renamed to /opt/dc-vault. Additionally, the default size\nof the dc-vault-lv is increased from 8G to 15G.\n\nStory: 2006740\nTask: 39550\nChange-Id: Id8cda76759da6e6c73fd24357f79658894c95a64\nSigned-off-by: Jessica Castelino <jessica.castelino@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add static route subnets to the firewall if in mgmt or admin nets\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix ceph-pools-audit chart for Ceph Mimic\n\nUpdate the chart to get the 'crush_rule' for various pools instead of\nthe Jewel compliant 'crush_ruleset'\n\nFurther chart clean up is done to be bashate compliant and also provide\ncleaner logging.\n\nChange-Id: I37186fa3e78ebc63f27fd43b373f9e82004199de\nCloses-Bug: #1828760\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable setup of AODH on bare metal controller for stein\n\nPike AODH cannot be built with stein clients, so it is disabled.\n\nAll bare metal openstack components (except keystone and horizon)\nwill later be disabled.\n\nStory: 2004751\nTask: 28839\nChange-Id: Iaef48dcc205ce52ab01f50eec8f59ea79431f2a2\nDepends-On: Ifa905bea2e95ded72a327f8ff43667c8c5429363\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "fix influxdb log file cannot be collected by logrotate\n\nThe logfile for influxdb is influxd.log, not influxdb.log\nCorrect the name in controller.yaml, so that logrotate could get\nthe log correctly.\nAlso, influxdb process uses error re-direction to append the error\nmessage to influxd.log, so \"copytruncate\" need be added in logrotate\nsetting, so that log could be continue logged after logrotate\nexecution.\n\nCloses-Bug: 1833167\n\nChange-Id: I1ef484e3052355e5edc0cd0f7c629c7944daf014\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update nova helm overrides for PCI alias, passthrough, and SR-IOV\n\nThis adds generation of nova.conf overrides to configure:\n- global PCI aliases for QAT and GPU devices\n- per-host PCI passthrough whitelist (contains both\n  passthrough and SR-IOV devices)\n\nHelm multistring dictionary is created for PCI alias, and created for\nPCI passthrough whitelist. These multistring are OSLO.conf compatible\nwith oslo_config.MultiStringOpt() multiple input values.\nEach multistring contains a list of JSON encoded strings.\n\nThe generation of these overrides assumes that all host PCI device\nPFs and VFs are already provisioned, and that the resulting\npci addresses are queryable using sysinv DB methods.\n\nStory: 2003909\nTask: 29071\n\nChange-Id: I8b96e471f7dcff6277cca107cbd0668ffd67c7b7\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "PTP Configuration Enhancements\n\nAdd PTP service parameters. Any service parameters in the global ptp\nsection will be written to the ptp4l conf. phc2sys service parameters\nwill be used to specify the command line options used with the phc2sys\nservice.\n\nValues specified in the service parameters will take precedence over\nvalues specified by the PTP table.\n\nStory: 2006759\nTask: 38669\nDepends-On: https://review.opendev.org/#/c/706364\nChange-Id: I791ec251be44d963bfb5eb69268fbc7a8a75391a\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Make Multi-Node Failure Avoidance Configurable\n\nThe maintenance system implements a high availability (HA) feature\ndesigned to detect the simultaneous heartbeat failure of a group\nof hosts and avoid failing all those hosts until heartbeat resumes\nor after a set period of time.\n\nThis feature is called Multi-Node Failure Avoidance, aka MNFA, and\ncurrently has the hosts threshold set to 3 and timeout set to 100 secs.\n\nThis update implements enhancements to that existing feature by\nmaking the 'number-of-hosts threshold' and 'timeout period'\ncustomer configurable service parameters.\n\nThe new service parameters are listed under platform:maintenance which\ndisplay with the following command\n\n> system service-parameter-list\n\nmnfa_threshold: This new label and value is added to the puppet\nmanaged /etc/mtc.ini and represents the number of hosts that are\nrequired to fail heartbeat as a group; within the heartbeat\nfailure window (heartbeat_failure_threshold) after which maintenance\nactivates MNFA Mode.\n\nThis update changes the default number of failing hosts from\n3 to 2 while allowing a configurable range from 2 to 100.\n\nmnfa_timeout: This new label and value is added to the puppet\nmanaged /etc/mtc.ini. While MNFA mode is active, it will remain active\nuntil the number of failing hosts drop below the mnfa_threshold or this\ntimer expires. The MNFA mode deactivates on the first occurance of\neither case. Upon deactivation the remaining failed hosts are no\nlonger treated as a failure group but instead are all Gracefully\nRecovered individually. A value of zero imposes no timeout making the\ndeactivation criteria solely host based.\n\nThis update changes the default 100 second timer to 0; no-timeout\nwhile permitting valid a times range from 100 to 86400 secs or 1 day.\n\nDocImpact\nStory: 2003576\nTask: 24903\n\nChange-Id: I2fb737a4cd3c235845b064449949fcada303d6b2\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove deprecated instance_backing from sysinv code\n\ninstance_backing is no longer being used during configuration\nand so the dead code is being removed.\n\nThis has a cascade effect. Other methods and validators no longer\nare required.\n\nThis update methods have been retained, even though there is nothing\nfor them to update.\n\nChange-Id: I76b0181a2a3dd7d7d6c8d8b686dd724ab269844d\nStory: 2004764\nTask: 30119\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set bridge-nf-call-arptables\n\nThis commit sets net.bridge.bridge-nf-call-arptables=1, which was\nfound to be required for a containerized neutron deployment.\n\nStory: 2004520\nTask: 28789\nChange-Id: I0163535ed6bac7e775a63dfa3d54727c60f4208d\nSigned-off-by: Joseph Richard <joseph.richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Replace K8s 1.21.3 with 1.21.8\n\nIn testing K8s 1.21.8 used less CPU than 1.21.3, so we are moving to\nthe newer version.\n\nThis has been booted in vbox and a basic pod has been started.\nA full regression will be performed.\nStill need to install with 1.20 to confirm that we can upgrade to\n1.21.8.\n\nCloses-Bug: 1957994\nDepends-On: https://review.opendev.org/c/starlingx/integ/+/824803\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/824805\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\nChange-Id: I7c6a75ff9bbdddf1bfab3d2ea71a25224293d989\n",
        "issue_summary": ""
    },
    {
        "commit_message": "DC: config registry_host with correct IPv6 format\n\nIn the subcloud of an IPv6 Distributed Cloud system, the IP address of\nregistry_host in glance-api.conf has wrongly been put in [] (eg,\n[fe01:1::2]), causing glance-api failure when tries to connect to\nregistry. This update fixed this issue by not formatting the IPv6\naddress into [] during puppet manifest hieradata generation.\n\nStory: 2002988\nTask: 23002\n\nChange-Id: I09ccfe1f4887bcf02301497404751f023385fd1c\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add Barbican bootstrap and runtime manifests\n\nBarbican service is needed during bootstrap phase for StarlingX.\nImplement bootstrap and runtime manifests to achieve that.\n\nChange-Id: I6c22ebddacf8aec3a731f7f6d7a762f79f511c78\nStory: 2003108\nTask: 27700\nSigned-off-by: Alex Kozyrev <alex.kozyrev@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Set OS_AUTH_TYPE to password in openrc admin\n\nThis is part of gnocchi integration.\n\nStory: 2002825\nTask: 22871\n\nChange-Id: I6f45a727cc971c6c04c9e3eadabaed60159f88d7\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove the use of docker for FPGA tools\n\nThis update is to replace the use of docker container runtime with the\ncontainerd ctr client for resetting the N3000 FPGA on node startup and\nupdating N3000 device images.\n\nTest Plan:\n- Tested that non-controller-0 nodes can pull n3000-opae image and reset\n  n3000 devices at startup\n- Tested device updates in AIO-SX, AIO-DX, standard and DC env\n- Tested upgrade\n\nStory: 2008972\nTask: 43420\nDepends-On: https://review.opendev.org/c/starlingx/containers/+/810688\n\nChange-Id: I6012189aa716f76a7fe4f8a51f0fbfa27234b8bb\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Adding support for displaying kubernetes versions\n\nIn preparation for supporting kubernetes upgrades, I am adding the\nfollowing CLIs (and REST APIs) to show the supported kubernetes\nversions and their state in the system:\n\n+---------+--------+-----------+\n| version | target | state     |\n+---------+--------+-----------+\n| v1.16.2 | True   | active    |\n+---------+--------+-----------+\n\n+-------------------+-----------+\n| Property          | Value     |\n+-------------------+-----------+\n| applied_patches   | []        |\n| available_patches | []        |\n| downgrade_to      | []        |\n| state             | active    |\n| target            | True      |\n| upgrade_from      | []        |\n| version           | v1.16.2   |\n+-------------------+-----------+\n\nThis also includes new utitilies to query version info from the\nkubernetes API and a set of unit tests for the new code.\n\nChange-Id: I0dc4ece131daeb8cbce3e621e18b93276b2324ff\nStory: 2006590\nTask: 36724\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Update kernel isolcpus boot args to isolate mananged IRQs\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fixing Pep8 errors of type E121\n\nChange-Id: I6ea6339d9382b070bc3557f775dfd3ae046d28ef\nStory: 2002888\nTask: 23097\nSigned-off-by: Mathieu Robinson <mathieu.robinson@windriver.com>\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove puppet entry related to host-based snmp\n\nWith the host-based SNMP removal:\n-Remove trap destination entry\n-Remove snmp config entry\n\nStory: 2008132\nTask: 41349\nChange-Id: Ibd0faafe2255f6d325b11ab3383dc5f08f181955\nDepends-On: https://review.opendev.org/765381\nSigned-off-by: Takamasa Takenaka <takamasa.takenaka@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Remove ironic service parameters\n\nIronic is a containerized service.\nThe service parameters are no longer valid and have been removed.\nThe puppet plugin for ironic has been removed.\nThe code that treats ironic as an optional shared service is removed.\nThe postgres DB upgrade code for ironic has been removed.\n\nChange-Id: I46898f443b97395ad6975582bdfc570a9c7f5744\nStory: 2004764\nTask: 35694\nSigned-off-by: Al Bailey <Al.Bailey@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for external Ceph\n\nThis commit introduces a new storage backend \"ceph-external\" to support\nexternal ceph.\n- It provide the capability to provision an external Ceph cluster as\n  backend for Cinder, Glance, Nova\n- The connectivity to the 3rd party Ceph cluster is ensured through\n  importing a Ceph configuration file\n- Any combination of other backends and the external Ceph backend is\n  supported with limitations\n- Create /opt/extenstion/ceph directory in drbd.pp\n- When instance-backing is \"remote\" on a compute node, if the ephemeral\n  ceph pool is moved from one ceph backend to another, a config\n  out-of-date alarm should be generated for that compute node to signal\n  that the compute node needs to be locked and unlocked in order for\n  nova-compute to be restarted on that compute node.\n- For adding an external ceph backend, it is done by two POST requests:\n  one to upload the ceph config file and one to add the backend. For\n  modifying an existing external ceph backend, it is done by one POST\n  request to upload the ceph config file and one PATCH request to modify\n  the backend.\n\nStory: 2002820\nTask: 22737\n\nChange-Id: Ie504ffae9f4895a67502ecfa3f0fbf267bb65e99\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for Helm v3 and containerized armada\n\nThis adds support for Helm v3.\n\nThis replaces docker armada and tiller with armada Kubernetes pod\nthat has armada-api and tiller containers. The existing armada\ncommands i.e., in routine make_armada_request() get wrapped with\n'kubectl exec -n armada armada-pod -c armada-api --'.\nRedundant docker commands are removed.\n\nSince the armada chart may run on either controller, the /manifests\nand /overrides are no longer mounted since the underlying /opt/platform\nis DRBD backed and only visible on the active controller. These files\nare now copied from active controller into the armada-api container.\n\nThe /logs mount is no longer required. The 'tee' of output within\ncontainer was dropped. The output is captured and written directly to\ncontroller host in the same as previous location /var/log/armada.\nThe monitor task scrapes these logs (as it did previously) for\nspecific success patterns.\n\nArmada requests are now aborted by deleting the armada pod.\nKubernetes manages armada and automatically restarts the pod.\n\nChange-Id: I7c55c9143d4fb794f52be57a6e68e84d6b917600\nStory: 2007000\nTask: 37774\nDepends-On: https://review.opendev.org/719962\nSigned-off-by: Jim Gauld <james.gauld@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix the dependencies in the ceph-pools-audit chart\n\nThe static dependencies was missing in the previous commit\nhttps://review.openstack.org/#/c/642886/.\n\nChange-Id: I4f9135046178cdfa244755e3280ce1e5257ab3e1\nCloses-Bug: 1819720\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Non applicable nautilus upgrade code removed\n\nSince Ceph nautilus no longer need upgrades, the code is being removed\nto not interfere with installation and future upgrades.\n\nTest Plan:\nPASS Upgrade of 2+2+2\nPASS Upgrade of AIO-DX\nPASS Upgrade of AIO-SX\nPASS Fresh install of AIO-SX\nPASS Fresh install of AIO-DX\nPASS Fresh install of 2+2+2\n\nStory: 2010222\nTask: 45972\n\nSigned-off-by: Luiz Felipe Kina <LuizFelipe.EiskeKina@windriver.com>\nChange-Id: I3db99617131c5a25e35965dd27d64df0c0fd5cae\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enhance sysinv plugins to generate more random passwords\n\nThis update enhanced random password generation in sysinv puppet\nplugin base class and helm plugin base class to generate more random\npasswords containing at least one uppercase, one lowercase, one number\nand one of the special characters in [!*_-+=] (the square brackets are\nnot included).\n\nExamples of the more random passwords:\nU*u0Xf!Q5u07!Hri\nJKK+4dU=2EqrpNRz\nQeBZew3s=fTAE7_+\n0g=*koc_n64vTXeR\n\nChange-Id: Ifbfae96329480c2f726e4a4012e1f27ff56f38ef\nCloses-Bug: 1901228\nDepends-On: https://review.opendev.org/#/c/760449/\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Provide upgrade support for k8s platform applications\n\nProvide a k8s application migration script which will be triggered in\nthe upgrade-activate stage of the platform upgrade. This will:\n- Ignore any new applications that are installed in the To-Release and\n  rely on any platform-managed application logic to upload/apply it\n  after the upgrade has completed.\n- Attempt to delete and upload any apps that were in the uploaded state\n  in the From-Release if the version has changed in the To-Release\n- Attempt to update any app that was in the applied state in the\n  From-Release if the version has changed in the To-Release\n- Fail activation if any taken upgrade action is not successful. This\n  will to provide an opportunity for manual intervention.\n\nRefactored and renamed is_upgrade_in_progress() to look for both\nplatform and kubernetes upgrades. This mirrors functionality in\ncheck_disallow_during_upgrades() from the API utils which can't be\ncalled directly from here based on it's current structure.\n\nThis check now gates check_pending_app_reapply(). This will prevent any\nreapplies, regardless of where this is called. This should be the second\ncentral point of any automated application operations other than the\n_k8s_application_audit() which drives automated uploads/applies.\n\nThe application lifecycle API (upload/apply/remove/delete) is not\nblocked to allow recovery operations if the migration script encounters\nany issues.\n\nChange-Id: I722ed50f88ef279f35f3c36bb3b0fa12a633d862\nStory: 2007403\nTask: 40118\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for multiple hpe3par backends\n\nThis update adds support for configuring up to 12 HPE 3PAR backends at the same\ntime. Typical large 3PAR SANs have multiple volume types to take advantage of\ndifferent price points and performance. A separate backend configuration is\nrequired for each volume type.\n\nChange-Id: I8acd6865d5ca33bf72f9e0d2cb4d88020082e7b8\nStory: 2002996\nTask: 23011\nSigned-off-by: Elena Taivan <elena.taivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change default pod tolerations to 30sec\n\nBy default, pods will get a toleration of 300 seconds for the\nnotReady:NoExecute and unreachable:NoExecute taints.  This is\nexcessively long for our purposes.\n\nThis commit changes the commandline args for kube-apiserver to use\n30 seconds for each of these instead to get a faster response time.\n\nChange-Id: Ic7153e0ea03a1835efcd907cbcef8c8715a0539d\nPartial-Bug: 1829432\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Mtce: Add two new port definitions to mtc.ini for SM communications\n\nIn support of the HA Improvements feature maintenance is required to,\nupon request, send SM a summary of maintenance's heartbeat responsiveness\nduring the last 20 heartbeat periods.\n\nThis update adds the required port assignments to the mtc.ini file\nin support of said communications.\n\nWith this update the mtc.ini file will be updated to contain the\nfollowing entries.\n\n  ; Communication ports between SM and maintenance\n  sm_server_port = 2124 ; port sm receives mtce commands from\n  sm_client_port = 2224 ; port mtce receives sm commands from\n\nChange-Id: I05c022f7e4dcdeaea71bc0020641baa331daae57\nStory: 2003576\nTask: 26837\nSigned-off-by: Eric MacDonald <eric.macdonald@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix run_docker_login DNS lookup to properly handle IPv6\n\nIt turns out that the nslookup tool doesn't handle IPv6 lookups by\ndefault, at least the way our DNS server is configured.\n\nIn order to deal with this we switch to using the \"dig\" command, which\nallows asking for both the A and AAAA records (IPv4 and IPv6,\nrespectively) in a single command.  A return code of 0 means we got\na response from the server, and if we did get a response then a\nnon-empty output  means that we successfully looked up the hostname.\n\nChange-Id: I6efec9fe20ba192422ae19989430b1e8866f70dd\nPartial-Bug: 1886121\nSigned-off-by: Chris Friesen <chris.friesen@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Clean up dead code in controllerconfig\n\nThis commit updates to clean up the obsolete code in\ncontrollerconfig as a result of switch to Ansible.\n\nThe cleanup includes:\n  - the whole config_controller with its relevant files\n    (ie..initial configuration, backup/restore, image clone...)\n  - config_subcloud\n  - config_region\n\nTests conducted:\n - fresh installation of AIO-SX, AIO-DX, standard\n   and storage labs\n - platform sanity performed on AIO-SX, AIO-DX,\n   standard and storage labs\n - stx-openstack app apply/remove performed on AIO-SX\n   and AIO-DX\n - stx-monitor app apply/remove on standard and\n   storage labs\n - backup&restore performed on standard lab\n - distributed cloud was deployed\n\nChange-Id: I0d1eb91188dfb24dca68a19a497b9e4edb0b0ef0\nPartial-Bug: 1834218\nDepends-On: https://review.opendev.org/#/c/703517/\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Dynamically load existing puppet plugins\n\nThis commit moves each of the existing plugins to be dynamically\nloaded through stevedore, rather than statically listed inside of\nsysinv puppet handling code.\n\nStory: 2003194\nTask: 24722\nChange-Id: I17abe8c481e71265cb3ae07474788562035a4823\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Configure kubelet CPU manager options via host labels\n\nUse two host labels to configure kubelet CPU and topology manager\noptions.\n\nThe kube-cpu-mgr-policy and kube-topology-mgr-policy labels will be used\nto configure the cpu-manager-policy and topology-manager-policy kubelet\noptions. If no labels are provided these options will default to none\nand best-effort respectively.\n\nStory: 2006565\nTask: 37222\nChange-Id: I6cab15964ee2e2a341f6c8f41c683ea046403ebd\nSigned-off-by: David Sullivan <david.sullivan@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Cluster network cleanup\n\nAdd cluster_host_interface to /etc/platform/platform.conf.\nOnce the services are converted to use cluster_host_interface,\nthe infrastructure_interface will be removed.\n\nStory: 2004273\nTask: 29472\n\nChange-Id: I3a989fef6441be231368d6eeebb3725145b15f37\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow vswitch_class to be configured\n\nThis commit adds a vswitch_class option to platform::vswitch::params,\nwhich specifies which class is to be used for the virtual switch.\nIn order to enable OVS as the default virtual switch, this defaults\nto ::platform::vswitch::ovs, but can be overwritten to allow using\na different virtual switch.\n\nStory: 2003526\nTask: 24802\nChange-Id: I3a1d3eebd4220fdf342a5269f33e786241e218e0\nSigned-off-by: Joseph Richard <Joseph.Richard@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add kubernetes support on second controller\n\nAdding rudimentary support for kubernetes on the second controller.\nSystem pods will be active on both controllers and are not managed\nby SM - they use their own leader election mechanism. Also added\nsupport for AIO-DX.\n\nStory: 2002843\nTask: 22789\n\nChange-Id: If30b1aa1a7dbd8e3316912119fa7f7f10ef9b4e6\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "ETCD Integration and Management\n\n- create and run etcd manifest as part of config_controller --kubernetes\n- etcd bootstrapped to drbd-cgcs fs\n- configure SM to manage the service on active controller\n- allow ETCD to log data using forward-journald tool Journald forwards\n  these etcd logs to /var/log/kern.log\n\nStory: 2002841\nTask: 22784\n\nStory: 2002843\nTask: 22789\n\nChange-Id: I5d4444133ee7143ce2b7953c6f328651e3b1baa6\nSigned-off-by: Jack Ding <jack.ding@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix large number of nginx worker issue\n\nOverride nginx \"worker-processes\" setting in ingress controller.\nDefault value is changed from auto to 4 to reduce memory\nconsumption by nginx worker processes. 4 worker can give 2 per\nplatform CPU (in AIO) to avoid blocking all users in case that\npart of workers are blocked.\nThe static override is done in the Armada manifest.\n\nCloses-Bug: #1823803\nChange-Id: I1f92cf0c3fdfde41364abe65e4747d2091c4c3ea\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Disable keystone caching on subclouds\n\nThe use of keystone caching on subclouds causes problems because\nthe syncing of fernet keys to the subcloud results in stale\ncache entries. This causes authentication failures until the\ncache entries age out or new tokens are created.\n\nSince the keystone load in a subcloud is light, there is really\nno need for caching at this time - it is being disabled in\nsubclouds.\n\nChange-Id: I777c57c46cf1bcd701fbbac73228a2cb81d8424b\nCloses-Bug: 1860372\nSigned-off-by: Bart Wensley <barton.wensley@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Change the way of disabling ovs container\n\nFor the case vswitch_type!='none', ovs doesn't run in container. So ovs\npod/container should not run. We controlled ovs container by label, but\na patch[1] broke it.\nThis patch is to change the method in which we control ovs container.\nWith this patch, we remove openvswitch chart from compute-kit chart\ngroup so that no ovs container created. If we need to run ovs in\ncontainer, we add the openvswitch chart.\n\n[1]\nhttps://review.opendev.org/#/c/651380/2/kubernetes/applications/stx-openstack/stx-openstack-helm/stx-openstack-helm/manifests/manifest.yaml\n\nChange-Id: I3ba8a3ab45a6e6c1a67b78d335656ed5c0d654a7\nCloses-bug: #1824829\nSigned-off-by: chengli3 <cheng1.li@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable ceph-audit to run even if stx-openstack is not running\n\nCeph audit role is to set the replication for Ceph pools to the\nvalue configured for them in system inventory. This should happen\neven if openstack application is not running. Currently the job\nremains in 'pending' till openstack application is started.\n\nCloses-Bug: #1831475\nChange-Id: Ie767f69c633656f39662cd2b3be4daf3541e35d3\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Revert \"configure kubernetes to use containerd as CRI\"\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Relocated some packages to repo 'platform-armada-app'\n\nList of relocated subdirectories:\n\nkubernetes/platform/stx-platform/stx-platform-helm\nkubernetes/helm-charts/ceph-pools-audit\nkubernetes/helm-charts/rbd-provisioner\n\nStory: 2006166\nTask: 35687\nDepends-On: I665dc7fabbfffc798ad57843eb74dca16e7647a3\nChange-Id: I9fff4d9f973fea151812f516859b0c9ce190afb8\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: Ibca91cc733e27cd9fb4926b7151cfa8a7976a59d\nSigned-off-by: Scott Little <scott.little@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable StarlingX in QEMU/KVM VM\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create openldap certificate on upgrade\n\nThis commit:\n\nAdds an upgrade script to call the ansible playbook\nupgrade-openldap-certificate.yml and create the openldap certificate\nduring the upgrade activate stage.\n\nChanges the puppet plugin code for ldap to read the openldap\ncertificate only in activate statuses during an upgrade.\n\nFixes an issue with certificate_shell where it may call len() for a\ncertificate that does not have the subject information, resulting a\nNoneType error.\n\nTest Plan:\n\nPASS: Upgrade from stx 22.06 to 22.12 and verify that the openldap\n      certificate is successfully created in kubernetes\n      in upgrade activate stage\nPASS: After certificate is created in kubernetes, verify that the\n      certificate and key is read by puppet and saved to files\n      in /etc/ldap/certs\nPASS: After certificate is created in kubernetes, verify that the\n      certificate is picked up by cert-mon and saved to database\n      and show in 'system certificate-list'\n\nStory: 2009834\nTask: 45933\n\nChange-Id: Ia4b9d1921b1e7afdc29f398f902faf2a8bf1e25b\nSigned-off-by: Rei Oliveira <Reinildes.JoseMateusOliveira@windriver.com>\nDepends-On: https://review.opendev.org/c/starlingx/ansible-playbooks/+/856556\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update sriov interfaces to discover pci_addresses prior to host-unlock\n\nIn order to generate up-to-date sriov helm overrides\nprior to host-unlock:\n    trigger getting ports inventory update when sriov is configured\n    prevent host-unlock when configured sriov vfs mismatches inventoried\n    allow host-unlock force option to override\n\nTests Performed:\n    Containers verify AIO lab with sriov interfaces\n    Update sriov interface and verify pci addresses updated\n    Update sriov interface and verify host-unlock blocked\n        until pci addresses are updated\n    Sanity Compute lab with sriov interfaces\n\nChange-Id: Iba243a6389c2d7b6cd0b1b016c257534725e30eb\nStory: 2003909\nTask: 29731\nSigned-off-by: John Kung <john.kung@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "docker images management\n\nCurrently, the images pulled from public registries are used\nby helm charts for pods launching. This commit updates this\nbehavior to pull images from the local docker registry to\nlaunch pods. In order to pull images from local registry,\nimages for each supported chart are updated in sysinv overrides\nto point to the local docker registry. For the non stx images\nor images not included in sysinv overrides, they are handled\nwhen application apply by getting them from charts and adding\nthe converted image tags to the override files.\n\nA list of docker images required for stx-openstack app installation\nis maintained in a file. When applying stx-openstack app (before\nlaunching pods), if the required images do not exist in the local\nregistry, images will be pulled from the public registries and\npushed to the local registry.\n\nTo be able to use the local docker registry, the default disk\nsize for docker-distribution is increased from 1G to 16G.\n\nValidated on AIO-SX/AIO-DX/2+2+2:\n - config_controller with kubernetes\n - During the initial stx-openstack app apply, images pulled from\n   public registry and pushed to local registry. Images are pulled\n   from local registry for pods launching on each node\n - Cleanup docker cache for each node, all images pulled from local\n   registry during the subsequent application apply\n - Cleanup the images in local registry, images pulled from public\n   and pushed to the local during the application apply\n\nStory: 2004520\nTask: 28526\nDepends-On: https://review.openstack.org/#/c/626394/\nChange-Id: I2001fff237cc2ccf4be1a8b15ab346d730bb32e9\nSigned-off-by: Angie Wang <angie.wang@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Enable N3000 FPGA reset if device is present\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Create Calico host endpoint and policies\n\n* Create Calico host endpoints and policies for host protection.\n  Only expose some ports on OAM for platform services, and block\n  other incoming traffic.\n\nPassed tests:\n* Fresh build\n* Deployment(simplex, duplex, multi-node)\n* System-level tests\n  * manually check iptable rules\n  * use the utility of uc to test exposed tcp ports and a few\n    non-exposed tcp ports.\n  * create vms\n\nStory: 2005066\nTask: 29634\n\nChange-Id: Ibe012583225a15e7d3881cc2d520eadfc170a75c\nSigned-off-by: Yi Wang <yi.c.wang@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Move cinder static config to Armada manifest\n\nReview https://review.openstack.org/635952 is missing changes\nrequired to the manifest.yaml file.  This commit fixes that.\n\nStory: 2003909\nTask:  29419\n\nChange-Id: I68f79c3b0a155d5687842697bdb7babc6082ac91\nSigned-off-by: Kristine Bujold <kristine.bujold@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix unicode issue for Python 2/3 compatible code.\n\nreplace unicode with six.text_type\n\nStory: 2003433\nTask: 27695\n\nChange-Id: Ie7bc1b649b94fb1695eac51b65294d30e01f26f2\nSigned-off-by: Sun Austin <austin.sun@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Update certificate pem files for unit tests\n\nTox/Zuul failed unit tests due to expiring certificate pem files.\nThis commit updates the expired (&extends other certs)\nfor a long duration (10yrs).\n\nCloses-Bug: 1909817\n\nChange-Id: I85cfb1896ae62947fb868315ecf1ff6b53fd4e08\nSigned-off-by: Sabeel Ansari <Sabeel.Ansari@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Kube rootca update abort - API\n\nThis change updated kube rootca update complete API to support\nupdate-complete and update-abort. Update-abort can be triggered\nby \"system kube-rootca-update-abort\" which provides\na way for user to exit the update before it is fully done. After\naborting the current update, a new update can be started again\nas normal.\n\nWhen an the update is aborted, an alarm will be raised.\nThe alarm serves as a reminder that a root CA update\nhas not been fully finished and a new update is needed to fully\nupdate the root CA cert and all the child certs.\n\nThe alarm will be cleared when a new update starts.\n\nThis change also updated and added tox unit tests.\n\nStory: 2008675\nTask: 43066\nDepends-on: https://review.opendev.org/c/starlingx/fault/+/805371\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ifdcdf90e7be37c1bef969a769817fbb6a140fb48\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable rbd-provisioner namespace overrides\n\nThis makes changes in two areas: the rbd-provisioner chart to allow\nsuccessful upgrades/rollbacks and the sysinv API for helm overrides so\nthat charts from all supported applications are displayed by the\nhelm-override-list command.\n\nAdditional updates to the rbd-provisioner chart allow the storage class\nto be patched to overcome an armada error on upgrade and extending the\nretry and active deadline to allow more tolerance if there are ceph\nclient related delays on install/upgrade/rollback.\n\nChange-Id: Ib3e0169a52f86130ae32fc31c75cea01c4c67579\nStory: 2005424\nTask: 31066\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add supported applications to automated upgrades\n\nDuring platform upgrade some applications are not part of the\nautomated application upgrade pipeline. Some of them actually\ncan be automatically upgrade and should not be skipped.\n\nThis review fixes this for the supported apps:\n* ptp-notification\n* auditd\n* metrics-server\n\nTEST PLAN:\n\nPASS: Upgrade Duplex\nPASS: Upgrade Simplex\n\nCloses-bug: 1982844\nSigned-off-by: Lucas Cavalcante <lucasmedeiros.cavalcante@windriver.com>\nChange-Id: I24c515b3a7eabd02dee22a371f4ff6caeabed313\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add support for multus and sriov CNI, device plugins\n\nThis commit adds support for the Multus, SRIOV CNI, and SRIOV\ndevice plugins plugins.\n\nIt is intended that these would be used outside of the stx-openstack\napplication, to pass through devices for a user defined container.\n\nThe Multus CNI plugin enables attaching multiple network interfaces to\npods in Kubernetes\n\nThe SRIOV CNI plugin allows passing through of an SRIOV VF to a\ncontainer, with support for IP, vlan, DPDK  configuration.\n\nThe SRIOV device plugin is a kubernetes device plugin for discovering\nand advertising SRIOV VFs in a Kubernetes host.\n\nSysinv changes have been made to populate the SRIOV device plugin\nconfiguration file with appropriate values based on the host's\nconfigured PCI-PT and SRIOV interfaces.\n\nTo enable SRIOV interfaces in a container, the user would create\na custom multus NetworkAttachmentDefinition with type 'sriov'\nand refer to it in the Pod's k8s.vi.cni.cncf.io/networks annotation.\n\nA few sample NetworkAttachmentDefinition and pod deployments can be found\nhere:\n\nhttps://github.com/intel/sriov-network-device-plugin\n\nStory: 2005208\nTask: 29983\nTask: 30054\n\nCo-Authored-By: Litao Gao <litao.gao@windriver.com>\nCo-Authored-By: Jackie Huang <jackie.huang@windriver.com>\n\nChange-Id: I01587af6a4dc40fe7542b140e5bbee539d93740f\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Removal of infrastructure network code\n\n* Removed table iinfra and its CLI and api commands\n* Removed infrastructure_interface from /etc/platform/platform.conf\n* Removed the infrastructure code in config_controller\n* Updated tox unit tests\n\nTests performed on AIO-SX, AIO-DX, Standard 2+2 and Standard 2+2+2\nTested using Ansible playbook on AIO-SX.\n\nStory: 2004273\nTask: 29472\n\nChange-Id: I5162d374f98fa7d74fc9d23fe9e7f85a331a7240\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "[PTP dual NIC config] Update hieradata gen for new data model\n\nBecause of the work done to update the data model and related API, some\nminor changes are required to correctly generate the hieradata from the\nsysinv tables for PTP instances.\n\nThis change now handles the new data model and still outputs the same\nhieradata format as the original design, meaning no puppet changes are\nrequired.\n\nTest Plan:\n\nPass: Full build and install\nPass: Test to enable ptp4l and phc2sys on hardware installation\n\nRegression:\n\nPass: Single instance ptp unaffected.\nPass: Multi instance ptp can be enabled and configured successfully\n\nStory: 2009248\nTask: 44251\n\nSigned-off-by: Cole Walker <cole.walker@windriver.com>\nChange-Id: I001b76c37124246911830a367a88afe6e9c85257\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Allow ICMP(v6) to access the admin network\n\nThe current admin network firewall does not allow ICMP(v6) traffic to\nthe admin network itself (only the system controller), preventing the\nexchanging of neighbor information with the gateway. It also\nprevents network troubleshooting, by blocking ping from the gateway.\n\nThis change adds the admin network (and the link-local network for\nIPv6) to the ICMP(v6) protocol, in the admin network firewall.\n\nCloses-Bug: 2027827\n\nChange-Id: If88ca060605b917332c35eab9daa62eb5af7085a\nSigned-off-by: Andre Kantek <andrefernandozanella.kantek@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Add floating ip for ironic network\n\nThis commit adds the floating ip support if ironic network is\ncreated and an interface is assigned to that network. Ironic\nfloating ip is used for ironic node to access openstack services\nthrough it. It's an HA feature for ironic if 2 controllers are\ndeployed.\n\nStory: 2004760\nTask: 34740\nDepends-On: https://review.opendev.org/669781\nChange-Id: I55681abfee700dcf7036503d1490accc413b84c4\nSigned-off-by: Mingyuan Qi <mingyuan.qi@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Improve update of user config robustness\n\nWhen a user's password expiry period is updated many times per the\nexecution of 'chage -M [number_of_days] [user]' command, the update\nuser config function present in conductor/manager.py triggers the\nusers runtime manifest to be executed by Puppet in each one of these\ncommand executions and this could cause a conflict in this update\nprocess.\n\nIn this case, the sysinv conductor could call sysinv agent to apply\nthe manifest and queue a user config update and, before this action\nis completed and marked as completed, the sysinv agent is called again\nby sysinv conductor per the request of other 'chage' command execution,\ntherefore, provoking a deadlock in the process.\n\nThis commit improves the robustness for the update user config process\nby deferring users runtime manifest executions per the check if a\nmanifest is currently being applied. If a users runtime manifest is\nbeing applied and it is requested a new apply of the manifest, the\nincoming request is now queued and executed after the current one is\nfinished.\n\nTest Plan:\nPASS: Issue the command 'sudo chage -M [number_of_days] sysadmin' many\n      times, one time right after the other one and with different\n      number of days. Observe in /etc/shadow if sysadmin user has the\n      last addressed number of days as its password expiry period.\n      Then, observe in /var/log/auth.log that the log info related to\n      the update of sysadmin's password expiry was completed in every\n      'chage' command issued and the deadlock was not reproduced.\n      Verify in /var/log/sysinv.log that the update_user_config()\n      function was successfully executed with exit status 0 for each\n      time the 'chage' command was issued and users runtime manifest\n      was executed successfully by Puppet as well.\n\nCloses-Bug: 2034446\n\nSigned-off-by: Manoel Benedito Neto <Manoel.BeneditoNeto@windriver.com>\nChange-Id: I769c99b870f2a8c4a6fb99e5739da1e420606ddd\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Make Ceph the default Storage Backend\n\nSince Ceph is mandatory for all operations it is now configured by\ndefault. User no longer needs to use CLI commands to enable it.\n\nThis commit make Ceph the default backend in both config_controller\nand Ansible playbook. In Ansible, we decouple Ceph DB configuration\nfrom manifests application. The playbook sets needed data structures\nin sysinv DB but Ceph itself is enabled on first unlock when\ncontroller manifests are applied on first controller-0 unlock.\n\nThis commit also adds:\no ceph crushmap loading through puppet as ceph is no longer\n  running before unlock to load it and the crushmap is needed when\n  OSDs are configured on unlock.\no add possibility to remove OSD stors while node is locked and\n  corresponding stor state is configuring-on-unlock.\n\nChange-Id: I937bfb4f9397e726966067f54331d649f53f4fe2\nStory: 2004695\nTask: 30053\nDepends-On: https://review.openstack.org/#/c/643914/\nSigned-off-by: Ovidiu Poncea <ovidiu.poncea@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "updated k8s info in hieradata\n\nAdded kubelet_version and kubeadm_version\nto hieradata. The versions are retrieved\nfrom the kube_versions table.\n\nStory: 2008972\nTask: 42919\nDepends-on: https://review.opendev.org/c/starlingx/config/+/802323\n\nChange-Id: Iae808000593ac293ad66389ee83081868f89c748\nSigned-off-by: Daniel Safta <daniel.safta@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Remove references to Mellanox's ConnectX-3\"",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix mtu configuration for dns and nfs\n\nThe MTU value was set to the default value instead of the configured\nvalue for the interface.\nThis commit sets the MTU value to the configured for the interface.\n\nThe mtu value is also used to calculate the read/write size for nfs\nmounts. The commit also ensures that it is set to the correct value.\n\nCloses-Bug: 1811404\nChange-Id: Ieb3c6d989726075af205823dc1d570c00a24c28d\nSigned-off-by: Teresa Ho <teresa.ho@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Merge \"Add customer-specified certificates for kubernetes\"",
        "issue_summary": ""
    },
    {
        "commit_message": "set wait label for nginx chart\n\nIf wait label is not set, armada will try to wait for all the job/pod\nin the same namespace, which may cause unintended consequences.\nFor nginx chart, there is only a GlobalNetworkPolicy set. So set the\nwait resources list as empty.\n\nCloses-Bug: 1836303\n\nChange-Id: Ic08816b09518d09af2dad6b78a806feeeb3e9ac5\nSigned-off-by: Shuicheng Lin <shuicheng.lin@intel.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Enable Telemetry services\n\nThis add the telemetry chart group to the manifest so telemetry\nservices (aodh, gnocchi, panko, ceilometer) start on application apply.\n\nAlso, a minor reorganization change to the neutron chart data to\nminimize diffs between the manifest files.\n\nChange-Id: I515ec0d4165c315bbc49ce6620451eca846028c6\nStory: 2004751\nTask: 28895\nSigned-off-by: Robert Church <robert.church@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix keystone endpoint URLs in openstack service catalog\n\nCurrently after system bootstrapped, keystone URLs are:\n| public    | http://127.0.0.1:5000        |\n| internal  | http://127.0.0.1:5000        |\n| admin     | http://127.0.0.1:5000        |\n\nAfter the fix the URLs are as following:\n\n| admin     | http://192.168.204.1:5000    |\n| internal  | http://192.168.204.1:5000    |\n| public    | http://10.10.10.93:5000      |\n\nThis is aligned with CentOS.\n\nTest Plan for Debian:\nPASS: build package, build image\nPASS: system installation\nPASS: system bootstrap\n\nTest Plan for CentOS:\nPASS: system bootstrap\nPASS: system unlock\n\nStory: 2009101\nTask: 44466\nSigned-off-by: Andy Ning <andy.ning@windriver.com>\nChange-Id: Ic3f22c9c2033c28d1a139985998d9b22b8505e1a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Relocated some packages to repo 'openstack-armada-app'\n\nList of relocated subdirectories:\n\nkubernetes/applications/stx-openstack/stx-openstack-helm\nkubernetes/helm-charts/garbd\nkubernetes/helm-charts/nginx-ports-control\n\nStory: 2006166\nTask: 35687\nDepends-On: I665dc7fabbfffc798ad57843eb74dca16e7647a3\nChange-Id: I4baa9f3bb8868d56fe79199abc544739d22a466f\nSigned-off-by: Scott Little <scott.little@windriver.com>\nDepends-On: I520d1d7f890f298d59998cb15613efa2233e329a\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Fix N3000 FPGA SR-IOV config for split NICs\n\nThis commit fixes an issue that can occur if a user\ncreates an SR-IOV interface of type VF with a parent\nSR-IOV interface that belongs to a NIC on an Intel\nN3000 FPGA.\n\nThe FPGA is reset on every worker node bootup (if present),\nclearing all SR-IOV config.  Because of this, the current\npuppet code waits for the reset to be completed before\nrestarting the interface via the sysconfig network interface\nscripts.  Because the VF interface is a separate hieradata\nentry than the parent interface, this can cause a race\ncondition where the device is re-initialized after one of\nthe child/parent interfaces has already bound a driver to the\ninterface.\n\nSince the whole point of the VF interfaces is to 'split'\na NIC to allow multiple SR-IOV VF drivers on one physical NIC,\nthis commit makes a single hieradata entry for the parent\ninterface, rather than individual entries for the parent and\nchild(ren). The information to bind the child interfaces\nappropriately is embedded in the vf_config dict of the parent\ninterface.\n\nChange-Id: Iad34de8ae1b913a1c188e5473e0c92cdf8007ba2\nPartial-Bug: #1885229\nSigned-off-by: Steven Webster <steven.webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "SR-IOV device plugin support for FPGA FEC devices\n\nThis commit introduces SR-IOV device plugin support for forward\nerror correction (FEC) devices that are enabled on an Intel\nN3000 FPGA device.\n\nThe FEC device is intended to be used with a DPDK application,\nwith the device itself being bound to the igb_uio driver. As\nsuch, support has been added for configuring the PF and VF\ndriver for the device, as well as the number of requested\nVFs.\n\nAn example usage for setting the drivers and VFs is as follows:\n\nsystem host-device-modify <host> <device_name> \\\n  --driver <driver> \\\n  --vf-driver <driver> \\\n  -N <number of vfs>\n\nStory: 2006740\nTask: 39947\n\nDepends-On: https://review.opendev.org/733723\nChange-Id: Iee0f0e449652219939ed5369423efdfb906ca3f1\nSigned-off-by: Steven Webster <Steven.Webster@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Align nohz_full= and isolcpus= arguments\n\nSince kernel v4.15, the isolcpus= and nohz_full= arguments have been\nmerged under the \"housekeeping CPUs\" framework, which require the two\narguments to have the same CPU list values. If this prerequisite\nis not satisfied, then no CPUs are isolated, and the kernel\nreports a warning message.\n\nCloses-Bug: 1925363\nChange-Id: I9a1058a59383de488e54f8560dfb4b2f76256933\nSigned-off-by: Mihnea Saracin <Mihnea.Saracin@windriver.com>\nSuggested-by: M. Vefa Bicakci <vefa.bicakci@windriver.com>\n",
        "issue_summary": ""
    },
    {
        "commit_message": "Avoid using hostname in haproxy conf\n\nhaproxy default build option not happy with hostname when IPv6 is\nconfigured. Avoid using hostname for now.\n\nStory: 2002987\nTask: 23001\n\nChange-Id: Ia3508a8124766a4d8bac97a68a0e38481593f96d\nSigned-off-by: Bin Qian <bin.qian@windriver.com>\n",
        "issue_summary": ""
    }
]